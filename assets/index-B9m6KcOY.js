(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function qA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vp={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE;function WR(){if(vE)return Ql;vE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return Ql.Fragment=e,Ql.jsx=t,Ql.jsxs=t,Ql}var EE;function ZR(){return EE||(EE=1,Vp.exports=WR()),Vp.exports}var b=ZR(),Up={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function jR(){if(TE)return Ne;TE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function I(q){return q===null||typeof q!="object"?null:(q=A&&q[A]||q["@@iterator"],typeof q=="function"?q:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,L={};function Q(q,ne,ce){this.props=q,this.context=ne,this.refs=L,this.updater=ce||P}Q.prototype.isReactComponent={},Q.prototype.setState=function(q,ne){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ne,"setState")},Q.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function ie(){}ie.prototype=Q.prototype;function Z(q,ne,ce){this.props=q,this.context=ne,this.refs=L,this.updater=ce||P}var oe=Z.prototype=new ie;oe.constructor=Z,B(oe,Q.prototype),oe.isPureReactComponent=!0;var le=Array.isArray;function ue(){}var M={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function N(q,ne,ce){var me=ce.ref;return{$$typeof:n,type:q,key:ne,ref:me!==void 0?me:null,props:ce}}function V(q,ne){return N(q.type,ne,q.props)}function k(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function O(q){var ne={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ce){return ne[ce]})}var x=/\/+/g;function pe(q,ne){return typeof q=="object"&&q!==null&&q.key!=null?O(""+q.key):ne.toString(36)}function ve(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ue,ue):(q.status="pending",q.then(function(ne){q.status==="pending"&&(q.status="fulfilled",q.value=ne)},function(ne){q.status==="pending"&&(q.status="rejected",q.reason=ne)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Y(q,ne,ce,me,we){var ke=typeof q;(ke==="undefined"||ke==="boolean")&&(q=null);var Ke=!1;if(q===null)Ke=!0;else switch(ke){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(q.$$typeof){case n:case e:Ke=!0;break;case _:return Ke=q._init,Y(Ke(q._payload),ne,ce,me,we)}}if(Ke)return we=we(q),Ke=me===""?"."+pe(q,0):me,le(we)?(ce="",Ke!=null&&(ce=Ke.replace(x,"$&/")+"/"),Y(we,ne,ce,"",function(wr){return wr})):we!=null&&(k(we)&&(we=V(we,ce+(we.key==null||q&&q.key===we.key?"":(""+we.key).replace(x,"$&/")+"/")+Ke)),ne.push(we)),1;Ke=0;var Ot=me===""?".":me+":";if(le(q))for(var dt=0;dt<q.length;dt++)me=q[dt],ke=Ot+pe(me,dt),Ke+=Y(me,ne,ce,ke,we);else if(dt=I(q),typeof dt=="function")for(q=dt.call(q),dt=0;!(me=q.next()).done;)me=me.value,ke=Ot+pe(me,dt++),Ke+=Y(me,ne,ce,ke,we);else if(ke==="object"){if(typeof q.then=="function")return Y(ve(q),ne,ce,me,we);throw ne=String(q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function re(q,ne,ce){if(q==null)return q;var me=[],we=0;return Y(q,me,"","",function(ke){return ne.call(ce,ke,we++)}),me}function ge(q){if(q._status===-1){var ne=q._result;ne=ne(),ne.then(function(ce){(q._status===0||q._status===-1)&&(q._status=1,q._result=ce)},function(ce){(q._status===0||q._status===-1)&&(q._status=2,q._result=ce)}),q._status===-1&&(q._status=0,q._result=ne)}if(q._status===1)return q._result.default;throw q._result}var Le=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Je={map:re,forEach:function(q,ne,ce){re(q,function(){ne.apply(this,arguments)},ce)},count:function(q){var ne=0;return re(q,function(){ne++}),ne},toArray:function(q){return re(q,function(ne){return ne})||[]},only:function(q){if(!k(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Ne.Activity=E,Ne.Children=Je,Ne.Component=Q,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=Z,Ne.StrictMode=i,Ne.Suspense=m,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(q){return M.H.useMemoCache(q)}},Ne.cache=function(q){return function(){return q.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(q,ne,ce){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=B({},q.props),we=q.key;if(ne!=null)for(ke in ne.key!==void 0&&(we=""+ne.key),ne)!D.call(ne,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ne.ref===void 0||(me[ke]=ne[ke]);var ke=arguments.length-2;if(ke===1)me.children=ce;else if(1<ke){for(var Ke=Array(ke),Ot=0;Ot<ke;Ot++)Ke[Ot]=arguments[Ot+2];me.children=Ke}return N(q.type,we,me)},Ne.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Ne.createElement=function(q,ne,ce){var me,we={},ke=null;if(ne!=null)for(me in ne.key!==void 0&&(ke=""+ne.key),ne)D.call(ne,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(we[me]=ne[me]);var Ke=arguments.length-2;if(Ke===1)we.children=ce;else if(1<Ke){for(var Ot=Array(Ke),dt=0;dt<Ke;dt++)Ot[dt]=arguments[dt+2];we.children=Ot}if(q&&q.defaultProps)for(me in Ke=q.defaultProps,Ke)we[me]===void 0&&(we[me]=Ke[me]);return N(q,ke,we)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(q){return{$$typeof:d,render:q}},Ne.isValidElement=k,Ne.lazy=function(q){return{$$typeof:_,_payload:{_status:-1,_result:q},_init:ge}},Ne.memo=function(q,ne){return{$$typeof:h,type:q,compare:ne===void 0?null:ne}},Ne.startTransition=function(q){var ne=M.T,ce={};M.T=ce;try{var me=q(),we=M.S;we!==null&&we(ce,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ue,Le)}catch(ke){Le(ke)}finally{ne!==null&&ce.types!==null&&(ne.types=ce.types),M.T=ne}},Ne.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ne.use=function(q){return M.H.use(q)},Ne.useActionState=function(q,ne,ce){return M.H.useActionState(q,ne,ce)},Ne.useCallback=function(q,ne){return M.H.useCallback(q,ne)},Ne.useContext=function(q){return M.H.useContext(q)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(q,ne){return M.H.useDeferredValue(q,ne)},Ne.useEffect=function(q,ne){return M.H.useEffect(q,ne)},Ne.useEffectEvent=function(q){return M.H.useEffectEvent(q)},Ne.useId=function(){return M.H.useId()},Ne.useImperativeHandle=function(q,ne,ce){return M.H.useImperativeHandle(q,ne,ce)},Ne.useInsertionEffect=function(q,ne){return M.H.useInsertionEffect(q,ne)},Ne.useLayoutEffect=function(q,ne){return M.H.useLayoutEffect(q,ne)},Ne.useMemo=function(q,ne){return M.H.useMemo(q,ne)},Ne.useOptimistic=function(q,ne){return M.H.useOptimistic(q,ne)},Ne.useReducer=function(q,ne,ce){return M.H.useReducer(q,ne,ce)},Ne.useRef=function(q){return M.H.useRef(q)},Ne.useState=function(q){return M.H.useState(q)},Ne.useSyncExternalStore=function(q,ne,ce){return M.H.useSyncExternalStore(q,ne,ce)},Ne.useTransition=function(){return M.H.useTransition()},Ne.version="19.2.3",Ne}var AE;function Km(){return AE||(AE=1,Up.exports=jR()),Up.exports}var Ae=Km();const e1=qA(Ae);var Lp={exports:{}},Xl={},Op={exports:{}},Fp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function t1(){return SE||(SE=1,(function(n){function e(Y,re){var ge=Y.length;Y.push(re);e:for(;0<ge;){var Le=ge-1>>>1,Je=Y[Le];if(0<o(Je,re))Y[Le]=re,Y[ge]=Je,ge=Le;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var re=Y[0],ge=Y.pop();if(ge!==re){Y[0]=ge;e:for(var Le=0,Je=Y.length,q=Je>>>1;Le<q;){var ne=2*(Le+1)-1,ce=Y[ne],me=ne+1,we=Y[me];if(0>o(ce,ge))me<Je&&0>o(we,ce)?(Y[Le]=we,Y[me]=ge,Le=me):(Y[Le]=ce,Y[ne]=ge,Le=ne);else if(me<Je&&0>o(we,ge))Y[Le]=we,Y[me]=ge,Le=me;else break e}}return re}function o(Y,re){var ge=Y.sortIndex-re.sortIndex;return ge!==0?ge:Y.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var m=[],h=[],_=1,E=null,A=3,I=!1,P=!1,B=!1,L=!1,Q=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function oe(Y){for(var re=t(h);re!==null;){if(re.callback===null)i(h);else if(re.startTime<=Y)i(h),re.sortIndex=re.expirationTime,e(m,re);else break;re=t(h)}}function le(Y){if(B=!1,oe(Y),!P)if(t(m)!==null)P=!0,ue||(ue=!0,O());else{var re=t(h);re!==null&&ve(le,re.startTime-Y)}}var ue=!1,M=-1,D=5,N=-1;function V(){return L?!0:!(n.unstable_now()-N<D)}function k(){if(L=!1,ue){var Y=n.unstable_now();N=Y;var re=!0;try{e:{P=!1,B&&(B=!1,ie(M),M=-1),I=!0;var ge=A;try{t:{for(oe(Y),E=t(m);E!==null&&!(E.expirationTime>Y&&V());){var Le=E.callback;if(typeof Le=="function"){E.callback=null,A=E.priorityLevel;var Je=Le(E.expirationTime<=Y);if(Y=n.unstable_now(),typeof Je=="function"){E.callback=Je,oe(Y),re=!0;break t}E===t(m)&&i(m),oe(Y)}else i(m);E=t(m)}if(E!==null)re=!0;else{var q=t(h);q!==null&&ve(le,q.startTime-Y),re=!1}}break e}finally{E=null,A=ge,I=!1}re=void 0}}finally{re?O():ue=!1}}}var O;if(typeof Z=="function")O=function(){Z(k)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,pe=x.port2;x.port1.onmessage=k,O=function(){pe.postMessage(null)}}else O=function(){Q(k,0)};function ve(Y,re){M=Q(function(){Y(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(Y){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var ge=A;A=re;try{return Y()}finally{A=ge}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ge=A;A=Y;try{return re()}finally{A=ge}},n.unstable_scheduleCallback=function(Y,re,ge){var Le=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Le+ge:Le):ge=Le,Y){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=ge+Je,Y={id:_++,callback:re,priorityLevel:Y,startTime:ge,expirationTime:Je,sortIndex:-1},ge>Le?(Y.sortIndex=ge,e(h,Y),t(m)===null&&Y===t(h)&&(B?(ie(M),M=-1):B=!0,ve(le,ge-Le))):(Y.sortIndex=Je,e(m,Y),P||I||(P=!0,ue||(ue=!0,O()))),Y},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(Y){var re=A;return function(){var ge=A;A=re;try{return Y.apply(this,arguments)}finally{A=ge}}}})(Fp)),Fp}var CE;function n1(){return CE||(CE=1,Op.exports=t1()),Op.exports}var Bp={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function i1(){if(IE)return sn;IE=1;var n=Km();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(m,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:m,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,sn.createPortal=function(m,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(m,h,null,_)},sn.flushSync=function(m){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=h,i.p=_,i.d.f()}},sn.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(m,h))},sn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},sn.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin),A=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:I}):_==="script"&&i.d.X(m,{crossOrigin:E,integrity:A,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},sn.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(m,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(m)},sn.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin);i.d.L(m,_,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},sn.preloadModule=function(m,h){if(typeof m=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(m)},sn.requestFormReset=function(m){i.d.r(m)},sn.unstable_batchedUpdates=function(m,h){return m(h)},sn.useFormState=function(m,h,_){return u.H.useFormState(m,h,_)},sn.useFormStatus=function(){return u.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var wE;function s1(){if(wE)return Bp.exports;wE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bp.exports=i1(),Bp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function r1(){if(RE)return Xl;RE=1;var n=n1(),e=Km(),t=s1();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function m(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return m(y),s;if(v===c)return m(y),r;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var S=!1,w=y.child;w;){if(w===l){S=!0,l=y,c=v;break}if(w===c){S=!0,c=y,l=v;break}w=w.sibling}if(!S){for(w=v.child;w;){if(w===l){S=!0,l=v,c=y;break}if(w===c){S=!0,c=v,l=y;break}w=w.sibling}if(!S)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function _(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=_(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var x=Symbol.for("react.client.reference");function pe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===x?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case B:return"Fragment";case Q:return"Profiler";case L:return"StrictMode";case le:return"Suspense";case ue:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case P:return"Portal";case Z:return s.displayName||"Context";case ie:return(s._context.displayName||"Context")+".Consumer";case oe:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:pe(s.type)||"Memo";case D:r=s._payload,s=s._init;try{return pe(s(r))}catch{}}return null}var ve=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Le=[],Je=-1;function q(s){return{current:s}}function ne(s){0>Je||(s.current=Le[Je],Le[Je]=null,Je--)}function ce(s,r){Je++,Le[Je]=s.current,s.current=r}var me=q(null),we=q(null),ke=q(null),Ke=q(null);function Ot(s,r){switch(ce(ke,r),ce(we,s),ce(me,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?Gv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=Gv(r),s=Hv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(me),ce(me,s)}function dt(){ne(me),ne(we),ne(ke)}function wr(s){s.memoizedState!==null&&ce(Ke,s);var r=me.current,l=Hv(r,s.type);r!==l&&(ce(we,s),ce(me,l))}function Eo(s){we.current===s&&(ne(me),ne(we)),Ke.current===s&&(ne(Ke),Kl._currentValue=ge)}var To,Ao;function yi(s){if(To===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);To=r&&r[1]||"",Ao=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+To+s+Ao}var Ka=!1;function Rr(s,r){if(!s||Ka)return"";Ka=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(X){var J=X}Reflect.construct(s,[],te)}else{try{te.call()}catch(X){J=X}s.call(te.prototype)}}else{try{throw Error()}catch(X){J=X}(te=s())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(X){if(X&&J&&typeof X.stack=="string")return[X.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),S=v[0],w=v[1];if(S&&w){var U=S.split(`
`),K=w.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===K.length)for(c=U.length-1,y=K.length-1;1<=c&&0<=y&&U[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==K[y]){var W=`
`+U[c].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=c&&0<=y);break}}}finally{Ka=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?yi(l):""}function Ya(s,r){switch(s.tag){case 26:case 27:case 5:return yi(s.type);case 16:return yi("Lazy");case 13:return s.child!==r&&r!==null?yi("Suspense Fallback"):yi("Suspense");case 19:return yi("SuspenseList");case 0:case 15:return Rr(s.type,!1);case 11:return Rr(s.type.render,!1);case 1:return Rr(s.type,!0);case 31:return yi("Activity");default:return""}}function Ja(s){try{var r="",l=null;do r+=Ya(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var It=Object.prototype.hasOwnProperty,Ft=n.unstable_scheduleCallback,Cs=n.unstable_cancelCallback,Ld=n.unstable_shouldYield,Uu=n.unstable_requestPaint,cn=n.unstable_now,br=n.unstable_getCurrentPriorityLevel,$a=n.unstable_ImmediatePriority,Qa=n.unstable_UserBlockingPriority,Is=n.unstable_NormalPriority,Od=n.unstable_LowPriority,Lu=n.unstable_IdlePriority,Ou=n.log,Fu=n.unstable_setDisableYieldValue,jn=null,$t=null;function Vn(s){if(typeof Ou=="function"&&Fu(s),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(jn,s)}catch{}}var _t=Math.clz32?Math.clz32:qu,Bu=Math.log,So=Math.LN2;function qu(s){return s>>>=0,s===0?32:31-(Bu(s)/So|0)|0}var _i=256,Nr=262144,wt=4194304;function vi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ei(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var w=c&134217727;return w!==0?(c=w&~v,c!==0?y=vi(c):(S&=w,S!==0?y=vi(S):l||(l=w&~s,l!==0&&(y=vi(l))))):(w=c&~v,w!==0?y=vi(w):S!==0?y=vi(S):l||(l=c&~s,l!==0&&(y=vi(l)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:y}function ei(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Fd(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gu(){var s=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),s}function Ti(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function xr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Bd(s,r,l,c,y,v){var S=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var w=s.entanglements,U=s.expirationTimes,K=s.hiddenUpdates;for(l=S&~l;0<l;){var W=31-_t(l),te=1<<W;w[W]=0,U[W]=-1;var J=K[W];if(J!==null)for(K[W]=null,W=0;W<J.length;W++){var X=J[W];X!==null&&(X.lane&=-536870913)}l&=~te}c!==0&&Dr(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(S&~r))}function Dr(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-_t(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Xa(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-_t(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function Wa(s,r){var l=r&-r;return l=(l&42)!==0?1:Mr(l),(l&(s.suspendedLanes|r))!==0?0:l}function Mr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ji(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Hu(){var s=re.p;return s!==0?s:(s=window.event,s===void 0?32:dE(s.type))}function ti(s,r){var l=re.p;try{return re.p=s,r()}finally{re.p=l}}var ni=Math.random().toString(36).slice(2),Rt="__reactFiber$"+ni,Ht="__reactProps$"+ni,Ai="__reactContainer$"+ni,Co="__reactEvents$"+ni,qd="__reactListeners$"+ni,zu="__reactHandles$"+ni,Ku="__reactResources$"+ni,Si="__reactMarker$"+ni;function Io(s){delete s[Rt],delete s[Ht],delete s[Co],delete s[qd],delete s[zu]}function Ci(s){var r=s[Rt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Ai]||l[Rt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Xv(s);s!==null;){if(l=s[Rt])return l;s=Xv(s)}return r}s=l,l=s.parentNode}return null}function Un(s){if(s=s[Rt]||s[Ai]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Cn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Ii(s){var r=s[Ku];return r||(r=s[Ku]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function bt(s){s[Si]=!0}var Za=new Set,ja={};function wi(s,r){Ri(s,r),Ri(s+"Capture",r)}function Ri(s,r){for(ja[s]=r,s=0;s<r.length;s++)Za.add(r[s])}var el=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tl={},nl={};function Yu(s){return It.call(nl,s)?!0:It.call(tl,s)?!1:el.test(s)?nl[s]=!0:(tl[s]=!0,!1)}function wo(s,r,l){if(Yu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function In(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Nt(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function zt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ws(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function il(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(S){l=""+S,v.call(this,S)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function et(s){if(!s._valueTracker){var r=ws(s)?"checked":"value";s._valueTracker=il(s,r,""+s[r])}}function kr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=ws(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function bi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Pr=/[\n"\\]/g;function mn(s){return s.replace(Pr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ro(s,r,l,c,y,v,S,w){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),r!=null?S==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+zt(r)):s.value!==""+zt(r)&&(s.value=""+zt(r)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),r!=null?sl(s,S,zt(r)):l!=null?sl(s,S,zt(l)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+zt(w):s.removeAttribute("name")}function Ju(s,r,l,c,y,v,S,w){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){et(s);return}l=l!=null?""+zt(l):"",r=r!=null?""+zt(r):l,w||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=w?s.checked:!!c,s.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S),et(s)}function sl(s,r,l){r==="number"&&bi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Rs(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+zt(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function $u(s,r,l){if(r!=null&&(r=""+zt(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+zt(l):""}function bs(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(ve(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=zt(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),et(s)}function gn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var Qu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||Qu.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function ol(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&rl(s,y,c)}else for(var v in r)r.hasOwnProperty(v)&&rl(s,v,r[v])}function bo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function No(s){return Ns.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ii(){}var al=null;function Ln(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var xs=null,Ni=null;function Vr(s){var r=Un(s);if(r&&(s=r.stateNode)){var l=s[Ht]||null;e:switch(s=r.stateNode,r.type){case"input":if(Ro(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+mn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Ht]||null;if(!y)throw Error(i(90));Ro(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&kr(c)}break e;case"textarea":$u(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Rs(s,!!l.multiple,r,!1)}}}var xo=!1;function Ds(s,r,l){if(xo)return s(r,l);xo=!0;try{var c=s(r);return c}finally{if(xo=!1,(xs!==null||Ni!==null)&&(Hc(),xs&&(r=xs,s=Ni,Ni=xs=null,Vr(r),s)))for(r=0;r<s.length;r++)Vr(s[r])}}function si(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Ht]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ur=!1;if(On)try{var it={};Object.defineProperty(it,"passive",{get:function(){Ur=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Ur=!1}var xi=null,ll=null,Lr=null;function ul(){if(Lr)return Lr;var s,r=ll,l=r.length,c,y="value"in xi?xi.value:xi.textContent,v=y.length;for(s=0;s<l&&r[s]===y[s];s++);var S=l-s;for(c=1;c<=S&&r[l-c]===y[v-c];c++);return Lr=y.slice(s,1<c?1-c:void 0)}function Or(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function $i(){return!0}function ri(){return!1}function Qt(s){function r(l,c,y,v,S){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(l=s[w],this[w]=l?l(v):v[w]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?$i:ri,this.isPropagationStopped=ri,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),r}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=Qt(Qi),Ms=E({},Qi,{view:0,detail:0}),cl=Qt(Ms),ks,Do,Mi,Mo=E({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Mi&&(Mi&&s.type==="mousemove"?(ks=s.screenX-Mi.screenX,Do=s.screenY-Mi.screenY):Do=ks=0,Mi=s),ks)},movementY:function(s){return"movementY"in s?s.movementY:Do}}),fl=Qt(Mo),Fr=E({},Mo,{dataTransfer:0}),Wu=Qt(Fr),Zu=E({},Ms,{relatedTarget:0}),Br=Qt(Zu),dl=E({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),ju=Qt(dl),ko=E({},Qi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ec=Qt(ko),tc=E({},Qi,{data:0}),ki=Qt(tc),nc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ic={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=sc[s])?!!r[s]:!1}function Ps(){return rc}var fn=E({},Ms,{key:function(s){if(s.key){var r=nc[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Or(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ic[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(s){return s.type==="keypress"?Or(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Or(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),oc=Qt(fn),ac=E({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xi=Qt(ac),g=E({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),T=Qt(g),C=E({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Qt(C),H=E({},Mo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$=Qt(H),ae=E({},Qi,{newState:0,oldState:0}),De=Qt(ae),vt=[9,13,27,32],We=On&&"CompositionEvent"in window,ht=null;On&&"documentMode"in document&&(ht=document.documentMode);var Fn=On&&"TextEvent"in window&&!ht,Pi=On&&(!We||ht&&8<ht&&11>=ht),oi=" ",ai=!1;function qr(s,r){switch(s){case"keyup":return vt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Po(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Vo=!1;function Tw(s,r){switch(s){case"compositionend":return Po(r);case"keypress":return r.which!==32?null:(ai=!0,oi);case"textInput":return s=r.data,s===oi&&ai?null:s;default:return null}}function Aw(s,r){if(Vo)return s==="compositionend"||!We&&qr(s,r)?(s=ul(),Lr=ll=xi=null,Vo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pi&&r.locale!=="ko"?null:r.data;default:return null}}var Sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Sw[s.type]:r==="textarea"}function ey(s,r,l,c){xs?Ni?Ni.push(c):Ni=[c]:xs=c,r=Xc(r,"onChange"),0<r.length&&(l=new Di("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var hl=null,pl=null;function Cw(s){Uv(s,0)}function lc(s){var r=Cn(s);if(kr(r))return s}function ty(s,r){if(s==="change")return r}var ny=!1;if(On){var Gd;if(On){var Hd="oninput"in document;if(!Hd){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),Hd=typeof iy.oninput=="function"}Gd=Hd}else Gd=!1;ny=Gd&&(!document.documentMode||9<document.documentMode)}function sy(){hl&&(hl.detachEvent("onpropertychange",ry),pl=hl=null)}function ry(s){if(s.propertyName==="value"&&lc(pl)){var r=[];ey(r,pl,s,Ln(s)),Ds(Cw,r)}}function Iw(s,r,l){s==="focusin"?(sy(),hl=r,pl=l,hl.attachEvent("onpropertychange",ry)):s==="focusout"&&sy()}function ww(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return lc(pl)}function Rw(s,r){if(s==="click")return lc(r)}function bw(s,r){if(s==="input"||s==="change")return lc(r)}function Nw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var wn=typeof Object.is=="function"?Object.is:Nw;function ml(s,r){if(wn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!It.call(r,y)||!wn(s[y],r[y]))return!1}return!0}function oy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ay(s,r){var l=oy(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=oy(l)}}function ly(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?ly(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function uy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=bi(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=bi(s.document)}return r}function zd(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var xw=On&&"documentMode"in document&&11>=document.documentMode,Uo=null,Kd=null,gl=null,Yd=!1;function cy(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Yd||Uo==null||Uo!==bi(c)||(c=Uo,"selectionStart"in c&&zd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),gl&&ml(gl,c)||(gl=c,c=Xc(Kd,"onSelect"),0<c.length&&(r=new Di("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Uo)))}function Gr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Lo={animationend:Gr("Animation","AnimationEnd"),animationiteration:Gr("Animation","AnimationIteration"),animationstart:Gr("Animation","AnimationStart"),transitionrun:Gr("Transition","TransitionRun"),transitionstart:Gr("Transition","TransitionStart"),transitioncancel:Gr("Transition","TransitionCancel"),transitionend:Gr("Transition","TransitionEnd")},Jd={},fy={};On&&(fy=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Hr(s){if(Jd[s])return Jd[s];if(!Lo[s])return s;var r=Lo[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in fy)return Jd[s]=r[l];return s}var dy=Hr("animationend"),hy=Hr("animationiteration"),py=Hr("animationstart"),Dw=Hr("transitionrun"),Mw=Hr("transitionstart"),kw=Hr("transitioncancel"),my=Hr("transitionend"),gy=new Map,$d="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$d.push("scrollEnd");function li(s,r){gy.set(s,r),wi(r,[s])}var uc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Bn=[],Oo=0,Qd=0;function cc(){for(var s=Oo,r=Qd=Oo=0;r<s;){var l=Bn[r];Bn[r++]=null;var c=Bn[r];Bn[r++]=null;var y=Bn[r];Bn[r++]=null;var v=Bn[r];if(Bn[r++]=null,c!==null&&y!==null){var S=c.pending;S===null?y.next=y:(y.next=S.next,S.next=y),c.pending=y}v!==0&&yy(l,y,v)}}function fc(s,r,l,c){Bn[Oo++]=s,Bn[Oo++]=r,Bn[Oo++]=l,Bn[Oo++]=c,Qd|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Xd(s,r,l,c){return fc(s,r,l,c),dc(s)}function zr(s,r){return fc(s,null,null,r),dc(s)}function yy(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=s.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&r!==null&&(y=31-_t(l),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),v):null}function dc(s){if(50<Ol)throw Ol=0,rp=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Fo={};function Pw(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(s,r,l,c){return new Pw(s,r,l,c)}function Wd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Wi(s,r){var l=s.alternate;return l===null?(l=Rn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function _y(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function hc(s,r,l,c,y,v){var S=0;if(c=s,typeof s=="function")Wd(s)&&(S=1);else if(typeof s=="string")S=FR(s,l,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=Rn(31,l,r,y),s.elementType=N,s.lanes=v,s;case B:return Kr(l.children,y,v,r);case L:S=8,y|=24;break;case Q:return s=Rn(12,l,r,y|2),s.elementType=Q,s.lanes=v,s;case le:return s=Rn(13,l,r,y),s.elementType=le,s.lanes=v,s;case ue:return s=Rn(19,l,r,y),s.elementType=ue,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Z:S=10;break e;case ie:S=9;break e;case oe:S=11;break e;case M:S=14;break e;case D:S=16,c=null;break e}S=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Rn(S,l,r,y),r.elementType=s,r.type=c,r.lanes=v,r}function Kr(s,r,l,c){return s=Rn(7,s,c,r),s.lanes=l,s}function Zd(s,r,l){return s=Rn(6,s,null,r),s.lanes=l,s}function vy(s){var r=Rn(18,null,null,0);return r.stateNode=s,r}function jd(s,r,l){return r=Rn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Ey=new WeakMap;function qn(s,r){if(typeof s=="object"&&s!==null){var l=Ey.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Ja(r)},Ey.set(s,r),r)}return{value:s,source:r,stack:Ja(r)}}var Bo=[],qo=0,pc=null,yl=0,Gn=[],Hn=0,Vs=null,Vi=1,Ui="";function Zi(s,r){Bo[qo++]=yl,Bo[qo++]=pc,pc=s,yl=r}function Ty(s,r,l){Gn[Hn++]=Vi,Gn[Hn++]=Ui,Gn[Hn++]=Vs,Vs=s;var c=Vi;s=Ui;var y=32-_t(c)-1;c&=~(1<<y),l+=1;var v=32-_t(r)+y;if(30<v){var S=y-y%5;v=(c&(1<<S)-1).toString(32),c>>=S,y-=S,Vi=1<<32-_t(r)+y|l<<y|c,Ui=v+s}else Vi=1<<v|l<<y|c,Ui=s}function eh(s){s.return!==null&&(Zi(s,1),Ty(s,1,0))}function th(s){for(;s===pc;)pc=Bo[--qo],Bo[qo]=null,yl=Bo[--qo],Bo[qo]=null;for(;s===Vs;)Vs=Gn[--Hn],Gn[Hn]=null,Ui=Gn[--Hn],Gn[Hn]=null,Vi=Gn[--Hn],Gn[Hn]=null}function Ay(s,r){Gn[Hn++]=Vi,Gn[Hn++]=Ui,Gn[Hn++]=Vs,Vi=r.id,Ui=r.overflow,Vs=s}var Xt=null,ut=null,He=!1,Us=null,zn=!1,nh=Error(i(519));function Ls(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(qn(r,s)),nh}function Sy(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[Rt]=s,r[Ht]=c,l){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(l=0;l<Bl.length;l++)Ue(Bl[l],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),Ju(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),bs(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Bv(r.textContent,l)?(c.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),c.onScroll!=null&&Ue("scroll",r),c.onScrollEnd!=null&&Ue("scrollend",r),c.onClick!=null&&(r.onclick=ii),r=!0):r=!1,r||Ls(s,!0)}function Cy(s){for(Xt=s.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Xt=Xt.return}}function Go(s){if(s!==Xt)return!1;if(!He)return Cy(s),He=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Ep(s.type,s.memoizedProps)),l=!l),l&&ut&&Ls(s),Cy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ut=Qv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ut=Qv(s)}else r===27?(r=ut,Ws(s.type)?(s=Ip,Ip=null,ut=s):ut=r):ut=Xt?Yn(s.stateNode.nextSibling):null;return!0}function Yr(){ut=Xt=null,He=!1}function ih(){var s=Us;return s!==null&&(En===null?En=s:En.push.apply(En,s),Us=null),s}function _l(s){Us===null?Us=[s]:Us.push(s)}var sh=q(null),Jr=null,ji=null;function Os(s,r,l){ce(sh,r._currentValue),r._currentValue=l}function es(s){s._currentValue=sh.current,ne(sh)}function rh(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function oh(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var S=y.child;v=v.firstContext;e:for(;v!==null;){var w=v;v=y;for(var U=0;U<r.length;U++)if(w.context===r[U]){v.lanes|=l,w=v.alternate,w!==null&&(w.lanes|=l),rh(v.return,l,s),c||(S=null);break e}v=w.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(i(341));S.lanes|=l,v=S.alternate,v!==null&&(v.lanes|=l),rh(S,l,s),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===s){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function Ho(s,r,l,c){s=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var w=y.type;wn(y.pendingProps.value,S.value)||(s!==null?s.push(w):s=[w])}}else if(y===Ke.current){if(S=y.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Kl):s=[Kl])}y=y.return}s!==null&&oh(r,s,l,c),r.flags|=262144}function mc(s){for(s=s.firstContext;s!==null;){if(!wn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function $r(s){Jr=s,ji=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wt(s){return Iy(Jr,s)}function gc(s,r){return Jr===null&&$r(s),Iy(s,r)}function Iy(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ji===null){if(s===null)throw Error(i(308));ji=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ji=ji.next=r;return l}var Vw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},Uw=n.unstable_scheduleCallback,Lw=n.unstable_NormalPriority,xt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ah(){return{controller:new Vw,data:new Map,refCount:0}}function vl(s){s.refCount--,s.refCount===0&&Uw(Lw,function(){s.controller.abort()})}var El=null,lh=0,zo=0,Ko=null;function Ow(s,r){if(El===null){var l=El=[];lh=0,zo=fp(),Ko={status:"pending",value:void 0,then:function(c){l.push(c)}}}return lh++,r.then(wy,wy),r}function wy(){if(--lh===0&&El!==null){Ko!==null&&(Ko.status="fulfilled");var s=El;El=null,zo=0,Ko=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function Fw(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Ry=Y.S;Y.S=function(s,r){cv=cn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ow(s,r),Ry!==null&&Ry(s,r)};var Qr=q(null);function uh(){var s=Qr.current;return s!==null?s:at.pooledCache}function yc(s,r){r===null?ce(Qr,Qr.current):ce(Qr,r.pool)}function by(){var s=uh();return s===null?null:{parent:xt._currentValue,pool:s}}var Yo=Error(i(460)),ch=Error(i(474)),_c=Error(i(542)),vc={then:function(){}};function Ny(s){return s=s.status,s==="fulfilled"||s==="rejected"}function xy(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(ii,ii),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,My(s),s;default:if(typeof r.status=="string")r.then(ii,ii);else{if(s=at,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,My(s),s}throw Wr=r,Yo}}function Xr(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Wr=l,Yo):l}}var Wr=null;function Dy(){if(Wr===null)throw Error(i(459));var s=Wr;return Wr=null,s}function My(s){if(s===Yo||s===_c)throw Error(i(483))}var Jo=null,Tl=0;function Ec(s){var r=Tl;return Tl+=1,Jo===null&&(Jo=[]),xy(Jo,s,r)}function Al(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Tc(s,r){throw r.$$typeof===A?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function ky(s){function r(G,F){if(s){var z=G.deletions;z===null?(G.deletions=[F],G.flags|=16):z.push(F)}}function l(G,F){if(!s)return null;for(;F!==null;)r(G,F),F=F.sibling;return null}function c(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function y(G,F){return G=Wi(G,F),G.index=0,G.sibling=null,G}function v(G,F,z){return G.index=z,s?(z=G.alternate,z!==null?(z=z.index,z<F?(G.flags|=67108866,F):z):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function S(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function w(G,F,z,j){return F===null||F.tag!==6?(F=Zd(z,G.mode,j),F.return=G,F):(F=y(F,z),F.return=G,F)}function U(G,F,z,j){var Ee=z.type;return Ee===B?W(G,F,z.props.children,j,z.key):F!==null&&(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&Xr(Ee)===F.type)?(F=y(F,z.props),Al(F,z),F.return=G,F):(F=hc(z.type,z.key,z.props,null,G.mode,j),Al(F,z),F.return=G,F)}function K(G,F,z,j){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=jd(z,G.mode,j),F.return=G,F):(F=y(F,z.children||[]),F.return=G,F)}function W(G,F,z,j,Ee){return F===null||F.tag!==7?(F=Kr(z,G.mode,j,Ee),F.return=G,F):(F=y(F,z),F.return=G,F)}function te(G,F,z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Zd(""+F,G.mode,z),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case I:return z=hc(F.type,F.key,F.props,null,G.mode,z),Al(z,F),z.return=G,z;case P:return F=jd(F,G.mode,z),F.return=G,F;case D:return F=Xr(F),te(G,F,z)}if(ve(F)||O(F))return F=Kr(F,G.mode,z,null),F.return=G,F;if(typeof F.then=="function")return te(G,Ec(F),z);if(F.$$typeof===Z)return te(G,gc(G,F),z);Tc(G,F)}return null}function J(G,F,z,j){var Ee=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Ee!==null?null:w(G,F,""+z,j);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===Ee?U(G,F,z,j):null;case P:return z.key===Ee?K(G,F,z,j):null;case D:return z=Xr(z),J(G,F,z,j)}if(ve(z)||O(z))return Ee!==null?null:W(G,F,z,j,null);if(typeof z.then=="function")return J(G,F,Ec(z),j);if(z.$$typeof===Z)return J(G,F,gc(G,z),j);Tc(G,z)}return null}function X(G,F,z,j,Ee){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return G=G.get(z)||null,w(F,G,""+j,Ee);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return G=G.get(j.key===null?z:j.key)||null,U(F,G,j,Ee);case P:return G=G.get(j.key===null?z:j.key)||null,K(F,G,j,Ee);case D:return j=Xr(j),X(G,F,z,j,Ee)}if(ve(j)||O(j))return G=G.get(z)||null,W(F,G,j,Ee,null);if(typeof j.then=="function")return X(G,F,z,Ec(j),Ee);if(j.$$typeof===Z)return X(G,F,z,gc(F,j),Ee);Tc(F,j)}return null}function ye(G,F,z,j){for(var Ee=null,$e=null,_e=F,Pe=F=0,Fe=null;_e!==null&&Pe<z.length;Pe++){_e.index>Pe?(Fe=_e,_e=null):Fe=_e.sibling;var Qe=J(G,_e,z[Pe],j);if(Qe===null){_e===null&&(_e=Fe);break}s&&_e&&Qe.alternate===null&&r(G,_e),F=v(Qe,F,Pe),$e===null?Ee=Qe:$e.sibling=Qe,$e=Qe,_e=Fe}if(Pe===z.length)return l(G,_e),He&&Zi(G,Pe),Ee;if(_e===null){for(;Pe<z.length;Pe++)_e=te(G,z[Pe],j),_e!==null&&(F=v(_e,F,Pe),$e===null?Ee=_e:$e.sibling=_e,$e=_e);return He&&Zi(G,Pe),Ee}for(_e=c(_e);Pe<z.length;Pe++)Fe=X(_e,G,Pe,z[Pe],j),Fe!==null&&(s&&Fe.alternate!==null&&_e.delete(Fe.key===null?Pe:Fe.key),F=v(Fe,F,Pe),$e===null?Ee=Fe:$e.sibling=Fe,$e=Fe);return s&&_e.forEach(function(nr){return r(G,nr)}),He&&Zi(G,Pe),Ee}function Se(G,F,z,j){if(z==null)throw Error(i(151));for(var Ee=null,$e=null,_e=F,Pe=F=0,Fe=null,Qe=z.next();_e!==null&&!Qe.done;Pe++,Qe=z.next()){_e.index>Pe?(Fe=_e,_e=null):Fe=_e.sibling;var nr=J(G,_e,Qe.value,j);if(nr===null){_e===null&&(_e=Fe);break}s&&_e&&nr.alternate===null&&r(G,_e),F=v(nr,F,Pe),$e===null?Ee=nr:$e.sibling=nr,$e=nr,_e=Fe}if(Qe.done)return l(G,_e),He&&Zi(G,Pe),Ee;if(_e===null){for(;!Qe.done;Pe++,Qe=z.next())Qe=te(G,Qe.value,j),Qe!==null&&(F=v(Qe,F,Pe),$e===null?Ee=Qe:$e.sibling=Qe,$e=Qe);return He&&Zi(G,Pe),Ee}for(_e=c(_e);!Qe.done;Pe++,Qe=z.next())Qe=X(_e,G,Pe,Qe.value,j),Qe!==null&&(s&&Qe.alternate!==null&&_e.delete(Qe.key===null?Pe:Qe.key),F=v(Qe,F,Pe),$e===null?Ee=Qe:$e.sibling=Qe,$e=Qe);return s&&_e.forEach(function(XR){return r(G,XR)}),He&&Zi(G,Pe),Ee}function ot(G,F,z,j){if(typeof z=="object"&&z!==null&&z.type===B&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var Ee=z.key;F!==null;){if(F.key===Ee){if(Ee=z.type,Ee===B){if(F.tag===7){l(G,F.sibling),j=y(F,z.props.children),j.return=G,G=j;break e}}else if(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&Xr(Ee)===F.type){l(G,F.sibling),j=y(F,z.props),Al(j,z),j.return=G,G=j;break e}l(G,F);break}else r(G,F);F=F.sibling}z.type===B?(j=Kr(z.props.children,G.mode,j,z.key),j.return=G,G=j):(j=hc(z.type,z.key,z.props,null,G.mode,j),Al(j,z),j.return=G,G=j)}return S(G);case P:e:{for(Ee=z.key;F!==null;){if(F.key===Ee)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){l(G,F.sibling),j=y(F,z.children||[]),j.return=G,G=j;break e}else{l(G,F);break}else r(G,F);F=F.sibling}j=jd(z,G.mode,j),j.return=G,G=j}return S(G);case D:return z=Xr(z),ot(G,F,z,j)}if(ve(z))return ye(G,F,z,j);if(O(z)){if(Ee=O(z),typeof Ee!="function")throw Error(i(150));return z=Ee.call(z),Se(G,F,z,j)}if(typeof z.then=="function")return ot(G,F,Ec(z),j);if(z.$$typeof===Z)return ot(G,F,gc(G,z),j);Tc(G,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,F!==null&&F.tag===6?(l(G,F.sibling),j=y(F,z),j.return=G,G=j):(l(G,F),j=Zd(z,G.mode,j),j.return=G,G=j),S(G)):l(G,F)}return function(G,F,z,j){try{Tl=0;var Ee=ot(G,F,z,j);return Jo=null,Ee}catch(_e){if(_e===Yo||_e===_c)throw _e;var $e=Rn(29,_e,null,G.mode);return $e.lanes=j,$e.return=G,$e}finally{}}}var Zr=ky(!0),Py=ky(!1),Fs=!1;function fh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Bs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function qs(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Ze&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=dc(s),yy(s,null,l),r}return fc(s,c,r,l),dc(s)}function Sl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Xa(s,l)}}function hh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?y=v=r:v=v.next=r}else y=v=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var ph=!1;function Cl(){if(ph){var s=Ko;if(s!==null)throw s}}function Il(s,r,l,c){ph=!1;var y=s.updateQueue;Fs=!1;var v=y.firstBaseUpdate,S=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var U=w,K=U.next;U.next=null,S===null?v=K:S.next=K,S=U;var W=s.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==S&&(w===null?W.firstBaseUpdate=K:w.next=K,W.lastBaseUpdate=U))}if(v!==null){var te=y.baseState;S=0,W=K=U=null,w=v;do{var J=w.lane&-536870913,X=J!==w.lane;if(X?(Oe&J)===J:(c&J)===J){J!==0&&J===zo&&(ph=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ye=s,Se=w;J=r;var ot=l;switch(Se.tag){case 1:if(ye=Se.payload,typeof ye=="function"){te=ye.call(ot,te,J);break e}te=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Se.payload,J=typeof ye=="function"?ye.call(ot,te,J):ye,J==null)break e;te=E({},te,J);break e;case 2:Fs=!0}}J=w.callback,J!==null&&(s.flags|=64,X&&(s.flags|=8192),X=y.callbacks,X===null?y.callbacks=[J]:X.push(J))}else X={lane:J,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(K=W=X,U=te):W=W.next=X,S|=J;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;X=w,w=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);W===null&&(U=te),y.baseState=U,y.firstBaseUpdate=K,y.lastBaseUpdate=W,v===null&&(y.shared.lanes=0),Ys|=S,s.lanes=S,s.memoizedState=te}}function Vy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Uy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Vy(l[s],r)}var $o=q(null),Ac=q(0);function Ly(s,r){s=us,ce(Ac,s),ce($o,r),us=s|r.baseLanes}function mh(){ce(Ac,us),ce($o,$o.current)}function gh(){us=Ac.current,ne($o),ne(Ac)}var bn=q(null),Kn=null;function Gs(s){var r=s.alternate;ce(Et,Et.current&1),ce(bn,s),Kn===null&&(r===null||$o.current!==null||r.memoizedState!==null)&&(Kn=s)}function yh(s){ce(Et,Et.current),ce(bn,s),Kn===null&&(Kn=s)}function Oy(s){s.tag===22?(ce(Et,Et.current),ce(bn,s),Kn===null&&(Kn=s)):Hs()}function Hs(){ce(Et,Et.current),ce(bn,bn.current)}function Nn(s){ne(bn),Kn===s&&(Kn=null),ne(Et)}var Et=q(0);function Sc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Sp(l)||Cp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ts=0,Me=null,st=null,Dt=null,Cc=!1,Qo=!1,jr=!1,Ic=0,wl=0,Xo=null,Bw=0;function gt(){throw Error(i(321))}function _h(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!wn(s[l],r[l]))return!1;return!0}function vh(s,r,l,c,y,v){return ts=v,Me=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=s===null||s.memoizedState===null?T_:Ph,jr=!1,v=l(c,y),jr=!1,Qo&&(v=By(r,l,c,y)),Fy(s),v}function Fy(s){Y.H=Nl;var r=st!==null&&st.next!==null;if(ts=0,Dt=st=Me=null,Cc=!1,wl=0,Xo=null,r)throw Error(i(300));s===null||Mt||(s=s.dependencies,s!==null&&mc(s)&&(Mt=!0))}function By(s,r,l,c){Me=s;var y=0;do{if(Qo&&(Xo=null),wl=0,Qo=!1,25<=y)throw Error(i(301));if(y+=1,Dt=st=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=A_,v=r(l,c)}while(Qo);return v}function qw(){var s=Y.H,r=s.useState()[0];return r=typeof r.then=="function"?Rl(r):r,s=s.useState()[0],(st!==null?st.memoizedState:null)!==s&&(Me.flags|=1024),r}function Eh(){var s=Ic!==0;return Ic=0,s}function Th(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Ah(s){if(Cc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Cc=!1}ts=0,Dt=st=Me=null,Qo=!1,wl=Ic=0,Xo=null}function dn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Me.memoizedState=Dt=s:Dt=Dt.next=s,Dt}function Tt(){if(st===null){var s=Me.alternate;s=s!==null?s.memoizedState:null}else s=st.next;var r=Dt===null?Me.memoizedState:Dt.next;if(r!==null)Dt=r,st=s;else{if(s===null)throw Me.alternate===null?Error(i(467)):Error(i(310));st=s,s={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Dt===null?Me.memoizedState=Dt=s:Dt=Dt.next=s}return Dt}function wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(s){var r=wl;return wl+=1,Xo===null&&(Xo=[]),s=xy(Xo,s,r),r=Me,(Dt===null?r.memoizedState:Dt.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?T_:Ph),s}function Rc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Rl(s);if(s.$$typeof===Z)return Wt(s)}throw Error(i(438,String(s)))}function Sh(s){var r=null,l=Me.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Me.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=wc(),Me.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=V;return r.index++,l}function ns(s,r){return typeof r=="function"?r(s):r}function bc(s){var r=Tt();return Ch(r,st,s)}function Ch(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var S=y.next;y.next=v.next,v.next=S}r.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{r=y.next;var w=S=null,U=null,K=r,W=!1;do{var te=K.lane&-536870913;if(te!==K.lane?(Oe&te)===te:(ts&te)===te){var J=K.revertLane;if(J===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),te===zo&&(W=!0);else if((ts&J)===J){K=K.next,J===zo&&(W=!0);continue}else te={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},U===null?(w=U=te,S=v):U=U.next=te,Me.lanes|=J,Ys|=J;te=K.action,jr&&l(v,te),v=K.hasEagerState?K.eagerState:l(v,te)}else J={lane:te,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},U===null?(w=U=J,S=v):U=U.next=J,Me.lanes|=te,Ys|=te;K=K.next}while(K!==null&&K!==r);if(U===null?S=v:U.next=w,!wn(v,s.memoizedState)&&(Mt=!0,W&&(l=Ko,l!==null)))throw l;s.memoizedState=v,s.baseState=S,s.baseQueue=U,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Ih(s){var r=Tt(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,v=r.memoizedState;if(y!==null){l.pending=null;var S=y=y.next;do v=s(v,S.action),S=S.next;while(S!==y);wn(v,r.memoizedState)||(Mt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,c]}function qy(s,r,l){var c=Me,y=Tt(),v=He;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=r();var S=!wn((st||y).memoizedState,l);if(S&&(y.memoizedState=l,Mt=!0),y=y.queue,bh(zy.bind(null,c,y,s),[s]),y.getSnapshot!==r||S||Dt!==null&&Dt.memoizedState.tag&1){if(c.flags|=2048,Wo(9,{destroy:void 0},Hy.bind(null,c,y,l,r),null),at===null)throw Error(i(349));v||(ts&127)!==0||Gy(c,r,l)}return l}function Gy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Me.updateQueue,r===null?(r=wc(),Me.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function Hy(s,r,l,c){r.value=l,r.getSnapshot=c,Ky(r)&&Yy(s)}function zy(s,r,l){return l(function(){Ky(r)&&Yy(s)})}function Ky(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!wn(s,l)}catch{return!0}}function Yy(s){var r=zr(s,2);r!==null&&Tn(r,s,2)}function wh(s){var r=dn();if(typeof s=="function"){var l=s;if(s=l(),jr){Vn(!0);try{l()}finally{Vn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:s},r}function Jy(s,r,l,c){return s.baseState=l,Ch(s,st,typeof c=="function"?c:ns)}function Gw(s,r,l,c,y){if(Dc(s))throw Error(i(485));if(s=r.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};Y.T!==null?l(!0):v.isTransition=!1,c(v),l=r.pending,l===null?(v.next=r.pending=v,$y(r,v)):(v.next=l.next,r.pending=l.next=v)}}function $y(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var v=Y.T,S={};Y.T=S;try{var w=l(y,c),U=Y.S;U!==null&&U(S,w),Qy(s,r,w)}catch(K){Rh(s,r,K)}finally{v!==null&&S.types!==null&&(v.types=S.types),Y.T=v}}else try{v=l(y,c),Qy(s,r,v)}catch(K){Rh(s,r,K)}}function Qy(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Xy(s,r,c)},function(c){return Rh(s,r,c)}):Xy(s,r,l)}function Xy(s,r,l){r.status="fulfilled",r.value=l,Wy(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,$y(s,l)))}function Rh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Wy(r),r=r.next;while(r!==c)}s.action=null}function Wy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Zy(s,r){return r}function jy(s,r){if(He){var l=at.formState;if(l!==null){e:{var c=Me;if(He){if(ut){t:{for(var y=ut,v=zn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Yn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ut=Yn(y.nextSibling),c=y.data==="F!";break e}}Ls(c)}c=!1}c&&(r=l[0])}}return l=dn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zy,lastRenderedState:r},l.queue=c,l=__.bind(null,Me,c),c.dispatch=l,c=wh(!1),v=kh.bind(null,Me,!1,c.queue),c=dn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=Gw.bind(null,Me,y,v,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function e_(s){var r=Tt();return t_(r,st,s)}function t_(s,r,l){if(r=Ch(s,r,Zy)[0],s=bc(ns)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Rl(r)}catch(S){throw S===Yo?_c:S}else c=r;r=Tt();var y=r.queue,v=y.dispatch;return l!==r.memoizedState&&(Me.flags|=2048,Wo(9,{destroy:void 0},Hw.bind(null,y,l),null)),[c,v,s]}function Hw(s,r){s.action=r}function n_(s){var r=Tt(),l=st;if(l!==null)return t_(r,l,s);Tt(),r=r.memoizedState,l=Tt();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function Wo(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Me.updateQueue,r===null&&(r=wc(),Me.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function i_(){return Tt().memoizedState}function Nc(s,r,l,c){var y=dn();Me.flags|=s,y.memoizedState=Wo(1|r,{destroy:void 0},l,c===void 0?null:c)}function xc(s,r,l,c){var y=Tt();c=c===void 0?null:c;var v=y.memoizedState.inst;st!==null&&c!==null&&_h(c,st.memoizedState.deps)?y.memoizedState=Wo(r,v,l,c):(Me.flags|=s,y.memoizedState=Wo(1|r,v,l,c))}function s_(s,r){Nc(8390656,8,s,r)}function bh(s,r){xc(2048,8,s,r)}function zw(s){Me.flags|=4;var r=Me.updateQueue;if(r===null)r=wc(),Me.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function r_(s){var r=Tt().memoizedState;return zw({ref:r,nextImpl:s}),function(){if((Ze&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function o_(s,r){return xc(4,2,s,r)}function a_(s,r){return xc(4,4,s,r)}function l_(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function u_(s,r,l){l=l!=null?l.concat([s]):null,xc(4,4,l_.bind(null,r,s),l)}function Nh(){}function c_(s,r){var l=Tt();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&_h(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function f_(s,r){var l=Tt();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&_h(r,c[1]))return c[0];if(c=s(),jr){Vn(!0);try{s()}finally{Vn(!1)}}return l.memoizedState=[c,r],c}function xh(s,r,l){return l===void 0||(ts&1073741824)!==0&&(Oe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=dv(),Me.lanes|=s,Ys|=s,l)}function d_(s,r,l,c){return wn(l,r)?l:$o.current!==null?(s=xh(s,l,c),wn(s,r)||(Mt=!0),s):(ts&42)===0||(ts&1073741824)!==0&&(Oe&261930)===0?(Mt=!0,s.memoizedState=l):(s=dv(),Me.lanes|=s,Ys|=s,r)}function h_(s,r,l,c,y){var v=re.p;re.p=v!==0&&8>v?v:8;var S=Y.T,w={};Y.T=w,kh(s,!1,r,l);try{var U=y(),K=Y.S;if(K!==null&&K(w,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var W=Fw(U,c);bl(s,r,W,Mn(s))}else bl(s,r,c,Mn(s))}catch(te){bl(s,r,{then:function(){},status:"rejected",reason:te},Mn())}finally{re.p=v,S!==null&&w.types!==null&&(S.types=w.types),Y.T=S}}function Kw(){}function Dh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=p_(s).queue;h_(s,y,r,ge,l===null?Kw:function(){return m_(s),l(c)})}function p_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:ge},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function m_(s){var r=p_(s);r.next===null&&(r=s.alternate.memoizedState),bl(s,r.next.queue,{},Mn())}function Mh(){return Wt(Kl)}function g_(){return Tt().memoizedState}function y_(){return Tt().memoizedState}function Yw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Mn();s=Bs(l);var c=qs(r,s,l);c!==null&&(Tn(c,r,l),Sl(c,r,l)),r={cache:ah()},s.payload=r;return}r=r.return}}function Jw(s,r,l){var c=Mn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Dc(s)?v_(r,l):(l=Xd(s,r,l,c),l!==null&&(Tn(l,s,c),E_(l,r,c)))}function __(s,r,l){var c=Mn();bl(s,r,l,c)}function bl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Dc(s))v_(r,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var S=r.lastRenderedState,w=v(S,l);if(y.hasEagerState=!0,y.eagerState=w,wn(w,S))return fc(s,r,y,0),at===null&&cc(),!1}catch{}finally{}if(l=Xd(s,r,y,c),l!==null)return Tn(l,s,c),E_(l,r,c),!0}return!1}function kh(s,r,l,c){if(c={lane:2,revertLane:fp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Dc(s)){if(r)throw Error(i(479))}else r=Xd(s,l,c,2),r!==null&&Tn(r,s,2)}function Dc(s){var r=s.alternate;return s===Me||r!==null&&r===Me}function v_(s,r){Qo=Cc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function E_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Xa(s,l)}}var Nl={readContext:Wt,use:Rc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Nl.useEffectEvent=gt;var T_={readContext:Wt,use:Rc,useCallback:function(s,r){return dn().memoizedState=[s,r===void 0?null:r],s},useContext:Wt,useEffect:s_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Nc(4194308,4,l_.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Nc(4194308,4,s,r)},useInsertionEffect:function(s,r){Nc(4,2,s,r)},useMemo:function(s,r){var l=dn();r=r===void 0?null:r;var c=s();if(jr){Vn(!0);try{s()}finally{Vn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=dn();if(l!==void 0){var y=l(r);if(jr){Vn(!0);try{l(r)}finally{Vn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=Jw.bind(null,Me,s),[c.memoizedState,s]},useRef:function(s){var r=dn();return s={current:s},r.memoizedState=s},useState:function(s){s=wh(s);var r=s.queue,l=__.bind(null,Me,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Nh,useDeferredValue:function(s,r){var l=dn();return xh(l,s,r)},useTransition:function(){var s=wh(!1);return s=h_.bind(null,Me,s.queue,!0,!1),dn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Me,y=dn();if(He){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),at===null)throw Error(i(349));(Oe&127)!==0||Gy(c,r,l)}y.memoizedState=l;var v={value:l,getSnapshot:r};return y.queue=v,s_(zy.bind(null,c,v,s),[s]),c.flags|=2048,Wo(9,{destroy:void 0},Hy.bind(null,c,v,l,r),null),l},useId:function(){var s=dn(),r=at.identifierPrefix;if(He){var l=Ui,c=Vi;l=(c&~(1<<32-_t(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Ic++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=Bw++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Mh,useFormState:jy,useActionState:jy,useOptimistic:function(s){var r=dn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=kh.bind(null,Me,!0,l),l.dispatch=r,[s,r]},useMemoCache:Sh,useCacheRefresh:function(){return dn().memoizedState=Yw.bind(null,Me)},useEffectEvent:function(s){var r=dn(),l={impl:s};return r.memoizedState=l,function(){if((Ze&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Ph={readContext:Wt,use:Rc,useCallback:c_,useContext:Wt,useEffect:bh,useImperativeHandle:u_,useInsertionEffect:o_,useLayoutEffect:a_,useMemo:f_,useReducer:bc,useRef:i_,useState:function(){return bc(ns)},useDebugValue:Nh,useDeferredValue:function(s,r){var l=Tt();return d_(l,st.memoizedState,s,r)},useTransition:function(){var s=bc(ns)[0],r=Tt().memoizedState;return[typeof s=="boolean"?s:Rl(s),r]},useSyncExternalStore:qy,useId:g_,useHostTransitionStatus:Mh,useFormState:e_,useActionState:e_,useOptimistic:function(s,r){var l=Tt();return Jy(l,st,s,r)},useMemoCache:Sh,useCacheRefresh:y_};Ph.useEffectEvent=r_;var A_={readContext:Wt,use:Rc,useCallback:c_,useContext:Wt,useEffect:bh,useImperativeHandle:u_,useInsertionEffect:o_,useLayoutEffect:a_,useMemo:f_,useReducer:Ih,useRef:i_,useState:function(){return Ih(ns)},useDebugValue:Nh,useDeferredValue:function(s,r){var l=Tt();return st===null?xh(l,s,r):d_(l,st.memoizedState,s,r)},useTransition:function(){var s=Ih(ns)[0],r=Tt().memoizedState;return[typeof s=="boolean"?s:Rl(s),r]},useSyncExternalStore:qy,useId:g_,useHostTransitionStatus:Mh,useFormState:n_,useActionState:n_,useOptimistic:function(s,r){var l=Tt();return st!==null?Jy(l,st,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Sh,useCacheRefresh:y_};A_.useEffectEvent=r_;function Vh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:E({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Uh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Mn(),y=Bs(c);y.payload=r,l!=null&&(y.callback=l),r=qs(s,y,c),r!==null&&(Tn(r,s,c),Sl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Mn(),y=Bs(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=qs(s,y,c),r!==null&&(Tn(r,s,c),Sl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Mn(),c=Bs(l);c.tag=2,r!=null&&(c.callback=r),r=qs(s,c,l),r!==null&&(Tn(r,s,l),Sl(r,s,l))}};function S_(s,r,l,c,y,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,S):r.prototype&&r.prototype.isPureReactComponent?!ml(l,c)||!ml(y,v):!0}function C_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Uh.enqueueReplaceState(r,r.state,null)}function eo(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=E({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function I_(s){uc(s)}function w_(s){console.error(s)}function R_(s){uc(s)}function Mc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function b_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Lh(s,r,l){return l=Bs(l),l.tag=3,l.payload={element:null},l.callback=function(){Mc(s,r)},l}function N_(s){return s=Bs(s),s.tag=3,s}function x_(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){b_(r,l,c)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){b_(r,l,c),typeof y!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function $w(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Ho(r,l,y,!0),l=bn.current,l!==null){switch(l.tag){case 31:case 13:return Kn===null?zc():l.alternate===null&&yt===0&&(yt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===vc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),lp(s,c,y)),!1;case 22:return l.flags|=65536,c===vc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),lp(s,c,y)),!1}throw Error(i(435,l.tag))}return lp(s,c,y),zc(),!1}if(He)return r=bn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==nh&&(s=Error(i(422),{cause:c}),_l(qn(s,l)))):(c!==nh&&(r=Error(i(423),{cause:c}),_l(qn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=qn(c,l),y=Lh(s.stateNode,c,y),hh(s,y),yt!==4&&(yt=2)),!1;var v=Error(i(520),{cause:c});if(v=qn(v,l),Ll===null?Ll=[v]:Ll.push(v),yt!==4&&(yt=2),r===null)return!0;c=qn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Lh(l.stateNode,c,s),hh(l,s),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Js===null||!Js.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=N_(y),x_(y,s,l,c),hh(l,y),!1}l=l.return}while(l!==null);return!1}var Oh=Error(i(461)),Mt=!1;function Zt(s,r,l,c){r.child=s===null?Py(r,null,l,c):Zr(r,s.child,l,c)}function D_(s,r,l,c,y){l=l.render;var v=r.ref;if("ref"in c){var S={};for(var w in c)w!=="ref"&&(S[w]=c[w])}else S=c;return $r(r),c=vh(s,r,l,S,v,y),w=Eh(),s!==null&&!Mt?(Th(s,r,y),is(s,r,y)):(He&&w&&eh(r),r.flags|=1,Zt(s,r,c,y),r.child)}function M_(s,r,l,c,y){if(s===null){var v=l.type;return typeof v=="function"&&!Wd(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,k_(s,r,v,c,y)):(s=hc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(v=s.child,!Yh(s,y)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:ml,l(S,c)&&s.ref===r.ref)return is(s,r,y)}return r.flags|=1,s=Wi(v,c),s.ref=r.ref,s.return=r,r.child=s}function k_(s,r,l,c,y){if(s!==null){var v=s.memoizedProps;if(ml(v,c)&&s.ref===r.ref)if(Mt=!1,r.pendingProps=c=v,Yh(s,y))(s.flags&131072)!==0&&(Mt=!0);else return r.lanes=s.lanes,is(s,r,y)}return Fh(s,r,l,c,y)}function P_(s,r,l,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,r.child=null;return V_(s,r,v,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&yc(r,v!==null?v.cachePool:null),v!==null?Ly(r,v):mh(),Oy(r);else return c=r.lanes=536870912,V_(s,r,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(yc(r,v.cachePool),Ly(r,v),Hs(),r.memoizedState=null):(s!==null&&yc(r,null),mh(),Hs());return Zt(s,r,y,l),r.child}function xl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function V_(s,r,l,c,y){var v=uh();return v=v===null?null:{parent:xt._currentValue,pool:v},r.memoizedState={baseLanes:l,cachePool:v},s!==null&&yc(r,null),mh(),Oy(r),s!==null&&Ho(s,r,c,!0),r.childLanes=y,null}function kc(s,r){return r=Vc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function U_(s,r,l){return Zr(r,s.child,null,l),s=kc(r,r.pendingProps),s.flags|=2,Nn(r),r.memoizedState=null,s}function Qw(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(He){if(c.mode==="hidden")return s=kc(r,c),r.lanes=536870912,xl(null,s);if(yh(r),(s=ut)?(s=$v(s,zn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Vs!==null?{id:Vi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},l=vy(s),l.return=r,r.child=l,Xt=r,ut=null)):s=null,s===null)throw Ls(r);return r.lanes=536870912,null}return kc(r,c)}var v=s.memoizedState;if(v!==null){var S=v.dehydrated;if(yh(r),y)if(r.flags&256)r.flags&=-257,r=U_(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Mt||Ho(s,r,l,!1),y=(l&s.childLanes)!==0,Mt||y){if(c=at,c!==null&&(S=Wa(c,l),S!==0&&S!==v.retryLane))throw v.retryLane=S,zr(s,S),Tn(c,s,S),Oh;zc(),r=U_(s,r,l)}else s=v.treeContext,ut=Yn(S.nextSibling),Xt=r,He=!0,Us=null,zn=!1,s!==null&&Ay(r,s),r=kc(r,c),r.flags|=4096;return r}return s=Wi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Pc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Fh(s,r,l,c,y){return $r(r),l=vh(s,r,l,c,void 0,y),c=Eh(),s!==null&&!Mt?(Th(s,r,y),is(s,r,y)):(He&&c&&eh(r),r.flags|=1,Zt(s,r,l,y),r.child)}function L_(s,r,l,c,y,v){return $r(r),r.updateQueue=null,l=By(r,c,l,y),Fy(s),c=Eh(),s!==null&&!Mt?(Th(s,r,v),is(s,r,v)):(He&&c&&eh(r),r.flags|=1,Zt(s,r,l,v),r.child)}function O_(s,r,l,c,y){if($r(r),r.stateNode===null){var v=Fo,S=l.contextType;typeof S=="object"&&S!==null&&(v=Wt(S)),v=new l(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Uh,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},fh(r),S=l.contextType,v.context=typeof S=="object"&&S!==null?Wt(S):Fo,v.state=r.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Vh(r,l,S,c),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&Uh.enqueueReplaceState(v,v.state,null),Il(r,c,v,y),Cl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){v=r.stateNode;var w=r.memoizedProps,U=eo(l,w);v.props=U;var K=v.context,W=l.contextType;S=Fo,typeof W=="object"&&W!==null&&(S=Wt(W));var te=l.getDerivedStateFromProps;W=typeof te=="function"||typeof v.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,W||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w||K!==S)&&C_(r,v,c,S),Fs=!1;var J=r.memoizedState;v.state=J,Il(r,c,v,y),Cl(),K=r.memoizedState,w||J!==K||Fs?(typeof te=="function"&&(Vh(r,l,te,c),K=r.memoizedState),(U=Fs||S_(r,l,U,c,J,K,S))?(W||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),v.props=c,v.state=K,v.context=S,c=U):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,dh(s,r),S=r.memoizedProps,W=eo(l,S),v.props=W,te=r.pendingProps,J=v.context,K=l.contextType,U=Fo,typeof K=="object"&&K!==null&&(U=Wt(K)),w=l.getDerivedStateFromProps,(K=typeof w=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==te||J!==U)&&C_(r,v,c,U),Fs=!1,J=r.memoizedState,v.state=J,Il(r,c,v,y),Cl();var X=r.memoizedState;S!==te||J!==X||Fs||s!==null&&s.dependencies!==null&&mc(s.dependencies)?(typeof w=="function"&&(Vh(r,l,w,c),X=r.memoizedState),(W=Fs||S_(r,l,W,c,J,X,U)||s!==null&&s.dependencies!==null&&mc(s.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,X,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,X,U)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&J===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&J===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=X),v.props=c,v.state=X,v.context=U,c=W):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&J===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&J===s.memoizedState||(r.flags|=1024),c=!1)}return v=c,Pc(s,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,s!==null&&c?(r.child=Zr(r,s.child,null,y),r.child=Zr(r,null,l,y)):Zt(s,r,l,y),r.memoizedState=v.state,s=r.child):s=is(s,r,y),s}function F_(s,r,l,c){return Yr(),r.flags|=256,Zt(s,r,l,c),r.child}var Bh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qh(s){return{baseLanes:s,cachePool:by()}}function Gh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Dn),s}function B_(s,r,l){var c=r.pendingProps,y=!1,v=(r.flags&128)!==0,S;if((S=v)||(S=s!==null&&s.memoizedState===null?!1:(Et.current&2)!==0),S&&(y=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,s===null){if(He){if(y?Gs(r):Hs(),(s=ut)?(s=$v(s,zn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Vs!==null?{id:Vi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},l=vy(s),l.return=r,r.child=l,Xt=r,ut=null)):s=null,s===null)throw Ls(r);return Cp(s)?r.lanes=32:r.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(Hs(),y=r.mode,w=Vc({mode:"hidden",children:w},y),c=Kr(c,y,l,null),w.return=r,c.return=r,w.sibling=c,r.child=w,c=r.child,c.memoizedState=qh(l),c.childLanes=Gh(s,S,l),r.memoizedState=Bh,xl(null,c)):(Gs(r),Hh(r,w))}var U=s.memoizedState;if(U!==null&&(w=U.dehydrated,w!==null)){if(v)r.flags&256?(Gs(r),r.flags&=-257,r=zh(s,r,l)):r.memoizedState!==null?(Hs(),r.child=s.child,r.flags|=128,r=null):(Hs(),w=c.fallback,y=r.mode,c=Vc({mode:"visible",children:c.children},y),w=Kr(w,y,l,null),w.flags|=2,c.return=r,w.return=r,c.sibling=w,r.child=c,Zr(r,s.child,null,l),c=r.child,c.memoizedState=qh(l),c.childLanes=Gh(s,S,l),r.memoizedState=Bh,r=xl(null,c));else if(Gs(r),Cp(w)){if(S=w.nextSibling&&w.nextSibling.dataset,S)var K=S.dgst;S=K,c=Error(i(419)),c.stack="",c.digest=S,_l({value:c,source:null,stack:null}),r=zh(s,r,l)}else if(Mt||Ho(s,r,l,!1),S=(l&s.childLanes)!==0,Mt||S){if(S=at,S!==null&&(c=Wa(S,l),c!==0&&c!==U.retryLane))throw U.retryLane=c,zr(s,c),Tn(S,s,c),Oh;Sp(w)||zc(),r=zh(s,r,l)}else Sp(w)?(r.flags|=192,r.child=s.child,r=null):(s=U.treeContext,ut=Yn(w.nextSibling),Xt=r,He=!0,Us=null,zn=!1,s!==null&&Ay(r,s),r=Hh(r,c.children),r.flags|=4096);return r}return y?(Hs(),w=c.fallback,y=r.mode,U=s.child,K=U.sibling,c=Wi(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,K!==null?w=Wi(K,w):(w=Kr(w,y,l,null),w.flags|=2),w.return=r,c.return=r,c.sibling=w,r.child=c,xl(null,c),c=r.child,w=s.child.memoizedState,w===null?w=qh(l):(y=w.cachePool,y!==null?(U=xt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=by(),w={baseLanes:w.baseLanes|l,cachePool:y}),c.memoizedState=w,c.childLanes=Gh(s,S,l),r.memoizedState=Bh,xl(s.child,c)):(Gs(r),l=s.child,s=l.sibling,l=Wi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(S=r.deletions,S===null?(r.deletions=[s],r.flags|=16):S.push(s)),r.child=l,r.memoizedState=null,l)}function Hh(s,r){return r=Vc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Vc(s,r){return s=Rn(22,s,null,r),s.lanes=0,s}function zh(s,r,l){return Zr(r,s.child,null,l),s=Hh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function q_(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),rh(s.return,r,l)}function Kh(s,r,l,c,y,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=l,S.tailMode=y,S.treeForkCount=v)}function G_(s,r,l){var c=r.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var S=Et.current,w=(S&2)!==0;if(w?(S=S&1|2,r.flags|=128):S&=1,ce(Et,S),Zt(s,r,c,l),c=He?yl:0,!w&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&q_(s,l,r);else if(s.tag===19)q_(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&Sc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Kh(r,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Sc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Kh(r,!0,l,null,v,c);break;case"together":Kh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function is(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Ys|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Ho(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Wi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Wi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Yh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&mc(s)))}function Xw(s,r,l){switch(r.tag){case 3:Ot(r,r.stateNode.containerInfo),Os(r,xt,s.memoizedState.cache),Yr();break;case 27:case 5:wr(r);break;case 4:Ot(r,r.stateNode.containerInfo);break;case 10:Os(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,yh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Gs(r),r.flags|=128,null):(l&r.child.childLanes)!==0?B_(s,r,l):(Gs(r),s=is(s,r,l),s!==null?s.sibling:null);Gs(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Ho(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return G_(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(Et,Et.current),c)break;return null;case 22:return r.lanes=0,P_(s,r,l,r.pendingProps);case 24:Os(r,xt,s.memoizedState.cache)}return is(s,r,l)}function H_(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Mt=!0;else{if(!Yh(s,l)&&(r.flags&128)===0)return Mt=!1,Xw(s,r,l);Mt=(s.flags&131072)!==0}else Mt=!1,He&&(r.flags&1048576)!==0&&Ty(r,yl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=Xr(r.elementType),r.type=s,typeof s=="function")Wd(s)?(c=eo(s,c),r.tag=1,r=O_(null,r,s,c,l)):(r.tag=0,r=Fh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===oe){r.tag=11,r=D_(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=M_(null,r,s,c,l);break e}}throw r=pe(s)||s,Error(i(306,r,""))}}return r;case 0:return Fh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=eo(c,r.pendingProps),O_(s,r,c,y,l);case 3:e:{if(Ot(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var v=r.memoizedState;y=v.element,dh(s,r),Il(r,c,null,l);var S=r.memoizedState;if(c=S.cache,Os(r,xt,c),c!==v.cache&&oh(r,[xt],l,!0),Cl(),c=S.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=F_(s,r,c,l);break e}else if(c!==y){y=qn(Error(i(424)),r),_l(y),r=F_(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ut=Yn(s.firstChild),Xt=r,He=!0,Us=null,zn=!0,l=Py(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Yr(),c===y){r=is(s,r,l);break e}Zt(s,r,c,l)}r=r.child}return r;case 26:return Pc(s,r),s===null?(l=eE(r.type,null,r.pendingProps,null))?r.memoizedState=l:He||(l=r.type,s=r.pendingProps,c=Wc(ke.current).createElement(l),c[Rt]=r,c[Ht]=s,jt(c,l,s),bt(c),r.stateNode=c):r.memoizedState=eE(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return wr(r),s===null&&He&&(c=r.stateNode=Wv(r.type,r.pendingProps,ke.current),Xt=r,zn=!0,y=ut,Ws(r.type)?(Ip=y,ut=Yn(c.firstChild)):ut=y),Zt(s,r,r.pendingProps.children,l),Pc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&He&&((y=c=ut)&&(c=wR(c,r.type,r.pendingProps,zn),c!==null?(r.stateNode=c,Xt=r,ut=Yn(c.firstChild),zn=!1,y=!0):y=!1),y||Ls(r)),wr(r),y=r.type,v=r.pendingProps,S=s!==null?s.memoizedProps:null,c=v.children,Ep(y,v)?c=null:S!==null&&Ep(y,S)&&(r.flags|=32),r.memoizedState!==null&&(y=vh(s,r,qw,null,null,l),Kl._currentValue=y),Pc(s,r),Zt(s,r,c,l),r.child;case 6:return s===null&&He&&((s=l=ut)&&(l=RR(l,r.pendingProps,zn),l!==null?(r.stateNode=l,Xt=r,ut=null,s=!0):s=!1),s||Ls(r)),null;case 13:return B_(s,r,l);case 4:return Ot(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=Zr(r,null,c,l):Zt(s,r,c,l),r.child;case 11:return D_(s,r,r.type,r.pendingProps,l);case 7:return Zt(s,r,r.pendingProps,l),r.child;case 8:return Zt(s,r,r.pendingProps.children,l),r.child;case 12:return Zt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Os(r,r.type,c.value),Zt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,$r(r),y=Wt(y),c=c(y),r.flags|=1,Zt(s,r,c,l),r.child;case 14:return M_(s,r,r.type,r.pendingProps,l);case 15:return k_(s,r,r.type,r.pendingProps,l);case 19:return G_(s,r,l);case 31:return Qw(s,r,l);case 22:return P_(s,r,l,r.pendingProps);case 24:return $r(r),c=Wt(xt),s===null?(y=uh(),y===null&&(y=at,v=ah(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),r.memoizedState={parent:c,cache:y},fh(r),Os(r,xt,y)):((s.lanes&l)!==0&&(dh(s,r),Il(r,null,null,l),Cl()),y=s.memoizedState,v=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Os(r,xt,c)):(c=v.cache,Os(r,xt,c),c!==y.cache&&oh(r,[xt],l,!0))),Zt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ss(s){s.flags|=4}function Jh(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(gv())s.flags|=8192;else throw Wr=vc,ch}else s.flags&=-16777217}function z_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!rE(r))if(gv())s.flags|=8192;else throw Wr=vc,ch}function Uc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Gu():536870912,s.lanes|=r,ta|=r)}function Dl(s,r){if(!He)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ct(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function Ww(s,r,l){var c=r.pendingProps;switch(th(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),es(xt),dt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Go(r)?ss(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ih())),ct(r),null;case 26:var y=r.type,v=r.memoizedState;return s===null?(ss(r),v!==null?(ct(r),z_(r,v)):(ct(r),Jh(r,y,null,c,l))):v?v!==s.memoizedState?(ss(r),ct(r),z_(r,v)):(ct(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&ss(r),ct(r),Jh(r,y,s,c,l)),null;case 27:if(Eo(r),l=ke.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ss(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ct(r),null}s=me.current,Go(r)?Sy(r):(s=Wv(y,c,l),r.stateNode=s,ss(r))}return ct(r),null;case 5:if(Eo(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&ss(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ct(r),null}if(v=me.current,Go(r))Sy(r);else{var S=Wc(ke.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?S.createElement(y,{is:c.is}):S.createElement(y)}}v[Rt]=r,v[Ht]=c;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=v;e:switch(jt(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ss(r)}}return ct(r),Jh(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&ss(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=ke.current,Go(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Xt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[Rt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Bv(s.nodeValue,l)),s||Ls(r,!0)}else s=Wc(s).createTextNode(c),s[Rt]=r,r.stateNode=s}return ct(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Go(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Rt]=r}else Yr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),s=!1}else l=ih(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Nn(r),r):(Nn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ct(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Go(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Rt]=r}else Yr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),y=!1}else y=ih(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Nn(r),r):(Nn(r),null)}return Nn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Uc(r,r.updateQueue),ct(r),null);case 4:return dt(),s===null&&mp(r.stateNode.containerInfo),ct(r),null;case 10:return es(r.type),ct(r),null;case 19:if(ne(Et),c=r.memoizedState,c===null)return ct(r),null;if(y=(r.flags&128)!==0,v=c.rendering,v===null)if(y)Dl(c,!1);else{if(yt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(v=Sc(s),v!==null){for(r.flags|=128,Dl(c,!1),s=v.updateQueue,r.updateQueue=s,Uc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)_y(l,s),l=l.sibling;return ce(Et,Et.current&1|2),He&&Zi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&cn()>qc&&(r.flags|=128,y=!0,Dl(c,!1),r.lanes=4194304)}else{if(!y)if(s=Sc(v),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Uc(r,s),Dl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!He)return ct(r),null}else 2*cn()-c.renderingStartTime>qc&&l!==536870912&&(r.flags|=128,y=!0,Dl(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(s=c.last,s!==null?s.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=cn(),s.sibling=null,l=Et.current,ce(Et,y?l&1|2:l&1),He&&Zi(r,c.treeForkCount),s):(ct(r),null);case 22:case 23:return Nn(r),gh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),l=r.updateQueue,l!==null&&Uc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&ne(Qr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),es(xt),ct(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Zw(s,r){switch(th(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return es(xt),dt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Eo(r),null;case 31:if(r.memoizedState!==null){if(Nn(r),r.alternate===null)throw Error(i(340));Yr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Nn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Yr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ne(Et),null;case 4:return dt(),null;case 10:return es(r.type),null;case 22:case 23:return Nn(r),gh(),s!==null&&ne(Qr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return es(xt),null;case 25:return null;default:return null}}function K_(s,r){switch(th(r),r.tag){case 3:es(xt),dt();break;case 26:case 27:case 5:Eo(r);break;case 4:dt();break;case 31:r.memoizedState!==null&&Nn(r);break;case 13:Nn(r);break;case 19:ne(Et);break;case 10:es(r.type);break;case 22:case 23:Nn(r),gh(),s!==null&&ne(Qr);break;case 24:es(xt)}}function Ml(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var v=l.create,S=l.inst;c=v(),S.destroy=c}l=l.next}while(l!==y)}}catch(w){nt(r,r.return,w)}}function zs(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var S=c.inst,w=S.destroy;if(w!==void 0){S.destroy=void 0,y=r;var U=l,K=w;try{K()}catch(W){nt(y,U,W)}}}c=c.next}while(c!==v)}}catch(W){nt(r,r.return,W)}}function Y_(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{Uy(r,l)}catch(c){nt(s,s.return,c)}}}function J_(s,r,l){l.props=eo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){nt(s,r,c)}}function kl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){nt(s,r,y)}}function Li(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(s,r,y)}else l.current=null}function $_(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(s,s.return,y)}}function $h(s,r,l){try{var c=s.stateNode;ER(c,s.type,l,r),c[Ht]=r}catch(y){nt(s,s.return,y)}}function Q_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ws(s.type)||s.tag===4}function Qh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Q_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ws(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Xh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ii));else if(c!==4&&(c===27&&Ws(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Xh(s,r,l),s=s.sibling;s!==null;)Xh(s,r,l),s=s.sibling}function Lc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&Ws(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Lc(s,r,l),s=s.sibling;s!==null;)Lc(s,r,l),s=s.sibling}function X_(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);jt(r,c,l),r[Rt]=s,r[Ht]=l}catch(v){nt(s,s.return,v)}}var rs=!1,kt=!1,Wh=!1,W_=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function jw(s,r){if(s=s.containerInfo,_p=rf,s=uy(s),zd(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,w=-1,U=-1,K=0,W=0,te=s,J=null;t:for(;;){for(var X;te!==l||y!==0&&te.nodeType!==3||(w=S+y),te!==v||c!==0&&te.nodeType!==3||(U=S+c),te.nodeType===3&&(S+=te.nodeValue.length),(X=te.firstChild)!==null;)J=te,te=X;for(;;){if(te===s)break t;if(J===l&&++K===y&&(w=S),J===v&&++W===c&&(U=S),(X=te.nextSibling)!==null)break;te=J,J=te.parentNode}te=X}l=w===-1||U===-1?null:{start:w,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(vp={focusedElem:s,selectionRange:l},rf=!1,Kt=r;Kt!==null;)if(r=Kt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Kt=s;else for(;Kt!==null;){switch(r=Kt,v=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=r,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ye=eo(l.type,y);s=c.getSnapshotBeforeUpdate(ye,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){nt(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Ap(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ap(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Kt=s;break}Kt=r.return}}function Z_(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:as(s,l),c&4&&Ml(5,l);break;case 1:if(as(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(S){nt(l,l.return,S)}else{var y=eo(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(S){nt(l,l.return,S)}}c&64&&Y_(l),c&512&&kl(l,l.return);break;case 3:if(as(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Uy(s,r)}catch(S){nt(l,l.return,S)}}break;case 27:r===null&&c&4&&X_(l);case 26:case 5:as(s,l),r===null&&c&4&&$_(l),c&512&&kl(l,l.return);break;case 12:as(s,l);break;case 31:as(s,l),c&4&&tv(s,l);break;case 13:as(s,l),c&4&&nv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=lR.bind(null,l),bR(s,l))));break;case 22:if(c=l.memoizedState!==null||rs,!c){r=r!==null&&r.memoizedState!==null||kt,y=rs;var v=kt;rs=c,(kt=r)&&!v?ls(s,l,(l.subtreeFlags&8772)!==0):as(s,l),rs=y,kt=v}break;case 30:break;default:as(s,l)}}function j_(s){var r=s.alternate;r!==null&&(s.alternate=null,j_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Io(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pt=null,yn=!1;function os(s,r,l){for(l=l.child;l!==null;)ev(s,r,l),l=l.sibling}function ev(s,r,l){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(jn,l)}catch{}switch(l.tag){case 26:kt||Li(l,r),os(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:kt||Li(l,r);var c=pt,y=yn;Ws(l.type)&&(pt=l.stateNode,yn=!1),os(s,r,l),Gl(l.stateNode),pt=c,yn=y;break;case 5:kt||Li(l,r);case 6:if(c=pt,y=yn,pt=null,os(s,r,l),pt=c,yn=y,pt!==null)if(yn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(v){nt(l,r,v)}else try{pt.removeChild(l.stateNode)}catch(v){nt(l,r,v)}break;case 18:pt!==null&&(yn?(s=pt,Yv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),ua(s)):Yv(pt,l.stateNode));break;case 4:c=pt,y=yn,pt=l.stateNode.containerInfo,yn=!0,os(s,r,l),pt=c,yn=y;break;case 0:case 11:case 14:case 15:zs(2,l,r),kt||zs(4,l,r),os(s,r,l);break;case 1:kt||(Li(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&J_(l,r,c)),os(s,r,l);break;case 21:os(s,r,l);break;case 22:kt=(c=kt)||l.memoizedState!==null,os(s,r,l),kt=c;break;default:os(s,r,l)}}function tv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ua(s)}catch(l){nt(r,r.return,l)}}}function nv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ua(s)}catch(l){nt(r,r.return,l)}}function eR(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new W_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new W_),r;default:throw Error(i(435,s.tag))}}function Oc(s,r){var l=eR(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=uR.bind(null,s,c);c.then(y,y)}})}function _n(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=s,S=r,w=S;e:for(;w!==null;){switch(w.tag){case 27:if(Ws(w.type)){pt=w.stateNode,yn=!1;break e}break;case 5:pt=w.stateNode,yn=!1;break e;case 3:case 4:pt=w.stateNode.containerInfo,yn=!0;break e}w=w.return}if(pt===null)throw Error(i(160));ev(v,S,y),pt=null,yn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)iv(r,s),r=r.sibling}var ui=null;function iv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:_n(r,s),vn(s),c&4&&(zs(3,s,s.return),Ml(3,s),zs(5,s,s.return));break;case 1:_n(r,s),vn(s),c&512&&(kt||l===null||Li(l,l.return)),c&64&&rs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ui;if(_n(r,s),vn(s),c&512&&(kt||l===null||Li(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Si]||v[Rt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),jt(v,c,l),v[Rt]=s,bt(v),c=v;break e;case"link":var S=iE("link","href",y).get(c+(l.href||""));if(S){for(var w=0;w<S.length;w++)if(v=S[w],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(w,1);break t}}v=y.createElement(c),jt(v,c,l),y.head.appendChild(v);break;case"meta":if(S=iE("meta","content",y).get(c+(l.content||""))){for(w=0;w<S.length;w++)if(v=S[w],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(w,1);break t}}v=y.createElement(c),jt(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[Rt]=s,bt(v),c=v}s.stateNode=c}else sE(y,s.type,s.stateNode);else s.stateNode=nE(y,c,s.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?sE(y,s.type,s.stateNode):nE(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&$h(s,s.memoizedProps,l.memoizedProps)}break;case 27:_n(r,s),vn(s),c&512&&(kt||l===null||Li(l,l.return)),l!==null&&c&4&&$h(s,s.memoizedProps,l.memoizedProps);break;case 5:if(_n(r,s),vn(s),c&512&&(kt||l===null||Li(l,l.return)),s.flags&32){y=s.stateNode;try{gn(y,"")}catch(ye){nt(s,s.return,ye)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,$h(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Wh=!0);break;case 6:if(_n(r,s),vn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ye){nt(s,s.return,ye)}}break;case 3:if(ef=null,y=ui,ui=Zc(r.containerInfo),_n(r,s),ui=y,vn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ua(r.containerInfo)}catch(ye){nt(s,s.return,ye)}Wh&&(Wh=!1,sv(s));break;case 4:c=ui,ui=Zc(s.stateNode.containerInfo),_n(r,s),vn(s),ui=c;break;case 12:_n(r,s),vn(s);break;case 31:_n(r,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Oc(s,c)));break;case 13:_n(r,s),vn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Bc=cn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Oc(s,c)));break;case 22:y=s.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,K=rs,W=kt;if(rs=K||y,kt=W||U,_n(r,s),kt=W,rs=K,vn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||U||rs||kt||to(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){U=l=r;try{if(v=U.stateNode,y)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{w=U.stateNode;var te=U.memoizedProps.style,J=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ye){nt(U,U.return,ye)}}}else if(r.tag===6){if(l===null){U=r;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(ye){nt(U,U.return,ye)}}}else if(r.tag===18){if(l===null){U=r;try{var X=U.stateNode;y?Jv(X,!0):Jv(U.stateNode,!1)}catch(ye){nt(U,U.return,ye)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Oc(s,l))));break;case 19:_n(r,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Oc(s,c)));break;case 30:break;case 21:break;default:_n(r,s),vn(s)}}function vn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(Q_(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=Qh(s);Lc(s,v,y);break;case 5:var S=l.stateNode;l.flags&32&&(gn(S,""),l.flags&=-33);var w=Qh(s);Lc(s,w,S);break;case 3:case 4:var U=l.stateNode.containerInfo,K=Qh(s);Xh(s,K,U);break;default:throw Error(i(161))}}catch(W){nt(s,s.return,W)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function sv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;sv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function as(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Z_(s,r.alternate,r),r=r.sibling}function to(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:zs(4,r,r.return),to(r);break;case 1:Li(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&J_(r,r.return,l),to(r);break;case 27:Gl(r.stateNode);case 26:case 5:Li(r,r.return),to(r);break;case 22:r.memoizedState===null&&to(r);break;case 30:to(r);break;default:to(r)}s=s.sibling}}function ls(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,v=r,S=v.flags;switch(v.tag){case 0:case 11:case 15:ls(y,v,l),Ml(4,v);break;case 1:if(ls(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){nt(c,c.return,K)}if(c=v,y=c.updateQueue,y!==null){var w=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)Vy(U[y],w)}catch(K){nt(c,c.return,K)}}l&&S&64&&Y_(v),kl(v,v.return);break;case 27:X_(v);case 26:case 5:ls(y,v,l),l&&c===null&&S&4&&$_(v),kl(v,v.return);break;case 12:ls(y,v,l);break;case 31:ls(y,v,l),l&&S&4&&tv(y,v);break;case 13:ls(y,v,l),l&&S&4&&nv(y,v);break;case 22:v.memoizedState===null&&ls(y,v,l),kl(v,v.return);break;case 30:break;default:ls(y,v,l)}r=r.sibling}}function Zh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&vl(l))}function jh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&vl(s))}function ci(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)rv(s,r,l,c),r=r.sibling}function rv(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:ci(s,r,l,c),y&2048&&Ml(9,r);break;case 1:ci(s,r,l,c);break;case 3:ci(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&vl(s)));break;case 12:if(y&2048){ci(s,r,l,c),s=r.stateNode;try{var v=r.memoizedProps,S=v.id,w=v.onPostCommit;typeof w=="function"&&w(S,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){nt(r,r.return,U)}}else ci(s,r,l,c);break;case 31:ci(s,r,l,c);break;case 13:ci(s,r,l,c);break;case 23:break;case 22:v=r.stateNode,S=r.alternate,r.memoizedState!==null?v._visibility&2?ci(s,r,l,c):Pl(s,r):v._visibility&2?ci(s,r,l,c):(v._visibility|=2,Zo(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Zh(S,r);break;case 24:ci(s,r,l,c),y&2048&&jh(r.alternate,r);break;default:ci(s,r,l,c)}}function Zo(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=s,S=r,w=l,U=c,K=S.flags;switch(S.tag){case 0:case 11:case 15:Zo(v,S,w,U,y),Ml(8,S);break;case 23:break;case 22:var W=S.stateNode;S.memoizedState!==null?W._visibility&2?Zo(v,S,w,U,y):Pl(v,S):(W._visibility|=2,Zo(v,S,w,U,y)),y&&K&2048&&Zh(S.alternate,S);break;case 24:Zo(v,S,w,U,y),y&&K&2048&&jh(S.alternate,S);break;default:Zo(v,S,w,U,y)}r=r.sibling}}function Pl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Pl(l,c),y&2048&&Zh(c.alternate,c);break;case 24:Pl(l,c),y&2048&&jh(c.alternate,c);break;default:Pl(l,c)}r=r.sibling}}var Vl=8192;function jo(s,r,l){if(s.subtreeFlags&Vl)for(s=s.child;s!==null;)ov(s,r,l),s=s.sibling}function ov(s,r,l){switch(s.tag){case 26:jo(s,r,l),s.flags&Vl&&s.memoizedState!==null&&BR(l,ui,s.memoizedState,s.memoizedProps);break;case 5:jo(s,r,l);break;case 3:case 4:var c=ui;ui=Zc(s.stateNode.containerInfo),jo(s,r,l),ui=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Vl,Vl=16777216,jo(s,r,l),Vl=c):jo(s,r,l));break;default:jo(s,r,l)}}function av(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Ul(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Kt=c,uv(c,s)}av(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lv(s),s=s.sibling}function lv(s){switch(s.tag){case 0:case 11:case 15:Ul(s),s.flags&2048&&zs(9,s,s.return);break;case 3:Ul(s);break;case 12:Ul(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Fc(s)):Ul(s);break;default:Ul(s)}}function Fc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Kt=c,uv(c,s)}av(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:zs(8,r,r.return),Fc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Fc(r));break;default:Fc(r)}s=s.sibling}}function uv(s,r){for(;Kt!==null;){var l=Kt;switch(l.tag){case 0:case 11:case 15:zs(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:vl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Kt=c;else e:for(l=s;Kt!==null;){c=Kt;var y=c.sibling,v=c.return;if(j_(c),c===l){Kt=null;break e}if(y!==null){y.return=v,Kt=y;break e}Kt=v}}}var tR={getCacheForType:function(s){var r=Wt(xt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return Wt(xt).controller.signal}},nR=typeof WeakMap=="function"?WeakMap:Map,Ze=0,at=null,Ve=null,Oe=0,tt=0,xn=null,Ks=!1,ea=!1,ep=!1,us=0,yt=0,Ys=0,no=0,tp=0,Dn=0,ta=0,Ll=null,En=null,np=!1,Bc=0,cv=0,qc=1/0,Gc=null,Js=null,Bt=0,$s=null,na=null,cs=0,ip=0,sp=null,fv=null,Ol=0,rp=null;function Mn(){return(Ze&2)!==0&&Oe!==0?Oe&-Oe:Y.T!==null?fp():Hu()}function dv(){if(Dn===0)if((Oe&536870912)===0||He){var s=Nr;Nr<<=1,(Nr&3932160)===0&&(Nr=262144),Dn=s}else Dn=536870912;return s=bn.current,s!==null&&(s.flags|=32),Dn}function Tn(s,r,l){(s===at&&(tt===2||tt===9)||s.cancelPendingCommit!==null)&&(ia(s,0),Qs(s,Oe,Dn,!1)),xr(s,l),((Ze&2)===0||s!==at)&&(s===at&&((Ze&2)===0&&(no|=l),yt===4&&Qs(s,Oe,Dn,!1)),Oi(s))}function hv(s,r,l){if((Ze&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||ei(s,r),y=c?rR(s,r):ap(s,r,!0),v=c;do{if(y===0){ea&&!c&&Qs(s,r,0,!1);break}else{if(l=s.current.alternate,v&&!iR(l)){y=ap(s,r,!1),v=!1;continue}if(y===2){if(v=r,s.errorRecoveryDisabledLanes&v)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var w=s;y=Ll;var U=w.current.memoizedState.isDehydrated;if(U&&(ia(w,S).flags|=256),S=ap(w,S,!1),S!==2){if(ep&&!U){w.errorRecoveryDisabledLanes|=v,no|=v,y=4;break e}v=En,En=y,v!==null&&(En===null?En=v:En.push.apply(En,v))}y=S}if(v=!1,y!==2)continue}}if(y===1){ia(s,0),Qs(s,r,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Qs(c,r,Dn,!Ks);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Bc+300-cn(),10<y)){if(Qs(c,r,Dn,!Ks),Ei(c,0,!0)!==0)break e;cs=r,c.timeoutHandle=zv(pv.bind(null,c,l,En,Gc,np,r,Dn,no,ta,Ks,v,"Throttled",-0,0),y);break e}pv(c,l,En,Gc,np,r,Dn,no,ta,Ks,v,null,-0,0)}}break}while(!0);Oi(s)}function pv(s,r,l,c,y,v,S,w,U,K,W,te,J,X){if(s.timeoutHandle=-1,te=r.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},ov(r,v,te);var ye=(v&62914560)===v?Bc-cn():(v&4194048)===v?cv-cn():0;if(ye=qR(te,ye),ye!==null){cs=v,s.cancelPendingCommit=ye(Av.bind(null,s,r,v,l,c,y,S,w,U,W,te,null,J,X)),Qs(s,v,S,!K);return}}Av(s,r,v,l,c,y,S,w,U)}function iR(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!wn(v(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qs(s,r,l,c){r&=~tp,r&=~no,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var v=31-_t(y),S=1<<v;c[v]=-1,y&=~S}l!==0&&Dr(s,l,r)}function Hc(){return(Ze&6)===0?(Fl(0),!1):!0}function op(){if(Ve!==null){if(tt===0)var s=Ve.return;else s=Ve,ji=Jr=null,Ah(s),Jo=null,Tl=0,s=Ve;for(;s!==null;)K_(s.alternate,s),s=s.return;Ve=null}}function ia(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,SR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),cs=0,op(),at=s,Ve=l=Wi(s.current,null),Oe=r,tt=0,xn=null,Ks=!1,ea=ei(s,r),ep=!1,ta=Dn=tp=no=Ys=yt=0,En=Ll=null,np=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-_t(c),v=1<<y;r|=s[y],c&=~v}return us=r,cc(),l}function mv(s,r){Me=null,Y.H=Nl,r===Yo||r===_c?(r=Dy(),tt=3):r===ch?(r=Dy(),tt=4):tt=r===Oh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,xn=r,Ve===null&&(yt=1,Mc(s,qn(r,s.current)))}function gv(){var s=bn.current;return s===null?!0:(Oe&4194048)===Oe?Kn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?s===Kn:!1}function yv(){var s=Y.H;return Y.H=Nl,s===null?Nl:s}function _v(){var s=Y.A;return Y.A=tR,s}function zc(){yt=4,Ks||(Oe&4194048)!==Oe&&bn.current!==null||(ea=!0),(Ys&134217727)===0&&(no&134217727)===0||at===null||Qs(at,Oe,Dn,!1)}function ap(s,r,l){var c=Ze;Ze|=2;var y=yv(),v=_v();(at!==s||Oe!==r)&&(Gc=null,ia(s,r)),r=!1;var S=yt;e:do try{if(tt!==0&&Ve!==null){var w=Ve,U=xn;switch(tt){case 8:op(),S=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(r=!0);var K=tt;if(tt=0,xn=null,sa(s,w,U,K),l&&ea){S=0;break e}break;default:K=tt,tt=0,xn=null,sa(s,w,U,K)}}sR(),S=yt;break}catch(W){mv(s,W)}while(!0);return r&&s.shellSuspendCounter++,ji=Jr=null,Ze=c,Y.H=y,Y.A=v,Ve===null&&(at=null,Oe=0,cc()),S}function sR(){for(;Ve!==null;)vv(Ve)}function rR(s,r){var l=Ze;Ze|=2;var c=yv(),y=_v();at!==s||Oe!==r?(Gc=null,qc=cn()+500,ia(s,r)):ea=ei(s,r);e:do try{if(tt!==0&&Ve!==null){r=Ve;var v=xn;t:switch(tt){case 1:tt=0,xn=null,sa(s,r,v,1);break;case 2:case 9:if(Ny(v)){tt=0,xn=null,Ev(r);break}r=function(){tt!==2&&tt!==9||at!==s||(tt=7),Oi(s)},v.then(r,r);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Ny(v)?(tt=0,xn=null,Ev(r)):(tt=0,xn=null,sa(s,r,v,7));break;case 5:var S=null;switch(Ve.tag){case 26:S=Ve.memoizedState;case 5:case 27:var w=Ve;if(S?rE(S):w.stateNode.complete){tt=0,xn=null;var U=w.sibling;if(U!==null)Ve=U;else{var K=w.return;K!==null?(Ve=K,Kc(K)):Ve=null}break t}}tt=0,xn=null,sa(s,r,v,5);break;case 6:tt=0,xn=null,sa(s,r,v,6);break;case 8:op(),yt=6;break e;default:throw Error(i(462))}}oR();break}catch(W){mv(s,W)}while(!0);return ji=Jr=null,Y.H=c,Y.A=y,Ze=l,Ve!==null?0:(at=null,Oe=0,cc(),yt)}function oR(){for(;Ve!==null&&!Ld();)vv(Ve)}function vv(s){var r=H_(s.alternate,s,us);s.memoizedProps=s.pendingProps,r===null?Kc(s):Ve=r}function Ev(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=L_(l,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=L_(l,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:Ah(r);default:K_(l,r),r=Ve=_y(r,us),r=H_(l,r,us)}s.memoizedProps=s.pendingProps,r===null?Kc(s):Ve=r}function sa(s,r,l,c){ji=Jr=null,Ah(r),Jo=null,Tl=0;var y=r.return;try{if($w(s,y,r,l,Oe)){yt=1,Mc(s,qn(l,s.current)),Ve=null;return}}catch(v){if(y!==null)throw Ve=y,v;yt=1,Mc(s,qn(l,s.current)),Ve=null;return}r.flags&32768?(He||c===1?s=!0:ea||(Oe&536870912)!==0?s=!1:(Ks=s=!0,(c===2||c===9||c===3||c===6)&&(c=bn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Tv(r,s)):Kc(r)}function Kc(s){var r=s;do{if((r.flags&32768)!==0){Tv(r,Ks);return}s=r.return;var l=Ww(r.alternate,r,us);if(l!==null){Ve=l;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=s}while(r!==null);yt===0&&(yt=5)}function Tv(s,r){do{var l=Zw(s.alternate,s);if(l!==null){l.flags&=32767,Ve=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ve=s;return}Ve=s=l}while(s!==null);yt=6,Ve=null}function Av(s,r,l,c,y,v,S,w,U){s.cancelPendingCommit=null;do Yc();while(Bt!==0);if((Ze&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=Qd,Bd(s,l,v,S,w,U),s===at&&(Ve=at=null,Oe=0),na=r,$s=s,cs=l,ip=v,sp=y,fv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,cR(Is,function(){return Rv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,y=re.p,re.p=2,S=Ze,Ze|=4;try{jw(s,r,l)}finally{Ze=S,re.p=y,Y.T=c}}Bt=1,Sv(),Cv(),Iv()}}function Sv(){if(Bt===1){Bt=0;var s=$s,r=na,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var c=re.p;re.p=2;var y=Ze;Ze|=4;try{iv(r,s);var v=vp,S=uy(s.containerInfo),w=v.focusedElem,U=v.selectionRange;if(S!==w&&w&&w.ownerDocument&&ly(w.ownerDocument.documentElement,w)){if(U!==null&&zd(w)){var K=U.start,W=U.end;if(W===void 0&&(W=K),"selectionStart"in w)w.selectionStart=K,w.selectionEnd=Math.min(W,w.value.length);else{var te=w.ownerDocument||document,J=te&&te.defaultView||window;if(J.getSelection){var X=J.getSelection(),ye=w.textContent.length,Se=Math.min(U.start,ye),ot=U.end===void 0?Se:Math.min(U.end,ye);!X.extend&&Se>ot&&(S=ot,ot=Se,Se=S);var G=ay(w,Se),F=ay(w,ot);if(G&&F&&(X.rangeCount!==1||X.anchorNode!==G.node||X.anchorOffset!==G.offset||X.focusNode!==F.node||X.focusOffset!==F.offset)){var z=te.createRange();z.setStart(G.node,G.offset),X.removeAllRanges(),Se>ot?(X.addRange(z),X.extend(F.node,F.offset)):(z.setEnd(F.node,F.offset),X.addRange(z))}}}}for(te=[],X=w;X=X.parentNode;)X.nodeType===1&&te.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var j=te[w];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}rf=!!_p,vp=_p=null}finally{Ze=y,re.p=c,Y.T=l}}s.current=r,Bt=2}}function Cv(){if(Bt===2){Bt=0;var s=$s,r=na,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var c=re.p;re.p=2;var y=Ze;Ze|=4;try{Z_(s,r.alternate,r)}finally{Ze=y,re.p=c,Y.T=l}}Bt=3}}function Iv(){if(Bt===4||Bt===3){Bt=0,Uu();var s=$s,r=na,l=cs,c=fv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bt=5:(Bt=0,na=$s=null,wv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Js=null),Ji(l),r=r.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(jn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,y=re.p,re.p=2,Y.T=null;try{for(var v=s.onRecoverableError,S=0;S<c.length;S++){var w=c[S];v(w.value,{componentStack:w.stack})}}finally{Y.T=r,re.p=y}}(cs&3)!==0&&Yc(),Oi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===rp?Ol++:(Ol=0,rp=s):Ol=0,Fl(0)}}function wv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,vl(r)))}function Yc(){return Sv(),Cv(),Iv(),Rv()}function Rv(){if(Bt!==5)return!1;var s=$s,r=ip;ip=0;var l=Ji(cs),c=Y.T,y=re.p;try{re.p=32>l?32:l,Y.T=null,l=sp,sp=null;var v=$s,S=cs;if(Bt=0,na=$s=null,cs=0,(Ze&6)!==0)throw Error(i(331));var w=Ze;if(Ze|=4,lv(v.current),rv(v,v.current,S,l),Ze=w,Fl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(jn,v)}catch{}return!0}finally{re.p=y,Y.T=c,wv(s,r)}}function bv(s,r,l){r=qn(l,r),r=Lh(s.stateNode,r,2),s=qs(s,r,2),s!==null&&(xr(s,2),Oi(s))}function nt(s,r,l){if(s.tag===3)bv(s,s,l);else for(;r!==null;){if(r.tag===3){bv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Js===null||!Js.has(c))){s=qn(l,s),l=N_(2),c=qs(r,l,2),c!==null&&(x_(l,c,r,s),xr(c,2),Oi(c));break}}r=r.return}}function lp(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new nR;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(ep=!0,y.add(l),s=aR.bind(null,s,r,l),r.then(s,s))}function aR(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,at===s&&(Oe&l)===l&&(yt===4||yt===3&&(Oe&62914560)===Oe&&300>cn()-Bc?(Ze&2)===0&&ia(s,0):tp|=l,ta===Oe&&(ta=0)),Oi(s)}function Nv(s,r){r===0&&(r=Gu()),s=zr(s,r),s!==null&&(xr(s,r),Oi(s))}function lR(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),Nv(s,l)}function uR(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Nv(s,l)}function cR(s,r){return Ft(s,r)}var Jc=null,ra=null,up=!1,$c=!1,cp=!1,Xs=0;function Oi(s){s!==ra&&s.next===null&&(ra===null?Jc=ra=s:ra=ra.next=s),$c=!0,up||(up=!0,dR())}function Fl(s,r){if(!cp&&$c){cp=!0;do for(var l=!1,c=Jc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var S=c.suspendedLanes,w=c.pingedLanes;v=(1<<31-_t(42|s)+1)-1,v&=y&~(S&~w),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,kv(c,v))}else v=Oe,v=Ei(c,c===at?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||ei(c,v)||(l=!0,kv(c,v));c=c.next}while(l);cp=!1}}function fR(){xv()}function xv(){$c=up=!1;var s=0;Xs!==0&&AR()&&(s=Xs);for(var r=cn(),l=null,c=Jc;c!==null;){var y=c.next,v=Dv(c,r);v===0?(c.next=null,l===null?Jc=y:l.next=y,y===null&&(ra=l)):(l=c,(s!==0||(v&3)!==0)&&($c=!0)),c=y}Bt!==0&&Bt!==5||Fl(s),Xs!==0&&(Xs=0)}function Dv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var S=31-_t(v),w=1<<S,U=y[S];U===-1?((w&l)===0||(w&c)!==0)&&(y[S]=Fd(w,r)):U<=r&&(s.expiredLanes|=w),v&=~w}if(r=at,l=Oe,l=Ei(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(tt===2||tt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Cs(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||ei(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Cs(c),Ji(l)){case 2:case 8:l=Qa;break;case 32:l=Is;break;case 268435456:l=Lu;break;default:l=Is}return c=Mv.bind(null,s),l=Ft(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Cs(c),s.callbackPriority=2,s.callbackNode=null,2}function Mv(s,r){if(Bt!==0&&Bt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Yc()&&s.callbackNode!==l)return null;var c=Oe;return c=Ei(s,s===at?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(hv(s,c,r),Dv(s,cn()),s.callbackNode!=null&&s.callbackNode===l?Mv.bind(null,s):null)}function kv(s,r){if(Yc())return null;hv(s,r,!0)}function dR(){CR(function(){(Ze&6)!==0?Ft($a,fR):xv()})}function fp(){if(Xs===0){var s=zo;s===0&&(s=_i,_i<<=1,(_i&261888)===0&&(_i=256)),Xs=s}return Xs}function Pv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:No(""+s)}function Vv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function hR(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var v=Pv((y[Ht]||null).action),S=c.submitter;S&&(r=(r=S[Ht]||null)?Pv(r.formAction):S.getAttribute("formAction"),r!==null&&(v=r,S=null));var w=new Di("action","action",null,c,y);s.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Xs!==0){var U=S?Vv(y,S):new FormData(y);Dh(l,{pending:!0,data:U,method:y.method,action:v},null,U)}}else typeof v=="function"&&(w.preventDefault(),U=S?Vv(y,S):new FormData(y),Dh(l,{pending:!0,data:U,method:y.method,action:v},v,U))},currentTarget:y}]})}}for(var dp=0;dp<$d.length;dp++){var hp=$d[dp],pR=hp.toLowerCase(),mR=hp[0].toUpperCase()+hp.slice(1);li(pR,"on"+mR)}li(dy,"onAnimationEnd"),li(hy,"onAnimationIteration"),li(py,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(Dw,"onTransitionRun"),li(Mw,"onTransitionStart"),li(kw,"onTransitionCancel"),li(my,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function Uv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var S=c.length-1;0<=S;S--){var w=c[S],U=w.instance,K=w.currentTarget;if(w=w.listener,U!==v&&y.isPropagationStopped())break e;v=w,y.currentTarget=K;try{v(y)}catch(W){uc(W)}y.currentTarget=null,v=U}else for(S=0;S<c.length;S++){if(w=c[S],U=w.instance,K=w.currentTarget,w=w.listener,U!==v&&y.isPropagationStopped())break e;v=w,y.currentTarget=K;try{v(y)}catch(W){uc(W)}y.currentTarget=null,v=U}}}}function Ue(s,r){var l=r[Co];l===void 0&&(l=r[Co]=new Set);var c=s+"__bubble";l.has(c)||(Lv(r,s,2,!1),l.add(c))}function pp(s,r,l){var c=0;r&&(c|=4),Lv(l,s,c,r)}var Qc="_reactListening"+Math.random().toString(36).slice(2);function mp(s){if(!s[Qc]){s[Qc]=!0,Za.forEach(function(l){l!=="selectionchange"&&(gR.has(l)||pp(l,!1,s),pp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Qc]||(r[Qc]=!0,pp("selectionchange",!1,r))}}function Lv(s,r,l,c){switch(dE(r)){case 2:var y=zR;break;case 8:y=KR;break;default:y=xp}l=y.bind(null,r,l,s),y=void 0,!Ur||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function gp(s,r,l,c,y){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var w=c.stateNode.containerInfo;if(w===y)break;if(S===4)for(S=c.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;w!==null;){if(S=Ci(w),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){c=v=S;continue e}w=w.parentNode}}c=c.return}Ds(function(){var K=v,W=Ln(l),te=[];e:{var J=gy.get(s);if(J!==void 0){var X=Di,ye=s;switch(s){case"keypress":if(Or(l)===0)break e;case"keydown":case"keyup":X=oc;break;case"focusin":ye="focus",X=Br;break;case"focusout":ye="blur",X=Br;break;case"beforeblur":case"afterblur":X=Br;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=T;break;case dy:case hy:case py:X=ju;break;case my:X=R;break;case"scroll":case"scrollend":X=cl;break;case"wheel":X=$;break;case"copy":case"cut":case"paste":X=ec;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Xi;break;case"toggle":case"beforetoggle":X=De}var Se=(r&4)!==0,ot=!Se&&(s==="scroll"||s==="scrollend"),G=Se?J!==null?J+"Capture":null:J;Se=[];for(var F=K,z;F!==null;){var j=F;if(z=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||z===null||G===null||(j=si(F,G),j!=null&&Se.push(ql(F,j,z))),ot)break;F=F.return}0<Se.length&&(J=new X(J,ye,null,l,W),te.push({event:J,listeners:Se}))}}if((r&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",J&&l!==al&&(ye=l.relatedTarget||l.fromElement)&&(Ci(ye)||ye[Ai]))break e;if((X||J)&&(J=W.window===W?W:(J=W.ownerDocument)?J.defaultView||J.parentWindow:window,X?(ye=l.relatedTarget||l.toElement,X=K,ye=ye?Ci(ye):null,ye!==null&&(ot=a(ye),Se=ye.tag,ye!==ot||Se!==5&&Se!==27&&Se!==6)&&(ye=null)):(X=null,ye=K),X!==ye)){if(Se=fl,j="onMouseLeave",G="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Se=Xi,j="onPointerLeave",G="onPointerEnter",F="pointer"),ot=X==null?J:Cn(X),z=ye==null?J:Cn(ye),J=new Se(j,F+"leave",X,l,W),J.target=ot,J.relatedTarget=z,j=null,Ci(W)===K&&(Se=new Se(G,F+"enter",ye,l,W),Se.target=z,Se.relatedTarget=ot,j=Se),ot=j,X&&ye)t:{for(Se=yR,G=X,F=ye,z=0,j=G;j;j=Se(j))z++;j=0;for(var Ee=F;Ee;Ee=Se(Ee))j++;for(;0<z-j;)G=Se(G),z--;for(;0<j-z;)F=Se(F),j--;for(;z--;){if(G===F||F!==null&&G===F.alternate){Se=G;break t}G=Se(G),F=Se(F)}Se=null}else Se=null;X!==null&&Ov(te,J,X,Se,!1),ye!==null&&ot!==null&&Ov(te,ot,ye,Se,!0)}}e:{if(J=K?Cn(K):window,X=J.nodeName&&J.nodeName.toLowerCase(),X==="select"||X==="input"&&J.type==="file")var $e=ty;else if(jg(J))if(ny)$e=bw;else{$e=ww;var _e=Iw}else X=J.nodeName,!X||X.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?K&&bo(K.elementType)&&($e=ty):$e=Rw;if($e&&($e=$e(s,K))){ey(te,$e,l,W);break e}_e&&_e(s,J,K),s==="focusout"&&K&&J.type==="number"&&K.memoizedProps.value!=null&&sl(J,"number",J.value)}switch(_e=K?Cn(K):window,s){case"focusin":(jg(_e)||_e.contentEditable==="true")&&(Uo=_e,Kd=K,gl=null);break;case"focusout":gl=Kd=Uo=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,cy(te,l,W);break;case"selectionchange":if(xw)break;case"keydown":case"keyup":cy(te,l,W)}var Pe;if(We)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Vo?qr(s,l)&&(Fe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(Pi&&l.locale!=="ko"&&(Vo||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Vo&&(Pe=ul()):(xi=W,ll="value"in xi?xi.value:xi.textContent,Vo=!0)),_e=Xc(K,Fe),0<_e.length&&(Fe=new ki(Fe,s,null,l,W),te.push({event:Fe,listeners:_e}),Pe?Fe.data=Pe:(Pe=Po(l),Pe!==null&&(Fe.data=Pe)))),(Pe=Fn?Tw(s,l):Aw(s,l))&&(Fe=Xc(K,"onBeforeInput"),0<Fe.length&&(_e=new ki("onBeforeInput","beforeinput",null,l,W),te.push({event:_e,listeners:Fe}),_e.data=Pe)),hR(te,s,K,l,W)}Uv(te,r)})}function ql(s,r,l){return{instance:s,listener:r,currentTarget:l}}function Xc(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=si(s,l),y!=null&&c.unshift(ql(s,y,v)),y=si(s,r),y!=null&&c.push(ql(s,y,v))),s.tag===3)return c;s=s.return}return[]}function yR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Ov(s,r,l,c,y){for(var v=r._reactName,S=[];l!==null&&l!==c;){var w=l,U=w.alternate,K=w.stateNode;if(w=w.tag,U!==null&&U===c)break;w!==5&&w!==26&&w!==27||K===null||(U=K,y?(K=si(l,v),K!=null&&S.unshift(ql(l,K,U))):y||(K=si(l,v),K!=null&&S.push(ql(l,K,U)))),l=l.return}S.length!==0&&s.push({event:r,listeners:S})}var _R=/\r\n?/g,vR=/\u0000|\uFFFD/g;function Fv(s){return(typeof s=="string"?s:""+s).replace(_R,`
`).replace(vR,"")}function Bv(s,r){return r=Fv(r),Fv(s)===r}function rt(s,r,l,c,y,v){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||gn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&gn(s,""+c);break;case"className":In(s,"class",c);break;case"tabIndex":In(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":In(s,l,c);break;case"style":ol(s,c,v);break;case"data":if(r!=="object"){In(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=No(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&rt(s,r,"name",y.name,y,null),rt(s,r,"formEncType",y.formEncType,y,null),rt(s,r,"formMethod",y.formMethod,y,null),rt(s,r,"formTarget",y.formTarget,y,null)):(rt(s,r,"encType",y.encType,y,null),rt(s,r,"method",y.method,y,null),rt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=No(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ii);break;case"onScroll":c!=null&&Ue("scroll",s);break;case"onScrollEnd":c!=null&&Ue("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=No(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Ue("beforetoggle",s),Ue("toggle",s),wo(s,"popover",c);break;case"xlinkActuate":Nt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Nt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Nt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Nt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Nt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Nt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Nt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Nt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Nt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":wo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Xu.get(l)||l,wo(s,l,c))}}function yp(s,r,l,c,y,v){switch(l){case"style":ol(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?gn(s,c):(typeof c=="number"||typeof c=="bigint")&&gn(s,""+c);break;case"onScroll":c!=null&&Ue("scroll",s);break;case"onScrollEnd":c!=null&&Ue("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ja.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),v=s[Ht]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(r,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):wo(s,l,c)}}}function jt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",s),Ue("load",s);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var S=l[v];if(S!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,v,S,l,null)}}y&&rt(s,r,"srcSet",l.srcSet,l,null),c&&rt(s,r,"src",l.src,l,null);return;case"input":Ue("invalid",s);var w=v=S=y=null,U=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var W=l[c];if(W!=null)switch(c){case"name":y=W;break;case"type":S=W;break;case"checked":U=W;break;case"defaultChecked":K=W;break;case"value":v=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:rt(s,r,c,W,l,null)}}Ju(s,v,w,U,K,S,y,!1);return;case"select":Ue("invalid",s),c=S=v=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":v=w;break;case"defaultValue":S=w;break;case"multiple":c=w;default:rt(s,r,y,w,l,null)}r=v,l=S,s.multiple=!!c,r!=null?Rs(s,!!c,r,!1):l!=null&&Rs(s,!!c,l,!0);return;case"textarea":Ue("invalid",s),v=y=c=null;for(S in l)if(l.hasOwnProperty(S)&&(w=l[S],w!=null))switch(S){case"value":c=w;break;case"defaultValue":y=w;break;case"children":v=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:rt(s,r,S,w,l,null)}bs(s,c,y,v);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(c=l[U],c!=null))switch(U){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:rt(s,r,U,c,l,null)}return;case"dialog":Ue("beforetoggle",s),Ue("toggle",s),Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":Ue("load",s);break;case"video":case"audio":for(c=0;c<Bl.length;c++)Ue(Bl[c],s);break;case"image":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"embed":case"source":case"link":Ue("error",s),Ue("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,K,c,l,null)}return;default:if(bo(r)){for(W in l)l.hasOwnProperty(W)&&(c=l[W],c!==void 0&&yp(s,r,W,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&rt(s,r,w,c,l,null))}function ER(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,S=null,w=null,U=null,K=null,W=null;for(X in l){var te=l[X];if(l.hasOwnProperty(X)&&te!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":U=te;default:c.hasOwnProperty(X)||rt(s,r,X,null,c,te)}}for(var J in c){var X=c[J];if(te=l[J],c.hasOwnProperty(J)&&(X!=null||te!=null))switch(J){case"type":v=X;break;case"name":y=X;break;case"checked":K=X;break;case"defaultChecked":W=X;break;case"value":S=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:X!==te&&rt(s,r,J,X,c,te)}}Ro(s,S,w,U,K,W,v,y);return;case"select":X=S=w=J=null;for(v in l)if(U=l[v],l.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":X=U;default:c.hasOwnProperty(v)||rt(s,r,v,null,c,U)}for(y in c)if(v=c[y],U=l[y],c.hasOwnProperty(y)&&(v!=null||U!=null))switch(y){case"value":J=v;break;case"defaultValue":w=v;break;case"multiple":S=v;default:v!==U&&rt(s,r,y,v,c,U)}r=w,l=S,c=X,J!=null?Rs(s,!!l,J,!1):!!c!=!!l&&(r!=null?Rs(s,!!l,r,!0):Rs(s,!!l,l?[]:"",!1));return;case"textarea":X=J=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:rt(s,r,w,null,c,y)}for(S in c)if(y=c[S],v=l[S],c.hasOwnProperty(S)&&(y!=null||v!=null))switch(S){case"value":J=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&rt(s,r,S,y,c,v)}$u(s,J,X);return;case"option":for(var ye in l)if(J=l[ye],l.hasOwnProperty(ye)&&J!=null&&!c.hasOwnProperty(ye))switch(ye){case"selected":s.selected=!1;break;default:rt(s,r,ye,null,c,J)}for(U in c)if(J=c[U],X=l[U],c.hasOwnProperty(U)&&J!==X&&(J!=null||X!=null))switch(U){case"selected":s.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:rt(s,r,U,J,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)J=l[Se],l.hasOwnProperty(Se)&&J!=null&&!c.hasOwnProperty(Se)&&rt(s,r,Se,null,c,J);for(K in c)if(J=c[K],X=l[K],c.hasOwnProperty(K)&&J!==X&&(J!=null||X!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,r));break;default:rt(s,r,K,J,c,X)}return;default:if(bo(r)){for(var ot in l)J=l[ot],l.hasOwnProperty(ot)&&J!==void 0&&!c.hasOwnProperty(ot)&&yp(s,r,ot,void 0,c,J);for(W in c)J=c[W],X=l[W],!c.hasOwnProperty(W)||J===X||J===void 0&&X===void 0||yp(s,r,W,J,c,X);return}}for(var G in l)J=l[G],l.hasOwnProperty(G)&&J!=null&&!c.hasOwnProperty(G)&&rt(s,r,G,null,c,J);for(te in c)J=c[te],X=l[te],!c.hasOwnProperty(te)||J===X||J==null&&X==null||rt(s,r,te,J,c,X)}function qv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,S=y.initiatorType,w=y.duration;if(v&&w&&qv(S)){for(S=0,w=y.responseEnd,c+=1;c<l.length;c++){var U=l[c],K=U.startTime;if(K>w)break;var W=U.transferSize,te=U.initiatorType;W&&qv(te)&&(U=U.responseEnd,S+=W*(U<w?1:(w-K)/(U-K)))}if(--c,r+=8*(v+S)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var _p=null,vp=null;function Wc(s){return s.nodeType===9?s:s.ownerDocument}function Gv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Ep(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Tp=null;function AR(){var s=window.event;return s&&s.type==="popstate"?s===Tp?!1:(Tp=s,!0):(Tp=null,!1)}var zv=typeof setTimeout=="function"?setTimeout:void 0,SR=typeof clearTimeout=="function"?clearTimeout:void 0,Kv=typeof Promise=="function"?Promise:void 0,CR=typeof queueMicrotask=="function"?queueMicrotask:typeof Kv<"u"?function(s){return Kv.resolve(null).then(s).catch(IR)}:zv;function IR(s){setTimeout(function(){throw s})}function Ws(s){return s==="head"}function Yv(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),ua(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Gl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Gl(l);for(var v=l.firstChild;v;){var S=v.nextSibling,w=v.nodeName;v[Si]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=S}}else l==="body"&&Gl(s.ownerDocument.body);l=y}while(l);ua(r)}function Jv(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Ap(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ap(l),Io(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function wR(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Si])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Yn(s.nextSibling),s===null)break}return null}function RR(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Yn(s.nextSibling),s===null))return null;return s}function $v(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Yn(s.nextSibling),s===null))return null;return s}function Sp(s){return s.data==="$?"||s.data==="$~"}function Cp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function bR(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Yn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Ip=null;function Qv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Yn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function Xv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function Wv(s,r,l){switch(r=Wc(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Gl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Io(s)}var Jn=new Map,Zv=new Set;function Zc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var fs=re.d;re.d={f:NR,r:xR,D:DR,C:MR,L:kR,m:PR,X:UR,S:VR,M:LR};function NR(){var s=fs.f(),r=Hc();return s||r}function xR(s){var r=Un(s);r!==null&&r.tag===5&&r.type==="form"?m_(r):fs.r(s)}var oa=typeof document>"u"?null:document;function jv(s,r,l){var c=oa;if(c&&typeof r=="string"&&r){var y=mn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Zv.has(y)||(Zv.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),jt(r,"link",s),bt(r),c.head.appendChild(r)))}}function DR(s){fs.D(s),jv("dns-prefetch",s,null)}function MR(s,r){fs.C(s,r),jv("preconnect",s,r)}function kR(s,r,l){fs.L(s,r,l);var c=oa;if(c&&s&&r){var y='link[rel="preload"][as="'+mn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+mn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+mn(l.imageSizes)+'"]')):y+='[href="'+mn(s)+'"]';var v=y;switch(r){case"style":v=aa(s);break;case"script":v=la(s)}Jn.has(v)||(s=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Jn.set(v,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Hl(v))||r==="script"&&c.querySelector(zl(v))||(r=c.createElement("link"),jt(r,"link",s),bt(r),c.head.appendChild(r)))}}function PR(s,r){fs.m(s,r);var l=oa;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+mn(c)+'"][href="'+mn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=la(s)}if(!Jn.has(v)&&(s=E({rel:"modulepreload",href:s},r),Jn.set(v,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(zl(v)))return}c=l.createElement("link"),jt(c,"link",s),bt(c),l.head.appendChild(c)}}}function VR(s,r,l){fs.S(s,r,l);var c=oa;if(c&&s){var y=Ii(c).hoistableStyles,v=aa(s);r=r||"default";var S=y.get(v);if(!S){var w={loading:0,preload:null};if(S=c.querySelector(Hl(v)))w.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Jn.get(v))&&wp(s,l);var U=S=c.createElement("link");bt(U),jt(U,"link",s),U._p=new Promise(function(K,W){U.onload=K,U.onerror=W}),U.addEventListener("load",function(){w.loading|=1}),U.addEventListener("error",function(){w.loading|=2}),w.loading|=4,jc(S,r,c)}S={type:"stylesheet",instance:S,count:1,state:w},y.set(v,S)}}}function UR(s,r){fs.X(s,r);var l=oa;if(l&&s){var c=Ii(l).hoistableScripts,y=la(s),v=c.get(y);v||(v=l.querySelector(zl(y)),v||(s=E({src:s,async:!0},r),(r=Jn.get(y))&&Rp(s,r),v=l.createElement("script"),bt(v),jt(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function LR(s,r){fs.M(s,r);var l=oa;if(l&&s){var c=Ii(l).hoistableScripts,y=la(s),v=c.get(y);v||(v=l.querySelector(zl(y)),v||(s=E({src:s,async:!0,type:"module"},r),(r=Jn.get(y))&&Rp(s,r),v=l.createElement("script"),bt(v),jt(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function eE(s,r,l,c){var y=(y=ke.current)?Zc(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=aa(l.href),l=Ii(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=aa(l.href);var v=Ii(y).hoistableStyles,S=v.get(s);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,S),(v=y.querySelector(Hl(s)))&&!v._p&&(S.instance=v,S.state.loading=5),Jn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Jn.set(s,l),v||OR(y,s,l,S.state))),r&&c===null)throw Error(i(528,""));return S}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=la(l),l=Ii(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function aa(s){return'href="'+mn(s)+'"'}function Hl(s){return'link[rel="stylesheet"]['+s+"]"}function tE(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function OR(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),jt(r,"link",l),bt(r),s.head.appendChild(r))}function la(s){return'[src="'+mn(s)+'"]'}function zl(s){return"script[async]"+s}function nE(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+mn(l.href)+'"]');if(c)return r.instance=c,bt(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),bt(c),jt(c,"style",y),jc(c,l.precedence,s),r.instance=c;case"stylesheet":y=aa(l.href);var v=s.querySelector(Hl(y));if(v)return r.state.loading|=4,r.instance=v,bt(v),v;c=tE(l),(y=Jn.get(y))&&wp(c,y),v=(s.ownerDocument||s).createElement("link"),bt(v);var S=v;return S._p=new Promise(function(w,U){S.onload=w,S.onerror=U}),jt(v,"link",c),r.state.loading|=4,jc(v,l.precedence,s),r.instance=v;case"script":return v=la(l.src),(y=s.querySelector(zl(v)))?(r.instance=y,bt(y),y):(c=l,(y=Jn.get(v))&&(c=E({},l),Rp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),bt(y),jt(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,jc(c,l.precedence,s));return r.instance}function jc(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,S=0;S<c.length;S++){var w=c[S];if(w.dataset.precedence===r)v=w;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function wp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Rp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var ef=null;function iE(s,r,l){if(ef===null){var c=new Map,y=ef=new Map;y.set(l,c)}else y=ef,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var v=l[y];if(!(v[Si]||v[Rt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(r)||"";S=s+S;var w=c.get(S);w?w.push(v):c.set(S,[v])}}return c}function sE(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function FR(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function rE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function BR(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=aa(c.href),v=r.querySelector(Hl(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=tf.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=v,bt(v);return}v=r.ownerDocument||r,c=tE(c),(y=Jn.get(y))&&wp(c,y),v=v.createElement("link"),bt(v);var S=v;S._p=new Promise(function(w,U){S.onload=w,S.onerror=U}),jt(v,"link",c),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=tf.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var bp=0;function qR(s,r){return s.stylesheets&&s.count===0&&sf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&sf(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+r);0<s.imgBytes&&bp===0&&(bp=62500*TR());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&sf(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>bp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var nf=null;function sf(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,nf=new Map,r.forEach(GR,s),nf=null,tf.call(s))}function GR(s,r){if(!(r.state.loading&4)){var l=nf.get(s);if(l)var c=l.get(null);else{l=new Map,nf.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var S=y[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),c=S)}c&&l.set(null,c)}y=r.instance,S=y.getAttribute("data-precedence"),v=l.get(S)||c,v===c&&l.set(null,y),l.set(S,y),this.count++,c=tf.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Kl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function HR(s,r,l,c,y,v,S,w,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function oE(s,r,l,c,y,v,S,w,U,K,W,te){return s=new HR(s,r,l,S,U,K,W,te,w),r=1,v===!0&&(r|=24),v=Rn(3,null,null,r),s.current=v,v.stateNode=s,r=ah(),r.refCount++,s.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:r},fh(v),s}function aE(s){return s?(s=Fo,s):Fo}function lE(s,r,l,c,y,v){y=aE(y),c.context===null?c.context=y:c.pendingContext=y,c=Bs(r),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=qs(s,c,r),l!==null&&(Tn(l,s,r),Sl(l,s,r))}function uE(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Np(s,r){uE(s,r),(s=s.alternate)&&uE(s,r)}function cE(s){if(s.tag===13||s.tag===31){var r=zr(s,67108864);r!==null&&Tn(r,s,67108864),Np(s,67108864)}}function fE(s){if(s.tag===13||s.tag===31){var r=Mn();r=Mr(r);var l=zr(s,r);l!==null&&Tn(l,s,r),Np(s,r)}}var rf=!0;function zR(s,r,l,c){var y=Y.T;Y.T=null;var v=re.p;try{re.p=2,xp(s,r,l,c)}finally{re.p=v,Y.T=y}}function KR(s,r,l,c){var y=Y.T;Y.T=null;var v=re.p;try{re.p=8,xp(s,r,l,c)}finally{re.p=v,Y.T=y}}function xp(s,r,l,c){if(rf){var y=Dp(c);if(y===null)gp(s,r,c,of,l),hE(s,c);else if(JR(y,s,r,l,c))c.stopPropagation();else if(hE(s,c),r&4&&-1<YR.indexOf(s)){for(;y!==null;){var v=Un(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=vi(v.pendingLanes);if(S!==0){var w=v;for(w.pendingLanes|=2,w.entangledLanes|=2;S;){var U=1<<31-_t(S);w.entanglements[1]|=U,S&=~U}Oi(v),(Ze&6)===0&&(qc=cn()+500,Fl(0))}}break;case 31:case 13:w=zr(v,2),w!==null&&Tn(w,v,2),Hc(),Np(v,2)}if(v=Dp(c),v===null&&gp(s,r,c,of,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else gp(s,r,c,null,l)}}function Dp(s){return s=Ln(s),Mp(s)}var of=null;function Mp(s){if(of=null,s=Ci(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return of=s,null}function dE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(br()){case $a:return 2;case Qa:return 8;case Is:case Od:return 32;case Lu:return 268435456;default:return 32}default:return 32}}var kp=!1,Zs=null,js=null,er=null,Yl=new Map,Jl=new Map,tr=[],YR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hE(s,r){switch(s){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Yl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(r.pointerId)}}function $l(s,r,l,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},r!==null&&(r=Un(r),r!==null&&cE(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function JR(s,r,l,c,y){switch(r){case"focusin":return Zs=$l(Zs,s,r,l,c,y),!0;case"dragenter":return js=$l(js,s,r,l,c,y),!0;case"mouseover":return er=$l(er,s,r,l,c,y),!0;case"pointerover":var v=y.pointerId;return Yl.set(v,$l(Yl.get(v)||null,s,r,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,Jl.set(v,$l(Jl.get(v)||null,s,r,l,c,y)),!0}return!1}function pE(s){var r=Ci(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,ti(s.priority,function(){fE(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,ti(s.priority,function(){fE(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function af(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Dp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);al=c,l.target.dispatchEvent(c),al=null}else return r=Un(l),r!==null&&cE(r),s.blockedOn=l,!1;r.shift()}return!0}function mE(s,r,l){af(s)&&l.delete(r)}function $R(){kp=!1,Zs!==null&&af(Zs)&&(Zs=null),js!==null&&af(js)&&(js=null),er!==null&&af(er)&&(er=null),Yl.forEach(mE),Jl.forEach(mE)}function lf(s,r){s.blockedOn===r&&(s.blockedOn=null,kp||(kp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$R)))}var uf=null;function gE(s){uf!==s&&(uf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){uf===s&&(uf=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Mp(c||l)===null)continue;break}var v=Un(l);v!==null&&(s.splice(r,3),r-=3,Dh(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function ua(s){function r(U){return lf(U,s)}Zs!==null&&lf(Zs,s),js!==null&&lf(js,s),er!==null&&lf(er,s),Yl.forEach(r),Jl.forEach(r);for(var l=0;l<tr.length;l++){var c=tr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<tr.length&&(l=tr[0],l.blockedOn===null);)pE(l),l.blockedOn===null&&tr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],S=y[Ht]||null;if(typeof v=="function")S||gE(l);else if(S){var w=null;if(v&&v.hasAttribute("formAction")){if(y=v,S=v[Ht]||null)w=S.formAction;else if(Mp(y)!==null)continue}else w=S.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),gE(l)}}}function yE(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Pp(s){this._internalRoot=s}cf.prototype.render=Pp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Mn();lE(l,c,s,r,null,null)},cf.prototype.unmount=Pp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;lE(s.current,2,null,s,null,null),Hc(),r[Ai]=null}};function cf(s){this._internalRoot=s}cf.prototype.unstable_scheduleHydration=function(s){if(s){var r=Hu();s={blockedOn:null,target:s,priority:r};for(var l=0;l<tr.length&&r!==0&&r<tr[l].priority;l++);tr.splice(l,0,s),l===0&&pE(s)}};var _E=e.version;if(_E!=="19.2.3")throw Error(i(527,_E,"19.2.3"));re.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var QR={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{jn=ff.inject(QR),$t=ff}catch{}}return Xl.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=I_,v=w_,S=R_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=oE(s,1,!1,null,null,l,c,null,y,v,S,yE),s[Ai]=r.current,mp(s),new Pp(r)},Xl.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",v=I_,S=w_,w=R_,U=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.formState!==void 0&&(U=l.formState)),r=oE(s,1,!0,r,l??null,c,y,U,v,S,w,yE),r.context=aE(null),l=r.current,c=Mn(),c=Mr(c),y=Bs(c),y.callback=null,qs(l,y,c),l=c,r.current.lanes=l,xr(r,l),Oi(r),s[Ai]=r.current,mp(s),new cf(r)},Xl.version="19.2.3",Xl}var bE;function o1(){if(bE)return Lp.exports;bE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lp.exports=r1(),Lp.exports}var a1=o1();const l1=qA(a1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),c1=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),NE=n=>{const e=c1(n);return e.charAt(0).toUpperCase()+e.slice(1)},GA=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),f1=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=Ae.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...d},m)=>Ae.createElement("svg",{ref:m,...d1,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:GA("lucide",o),...!a&&!f1(d)&&{"aria-hidden":"true"},...d},[...u.map(([h,_])=>Ae.createElement(h,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(n,e)=>{const t=Ae.forwardRef(({className:i,...o},a)=>Ae.createElement(h1,{ref:a,iconNode:e,className:GA(`lucide-${u1(NE(n))}`,`lucide-${n}`,i),...o}));return t.displayName=NE(n),t};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Cf=ze("arrow-right",p1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],HA=ze("book-open",m1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],nm=ze("book",g1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],zA=ze("bookmark",y1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],KA=ze("camera",_1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],E1=ze("chevron-right",v1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],A1=ze("chevron-left",T1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],C1=ze("circle-alert",S1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],im=ze("circle-check-big",I1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xE=ze("circle-check",w1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],b1=ze("circle-user",R1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],x1=ze("circle-x",N1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],M1=ze("download",D1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],P1=ze("graduation-cap",k1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],U1=ze("history",V1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Lf=ze("key",L1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],F1=ze("layers",O1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],oo=ze("loader-circle",B1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],G1=ze("lock",q1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],z1=ze("log-in",H1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Y1=ze("log-out",K1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],$1=ze("mail",J1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],X1=ze("moon",Q1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Of=ze("play",W1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],j1=ze("refresh-cw",Z1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],tb=ze("save",eb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YA=ze("settings",nb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],JA=ze("shield-check",ib);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],$A=ze("sparkles",sb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ob=ze("sun",rb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],QA=ze("trash-2",ab);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],DE=ze("upload",lb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],cb=ze("user-plus",ub);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],XA=ze("user",fb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hb=ze("x",db);var St=(n=>(n.HOME="HOME",n.ANALYZE="ANALYZE",n.VOCAB="VOCAB",n.HISTORY="HISTORY",n.SETTINGS="SETTINGS",n))(St||{});const pb=()=>{};var ME={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},mb=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],m=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},ZA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,m=o+2<n.length,h=m?n[o+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let A=(d&15)<<2|h>>6,I=h&63;m||(I=64,u||(A=64)),i.push(t[_],t[E],t[A],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(WA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):mb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||h==null||E==null)throw new gb;const A=a<<2|d>>4;if(i.push(A),h!==64){const I=d<<4&240|h>>2;if(i.push(I),E!==64){const P=h<<6&192|E;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class gb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yb=function(n){const e=WA(n);return ZA.encodeByteArray(e,!0)},Ff=function(n){return yb(n).replace(/\./g,"")},jA=function(n){try{return ZA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=()=>_b().__FIREBASE_DEFAULTS__,Eb=()=>{if(typeof process>"u"||typeof ME>"u")return;const n=ME.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Tb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&jA(n[1]);return e&&JSON.parse(e)},ud=()=>{try{return pb()||vb()||Eb()||Tb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},eS=n=>{var e,t;return(t=(e=ud())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Ab=n=>{const e=eS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},tS=()=>{var n;return(n=ud())==null?void 0:n.config},nS=n=>{var e;return(e=ud())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ff(JSON.stringify(t)),Ff(JSON.stringify(u)),""].join(".")}const ru={};function Ib(){const n={prod:[],emulator:[]};for(const e of Object.keys(ru))ru[e]?n.emulator.push(e):n.prod.push(e);return n}function wb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let kE=!1;function sS(n,e){if(typeof window>"u"||typeof document>"u"||!Pa(window.location.host)||ru[n]===e||ru[n]||kE)return;ru[n]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",a=Ib().prod.length>0;function u(){const A=document.getElementById(i);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,I){A.setAttribute("width","24"),A.setAttribute("id",I),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function h(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{kE=!0,u()},A}function _(A,I){A.setAttribute("id",I),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=wb(i),I=t("text"),P=document.getElementById(I)||document.createElement("span"),B=t("learnmore"),L=document.getElementById(B)||document.createElement("a"),Q=t("preprendIcon"),ie=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Z=A.element;d(Z),_(L,B);const oe=h();m(ie,Q),Z.append(ie,P,L,oe),document.body.appendChild(Z)}a?(P.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function bb(){var e;const n=(e=ud())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Nb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Db(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mb(){const n=un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kb(){return!bb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pb(){try{return typeof indexedDB=="object"}catch{return!1}}function Vb(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="FirebaseError";class Es extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Ub,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tu.prototype.create)}}class Tu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?Lb(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Es(o,d,i)}}function Lb(n,e){return n.replace(Ob,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Ob=/\{\$([^}]+)}/g;function Fb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ao(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(PE(a)&&PE(u)){if(!ao(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function PE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function eu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Bb(n,e){const t=new qb(n,e);return t.subscribe.bind(t)}class qb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Gb(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=qp),o.error===void 0&&(o.error=qp),o.complete===void 0&&(o.complete=qp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n){return n&&n._delegate?n._delegate:n}class lo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Sb;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kb(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:zb(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zb(n){return n===io?void 0:n}function Kb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const Jb={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},$b=Be.INFO,Qb={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},Xb=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=Qb[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ym{constructor(e){this.name=e,this._logLevel=$b,this._logHandler=Xb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const Wb=(n,e)=>e.some(t=>n instanceof t);let VE,UE;function Zb(){return VE||(VE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jb(){return UE||(UE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rS=new WeakMap,sm=new WeakMap,oS=new WeakMap,Gp=new WeakMap,Jm=new WeakMap;function eN(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(ur(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&rS.set(t,n)}).catch(()=>{}),Jm.set(e,n),e}function tN(n){if(sm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});sm.set(n,e)}let rm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return sm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ur(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nN(n){rm=n(rm)}function iN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Hp(this),e,...t);return oS.set(i,e.sort?e.sort():[e]),ur(i)}:jb().includes(n)?function(...e){return n.apply(Hp(this),e),ur(rS.get(this))}:function(...e){return ur(n.apply(Hp(this),e))}}function sN(n){return typeof n=="function"?iN(n):(n instanceof IDBTransaction&&tN(n),Wb(n,Zb())?new Proxy(n,rm):n)}function ur(n){if(n instanceof IDBRequest)return eN(n);if(Gp.has(n))return Gp.get(n);const e=sN(n);return e!==n&&(Gp.set(n,e),Jm.set(e,n)),e}const Hp=n=>Jm.get(n);function rN(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=ur(u);return i&&u.addEventListener("upgradeneeded",m=>{i(ur(u.result),m.oldVersion,m.newVersion,ur(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{a&&m.addEventListener("close",()=>a()),o&&m.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const oN=["get","getKey","getAll","getAllKeys","count"],aN=["put","add","delete","clear"],zp=new Map;function LE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zp.get(e))return zp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=aN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||oN.includes(t)))return;const a=async function(u,...d){const m=this.transaction(u,o?"readwrite":"readonly");let h=m.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&m.done]))[0]};return zp.set(e,a),a}nN(n=>({...n,get:(e,t,i)=>LE(e,t)||n.get(e,t,i),has:(e,t)=>!!LE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function uN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const om="@firebase/app",OE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Ym("@firebase/app"),cN="@firebase/app-compat",fN="@firebase/analytics-compat",dN="@firebase/analytics",hN="@firebase/app-check-compat",pN="@firebase/app-check",mN="@firebase/auth",gN="@firebase/auth-compat",yN="@firebase/database",_N="@firebase/data-connect",vN="@firebase/database-compat",EN="@firebase/functions",TN="@firebase/functions-compat",AN="@firebase/installations",SN="@firebase/installations-compat",CN="@firebase/messaging",IN="@firebase/messaging-compat",wN="@firebase/performance",RN="@firebase/performance-compat",bN="@firebase/remote-config",NN="@firebase/remote-config-compat",xN="@firebase/storage",DN="@firebase/storage-compat",MN="@firebase/firestore",kN="@firebase/ai",PN="@firebase/firestore-compat",VN="firebase",UN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="[DEFAULT]",LN={[om]:"fire-core",[cN]:"fire-core-compat",[dN]:"fire-analytics",[fN]:"fire-analytics-compat",[pN]:"fire-app-check",[hN]:"fire-app-check-compat",[mN]:"fire-auth",[gN]:"fire-auth-compat",[yN]:"fire-rtdb",[_N]:"fire-data-connect",[vN]:"fire-rtdb-compat",[EN]:"fire-fn",[TN]:"fire-fn-compat",[AN]:"fire-iid",[SN]:"fire-iid-compat",[CN]:"fire-fcm",[IN]:"fire-fcm-compat",[wN]:"fire-perf",[RN]:"fire-perf-compat",[bN]:"fire-rc",[NN]:"fire-rc-compat",[xN]:"fire-gcs",[DN]:"fire-gcs-compat",[MN]:"fire-fst",[PN]:"fire-fst-compat",[kN]:"fire-vertex","fire-js":"fire-js",[VN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf=new Map,ON=new Map,lm=new Map;function FE(n,e){try{n.container.addComponent(e)}catch(t){ms.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wa(n){const e=n.name;if(lm.has(e))return ms.debug(`There were multiple attempts to register component ${e}.`),!1;lm.set(e,n);for(const t of Bf.values())FE(t,n);for(const t of ON.values())FE(t,n);return!0}function $m(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $n(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cr=new Tu("app","Firebase",FN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=UN;function aS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:am,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw cr.create("bad-app-name",{appName:String(o)});if(t||(t=tS()),!t)throw cr.create("no-options");const a=Bf.get(o);if(a){if(ao(t,a.options)&&ao(i,a.config))return a;throw cr.create("duplicate-app",{appName:o})}const u=new Yb(o);for(const m of lm.values())u.addComponent(m);const d=new BN(t,i,u);return Bf.set(o,d),d}function lS(n=am){const e=Bf.get(n);if(!e&&n===am&&tS())return aS();if(!e)throw cr.create("no-app",{appName:n});return e}function fr(n,e,t){let i=LN[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ms.warn(u.join(" "));return}wa(new lo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="firebase-heartbeat-database",GN=1,fu="firebase-heartbeat-store";let Kp=null;function uS(){return Kp||(Kp=rN(qN,GN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fu)}catch(t){console.warn(t)}}}}).catch(n=>{throw cr.create("idb-open",{originalErrorMessage:n.message})})),Kp}async function HN(n){try{const t=(await uS()).transaction(fu),i=await t.objectStore(fu).get(cS(n));return await t.done,i}catch(e){if(e instanceof Es)ms.warn(e.message);else{const t=cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ms.warn(t.message)}}}async function BE(n,e){try{const i=(await uS()).transaction(fu,"readwrite");await i.objectStore(fu).put(e,cS(n)),await i.done}catch(t){if(t instanceof Es)ms.warn(t.message);else{const i=cr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ms.warn(i.message)}}}function cS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=1024,KN=30;class YN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $N(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=qE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>KN){const u=QN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ms.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=qE(),{heartbeatsToSend:i,unsentEntries:o}=JN(this._heartbeatsCache.heartbeats),a=Ff(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ms.warn(t),""}}}function qE(){return new Date().toISOString().substring(0,10)}function JN(n,e=zN){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),GE(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),GE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class $N{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pb()?Vb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return BE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return BE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function GE(n){return Ff(JSON.stringify({version:2,heartbeats:n})).length}function QN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(n){wa(new lo("platform-logger",e=>new lN(e),"PRIVATE")),wa(new lo("heartbeat",e=>new YN(e),"PRIVATE")),fr(om,OE,n),fr(om,OE,"esm2020"),fr("fire-js","")}XN("");var WN="firebase",ZN="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(WN,ZN,"app");function fS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jN=fS,dS=new Tu("auth","Firebase",fS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=new Ym("@firebase/auth");function ex(n,...e){qf.logLevel<=Be.WARN&&qf.warn(`Auth (${Va}): ${n}`,...e)}function If(n,...e){qf.logLevel<=Be.ERROR&&qf.error(`Auth (${Va}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(n,...e){throw Qm(n,...e)}function Bi(n,...e){return Qm(n,...e)}function hS(n,e,t){const i={...jN(),[e]:t};return new Tu("auth","Firebase",i).create(e,{appName:n.name})}function ps(n){return hS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return dS.create(n,...e)}function Ce(n,e,...t){if(!n)throw Qm(e,...t)}function ds(n){const e="INTERNAL ASSERTION FAILED: "+n;throw If(e),new Error(e)}function gs(n,e){n||ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function tx(){return HE()==="http:"||HE()==="https:"}function HE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tx()||xb()||"connection"in navigator)?navigator.onLine:!0}function ix(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t){this.shortDelay=e,this.longDelay=t,gs(t>e,"Short delay should be less than long delay!"),this.isMobile=Rb()||Db()}get(){return nx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(n,e){gs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ox=new Su(3e4,6e4);function Ar(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ts(n,e,t,i,o={}){return mS(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Au({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:m,...a};return Nb()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Pa(n.emulatorConfig.host)&&(h.credentials="include"),pS.fetch()(await gS(n,n.config.apiHost,t,d),h)})}async function mS(n,e,t){n._canInitEmulator=!1;const i={...sx,...e};try{const o=new lx(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw df(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[m,h]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw df(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw df(n,"user-disabled",u);const _=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw hS(n,_,h);pi(n,_)}}catch(o){if(o instanceof Es)throw o;pi(n,"network-request-failed",{message:String(o)})}}async function Cu(n,e,t,i,o={}){const a=await Ts(n,e,t,i,o);return"mfaPendingCredential"in a&&pi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function gS(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Xm(n.config,o):`${n.config.apiScheme}://${o}`;return rx.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function ax(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Bi(this.auth,"network-request-failed")),ox.get())})}}function df(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Bi(n,e,i);return o.customData._tokenResponse=t,o}function zE(n){return n!==void 0&&n.enterprise!==void 0}class ux{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ax(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cx(n,e){return Ts(n,"GET","/v2/recaptchaConfig",Ar(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(n,e){return Ts(n,"POST","/v1/accounts:delete",e)}async function Gf(n,e){return Ts(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dx(n,e=!1){const t=Lt(n),i=await t.getIdToken(e),o=Wm(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:ou(Yp(o.auth_time)),issuedAtTime:ou(Yp(o.iat)),expirationTime:ou(Yp(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Yp(n){return Number(n)*1e3}function Wm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return If("JWT malformed, contained fewer than 3 sections"),null;try{const o=jA(t);return o?JSON.parse(o):(If("Failed to decode base64 JWT payload"),null)}catch(o){return If("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function KE(n){const e=Wm(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Es&&hx(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function hx({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hf(n){var E;const e=n.auth,t=await n.getIdToken(),i=await Ra(n,Gf(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(E=o.providerUserInfo)!=null&&E.length?yS(o.providerUserInfo):[],u=gx(n.providerData,a),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=d?m:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new cm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function mx(n){const e=Lt(n);await Hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gx(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function yS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(n,e){const t=await mS(n,{},async()=>{const i=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await gS(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&Pa(n.emulatorConfig.host)&&(m.credentials="include"),pS.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _x(n,e){return Ts(n,"POST","/v2/accounts:revokeToken",Ar(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=KE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await yx(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new _a;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _a,this.toJSON())}_performRefresh(){return ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new px(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ra(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dx(this,e)}reload(){return mx(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Hf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(ps(this.auth));const e=await this.getIdToken();return await Ra(this,fx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:I,providerData:P,stsTokenManager:B}=t;Ce(E&&B,e,"internal-error");const L=_a.fromJSON(this.name,B);Ce(typeof E=="string",e,"internal-error"),ir(i,e.name),ir(o,e.name),Ce(typeof A=="boolean",e,"internal-error"),Ce(typeof I=="boolean",e,"internal-error"),ir(a,e.name),ir(u,e.name),ir(d,e.name),ir(m,e.name),ir(h,e.name),ir(_,e.name);const Q=new fi({uid:E,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:L,createdAt:h,lastLoginAt:_});return P&&Array.isArray(P)&&(Q.providerData=P.map(ie=>({...ie}))),m&&(Q._redirectEventId=m),Q}static async _fromIdTokenResponse(e,t,i=!1){const o=new _a;o.updateFromServerResponse(t);const a=new fi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Hf(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?yS(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new _a;d.updateFromIdToken(i);const m=new fi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new cm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,h),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Map;function hs(n){gs(n instanceof Function,"Expected a class definition");let e=YE.get(n);return e?(gs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,YE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_S.type="NONE";const JE=_S;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(n,e,t){return`firebase:${n}:${e}:${t}`}class va{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=wf(this.userKey,o.apiKey,a),this.fullPersistenceKey=wf("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gf(this.auth,{idToken:e}).catch(()=>{});return t?fi._fromGetAccountInfoResponse(this.auth,t,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new va(hs(JE),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||hs(JE);const u=wf(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const _=await h._get(u);if(_){let E;if(typeof _=="string"){const A=await Gf(e,{idToken:_}).catch(()=>{});if(!A)break;E=await fi._fromGetAccountInfoResponse(e,A,_)}else E=fi._fromJSON(e,_);h!==a&&(d=E),a=h;break}}catch{}const m=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new va(a,e,i):(a=m[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new va(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CS(e))return"Blackberry";if(IS(e))return"Webos";if(ES(e))return"Safari";if((e.includes("chrome/")||TS(e))&&!e.includes("edge/"))return"Chrome";if(SS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function vS(n=un()){return/firefox\//i.test(n)}function ES(n=un()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TS(n=un()){return/crios\//i.test(n)}function AS(n=un()){return/iemobile/i.test(n)}function SS(n=un()){return/android/i.test(n)}function CS(n=un()){return/blackberry/i.test(n)}function IS(n=un()){return/webos/i.test(n)}function Zm(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function vx(n=un()){var e;return Zm(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Ex(){return Mb()&&document.documentMode===10}function wS(n=un()){return Zm(n)||SS(n)||IS(n)||CS(n)||/windows phone/i.test(n)||AS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(n,e=[]){let t;switch(n){case"Browser":t=$E(un());break;case"Worker":t=`${$E(un())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Va}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const m=e(a);u(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(n,e={}){return Ts(n,"GET","/v2/passwordPolicy",Ar(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=6;class Cx{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Sx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QE(this),this.idTokenSubscription=new QE(this),this.beforeStateQueue=new Tx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hs(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await va.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gf(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if($n(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&(m!=null&&m.user)&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ix()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(ps(this));const t=e?Lt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ax(this),t=new Cx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await _x(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&hs(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await va.create(this,[hs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&ex(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function mo(n){return Lt(n)}class QE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bb(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wx(n){cd=n}function bS(n){return cd.loadJS(n)}function Rx(){return cd.recaptchaEnterpriseScript}function bx(){return cd.gapiScript}function Nx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class xx{constructor(){this.enterprise=new Dx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Dx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Mx="recaptcha-enterprise",NS="NO_RECAPTCHA";class kx{constructor(e){this.type=Mx,this.auth=mo(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{cx(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new ux(m);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(m=>{d(m)})})}function o(a,u,d){const m=window.grecaptcha;zE(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(NS)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xx().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&zE(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Rx();m.length!==0&&(m+=d),bS(m).then(()=>{o(d,a,u)}).catch(h=>{u(h)})}}).catch(d=>{u(d)})})}}async function XE(n,e,t,i=!1,o=!1){const a=new kx(n);let u;if(o)u=NS;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function fm(n,e,t,i,o){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await XE(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await XE(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n,e){const t=$m(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(ao(a,e??{}))return o;pi(o,"already-initialized")}return t.initialize({options:e})}function Vx(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(hs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Ux(n,e,t){const i=mo(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=xS(e),{host:u,port:d}=Lx(e),m=d===null?"":`:${d}`,h={url:`${a}//${u}${m}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(ao(h,i.config.emulator)&&ao(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Pa(u)?(iS(`${a}//${u}${m}`),sS("Auth",!0)):Ox()}function xS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Lx(n){const e=xS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:WE(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:WE(u)}}}function WE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Ox(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,t){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}async function Fx(n,e){return Ts(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(n,e){return Cu(n,"POST","/v1/accounts:signInWithPassword",Ar(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(n,e){return Cu(n,"POST","/v1/accounts:signInWithEmailLink",Ar(n,e))}async function Gx(n,e){return Cu(n,"POST","/v1/accounts:signInWithEmailLink",Ar(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends jm{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new du(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new du(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fm(e,t,"signInWithPassword",Bx);case"emailLink":return qx(e,{email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fm(e,i,"signUpPassword",Fx);case"emailLink":return Gx(e,{idToken:t,email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(n,e){return Cu(n,"POST","/v1/accounts:signInWithIdp",Ar(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="http://localhost";class uo extends jm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new uo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ea(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ea(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ea(e,t)}buildRequest(){const e={requestUri:Hx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Kx(n){const e=jl(eu(n)).link,t=e?jl(eu(e)).deep_link_id:null,i=jl(eu(n)).deep_link_id;return(i?jl(eu(i)).link:null)||i||t||e||n}class eg{constructor(e){const t=jl(eu(e)),i=t.apiKey??null,o=t.oobCode??null,a=zx(t.mode??null);Ce(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Kx(e);try{return new eg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.providerId=Ua.PROVIDER_ID}static credential(e,t){return du._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=eg.parseLink(t);return Ce(i,"argument-error"),du._fromEmailAndCode(e,i.code,i.tenantId)}}Ua.PROVIDER_ID="password";Ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends DS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Iu{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uo._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return rr.credential(t,i)}catch{return null}}}rr.GOOGLE_SIGN_IN_METHOD="google.com";rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends Iu{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.GITHUB_SIGN_IN_METHOD="github.com";or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Iu{constructor(){super("twitter.com")}static credential(e,t){return uo._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ar.credential(t,i)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(n,e){return Cu(n,"POST","/v1/accounts:signUp",Ar(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await fi._fromIdTokenResponse(e,i,o),u=ZE(i);return new co({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=ZE(i);return new co({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function ZE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends Es{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,zf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new zf(e,t,i,o)}}function MS(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?zf._fromErrorAndOperation(n,a,e,i):a})}async function Jx(n,e,t=!1){const i=await Ra(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return co._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(n,e,t=!1){const{auth:i}=n;if($n(i.app))return Promise.reject(ps(i));const o="reauthenticate";try{const a=await Ra(n,MS(i,o,e,n),t);Ce(a.idToken,i,"internal-error");const u=Wm(a.idToken);Ce(u,i,"internal-error");const{sub:d}=u;return Ce(n.uid===d,i,"user-mismatch"),co._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&pi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kS(n,e,t=!1){if($n(n.app))return Promise.reject(ps(n));const i="signIn",o=await MS(n,i,e),a=await co._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function Qx(n,e){return kS(mo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(n){const e=mo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Xx(n,e,t){if($n(n.app))return Promise.reject(ps(n));const i=mo(n),u=await fm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yx).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&PS(n),m}),d=await co._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function Wx(n,e,t){return $n(n.app)?Promise.reject(ps(n)):Qx(Lt(n),Ua.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&PS(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zx(n,e){return Ts(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Lt(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Ra(i,Zx(i.auth,a));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const d=i.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function e2(n,e,t,i){return Lt(n).onIdTokenChanged(e,t,i)}function t2(n,e,t){return Lt(n).beforeAuthStateChanged(e,t)}function n2(n,e,t,i){return Lt(n).onAuthStateChanged(e,t,i)}function i2(n){return Lt(n).signOut()}const Kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kf,"1"),this.storage.removeItem(Kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=1e3,r2=10;class US extends VS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);Ex()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,r2):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},s2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}US.type="LOCAL";const o2=US;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS extends VS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}LS.type="SESSION";const OS=LS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new fd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(t.origin,a)),m=await a2(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,m)=>{const h=tg("",20);o.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===h)switch(A.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(A.data.response);break;default:clearTimeout(_),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return window}function u2(n){qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function c2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function d2(){return FS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="firebaseLocalStorageDb",h2=1,Yf="firebaseLocalStorage",qS="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dd(n,e){return n.transaction([Yf],e?"readwrite":"readonly").objectStore(Yf)}function p2(){const n=indexedDB.deleteDatabase(BS);return new wu(n).toPromise()}function dm(){const n=indexedDB.open(BS,h2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Yf,{keyPath:qS})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Yf)?e(i):(i.close(),await p2(),e(await dm()))})})}async function jE(n,e,t){const i=dd(n,!0).put({[qS]:e,value:t});return new wu(i).toPromise()}async function m2(n,e){const t=dd(n,!1).get(e),i=await new wu(t).toPromise();return i===void 0?null:i.value}function e0(n,e){const t=dd(n,!0).delete(e);return new wu(t).toPromise()}const g2=800,y2=3;class GS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>y2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fd._getInstance(d2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await c2(),!this.activeServiceWorker)return;this.sender=new l2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dm();return await jE(e,Kf,"1"),await e0(e,Kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>jE(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>m2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>e0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=dd(o,!1).getAll();return new wu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GS.type="LOCAL";const _2=GS;new Su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(n,e){return e?hs(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng extends jm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ea(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function E2(n){return kS(n.auth,new ng(n),n.bypassAuthState)}function T2(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),$x(t,new ng(n),n.bypassAuthState)}async function A2(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),Jx(t,new ng(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return E2;case"linkViaPopup":case"linkViaRedirect":return A2;case"reauthViaPopup":case"reauthViaRedirect":return T2;default:pi(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new Su(2e3,1e4);class ma extends HS{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,ma.currentPopupAction&&ma.currentPopupAction.cancel(),ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){gs(this.filter.length===1,"Popup operations only handle one event");const e=tg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,S2.get())};e()}}ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="pendingRedirect",Rf=new Map;class I2 extends HS{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Rf.get(this.auth._key());if(!e){try{const i=await w2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Rf.set(this.auth._key(),e)}return this.bypassAuthState||Rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w2(n,e){const t=N2(e),i=b2(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function R2(n,e){Rf.set(n._key(),e)}function b2(n){return hs(n._redirectPersistence)}function N2(n){return wf(C2,n.config.apiKey,n.name)}async function x2(n,e,t=!1){if($n(n.app))return Promise.reject(ps(n));const i=mo(n),o=v2(i,e),u=await new I2(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=600*1e3;class M2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!zS(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Bi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D2&&this.cachedEventUids.clear(),this.cachedEventUids.has(t0(e))}saveEventToCache(e){this.cachedEventUids.add(t0(e)),this.lastProcessedEventTime=Date.now()}}function t0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function k2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(n,e={}){return Ts(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U2=/^https?/;async function L2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await P2(n);for(const t of e)try{if(O2(t))return}catch{}pi(n,"unauthorized-domain")}function O2(n){const e=um(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!U2.test(t))return!1;if(V2.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Su(3e4,6e4);function n0(){const n=qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function B2(n){return new Promise((e,t)=>{var o,a,u;function i(){n0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{n0(),t(Bi(n,"network-request-failed"))},timeout:F2.get()})}if((a=(o=qi().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=qi().gapi)!=null&&u.load)i();else{const d=Nx("iframefcb");return qi()[d]=()=>{gapi.load?i():t(Bi(n,"network-request-failed"))},bS(`${bx()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw bf=null,e})}let bf=null;function q2(n){return bf=bf||B2(n),bf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new Su(5e3,15e3),H2="__/auth/iframe",z2="emulator/auth/iframe",K2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J2(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Xm(e,z2):`https://${n.config.authDomain}/${H2}`,i={apiKey:e.apiKey,appName:n.name,v:Va},o=Y2.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Au(i).slice(1)}`}async function $2(n){const e=await q2(n),t=qi().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:J2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K2,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Bi(n,"network-request-failed"),d=qi().setTimeout(()=>{a(u)},G2.get());function m(){qi().clearTimeout(d),o(i)}i.ping(m).then(m,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},X2=500,W2=600,Z2="_blank",j2="http://localhost";class i0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eD(n,e,t,i=X2,o=W2){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m={...Q2,width:i.toString(),height:o.toString(),top:a,left:u},h=un().toLowerCase();t&&(d=TS(h)?Z2:t),vS(h)&&(e=e||j2,m.scrollbars="yes");const _=Object.entries(m).reduce((A,[I,P])=>`${A}${I}=${P},`,"");if(vx(h)&&d!=="_self")return tD(e||"",d),new i0(null);const E=window.open(e||"",d,_);Ce(E,n,"popup-blocked");try{E.focus()}catch{}return new i0(E)}function tD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="__/auth/handler",iD="emulator/auth/handler",sD=encodeURIComponent("fac");async function s0(n,e,t,i,o,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Va,eventId:o};if(e instanceof DS){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Fb(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Iu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await n._getAppCheckToken(),h=m?`#${sD}=${encodeURIComponent(m)}`:"";return`${rD(n)}?${Au(d).slice(1)}${h}`}function rD({config:n}){return n.emulator?Xm(n,iD):`https://${n.authDomain}/${nD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="webStorageSupport";class oD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OS,this._completeRedirectFn=x2,this._overrideRedirectResult=R2}async _openPopup(e,t,i,o){var u;gs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await s0(e,t,i,um(),o);return eD(e,a,tg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await s0(e,t,i,um(),o);return u2(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(gs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await $2(e),i=new M2(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jp,{type:Jp},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[Jp];a!==void 0&&t(!!a),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=L2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wS()||ES()||Zm()}}const aD=oD;var r0="@firebase/auth",o0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cD(n){wa(new lo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RS(n)},h=new Ix(i,o,a,m);return Vx(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),wa(new lo("auth-internal",e=>{const t=mo(e.getProvider("auth").getImmediate());return(i=>new lD(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(r0,o0,uD(n)),fr(r0,o0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=300,dD=nS("authIdTokenMaxAge")||fD;let a0=null;const hD=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>dD)return;const o=t==null?void 0:t.token;a0!==o&&(a0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function pD(n=lS()){const e=$m(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Px(n,{popupRedirectResolver:aD,persistence:[_2,o2,OS]}),i=nS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=hD(a.toString());t2(t,u,()=>u(t.currentUser)),e2(t,d=>u(d))}}const o=eS("auth");return o&&Ux(t,`http://${o}`),t}function mD(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}wx({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Bi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",mD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cD("Browser");var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dr,KS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,D){function N(){}N.prototype=D.prototype,M.F=D.prototype,M.prototype=new N,M.prototype.constructor=M,M.D=function(V,k,O){for(var x=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)x[pe-2]=arguments[pe];return D.prototype[k].apply(V,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,D,N){N||(N=0);const V=Array(16);if(typeof D=="string")for(var k=0;k<16;++k)V[k]=D.charCodeAt(N++)|D.charCodeAt(N++)<<8|D.charCodeAt(N++)<<16|D.charCodeAt(N++)<<24;else for(k=0;k<16;++k)V[k]=D[N++]|D[N++]<<8|D[N++]<<16|D[N++]<<24;D=M.g[0],N=M.g[1],k=M.g[2];let O=M.g[3],x;x=D+(O^N&(k^O))+V[0]+3614090360&4294967295,D=N+(x<<7&4294967295|x>>>25),x=O+(k^D&(N^k))+V[1]+3905402710&4294967295,O=D+(x<<12&4294967295|x>>>20),x=k+(N^O&(D^N))+V[2]+606105819&4294967295,k=O+(x<<17&4294967295|x>>>15),x=N+(D^k&(O^D))+V[3]+3250441966&4294967295,N=k+(x<<22&4294967295|x>>>10),x=D+(O^N&(k^O))+V[4]+4118548399&4294967295,D=N+(x<<7&4294967295|x>>>25),x=O+(k^D&(N^k))+V[5]+1200080426&4294967295,O=D+(x<<12&4294967295|x>>>20),x=k+(N^O&(D^N))+V[6]+2821735955&4294967295,k=O+(x<<17&4294967295|x>>>15),x=N+(D^k&(O^D))+V[7]+4249261313&4294967295,N=k+(x<<22&4294967295|x>>>10),x=D+(O^N&(k^O))+V[8]+1770035416&4294967295,D=N+(x<<7&4294967295|x>>>25),x=O+(k^D&(N^k))+V[9]+2336552879&4294967295,O=D+(x<<12&4294967295|x>>>20),x=k+(N^O&(D^N))+V[10]+4294925233&4294967295,k=O+(x<<17&4294967295|x>>>15),x=N+(D^k&(O^D))+V[11]+2304563134&4294967295,N=k+(x<<22&4294967295|x>>>10),x=D+(O^N&(k^O))+V[12]+1804603682&4294967295,D=N+(x<<7&4294967295|x>>>25),x=O+(k^D&(N^k))+V[13]+4254626195&4294967295,O=D+(x<<12&4294967295|x>>>20),x=k+(N^O&(D^N))+V[14]+2792965006&4294967295,k=O+(x<<17&4294967295|x>>>15),x=N+(D^k&(O^D))+V[15]+1236535329&4294967295,N=k+(x<<22&4294967295|x>>>10),x=D+(k^O&(N^k))+V[1]+4129170786&4294967295,D=N+(x<<5&4294967295|x>>>27),x=O+(N^k&(D^N))+V[6]+3225465664&4294967295,O=D+(x<<9&4294967295|x>>>23),x=k+(D^N&(O^D))+V[11]+643717713&4294967295,k=O+(x<<14&4294967295|x>>>18),x=N+(O^D&(k^O))+V[0]+3921069994&4294967295,N=k+(x<<20&4294967295|x>>>12),x=D+(k^O&(N^k))+V[5]+3593408605&4294967295,D=N+(x<<5&4294967295|x>>>27),x=O+(N^k&(D^N))+V[10]+38016083&4294967295,O=D+(x<<9&4294967295|x>>>23),x=k+(D^N&(O^D))+V[15]+3634488961&4294967295,k=O+(x<<14&4294967295|x>>>18),x=N+(O^D&(k^O))+V[4]+3889429448&4294967295,N=k+(x<<20&4294967295|x>>>12),x=D+(k^O&(N^k))+V[9]+568446438&4294967295,D=N+(x<<5&4294967295|x>>>27),x=O+(N^k&(D^N))+V[14]+3275163606&4294967295,O=D+(x<<9&4294967295|x>>>23),x=k+(D^N&(O^D))+V[3]+4107603335&4294967295,k=O+(x<<14&4294967295|x>>>18),x=N+(O^D&(k^O))+V[8]+1163531501&4294967295,N=k+(x<<20&4294967295|x>>>12),x=D+(k^O&(N^k))+V[13]+2850285829&4294967295,D=N+(x<<5&4294967295|x>>>27),x=O+(N^k&(D^N))+V[2]+4243563512&4294967295,O=D+(x<<9&4294967295|x>>>23),x=k+(D^N&(O^D))+V[7]+1735328473&4294967295,k=O+(x<<14&4294967295|x>>>18),x=N+(O^D&(k^O))+V[12]+2368359562&4294967295,N=k+(x<<20&4294967295|x>>>12),x=D+(N^k^O)+V[5]+4294588738&4294967295,D=N+(x<<4&4294967295|x>>>28),x=O+(D^N^k)+V[8]+2272392833&4294967295,O=D+(x<<11&4294967295|x>>>21),x=k+(O^D^N)+V[11]+1839030562&4294967295,k=O+(x<<16&4294967295|x>>>16),x=N+(k^O^D)+V[14]+4259657740&4294967295,N=k+(x<<23&4294967295|x>>>9),x=D+(N^k^O)+V[1]+2763975236&4294967295,D=N+(x<<4&4294967295|x>>>28),x=O+(D^N^k)+V[4]+1272893353&4294967295,O=D+(x<<11&4294967295|x>>>21),x=k+(O^D^N)+V[7]+4139469664&4294967295,k=O+(x<<16&4294967295|x>>>16),x=N+(k^O^D)+V[10]+3200236656&4294967295,N=k+(x<<23&4294967295|x>>>9),x=D+(N^k^O)+V[13]+681279174&4294967295,D=N+(x<<4&4294967295|x>>>28),x=O+(D^N^k)+V[0]+3936430074&4294967295,O=D+(x<<11&4294967295|x>>>21),x=k+(O^D^N)+V[3]+3572445317&4294967295,k=O+(x<<16&4294967295|x>>>16),x=N+(k^O^D)+V[6]+76029189&4294967295,N=k+(x<<23&4294967295|x>>>9),x=D+(N^k^O)+V[9]+3654602809&4294967295,D=N+(x<<4&4294967295|x>>>28),x=O+(D^N^k)+V[12]+3873151461&4294967295,O=D+(x<<11&4294967295|x>>>21),x=k+(O^D^N)+V[15]+530742520&4294967295,k=O+(x<<16&4294967295|x>>>16),x=N+(k^O^D)+V[2]+3299628645&4294967295,N=k+(x<<23&4294967295|x>>>9),x=D+(k^(N|~O))+V[0]+4096336452&4294967295,D=N+(x<<6&4294967295|x>>>26),x=O+(N^(D|~k))+V[7]+1126891415&4294967295,O=D+(x<<10&4294967295|x>>>22),x=k+(D^(O|~N))+V[14]+2878612391&4294967295,k=O+(x<<15&4294967295|x>>>17),x=N+(O^(k|~D))+V[5]+4237533241&4294967295,N=k+(x<<21&4294967295|x>>>11),x=D+(k^(N|~O))+V[12]+1700485571&4294967295,D=N+(x<<6&4294967295|x>>>26),x=O+(N^(D|~k))+V[3]+2399980690&4294967295,O=D+(x<<10&4294967295|x>>>22),x=k+(D^(O|~N))+V[10]+4293915773&4294967295,k=O+(x<<15&4294967295|x>>>17),x=N+(O^(k|~D))+V[1]+2240044497&4294967295,N=k+(x<<21&4294967295|x>>>11),x=D+(k^(N|~O))+V[8]+1873313359&4294967295,D=N+(x<<6&4294967295|x>>>26),x=O+(N^(D|~k))+V[15]+4264355552&4294967295,O=D+(x<<10&4294967295|x>>>22),x=k+(D^(O|~N))+V[6]+2734768916&4294967295,k=O+(x<<15&4294967295|x>>>17),x=N+(O^(k|~D))+V[13]+1309151649&4294967295,N=k+(x<<21&4294967295|x>>>11),x=D+(k^(N|~O))+V[4]+4149444226&4294967295,D=N+(x<<6&4294967295|x>>>26),x=O+(N^(D|~k))+V[11]+3174756917&4294967295,O=D+(x<<10&4294967295|x>>>22),x=k+(D^(O|~N))+V[2]+718787259&4294967295,k=O+(x<<15&4294967295|x>>>17),x=N+(O^(k|~D))+V[9]+3951481745&4294967295,M.g[0]=M.g[0]+D&4294967295,M.g[1]=M.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+O&4294967295}i.prototype.v=function(M,D){D===void 0&&(D=M.length);const N=D-this.blockSize,V=this.C;let k=this.h,O=0;for(;O<D;){if(k==0)for(;O<=N;)o(this,M,O),O+=this.blockSize;if(typeof M=="string"){for(;O<D;)if(V[k++]=M.charCodeAt(O++),k==this.blockSize){o(this,V),k=0;break}}else for(;O<D;)if(V[k++]=M[O++],k==this.blockSize){o(this,V),k=0;break}}this.h=k,this.o+=D},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var D=1;D<M.length-8;++D)M[D]=0;D=this.o*8;for(var N=M.length-8;N<M.length;++N)M[N]=D&255,D/=256;for(this.v(M),M=Array(16),D=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)M[D++]=this.g[N]>>>V&255;return M};function a(M,D){var N=d;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=D(M)}function u(M,D){this.h=D;const N=[];let V=!0;for(let k=M.length-1;k>=0;k--){const O=M[k]|0;V&&O==D||(N[k]=O,V=!1)}this.g=N}var d={};function m(M){return-128<=M&&M<128?a(M,function(D){return new u([D|0],D<0?-1:0)}):new u([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return E;if(M<0)return L(h(-M));const D=[];let N=1;for(let V=0;M>=N;V++)D[V]=M/N|0,N*=4294967296;return new u(D,0)}function _(M,D){if(M.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(M.charAt(0)=="-")return L(_(M.substring(1),D));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(D,8));let V=E;for(let O=0;O<M.length;O+=8){var k=Math.min(8,M.length-O);const x=parseInt(M.substring(O,O+k),D);k<8?(k=h(Math.pow(D,k)),V=V.j(k).add(h(x))):(V=V.j(N),V=V.add(h(x)))}return V}var E=m(0),A=m(1),I=m(16777216);n=u.prototype,n.m=function(){if(B(this))return-L(this).m();let M=0,D=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);M+=(V>=0?V:4294967296+V)*D,D*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(P(this))return"0";if(B(this))return"-"+L(this).toString(M);const D=h(Math.pow(M,6));var N=this;let V="";for(;;){const k=oe(N,D).g;N=Q(N,k.j(D));let O=((N.g.length>0?N.g[0]:N.h)>>>0).toString(M);if(N=k,P(N))return O+V;for(;O.length<6;)O="0"+O;V=O+V}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function P(M){if(M.h!=0)return!1;for(let D=0;D<M.g.length;D++)if(M.g[D]!=0)return!1;return!0}function B(M){return M.h==-1}n.l=function(M){return M=Q(this,M),B(M)?-1:P(M)?0:1};function L(M){const D=M.g.length,N=[];for(let V=0;V<D;V++)N[V]=~M.g[V];return new u(N,~M.h).add(A)}n.abs=function(){return B(this)?L(this):this},n.add=function(M){const D=Math.max(this.g.length,M.g.length),N=[];let V=0;for(let k=0;k<=D;k++){let O=V+(this.i(k)&65535)+(M.i(k)&65535),x=(O>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);V=x>>>16,O&=65535,x&=65535,N[k]=x<<16|O}return new u(N,N[N.length-1]&-2147483648?-1:0)};function Q(M,D){return M.add(L(D))}n.j=function(M){if(P(this)||P(M))return E;if(B(this))return B(M)?L(this).j(L(M)):L(L(this).j(M));if(B(M))return L(this.j(L(M)));if(this.l(I)<0&&M.l(I)<0)return h(this.m()*M.m());const D=this.g.length+M.g.length,N=[];for(var V=0;V<2*D;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<M.g.length;k++){const O=this.i(V)>>>16,x=this.i(V)&65535,pe=M.i(k)>>>16,ve=M.i(k)&65535;N[2*V+2*k]+=x*ve,ie(N,2*V+2*k),N[2*V+2*k+1]+=O*ve,ie(N,2*V+2*k+1),N[2*V+2*k+1]+=x*pe,ie(N,2*V+2*k+1),N[2*V+2*k+2]+=O*pe,ie(N,2*V+2*k+2)}for(M=0;M<D;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=D;M<2*D;M++)N[M]=0;return new u(N,0)};function ie(M,D){for(;(M[D]&65535)!=M[D];)M[D+1]+=M[D]>>>16,M[D]&=65535,D++}function Z(M,D){this.g=M,this.h=D}function oe(M,D){if(P(D))throw Error("division by zero");if(P(M))return new Z(E,E);if(B(M))return D=oe(L(M),D),new Z(L(D.g),L(D.h));if(B(D))return D=oe(M,L(D)),new Z(L(D.g),D.h);if(M.g.length>30){if(B(M)||B(D))throw Error("slowDivide_ only works with positive integers.");for(var N=A,V=D;V.l(M)<=0;)N=le(N),V=le(V);var k=ue(N,1),O=ue(V,1);for(V=ue(V,2),N=ue(N,2);!P(V);){var x=O.add(V);x.l(M)<=0&&(k=k.add(N),O=x),V=ue(V,1),N=ue(N,1)}return D=Q(M,k.j(D)),new Z(k,D)}for(k=E;M.l(D)>=0;){for(N=Math.max(1,Math.floor(M.m()/D.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),O=h(N),x=O.j(D);B(x)||x.l(M)>0;)N-=V,O=h(N),x=O.j(D);P(O)&&(O=A),k=k.add(O),M=Q(M,x)}return new Z(k,M)}n.B=function(M){return oe(this,M).h},n.and=function(M){const D=Math.max(this.g.length,M.g.length),N=[];for(let V=0;V<D;V++)N[V]=this.i(V)&M.i(V);return new u(N,this.h&M.h)},n.or=function(M){const D=Math.max(this.g.length,M.g.length),N=[];for(let V=0;V<D;V++)N[V]=this.i(V)|M.i(V);return new u(N,this.h|M.h)},n.xor=function(M){const D=Math.max(this.g.length,M.g.length),N=[];for(let V=0;V<D;V++)N[V]=this.i(V)^M.i(V);return new u(N,this.h^M.h)};function le(M){const D=M.g.length+1,N=[];for(let V=0;V<D;V++)N[V]=M.i(V)<<1|M.i(V-1)>>>31;return new u(N,M.h)}function ue(M,D){const N=D>>5;D%=32;const V=M.g.length-N,k=[];for(let O=0;O<V;O++)k[O]=D>0?M.i(O+N)>>>D|M.i(O+N+1)<<32-D:M.i(O+N);return new u(k,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,KS=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,dr=u}).apply(typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{});var hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YS,tu,JS,Nf,hm,$S,QS,XS;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof hf=="object"&&hf];for(var T=0;T<g.length;++T){var C=g[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(g,T){if(T)e:{var C=i;g=g.split(".");for(var R=0;R<g.length-1;R++){var H=g[R];if(!(H in C))break e;C=C[H]}g=g[g.length-1],R=C[g],T=T(R),T!=R&&T!=null&&e(C,g,{configurable:!0,writable:!0,value:T})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(T){var C=[],R;for(R in T)Object.prototype.hasOwnProperty.call(T,R)&&C.push([R,T[R]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function m(g,T,C){return g.call.apply(g.bind,arguments)}function h(g,T,C){return h=m,h.apply(null,arguments)}function _(g,T){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),g.apply(this,R)}}function E(g,T){function C(){}C.prototype=T.prototype,g.Z=T.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(R,H,$){for(var ae=Array(arguments.length-2),De=2;De<arguments.length;De++)ae[De-2]=arguments[De];return T.prototype[H].apply(R,ae)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const T=g.length;if(T>0){const C=Array(T);for(let R=0;R<T;R++)C[R]=g[R];return C}return[]}function P(g,T){for(let R=1;R<arguments.length;R++){const H=arguments[R];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=g.length||0;const $=H.length||0;g.length=C+$;for(let ae=0;ae<$;ae++)g[C+ae]=H[ae]}else g.push(H)}}class B{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function L(g){u.setTimeout(()=>{throw g},0)}function Q(){var g=M;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class ie{constructor(){this.h=this.g=null}add(T,C){const R=Z.get();R.set(T,C),this.h?this.h.next=R:this.g=R,this.h=R}}var Z=new B(()=>new oe,g=>g.reset());class oe{constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ue=!1,M=new ie,D=()=>{const g=Promise.resolve(void 0);le=()=>{g.then(N)}};function N(){for(var g;g=Q();){try{g.h.call(g.g)}catch(C){L(C)}var T=Z;T.j(g),T.h<100&&(T.h++,g.next=T.g,T.g=g)}ue=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,T),u.removeEventListener("test",C,T)}catch{}return g})();function x(g){return/^[\s\xa0]*$/.test(g)}function pe(g,T){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,T)}E(pe,k),pe.prototype.init=function(g,T){const C=this.type=g.type,R=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget,T||(C=="mouseover"?T=g.fromElement:C=="mouseout"&&(T=g.toElement)),this.relatedTarget=T,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ve="closure_listenable_"+(Math.random()*1e6|0),Y=0;function re(g,T,C,R,H){this.listener=g,this.proxy=null,this.src=T,this.type=C,this.capture=!!R,this.ha=H,this.key=++Y,this.da=this.fa=!1}function ge(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Le(g,T,C){for(const R in g)T.call(C,g[R],R,g)}function Je(g,T){for(const C in g)T.call(void 0,g[C],C,g)}function q(g){const T={};for(const C in g)T[C]=g[C];return T}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(g,T){let C,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(C in R)g[C]=R[C];for(let $=0;$<ne.length;$++)C=ne[$],Object.prototype.hasOwnProperty.call(R,C)&&(g[C]=R[C])}}function me(g){this.src=g,this.g={},this.h=0}me.prototype.add=function(g,T,C,R,H){const $=g.toString();g=this.g[$],g||(g=this.g[$]=[],this.h++);const ae=ke(g,T,R,H);return ae>-1?(T=g[ae],C||(T.fa=!1)):(T=new re(T,this.src,$,!!R,H),T.fa=C,g.push(T)),T};function we(g,T){const C=T.type;if(C in g.g){var R=g.g[C],H=Array.prototype.indexOf.call(R,T,void 0),$;($=H>=0)&&Array.prototype.splice.call(R,H,1),$&&(ge(T),g.g[C].length==0&&(delete g.g[C],g.h--))}}function ke(g,T,C,R){for(let H=0;H<g.length;++H){const $=g[H];if(!$.da&&$.listener==T&&$.capture==!!C&&$.ha==R)return H}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),Ot={};function dt(g,T,C,R,H){if(Array.isArray(T)){for(let $=0;$<T.length;$++)dt(g,T[$],C,R,H);return null}return C=Ja(C),g&&g[ve]?g.J(T,C,d(R)?!!R.capture:!1,H):wr(g,T,C,!1,R,H)}function wr(g,T,C,R,H,$){if(!T)throw Error("Invalid event type");const ae=d(H)?!!H.capture:!!H;let De=Rr(g);if(De||(g[Ke]=De=new me(g)),C=De.add(T,C,R,ae,$),C.proxy)return C;if(R=Eo(),C.proxy=R,R.src=g,R.listener=C,g.addEventListener)O||(H=ae),H===void 0&&(H=!1),g.addEventListener(T.toString(),R,H);else if(g.attachEvent)g.attachEvent(yi(T.toString()),R);else if(g.addListener&&g.removeListener)g.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Eo(){function g(C){return T.call(g.src,g.listener,C)}const T=Ka;return g}function To(g,T,C,R,H){if(Array.isArray(T))for(var $=0;$<T.length;$++)To(g,T[$],C,R,H);else R=d(R)?!!R.capture:!!R,C=Ja(C),g&&g[ve]?(g=g.i,$=String(T).toString(),$ in g.g&&(T=g.g[$],C=ke(T,C,R,H),C>-1&&(ge(T[C]),Array.prototype.splice.call(T,C,1),T.length==0&&(delete g.g[$],g.h--)))):g&&(g=Rr(g))&&(T=g.g[T.toString()],g=-1,T&&(g=ke(T,C,R,H)),(C=g>-1?T[g]:null)&&Ao(C))}function Ao(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[ve])we(T.i,g);else{var C=g.type,R=g.proxy;T.removeEventListener?T.removeEventListener(C,R,g.capture):T.detachEvent?T.detachEvent(yi(C),R):T.addListener&&T.removeListener&&T.removeListener(R),(C=Rr(T))?(we(C,g),C.h==0&&(C.src=null,T[Ke]=null)):ge(g)}}}function yi(g){return g in Ot?Ot[g]:Ot[g]="on"+g}function Ka(g,T){if(g.da)g=!0;else{T=new pe(T,this);const C=g.listener,R=g.ha||g.src;g.fa&&Ao(g),g=C.call(R,T)}return g}function Rr(g){return g=g[Ke],g instanceof me?g:null}var Ya="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ja(g){return typeof g=="function"?g:(g[Ya]||(g[Ya]=function(T){return g.handleEvent(T)}),g[Ya])}function It(){V.call(this),this.i=new me(this),this.M=this,this.G=null}E(It,V),It.prototype[ve]=!0,It.prototype.removeEventListener=function(g,T,C,R){To(this,g,T,C,R)};function Ft(g,T){var C,R=g.G;if(R)for(C=[];R;R=R.G)C.push(R);if(g=g.M,R=T.type||T,typeof T=="string")T=new k(T,g);else if(T instanceof k)T.target=T.target||g;else{var H=T;T=new k(R,g),ce(T,H)}H=!0;let $,ae;if(C)for(ae=C.length-1;ae>=0;ae--)$=T.g=C[ae],H=Cs($,R,!0,T)&&H;if($=T.g=g,H=Cs($,R,!0,T)&&H,H=Cs($,R,!1,T)&&H,C)for(ae=0;ae<C.length;ae++)$=T.g=C[ae],H=Cs($,R,!1,T)&&H}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var g=this.i;for(const T in g.g){const C=g.g[T];for(let R=0;R<C.length;R++)ge(C[R]);delete g.g[T],g.h--}}this.G=null},It.prototype.J=function(g,T,C,R){return this.i.add(String(g),T,!1,C,R)},It.prototype.K=function(g,T,C,R){return this.i.add(String(g),T,!0,C,R)};function Cs(g,T,C,R){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();let H=!0;for(let $=0;$<T.length;++$){const ae=T[$];if(ae&&!ae.da&&ae.capture==C){const De=ae.listener,vt=ae.ha||ae.src;ae.fa&&we(g.i,ae),H=De.call(vt,R)!==!1&&H}}return H&&!R.defaultPrevented}function Ld(g,T){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:u.setTimeout(g,T||0)}function Uu(g){g.g=Ld(()=>{g.g=null,g.i&&(g.i=!1,Uu(g))},g.l);const T=g.h;g.h=null,g.m.apply(null,T)}class cn extends V{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Uu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(g){V.call(this),this.h=g,this.g={}}E(br,V);var $a=[];function Qa(g){Le(g.g,function(T,C){this.g.hasOwnProperty(C)&&Ao(T)},g),g.g={}}br.prototype.N=function(){br.Z.N.call(this),Qa(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Is=u.JSON.stringify,Od=u.JSON.parse,Lu=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function Ou(){}function Fu(){}var jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){k.call(this,"d")}E($t,k);function Vn(){k.call(this,"c")}E(Vn,k);var _t={},Bu=null;function So(){return Bu=Bu||new It}_t.Ia="serverreachability";function qu(g){k.call(this,_t.Ia,g)}E(qu,k);function _i(g){const T=So();Ft(T,new qu(T))}_t.STAT_EVENT="statevent";function Nr(g,T){k.call(this,_t.STAT_EVENT,g),this.stat=T}E(Nr,k);function wt(g){const T=So();Ft(T,new Nr(T,g))}_t.Ja="timingevent";function vi(g,T){k.call(this,_t.Ja,g),this.size=T}E(vi,k);function Ei(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},T)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function Fd(g,T,C,R,H,$){g.info(function(){if(g.g)if($){var ae="",De=$.split("&");for(let We=0;We<De.length;We++){var vt=De[We].split("=");if(vt.length>1){const ht=vt[0];vt=vt[1];const Fn=ht.split("_");ae=Fn.length>=2&&Fn[1]=="type"?ae+(ht+"="+vt+"&"):ae+(ht+"=redacted&")}}}else ae=null;else ae=$;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+T+`
`+C+`
`+ae})}function Gu(g,T,C,R,H,$,ae){g.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+T+`
`+C+`
`+$+" "+ae})}function Ti(g,T,C,R){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+Bd(g,C)+(R?" "+R:"")})}function xr(g,T){g.info(function(){return"TIMEOUT: "+T})}ei.prototype.info=function(){};function Bd(g,T){if(!g.g)return T;if(!T)return null;try{const $=JSON.parse(T);if($){for(g=0;g<$.length;g++)if(Array.isArray($[g])){var C=$[g];if(!(C.length<2)){var R=C[1];if(Array.isArray(R)&&!(R.length<1)){var H=R[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ae=1;ae<R.length;ae++)R[ae]=""}}}}return Is($)}catch{return T}}var Dr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wa;function Mr(){}E(Mr,Ou),Mr.prototype.g=function(){return new XMLHttpRequest},Wa=new Mr;function Ji(g){return encodeURIComponent(String(g))}function Hu(g){var T=1;g=g.split(":");const C=[];for(;T>0&&g.length;)C.push(g.shift()),T--;return g.length&&C.push(g.join(":")),C}function ti(g,T,C,R){this.j=g,this.i=T,this.l=C,this.S=R||1,this.V=new br(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}var Rt={},Ht={};function Ai(g,T,C){g.M=1,g.A=kr(Nt(T)),g.u=C,g.R=!0,Co(g,null)}function Co(g,T){g.F=Date.now(),Si(g),g.B=Nt(g.A);var C=g.B,R=g.S;Array.isArray(R)||(R=[String(R)]),bo(C.i,"t",R),g.C=0,C=g.j.L,g.h=new ni,g.g=sc(g.j,C?T:null,!g.u),g.P>0&&(g.O=new cn(h(g.Y,g,g.g),g.P)),T=g.V,C=g.g,R=g.ba;var H="readystatechange";Array.isArray(H)||(H&&($a[0]=H.toString()),H=$a);for(let $=0;$<H.length;$++){const ae=dt(C,H[$],R||T.handleEvent,!1,T.h||T);if(!ae)break;T.g[ae.key]=ae}T=g.J?q(g.J):{},g.u?(g.v||(g.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,T)):(g.v="GET",g.g.ea(g.B,g.v,null,T)),_i(),Fd(g.i,g.v,g.B,g.l,g.S,g.u)}ti.prototype.ba=function(g){g=g.target;const T=this.O;T&&ri(g)==3?T.j():this.Y(g)},ti.prototype.Y=function(g){try{if(g==this.g)e:{const De=ri(this.g),vt=this.g.ya(),We=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||De!=4||vt==7||(vt==8||We<=0?_i(3):_i(2)),Ci(this);var T=this.g.ca();this.X=T;var C=qd(this);if(this.o=T==200,Gu(this.i,this.v,this.B,this.l,this.S,De,T),this.o){if(this.U&&!this.L){t:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(R)){var $=R;break t}}$=null}if(g=$)Ti(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ii(this,g);else{this.o=!1,this.m=3,wt(12),Cn(this),Un(this);break e}}if(this.R){g=!0;let ht;for(;!this.K&&this.C<C.length;)if(ht=Ku(this,C),ht==Ht){De==4&&(this.m=4,wt(14),g=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Rt){this.m=4,wt(15),Ti(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ti(this.i,this.l,ht,null),Ii(this,ht);if(zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||C.length!=0||this.h.h||(this.m=1,wt(16),g=!1),this.o=this.o&&g,!g)Ti(this.i,this.l,C,"[Invalid Chunked Response]"),Cn(this),Un(this);else if(C.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),dl(ae),ae.P=!0,wt(11))}}else Ti(this.i,this.l,C,null),Ii(this,C);De==4&&Cn(this),this.o&&!this.K&&(De==4?ec(this.j,this):(this.o=!1,Si(this)))}else Qi(this.g),T==400&&C.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),Cn(this),Un(this)}}}catch{}finally{}};function qd(g){if(!zu(g))return g.g.la();const T=Qt(g.g);if(T==="")return"";let C="";const R=T.length,H=ri(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Cn(g),Un(g),"";g.h.i=new u.TextDecoder}for(let $=0;$<R;$++)g.h.h=!0,C+=g.h.i.decode(T[$],{stream:!(H&&$==R-1)});return T.length=0,g.h.g+=C,g.C=0,g.h.g}function zu(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Ku(g,T){var C=g.C,R=T.indexOf(`
`,C);return R==-1?Ht:(C=Number(T.substring(C,R)),isNaN(C)?Rt:(R+=1,R+C>T.length?Ht:(T=T.slice(R,R+C),g.C=R+C,T)))}ti.prototype.cancel=function(){this.K=!0,Cn(this)};function Si(g){g.T=Date.now()+g.H,Io(g,g.H)}function Io(g,T){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Ei(h(g.aa,g),T)}function Ci(g){g.D&&(u.clearTimeout(g.D),g.D=null)}ti.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(xr(this.i,this.B),this.M!=2&&(_i(),wt(17)),Cn(this),this.m=2,Un(this)):Io(this,this.T-g)};function Un(g){g.j.I==0||g.K||ec(g.j,g)}function Cn(g){Ci(g);var T=g.O;T&&typeof T.dispose=="function"&&T.dispose(),g.O=null,Qa(g.V),g.g&&(T=g.g,g.g=null,T.abort(),T.dispose())}function Ii(g,T){try{var C=g.j;if(C.I!=0&&(C.g==g||Ri(C.h,g))){if(!g.L&&Ri(C.h,g)&&C.I==3){try{var R=C.Ba.g.parse(T)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)ko(C),ks(C);else break e;Br(C),wt(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Ei(h(C.Va,C),6e3));wi(C.h)<=1&&C.ta&&(C.ta=void 0)}else ki(C,11)}else if((g.L||C.g==g)&&ko(C),!x(T))for(H=C.Ba.g.parse(T),T=0;T<H.length;T++){let We=H[T];const ht=We[0];if(!(ht<=C.K))if(C.K=ht,We=We[1],C.I==2)if(We[0]=="c"){C.M=We[1],C.ba=We[2];const Fn=We[3];Fn!=null&&(C.ka=Fn,C.j.info("VER="+C.ka));const Pi=We[4];Pi!=null&&(C.za=Pi,C.j.info("SVER="+C.za));const oi=We[5];oi!=null&&typeof oi=="number"&&oi>0&&(R=1.5*oi,C.O=R,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const ai=g.g;if(ai){const qr=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qr){var $=R.h;$.g||qr.indexOf("spdy")==-1&&qr.indexOf("quic")==-1&&qr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(el($,$.h),$.h=null))}if(R.G){const Po=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(R.wa=Po,et(R.J,R.G,Po))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),R=C;var ae=g;if(R.na=ic(R,R.L?R.ba:null,R.W),ae.L){tl(R.h,ae);var De=ae,vt=R.O;vt&&(De.H=vt),De.D&&(Ci(De),Si(De)),R.g=ae}else Zu(R);C.i.length>0&&Mi(C)}else We[0]!="stop"&&We[0]!="close"||ki(C,7);else C.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?ki(C,7):cl(C):We[0]!="noop"&&C.l&&C.l.qa(We),C.A=0)}}_i(4)}catch{}}var bt=class{constructor(g,T){this.g=g,this.map=T}};function Za(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ja(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function wi(g){return g.h?1:g.g?g.g.size:0}function Ri(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function el(g,T){g.g?g.g.add(T):g.h=T}function tl(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}Za.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function nl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let T=g.i;for(const C of g.g.values())T=T.concat(C.G);return T}return I(g.i)}var Yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wo(g,T){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const R=g[C].indexOf("=");let H,$=null;R>=0?(H=g[C].substring(0,R),$=g[C].substring(R+1)):H=g[C],T(H,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function In(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;g instanceof In?(this.l=g.l,zt(this,g.j),this.o=g.o,this.g=g.g,ws(this,g.u),this.h=g.h,il(this,Xu(g.i)),this.m=g.m):g&&(T=String(g).match(Yu))?(this.l=!1,zt(this,T[1]||"",!0),this.o=bi(T[2]||""),this.g=bi(T[3]||"",!0),ws(this,T[4]),this.h=bi(T[5]||"",!0),il(this,T[6]||"",!0),this.m=bi(T[7]||"")):(this.l=!1,this.i=new bs(null,this.l))}In.prototype.toString=function(){const g=[];var T=this.j;T&&g.push(Pr(T,Ro,!0),":");var C=this.g;return(C||T=="file")&&(g.push("//"),(T=this.o)&&g.push(Pr(T,Ro,!0),"@"),g.push(Ji(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(Pr(C,C.charAt(0)=="/"?sl:Ju,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",Pr(C,$u)),g.join("")},In.prototype.resolve=function(g){const T=Nt(this);let C=!!g.j;C?zt(T,g.j):C=!!g.o,C?T.o=g.o:C=!!g.g,C?T.g=g.g:C=g.u!=null;var R=g.h;if(C)ws(T,g.u);else if(C=!!g.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var H=T.h.lastIndexOf("/");H!=-1&&(R=T.h.slice(0,H+1)+R)}if(H=R,H==".."||H==".")R="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){R=H.lastIndexOf("/",0)==0,H=H.split("/");const $=[];for(let ae=0;ae<H.length;){const De=H[ae++];De=="."?R&&ae==H.length&&$.push(""):De==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),R&&ae==H.length&&$.push("")):($.push(De),R=!0)}R=$.join("/")}else R=H}return C?T.h=R:C=g.i.toString()!=="",C?il(T,Xu(g.i)):C=!!g.m,C&&(T.m=g.m),T};function Nt(g){return new In(g)}function zt(g,T,C){g.j=C?bi(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function ws(g,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);g.u=T}else g.u=null}function il(g,T,C){T instanceof bs?(g.i=T,No(g.i,g.l)):(C||(T=Pr(T,Rs)),g.i=new bs(T,g.l))}function et(g,T,C){g.i.set(T,C)}function kr(g){return et(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function bi(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Pr(g,T,C){return typeof g=="string"?(g=encodeURI(g).replace(T,mn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function mn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ro=/[#\/\?@]/g,Ju=/[#\?:]/g,sl=/[#\?]/g,Rs=/[#\?@]/g,$u=/#/g;function bs(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function gn(g){g.g||(g.g=new Map,g.h=0,g.i&&wo(g.i,function(T,C){g.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=bs.prototype,n.add=function(g,T){gn(this),this.i=null,g=Ns(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(T),this.h+=1,this};function Qu(g,T){gn(g),T=Ns(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function rl(g,T){return gn(g),T=Ns(g,T),g.g.has(T)}n.forEach=function(g,T){gn(this),this.g.forEach(function(C,R){C.forEach(function(H){g.call(T,H,R,this)},this)},this)};function ol(g,T){gn(g);let C=[];if(typeof T=="string")rl(g,T)&&(C=C.concat(g.g.get(Ns(g,T))));else for(g=Array.from(g.g.values()),T=0;T<g.length;T++)C=C.concat(g[T]);return C}n.set=function(g,T){return gn(this),this.i=null,g=Ns(this,g),rl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},n.get=function(g,T){return g?(g=ol(this,g),g.length>0?String(g[0]):T):T};function bo(g,T,C){Qu(g,T),C.length>0&&(g.i=null,g.g.set(Ns(g,T),I(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],T=Array.from(this.g.keys());for(let R=0;R<T.length;R++){var C=T[R];const H=Ji(C);C=ol(this,C);for(let $=0;$<C.length;$++){let ae=H;C[$]!==""&&(ae+="="+Ji(C[$])),g.push(ae)}}return this.i=g.join("&")};function Xu(g){const T=new bs;return T.i=g.i,g.g&&(T.g=new Map(g.g),T.h=g.h),T}function Ns(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function No(g,T){T&&!g.j&&(gn(g),g.i=null,g.g.forEach(function(C,R){const H=R.toLowerCase();R!=H&&(Qu(this,R),bo(this,H,C))},g)),g.j=T}function ii(g,T){const C=new ei;if(u.Image){const R=new Image;R.onload=_(Ln,C,"TestLoadImage: loaded",!0,T,R),R.onerror=_(Ln,C,"TestLoadImage: error",!1,T,R),R.onabort=_(Ln,C,"TestLoadImage: abort",!1,T,R),R.ontimeout=_(Ln,C,"TestLoadImage: timeout",!1,T,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=g}else T(!1)}function al(g,T){const C=new ei,R=new AbortController,H=setTimeout(()=>{R.abort(),Ln(C,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:R.signal}).then($=>{clearTimeout(H),$.ok?Ln(C,"TestPingServer: ok",!0,T):Ln(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(H),Ln(C,"TestPingServer: error",!1,T)})}function Ln(g,T,C,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(C)}catch{}}function xs(){this.g=new Lu}function Ni(g){this.i=g.Sb||null,this.h=g.ab||!1}E(Ni,Ou),Ni.prototype.g=function(){return new Vr(this.i,this.h)};function Vr(g,T){It.call(this),this.H=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Vr,It),n=Vr.prototype,n.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=T,this.readyState=1,si(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(T.body=g),(this.H||u).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function xo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?Ds(this):si(this),this.readyState==3&&xo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Ds(this))},n.Na=function(g){this.g&&(this.response=g,Ds(this))},n.ga=function(){this.g&&Ds(this)};function Ds(g){g.readyState=4,g.l=null,g.j=null,g.B=null,si(g)}n.setRequestHeader=function(g,T){this.A.append(g,T)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=T.next();return g.join(`\r
`)};function si(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function On(g){let T="";return Le(g,function(C,R){T+=R,T+=":",T+=C,T+=`\r
`}),T}function Ur(g,T,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=On(C),typeof g=="string"?C!=null&&Ji(C):et(g,T,C))}function it(g){It.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(it,It);var xi=/^https?$/i,ll=["POST","PUT"];n=it.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,T,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wa.g(),this.g.onreadystatechange=A(h(this.Ca,this));try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch($){Lr(this,$);return}if(g=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)C.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const $ of R.keys())C.set($,R.get($));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(C.keys()).find($=>$.toLowerCase()=="content-type"),H=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(ll,T,void 0)>=0)||R||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ae]of C)this.g.setRequestHeader($,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch($){Lr(this,$)}};function Lr(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.o=5,ul(g),$i(g)}function ul(g){g.A||(g.A=!0,Ft(g,"complete"),Ft(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Ft(this,"complete"),Ft(this,"abort"),$i(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Or(this):this.Xa())},n.Xa=function(){Or(this)};function Or(g){if(g.h&&typeof a<"u"){if(g.v&&ri(g)==4)setTimeout(g.Ca.bind(g),0);else if(Ft(g,"readystatechange"),ri(g)==4){g.h=!1;try{const $=g.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var C;if(!(C=T)){var R;if(R=$===0){let ae=String(g.D).match(Yu)[1]||null;!ae&&u.self&&u.self.location&&(ae=u.self.location.protocol.slice(0,-1)),R=!xi.test(ae?ae.toLowerCase():"")}C=R}if(C)Ft(g,"complete"),Ft(g,"success");else{g.o=6;try{var H=ri(g)>2?g.g.statusText:""}catch{H=""}g.l=H+" ["+g.ca()+"]",ul(g)}}finally{$i(g)}}}}function $i(g,T){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,T||Ft(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ri(g){return g.g?g.g.readyState:0}n.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),Od(T)}};function Qt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Qi(g){const T={};g=(g.g&&ri(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<g.length;R++){if(x(g[R]))continue;var C=Hu(g[R]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const $=T[H]||[];T[H]=$,$.push(C)}Je(T,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(g,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||T}function Ms(g){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Di("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Di("baseRetryDelayMs",5e3,g),this.Za=Di("retryDelaySeedMs",1e4,g),this.Ta=Di("forwardChannelMaxRetries",2,g),this.va=Di("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Za(g&&g.concurrentRequestLimit),this.Ba=new xs,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ms.prototype,n.ka=8,n.I=1,n.connect=function(g,T,C,R){wt(0),this.W=g,this.H=T||{},C&&R!==void 0&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.J=ic(this,null,this.W),Mi(this)};function cl(g){if(Do(g),g.I==3){var T=g.V++,C=Nt(g.J);if(et(C,"SID",g.M),et(C,"RID",T),et(C,"TYPE","terminate"),Fr(g,C),T=new ti(g,g.j,T),T.M=2,T.A=kr(Nt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(T.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=T.A,C=!0),C||(T.g=sc(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Si(T)}nc(g)}function ks(g){g.g&&(dl(g),g.g.cancel(),g.g=null)}function Do(g){ks(g),g.v&&(u.clearTimeout(g.v),g.v=null),ko(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Mi(g){if(!ja(g.h)&&!g.m){g.m=!0;var T=g.Ea;le||D(),ue||(le(),ue=!0),M.add(T,g),g.D=0}}function Mo(g,T){return wi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=T.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Ei(h(g.Ea,g,T),tc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const H=new ti(this,this.j,g);let $=this.o;if(this.U&&($?($=q($),ce($,this.U)):$=this.U),this.u!==null||this.R||(H.J=$,$=null),this.S)e:{for(var T=0,C=0;C<this.i.length;C++){t:{var R=this.i[C];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(T+=R,T>4096){T=C;break e}if(T===4096||C===this.i.length-1){T=C+1;break e}}T=1e3}else T=1e3;T=Wu(this,H,T),C=Nt(this.J),et(C,"RID",g),et(C,"CVER",22),this.G&&et(C,"X-HTTP-Session-Id",this.G),Fr(this,C),$&&(this.R?T="headers="+Ji(On($))+"&"+T:this.u&&Ur(C,this.u,$)),el(this.h,H),this.Ra&&et(C,"TYPE","init"),this.S?(et(C,"$req",T),et(C,"SID","null"),H.U=!0,Ai(H,C,null)):Ai(H,C,T),this.I=2}}else this.I==3&&(g?fl(this,g):this.i.length==0||ja(this.h)||fl(this))};function fl(g,T){var C;T?C=T.l:C=g.V++;const R=Nt(g.J);et(R,"SID",g.M),et(R,"RID",C),et(R,"AID",g.K),Fr(g,R),g.u&&g.o&&Ur(R,g.u,g.o),C=new ti(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),T&&(g.i=T.G.concat(g.i)),T=Wu(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),el(g.h,C),Ai(C,R,T)}function Fr(g,T){g.H&&Le(g.H,function(C,R){et(T,R,C)}),g.l&&Le({},function(C,R){et(T,R,C)})}function Wu(g,T,C){C=Math.min(g.i.length,C);const R=g.l?h(g.l.Ka,g.l,g):null;e:{var H=g.i;let De=-1;for(;;){const vt=["count="+C];De==-1?C>0?(De=H[0].g,vt.push("ofs="+De)):De=0:vt.push("ofs="+De);let We=!0;for(let ht=0;ht<C;ht++){var $=H[ht].g;const Fn=H[ht].map;if($-=De,$<0)De=Math.max(0,H[ht].g-100),We=!1;else try{$="req"+$+"_"||"";try{var ae=Fn instanceof Map?Fn:Object.entries(Fn);for(const[Pi,oi]of ae){let ai=oi;d(oi)&&(ai=Is(oi)),vt.push($+Pi+"="+encodeURIComponent(ai))}}catch(Pi){throw vt.push($+"type="+encodeURIComponent("_badmap")),Pi}}catch{R&&R(Fn)}}if(We){ae=vt.join("&");break e}}ae=void 0}return g=g.i.splice(0,C),T.G=g,ae}function Zu(g){if(!g.g&&!g.v){g.Y=1;var T=g.Da;le||D(),ue||(le(),ue=!0),M.add(T,g),g.A=0}}function Br(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Ei(h(g.Da,g),tc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Ei(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),ks(this),ju(this))};function dl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function ju(g){g.g=new ti(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var T=Nt(g.na);et(T,"RID","rpc"),et(T,"SID",g.M),et(T,"AID",g.K),et(T,"CI",g.F?"0":"1"),!g.F&&g.ia&&et(T,"TO",g.ia),et(T,"TYPE","xmlhttp"),Fr(g,T),g.u&&g.o&&Ur(T,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=kr(Nt(T)),C.u=null,C.R=!0,Co(C,g)}n.Va=function(){this.C!=null&&(this.C=null,ks(this),Br(this),wt(19))};function ko(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function ec(g,T){var C=null;if(g.g==T){ko(g),dl(g),g.g=null;var R=2}else if(Ri(g.h,T))C=T.G,tl(g.h,T),R=1;else return;if(g.I!=0){if(T.o)if(R==1){C=T.u?T.u.length:0,T=Date.now()-T.F;var H=g.D;R=So(),Ft(R,new vi(R,C)),Mi(g)}else Zu(g);else if(H=T.m,H==3||H==0&&T.X>0||!(R==1&&Mo(g,T)||R==2&&Br(g)))switch(C&&C.length>0&&(T=g.h,T.i=T.i.concat(C)),H){case 1:ki(g,5);break;case 4:ki(g,10);break;case 3:ki(g,6);break;default:ki(g,2)}}}function tc(g,T){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*T}function ki(g,T){if(g.j.info("Error code "+T),T==2){var C=h(g.bb,g),R=g.Ua;const H=!R;R=new In(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||zt(R,"https"),kr(R),H?ii(R.toString(),C):al(R.toString(),C)}else wt(2);g.I=0,g.l&&g.l.pa(T),nc(g),Do(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function nc(g){if(g.I=0,g.ja=[],g.l){const T=nl(g.h);(T.length!=0||g.i.length!=0)&&(P(g.ja,T),P(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function ic(g,T,C){var R=C instanceof In?Nt(C):new In(C);if(R.g!="")T&&(R.g=T+"."+R.g),ws(R,R.u);else{var H=u.location;R=H.protocol,T=T?T+"."+H.hostname:H.hostname,H=+H.port;const $=new In(null);R&&zt($,R),T&&($.g=T),H&&ws($,H),C&&($.h=C),R=$}return C=g.G,T=g.wa,C&&T&&et(R,C,T),et(R,"VER",g.ka),Fr(g,R),R}function sc(g,T,C){if(T&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Aa&&!g.ma?new it(new Ni({ab:C})):new it(g.ma),T.Fa(g.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function rc(){}n=rc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ps(){}Ps.prototype.g=function(g,T){return new fn(g,T)};function fn(g,T){It.call(this),this.g=new Ms(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(g?g["X-WebChannel-Client-Profile"]=T.sa:g={"X-WebChannel-Client-Profile":T.sa}),this.g.U=g,(g=T&&T.Qb)&&!x(g)&&(this.g.u=g),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!x(T)&&(this.g.G=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new Xi(this)}E(fn,It),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){cl(this.g)},fn.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=Is(g),g=C);T.i.push(new bt(T.Ya++,g)),T.I==3&&Mi(T)},fn.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,fn.Z.N.call(this)};function oc(g){$t.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){e:{for(const C in T){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}E(oc,$t);function ac(){Vn.call(this),this.status=1}E(ac,Vn);function Xi(g){this.g=g}E(Xi,rc),Xi.prototype.ra=function(){Ft(this.g,"a")},Xi.prototype.qa=function(g){Ft(this.g,new oc(g))},Xi.prototype.pa=function(g){Ft(this.g,new ac)},Xi.prototype.oa=function(){Ft(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,XS=function(){return new Ps},QS=function(){return So()},$S=_t,hm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,Nf=Dr,Xa.COMPLETE="complete",JS=Xa,Fu.EventType=jn,jn.OPEN="a",jn.CLOSE="b",jn.ERROR="c",jn.MESSAGE="d",It.prototype.listen=It.prototype.J,tu=Fu,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,YS=it}).apply(typeof hf<"u"?hf:typeof self<"u"?self:typeof window<"u"?window:{});const u0="@firebase/firestore",c0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new Ym("@firebase/firestore");function ca(){return fo.logLevel}function he(n,...e){if(fo.logLevel<=Be.DEBUG){const t=e.map(ig);fo.debug(`Firestore (${La}): ${n}`,...t)}}function ys(n,...e){if(fo.logLevel<=Be.ERROR){const t=e.map(ig);fo.error(`Firestore (${La}): ${n}`,...t)}}function ba(n,...e){if(fo.logLevel<=Be.WARN){const t=e.map(ig);fo.warn(`Firestore (${La}): ${n}`,...t)}}function ig(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,WS(n,i,t)}function WS(n,e,t){let i=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ys(i),new Error(i)}function je(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||WS(e,o,i)}function xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Es{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class yD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _D{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let a=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new hr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},d=m=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(je(typeof i.accessToken=="string",31837,{l:i}),new ZS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class vD{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ED{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new vD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class f0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const i=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new f0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new f0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=AD(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function pm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return $p(o)===$p(a)?qe(o,a):$p(o)?1:-1}return qe(n.length,e.length)}const SD=55296,CD=57343;function $p(n){const e=n.charCodeAt(0);return e>=SD&&e<=CD}function Na(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="__name__";class Fi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Fi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Fi.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return qe(e.length,t.length)}static compareSegments(e,t){const i=Fi.isNumericId(e),o=Fi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Fi.extractNumericId(e).compare(Fi.extractNumericId(t)):pm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dr.fromString(e.substring(4,e.length-2))}}class lt extends Fi{construct(e,t,i){return new lt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const ID=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Fi{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return ID.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===d0}static keyField(){return new tn([d0])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(lt.fromString(e))}static fromName(e){return new Te(lt.fromString(e).popFirst(5))}static empty(){return new Te(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(n,e,t){if(!t)throw new de(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wD(n,e,t,i){if(e===!0&&i===!0)throw new de(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function h0(n){if(!Te.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function p0(n){if(Te.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function hd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function ho(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hd(n);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ru(n,e){if(!eC(n))throw new de(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new de(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=-62135596800,g0=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*g0);return new ft(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<m0)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g0}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ru(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-m0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Ut("string",ft._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new ft(0,0))}static max(){return new be(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=-1;function RD(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new ft(t+1,0):new ft(t,i));return new mr(o,Te.empty(),e)}function bD(n){return new mr(n.readTime,n.key,hu)}class mr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new mr(be.min(),Te.empty(),hu)}static max(){return new mr(be.max(),Te.empty(),hu)}}function ND(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==xD)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(m=>i(m)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let m=0;m<a;m++){const h=m;t(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function MD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}pd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=-1;function md(n){return n==null}function Jf(n){return n===0&&1/n==-1/0}function kD(n){return typeof n=="number"&&Number.isInteger(n)&&!Jf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="";function PD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=y0(e)),e=VD(n.get(t),e);return y0(e)}function VD(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case tC:t+="";break;default:t+=a}}return t}function y0(n){return n+tC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pf(this.root,e,this.comparator,!1)}getReverseIterator(){return new pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pf(this.root,e,this.comparator,!0)}}class pf{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??en.RED,this.left=o??en.EMPTY,this.right=a??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new en(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new v0(this.data.getIterator())}getIteratorFrom(e){return new v0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class v0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new kn([])}unionWith(e){let t=new Gt(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new iC("Invalid base64 string: "+a):a}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const UD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=UD.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yr(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="server_timestamp",rC="__type__",oC="__previous_value__",aC="__local_write_time__";function og(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[rC])==null?void 0:i.stringValue)===sC}function gd(n){const e=n.mapValue.fields[oC];return og(e)?gd(e):e}function pu(n){const e=gr(n.mapValue.fields[aC].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t,i,o,a,u,d,m,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=h,this.isUsingEmulator=_}}const $f="(default)";class mu{constructor(e,t){this.projectId=e,this.database=t||$f}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===$f}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="__type__",OD="__max__",mf={mapValue:{}},uC="__vector__",Qf="value";function _r(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?og(n)?4:BD(n)?9007199254740991:FD(n)?10:11:Ie(28295,{value:n})}function Yi(n,e){if(n===e)return!0;const t=_r(n);if(t!==_r(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pu(n).isEqual(pu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=gr(o.timestampValue),d=gr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return yr(o.bytesValue).isEqual(yr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Ct(o.geoPointValue.latitude)===Ct(a.geoPointValue.latitude)&&Ct(o.geoPointValue.longitude)===Ct(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Ct(o.integerValue)===Ct(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Ct(o.doubleValue),d=Ct(a.doubleValue);return u===d?Jf(u)===Jf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Na(n.arrayValue.values||[],e.arrayValue.values||[],Yi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(_0(u)!==_0(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(d[m]===void 0||!Yi(u[m],d[m])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function gu(n,e){return(n.values||[]).find((t=>Yi(t,e)))!==void 0}function xa(n,e){if(n===e)return 0;const t=_r(n),i=_r(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Ct(a.integerValue||a.doubleValue),m=Ct(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return E0(n.timestampValue,e.timestampValue);case 4:return E0(pu(n),pu(e));case 5:return pm(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=yr(a),m=yr(u);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),m=u.split("/");for(let h=0;h<d.length&&h<m.length;h++){const _=qe(d[h],m[h]);if(_!==0)return _}return qe(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=qe(Ct(a.latitude),Ct(u.latitude));return d!==0?d:qe(Ct(a.longitude),Ct(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return T0(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var A,I,P,B;const d=a.fields||{},m=u.fields||{},h=(A=d[Qf])==null?void 0:A.arrayValue,_=(I=m[Qf])==null?void 0:I.arrayValue,E=qe(((P=h==null?void 0:h.values)==null?void 0:P.length)||0,((B=_==null?void 0:_.values)==null?void 0:B.length)||0);return E!==0?E:T0(h,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===mf.mapValue&&u===mf.mapValue)return 0;if(a===mf.mapValue)return 1;if(u===mf.mapValue)return-1;const d=a.fields||{},m=Object.keys(d),h=u.fields||{},_=Object.keys(h);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const A=pm(m[E],_[E]);if(A!==0)return A;const I=xa(d[m[E]],h[_[E]]);if(I!==0)return I}return qe(m.length,_.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function E0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=gr(n),i=gr(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function T0(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=xa(t[o],i[o]);if(a)return a}return qe(t.length,i.length)}function Da(n){return mm(n)}function mm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=gr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return yr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=mm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${mm(t.fields[u])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function xf(n){switch(_r(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gd(n);return e?16+xf(e):16;case 5:return 2*n.stringValue.length;case 6:return yr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+xf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Sr(i.fields,((a,u)=>{o+=a.length+xf(u)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function A0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gm(n){return!!n&&"integerValue"in n}function ag(n){return!!n&&"arrayValue"in n}function S0(n){return!!n&&"nullValue"in n}function C0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Df(n){return!!n&&"mapValue"in n}function FD(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[lC])==null?void 0:i.stringValue)===uC}function au(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Sr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=au(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(n.arrayValue.values[t]);return e}return{...n}}function BD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===OD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Df(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=tn.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=au(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Df(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Df(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Sr(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Sn(au(this.value))}}function cC(n){const e=[];return Sr(n.fields,((t,i)=>{const o=new tn([t]);if(Df(i)){const a=cC(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new an(e,0,be.min(),be.min(),be.min(),Sn.empty(),0)}static newFoundDocument(e,t,i,o){return new an(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new an(e,2,t,be.min(),be.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,be.min(),be.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t){this.position=e,this.inclusive=t}}function I0(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Te.comparator(Te.fromName(u.referenceValue),t.key):i=xa(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function w0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function qD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{}class Vt extends fC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new HD(e,t,i):t==="array-contains"?new YD(e,i):t==="in"?new JD(e,i):t==="not-in"?new $D(e,i):t==="array-contains-any"?new QD(e,i):new Vt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new zD(e,i):new KD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xa(t,this.value)):t!==null&&_r(this.value)===_r(t)&&this.matchesComparison(xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mi extends fC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mi(e,t)}matches(e){return dC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dC(n){return n.op==="and"}function hC(n){return GD(n)&&dC(n)}function GD(n){for(const e of n.filters)if(e instanceof mi)return!1;return!0}function ym(n){if(n instanceof Vt)return n.field.canonicalString()+n.op.toString()+Da(n.value);if(hC(n))return n.filters.map((e=>ym(e))).join(",");{const e=n.filters.map((t=>ym(t))).join(",");return`${n.op}(${e})`}}function pC(n,e){return n instanceof Vt?(function(i,o){return o instanceof Vt&&i.op===o.op&&i.field.isEqual(o.field)&&Yi(i.value,o.value)})(n,e):n instanceof mi?(function(i,o){return o instanceof mi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&pC(u,o.filters[d])),!0):!1})(n,e):void Ie(19439)}function mC(n){return n instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Da(t.value)}`})(n):n instanceof mi?(function(t){return t.op.toString()+" {"+t.getFilters().map(mC).join(" ,")+"}"})(n):"Filter"}class HD extends Vt{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class zD extends Vt{constructor(e,t){super(e,"in",t),this.keys=gC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class KD extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=gC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class YD extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ag(t)&&gu(t.arrayValue,this.value)}}class JD extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gu(this.value.arrayValue,t)}}class $D extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gu(this.value.arrayValue,t)}}class QD extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ag(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>gu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function R0(n,e=null,t=[],i=[],o=null,a=null,u=null){return new XD(n,e,t,i,o,a,u)}function lg(n){const e=xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>ym(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),md(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Da(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Da(i))).join(",")),e.Te=t}return e.Te}function ug(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!pC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!w0(n.startAt,e.startAt)&&w0(n.endAt,e.endAt)}function _m(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WD(n,e,t,i,o,a,u,d){return new Ba(n,e,t,i,o,a,u,d)}function yC(n){return new Ba(n)}function b0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function _C(n){return n.collectionGroup!==null}function lu(n){const e=xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Gt(tn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new yu(a,i))})),t.has(tn.keyField().canonicalString())||e.Ie.push(new yu(tn.keyField(),i))}return e.Ie}function Gi(n){const e=xe(n);return e.Ee||(e.Ee=ZD(e,lu(n))),e.Ee}function ZD(n,e){if(n.limitType==="F")return R0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new yu(o.field,a)}));const t=n.endAt?new Xf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Xf(n.startAt.position,n.startAt.inclusive):null;return R0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function vm(n,e){const t=n.filters.concat([e]);return new Ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Em(n,e,t){return new Ba(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yd(n,e){return ug(Gi(n),Gi(e))&&n.limitType===e.limitType}function vC(n){return`${lg(Gi(n))}|lt:${n.limitType}`}function fa(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>mC(o))).join(", ")}]`),md(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Da(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Da(o))).join(",")),`Target(${i})`})(Gi(n))}; limitType=${n.limitType})`}function _d(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Te.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of lu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,m){const h=I0(u,d,m);return u.inclusive?h<=0:h<0})(i.startAt,lu(i),o)||i.endAt&&!(function(u,d,m){const h=I0(u,d,m);return u.inclusive?h>=0:h>0})(i.endAt,lu(i),o))})(n,e)}function jD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EC(n){return(e,t)=>{let i=!1;for(const o of lu(n)){const a=eM(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function eM(n,e,t){const i=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(a,u,d){const m=u.data.field(a),h=d.data.field(a);return m!==null&&h!==null?xa(m,h):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Sr(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return nC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new mt(Te.comparator);function _s(){return tM}const TC=new mt(Te.comparator);function nu(...n){let e=TC;for(const t of n)e=e.insert(t.key,t);return e}function AC(n){let e=TC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ro(){return uu()}function SC(){return uu()}function uu(){return new go((n=>n.toString()),((n,e)=>n.isEqual(e)))}const nM=new mt(Te.comparator),iM=new Gt(Te.comparator);function Ge(...n){let e=iM;for(const t of n)e=e.add(t);return e}const sM=new Gt(qe);function rM(){return sM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jf(e)?"-0":e}}function CC(n){return{integerValue:""+n}}function oM(n,e){return kD(e)?CC(e):cg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this._=void 0}}function aM(n,e,t){return n instanceof Wf?(function(o,a){const u={fields:{[rC]:{stringValue:sC},[aC]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&og(a)&&(a=gd(a)),a&&(u.fields[oC]=a),{mapValue:u}})(t,e):n instanceof _u?wC(n,e):n instanceof vu?RC(n,e):(function(o,a){const u=IC(o,a),d=N0(u)+N0(o.Ae);return gm(u)&&gm(o.Ae)?CC(d):cg(o.serializer,d)})(n,e)}function lM(n,e,t){return n instanceof _u?wC(n,e):n instanceof vu?RC(n,e):t}function IC(n,e){return n instanceof Zf?(function(i){return gm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Wf extends vd{}class _u extends vd{constructor(e){super(),this.elements=e}}function wC(n,e){const t=bC(e);for(const i of n.elements)t.some((o=>Yi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class vu extends vd{constructor(e){super(),this.elements=e}}function RC(n,e){let t=bC(e);for(const i of n.elements)t=t.filter((o=>!Yi(o,i)));return{arrayValue:{values:t}}}class Zf extends vd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function N0(n){return Ct(n.integerValue||n.doubleValue)}function bC(n){return ag(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uM(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof _u&&o instanceof _u||i instanceof vu&&o instanceof vu?Na(i.elements,o.elements,Yi):i instanceof Zf&&o instanceof Zf?Yi(i.Ae,o.Ae):i instanceof Wf&&o instanceof Wf})(n.transform,e.transform)}class cM{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ed{}function NC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Td(n.key,Pn.none()):new bu(n.key,n.data,Pn.none());{const t=n.data,i=Sn.empty();let o=new Gt(tn.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Cr(n.key,i,new kn(o.toArray()),Pn.none())}}function fM(n,e,t){n instanceof bu?(function(o,a,u){const d=o.value.clone(),m=D0(o.fieldTransforms,a,u.transformResults);d.setAll(m),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Cr?(function(o,a,u){if(!Mf(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=D0(o.fieldTransforms,a,u.transformResults),m=a.data;m.setAll(xC(o)),m.setAll(d),a.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function cu(n,e,t,i){return n instanceof bu?(function(a,u,d,m){if(!Mf(a.precondition,u))return d;const h=a.value.clone(),_=M0(a.fieldTransforms,m,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Cr?(function(a,u,d,m){if(!Mf(a.precondition,u))return d;const h=M0(a.fieldTransforms,m,u),_=u.data;return _.setAll(xC(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Mf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function dM(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=IC(i.transform,o||null);a!=null&&(t===null&&(t=Sn.empty()),t.set(i.field,a))}return t||null}function x0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Na(i,o,((a,u)=>uM(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class bu extends Ed{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cr extends Ed{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function xC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function D0(n,e,t){const i=new Map;je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,lM(u,d,t[o]))}return i}function M0(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,aM(a,u,e))}return i}class Td extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hM extends Ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&fM(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=cu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=cu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=SC();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const m=NC(u,d);m!==null&&i.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,((t,i)=>x0(t,i)))&&Na(this.baseMutations,e.baseMutations,((t,i)=>x0(t,i)))}}class fg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){je(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return nM})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new fg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ye;function yM(n){switch(n){case ee.OK:return Ie(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function DC(n){if(n===void 0)return ys("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Pt.OK:return ee.OK;case Pt.CANCELLED:return ee.CANCELLED;case Pt.UNKNOWN:return ee.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ee.INTERNAL;case Pt.UNAVAILABLE:return ee.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ee.NOT_FOUND;case Pt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Pt.ABORTED:return ee.ABORTED;case Pt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Pt.DATA_LOSS:return ee.DATA_LOSS;default:return Ie(39323,{code:n})}}(Ye=Pt||(Pt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new dr([4294967295,4294967295],0);function k0(n){const e=_M().encode(n),t=new KS;return t.update(e),new Uint8Array(t.digest())}function P0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new dr([t,i],0),new dr([o,a],0)]}class dg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new iu(`Invalid padding: ${t}`);if(i<0)throw new iu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new iu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new iu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=dr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(dr.fromNumber(i)));return o.compare(vM)===1&&(o=new dr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=k0(e),[i,o]=P0(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new dg(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=k0(e),[i,o]=P0(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class iu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ad(be.min(),o,new mt(qe),_s(),Ge())}}class Nu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Nu(i,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class MC{constructor(e,t){this.targetId=e,this.Ce=t}}class kC{constructor(e,t,i=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class V0{constructor(){this.ve=0,this.Fe=U0(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),i=Ge();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:a})}})),new Nu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=U0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EM{constructor(e){this.Ge=e,this.ze=new Map,this.je=_s(),this.Je=gf(),this.He=gf(),this.Ye=new mt(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(_m(a))if(i===0){const u=new Te(a.path);this.et(t,u,an.newNoDocument(u,be.min()))}else je(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),m=d?this.ct(d,e,u):1;if(m!==0){this.it(t);const h=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=yr(i).toUint8Array()}catch(m){if(m instanceof iC)return ba("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new dg(u,o,a)}catch(m){return ba(m instanceof iu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&_m(d.target)){const m=new Te(d.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,an.newNoDocument(m,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=Ge();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((m=>{const h=this.ot(m);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Ad(e,t,this.Ye,this.je,i);return this.je=_s(),this.Je=gf(),this.He=gf(),this.Ye=new mt(qe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new V0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gt(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gt(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new V0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gf(){return new mt(Te.comparator)}function U0(){return new mt(Te.comparator)}const TM={asc:"ASCENDING",desc:"DESCENDING"},AM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SM={and:"AND",or:"OR"};class CM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Tm(n,e){return n.useProto3Json||md(e)?e:{value:e}}function jf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IM(n,e){return jf(n,e.toTimestamp())}function Hi(n){return je(!!n,49232),be.fromTimestamp((function(t){const i=gr(t);return new ft(i.seconds,i.nanos)})(n))}function hg(n,e){return Am(n,e).canonicalString()}function Am(n,e){const t=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function VC(n){const e=lt.fromString(n);return je(BC(e),10190,{key:e.toString()}),e}function Sm(n,e){return hg(n.databaseId,e.path)}function Qp(n,e){const t=VC(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(LC(t))}function UC(n,e){return hg(n.databaseId,e)}function wM(n){const e=VC(n);return e.length===4?lt.emptyPath():LC(e)}function Cm(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LC(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function L0(n,e,t){return{name:Sm(n,e),fields:t.value.mapValue.fields}}function RM(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ie(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(je(_===void 0||typeof _=="string",58123),nn.fromBase64String(_||"")):(je(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),nn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?ee.UNKNOWN:DC(h.code);return new de(_,h.message||"")})(u);t=new kC(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Qp(n,i.document.name),a=Hi(i.document.updateTime),u=i.document.createTime?Hi(i.document.createTime):be.min(),d=new Sn({mapValue:{fields:i.document.fields}}),m=an.newFoundDocument(o,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];t=new kf(h,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Qp(n,i.document),a=i.readTime?Hi(i.readTime):be.min(),u=an.newNoDocument(o,a),d=i.removedTargetIds||[];t=new kf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Qp(n,i.document),a=i.removedTargetIds||[];t=new kf([],a,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new gM(o,a),d=i.targetId;t=new MC(d,u)}}return t}function bM(n,e){let t;if(e instanceof bu)t={update:L0(n,e.key,e.value)};else if(e instanceof Td)t={delete:Sm(n,e.key)};else if(e instanceof Cr)t={update:L0(n,e.key,e.data),updateMask:LM(e.fieldMask)};else{if(!(e instanceof hM))return Ie(16599,{Vt:e.type});t={verify:Sm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Wf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof _u)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof vu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Zf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Ie(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:IM(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)})(n,e.precondition)),t}function NM(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Hi(o.updateTime):Hi(a);return u.isEqual(be.min())&&(u=Hi(a)),new cM(u,o.transformResults||[])})(t,e)))):[]}function xM(n,e){return{documents:[UC(n,e.path)]}}function DM(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=UC(n,o);const a=(function(h){if(h.length!==0)return FC(mi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(A){return{field:da(A.field),direction:PM(A.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Tm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function MM(n){let e=wM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){je(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const A=OC(E);return A instanceof mi&&hC(A)?A.getFilters():[A]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((A=>(function(P){return new yu(ha(P.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,md(A)?null:A})(t.limit));let m=null;t.startAt&&(m=(function(E){const A=!!E.before,I=E.values||[];return new Xf(I,A)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const A=!E.before,I=E.values||[];return new Xf(I,A)})(t.endAt)),WD(e,o,u,a,d,"F",m,h)}function kM(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ha(t.unaryFilter.field);return Vt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ha(t.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ha(t.unaryFilter.field);return Vt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ha(t.unaryFilter.field);return Vt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Vt.create(ha(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return mi.create(t.compositeFilter.filters.map((i=>OC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function PM(n){return TM[n]}function VM(n){return AM[n]}function UM(n){return SM[n]}function da(n){return{fieldPath:n.canonicalString()}}function ha(n){return tn.fromServerFormat(n.fieldPath)}function FC(n){return n instanceof Vt?(function(t){if(t.op==="=="){if(C0(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NAN"}};if(S0(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(C0(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NAN"}};if(S0(t.value))return{unaryFilter:{field:da(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:da(t.field),op:VM(t.op),value:t.value}}})(n):n instanceof mi?(function(t){const i=t.getFilters().map((o=>FC(o)));return i.length===1?i[0]:{compositeFilter:{op:UM(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function LM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function BC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,t,i,o,a=be.min(),u=be.min(),d=nn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new lr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.yt=e}}function FM(n){const e=MM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Em(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.Cn=new qM}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(mr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class qM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Gt(lt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Gt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qC=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(qC,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ma(0)}static cr(){return new Ma(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="LruGarbageCollector",GM=1048576;function B0([n,e],[t,i]){const o=qe(n,t);return o===0?qe(e,i):o}class HM{constructor(e){this.Ir=e,this.buffer=new Gt(B0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();B0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(F0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fa(t)?he(F0,"Ignoring IndexedDB error during garbage collection: ",t):await Oa(t)}await this.Vr(3e5)}))}}class KM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(pd.ce);const i=new HM(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(O0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,d,m,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),ca()<=Be.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(h-m)+`ms
Total Duration: ${h-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function YM(n,e){return new KM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.changes=new go((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&cu(i.mutation,o,kn.empty(),ft.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ge()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ge()){const o=ro();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=nu();return a.forEach(((d,m)=>{u=u.insert(d,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=ro();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ge())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=_s();const u=uu(),d=(function(){return uu()})();return t.forEach(((m,h)=>{const _=i.get(h.key);o.has(h.key)&&(_===void 0||_.mutation instanceof Cr)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),cu(_.mutation,h,_.mutation.getFieldMask(),ft.now())):u.set(h.key,kn.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>d.set(h,new $M(_,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=uu();let o=new mt(((u,d)=>u-d)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((m=>{const h=t.get(m);if(h===null)return;let _=i.get(m)||kn.empty();_=d.applyToLocalView(h,_),i.set(m,_);const E=(o.get(d.batchId)||Ge()).add(m);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),h=m.key,_=m.value,E=SC();_.forEach((A=>{if(!a.has(A)){const I=NC(t.get(A),i.get(A));I!==null&&E.set(A,I),a=a.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_C(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(ro());let d=hu,m=a;return u.next((h=>se.forEach(h,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{m=m.insert(_,A)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,m,h,Ge()))).next((_=>({batchId:d,changes:AC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((i=>{let o=nu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=nu();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(m=>{const h=(function(E,A){return new Ba(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((_=>{_.forEach(((E,A)=>{u=u.insert(E,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((m,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,an.newInvalidDocument(_)))}));let d=nu();return u.forEach(((m,h)=>{const _=a.get(m);_!==void 0&&cu(_.mutation,h,kn.empty(),ft.now()),_d(t,h)&&(d=d.insert(m,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Hi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:FM(o.bundledQuery),readTime:Hi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.overlays=new mt(Te.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ro();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=ro(),a=t.length+1,u=new Te(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,h=m.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&m.largestBatchId>i&&o.set(m.getKey(),m)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new mt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=ro(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=ro(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=o)););return se.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new mM(t,i));let a=this.qr.get(t);a===void 0&&(a=Ge(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(){this.Qr=new Gt(Yt.$r),this.Ur=new Gt(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Yt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Yt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Te(new lt([])),i=new Yt(t,e),o=new Yt(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new lt([])),i=new Yt(t,e),o=new Yt(t,e+1);let a=Ge();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Yt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Yt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(Yt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new pM(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new Yt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?rg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Yt(t,0),o=new Yt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const d=this.Xr(u.Yr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Gt(qe);return t.forEach((o=>{const a=new Yt(o,0),u=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Te.isDocumentKey(a)||(a=a.child(""));const u=new Yt(new Te(a),0);let d=new Gt(qe);return this.Zr.forEachWhile((m=>{const h=m.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(m.Yr)),!0)}),u),se.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(o=>{const a=new Yt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Yt(t,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.ri=e,this.docs=(function(){return new mt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let i=_s();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():an.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=_s();const u=t.path,d=new Te(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:h,value:{document:_}}=m.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||ND(bD(_),i)<=0||(o.has(_.key)||_d(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new tk(this)}getSize(e){return se.resolve(this.size)}}class tk extends JM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.persistence=e,this.si=new go((t=>lg(t)),ug),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new pg,this.targetCount=0,this.ai=Ma.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ma(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t){this.ui={},this.overlays={},this.ci=new pd(0),this.li=!1,this.li=!0,this.hi=new ZM,this.referenceDelegate=e(this),this.Pi=new nk(this),this.indexManager=new BM,this.remoteDocumentCache=(function(o){return new ek(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new OM(t),this.Ii=new XM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new WM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new jM(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){he("MemoryPersistence","Starting transaction:",e);const o=new ik(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class ik extends DD{constructor(e){super(),this.currentSequenceNumber=e}}class mg{constructor(e){this.persistence=e,this.Ri=new pg,this.Vi=null}static mi(e){return new mg(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=Te.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ed{constructor(e,t){this.persistence=e,this.pi=new go((i=>PD(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=YM(this,t)}static mi(e,t){return new ed(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,a.removeEntry(u,be.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xf(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ge(),o=Ge();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new gg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return kb()?8:MD(un())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new sk;return this.Ss(e,t,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(ca()<=Be.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(ca()<=Be.DEBUG&&he("QueryEngine","Query:",fa(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(ca()<=Be.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(t))):se.resolve())}ys(e,t){if(b0(t))return se.resolve(null);let i=Gi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Em(t,null,"F"),i=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ge(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const h=this.Ds(t,d);return this.Cs(t,h,u,m.readTime)?this.ys(e,Em(t,null,"F")):this.vs(e,h,t,m)}))))})))))}ws(e,t,i,o){return b0(t)||o.isEqual(be.min())?se.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?se.resolve(null):(ca()<=Be.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fa(t)),this.vs(e,u,t,RD(o,hu)).next((d=>d)))}))}Ds(e,t){let i=new Gt(EC(e));return t.forEach(((o,a)=>{_d(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return ca()<=Be.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",fa(t)),this.ps.getDocumentsMatchingQuery(e,t,mr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="LocalStore",ok=3e8;class ak{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new mt(qe),this.xs=new go((a=>lg(a)),ug),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function lk(n,e,t,i){return new ak(n,e,t,i)}async function HC(n,e){const t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let m=Ge();for(const h of o){u.push(h.batchId);for(const _ of h.mutations)m=m.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(i,m).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function uk(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,h,_){const E=h.batch,A=E.keys();let I=se.resolve();return A.forEach((P=>{I=I.next((()=>_.getEntry(m,P))).next((B=>{const L=h.docVersions.get(P);je(L!==null,48541),B.version.compareTo(L)<0&&(E.applyToRemoteDocument(B,h),B.isValidDocument()&&(B.setReadTime(h.commitVersion),_.addEntry(B)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=Ge();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(m=m.add(d.batch.mutations[h].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function zC(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function ck(n,e){const t=xe(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((_,E)=>{const A=o.get(E);if(!A)return;d.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,E))));let I=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(nn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,i)),o=o.insert(E,I),(function(B,L,Q){return B.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=ok?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(A,I,_)&&d.push(t.Pi.updateTargetData(a,I))}));let m=_s(),h=Ge();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(fk(a,u,e.documentUpdates).next((_=>{m=_.ks,h=_.qs}))),!i.isEqual(be.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,m,h))).next((()=>m))})).then((a=>(t.Ms=o,a)))}function fk(n,e,t){let i=Ge(),o=Ge();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=_s();return t.forEach(((d,m)=>{const h=a.get(d);m.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),m.isNoDocument()&&m.version.isEqual(be.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!h.isValidDocument()||m.version.compareTo(h.version)>0||m.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):he(yg,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",m.version)})),{ks:u,qs:o}}))}function dk(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=rg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function hk(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new lr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Im(n,e,t){const i=xe(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Fa(u))throw u;he(yg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function q0(n,e,t){const i=xe(n);let o=be.min(),a=Ge();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,h,_){const E=xe(m),A=E.xs.get(_);return A!==void 0?se.resolve(E.Ms.get(A)):E.Pi.getTargetData(h,_)})(i,u,Gi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((m=>{a=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:be.min(),t?a:Ge()))).next((d=>(pk(i,jD(e),d),{documents:d,Qs:a})))))}function pk(n,e,t){let i=n.Os.get(e)||be.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class G0{constructor(){this.activeTargetIds=rM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mk{constructor(){this.Mo=new G0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new G0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="ConnectivityMonitor";class z0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(H0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(H0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf=null;function wm(){return yf===null?yf=(function(){return 268435456+Math.round(2147483648*Math.random())})():yf++,"0x"+yf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="RestConnection",yk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _k{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===$f?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=wm(),d=this.zo(e,t.toUriEncodedString());he(Xp,`Sending RPC '${e}' ${u}:`,d,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,a);const{host:h}=new URL(d),_=Pa(h);return this.Jo(e,d,m,i,_).then((E=>(he(Xp,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw ba(Xp,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+La})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=yk[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class Ek extends _k{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=wm();return new Promise(((d,m)=>{const h=new YS;h.setWithCredentials(!0),h.listenOnce(JS.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Nf.NO_ERROR:const E=h.getResponseJson();he(rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Nf.TIMEOUT:he(rn,`RPC '${e}' ${u} timed out`),m(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Nf.HTTP_ERROR:const A=h.getStatus();if(he(rn,`RPC '${e}' ${u} failed with status:`,A,"response text:",h.getResponseText()),A>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const B=(function(Q){const ie=Q.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ie)>=0?ie:ee.UNKNOWN})(P.status);m(new de(B,P.message))}else m(new de(ee.UNKNOWN,"Server responded with status "+h.getStatus()))}else m(new de(ee.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{he(rn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);he(rn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=wm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=XS(),d=QS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(m.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const _=a.join("");he(rn,`Creating RPC '${e}' stream ${o}: ${_}`,m);const E=u.createWebChannel(_,m);this.I_(E);let A=!1,I=!1;const P=new vk({Yo:L=>{I?he(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(A||(he(rn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),he(rn,`RPC '${e}' stream ${o} sending:`,L),E.send(L))},Zo:()=>E.close()}),B=(L,Q,ie)=>{L.listen(Q,(Z=>{try{ie(Z)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return B(E,tu.EventType.OPEN,(()=>{I||(he(rn,`RPC '${e}' stream ${o} transport opened.`),P.o_())})),B(E,tu.EventType.CLOSE,(()=>{I||(I=!0,he(rn,`RPC '${e}' stream ${o} transport closed`),P.a_(),this.E_(E))})),B(E,tu.EventType.ERROR,(L=>{I||(I=!0,ba(rn,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),P.a_(new de(ee.UNAVAILABLE,"The operation could not be completed")))})),B(E,tu.EventType.MESSAGE,(L=>{var Q;if(!I){const ie=L.data[0];je(!!ie,16349);const Z=ie,oe=(Z==null?void 0:Z.error)||((Q=Z[0])==null?void 0:Q.error);if(oe){he(rn,`RPC '${e}' stream ${o} received error:`,oe);const le=oe.status;let ue=(function(N){const V=Pt[N];if(V!==void 0)return DC(V)})(le),M=oe.message;ue===void 0&&(ue=ee.INTERNAL,M="Unknown error status: "+le+" with message "+oe.message),I=!0,P.a_(new de(ue,M)),E.close()}else he(rn,`RPC '${e}' stream ${o} received:`,ie),P.u_(ie)}})),B(d,$S.STAT_EVENT,(L=>{L.stat===hm.PROXY?he(rn,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===hm.NOPROXY&&he(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Wp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(n){return new CM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="PersistentStream";class YC{constructor(e,t,i,o,a,u,d,m){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(ys(t.toString()),ys("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new de(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(K0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(K0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Tk extends YC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=RM(this.serializer,e),i=(function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?Hi(u.readTime):be.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Cm(this.serializer),t.addTarget=(function(a,u){let d;const m=u.target;if(d=_m(m)?{documents:xM(a,m)}:{query:DM(a,m).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=PC(a,u.resumeToken);const h=Tm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(be.min())>0){d.readTime=jf(a,u.snapshotVersion.toTimestamp());const h=Tm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=kM(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Cm(this.serializer),t.removeTarget=e,this.q_(t)}}class Ak extends YC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=NM(e.writeResults,e.commitTime),i=Hi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Cm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>bM(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{}class Ck extends Sk{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Am(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(ee.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Am(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(ee.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Ik{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ys(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="RemoteStore";class wk{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{yo(this)&&(he(po,"Restarting streams for network reachability change."),await(async function(m){const h=xe(m);h.Ea.add(4),await xu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Cd(h)})(this))}))})),this.Ra=new Ik(i,o)}}async function Cd(n){if(yo(n))for(const e of n.da)await e(!0)}async function xu(n){for(const e of n.da)await e(!1)}function JC(n,e){const t=xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Tg(t)?Eg(t):qa(t).O_()&&vg(t,e))}function _g(n,e){const t=xe(n),i=qa(t);t.Ia.delete(e),i.O_()&&$C(t,e),t.Ia.size===0&&(i.O_()?i.L_():yo(t)&&t.Ra.set("Unknown"))}function vg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qa(n).Y_(e)}function $C(n,e){n.Va.Ue(e),qa(n).Z_(e)}function Eg(n){n.Va=new EM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),qa(n).start(),n.Ra.ua()}function Tg(n){return yo(n)&&!qa(n).x_()&&n.Ia.size>0}function yo(n){return xe(n).Ea.size===0}function QC(n){n.Va=void 0}async function Rk(n){n.Ra.set("Online")}async function bk(n){n.Ia.forEach(((e,t)=>{vg(n,e)}))}async function Nk(n,e){QC(n),Tg(n)?(n.Ra.ha(e),Eg(n)):n.Ra.set("Unknown")}async function xk(n,e,t){if(n.Ra.set("Online"),e instanceof kC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){he(po,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await td(n,i)}else if(e instanceof kf?n.Va.Ze(e):e instanceof MC?n.Va.st(e):n.Va.tt(e),!t.isEqual(be.min()))try{const i=await zC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((m,h)=>{if(m.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(m.resumeToken,u))}})),d.targetMismatches.forEach(((m,h)=>{const _=a.Ia.get(m);if(!_)return;a.Ia.set(m,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),$C(a,m);const E=new lr(_.target,m,h,_.sequenceNumber);vg(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){he(po,"Failed to raise snapshot:",i),await td(n,i)}}async function td(n,e,t){if(!Fa(e))throw e;n.Ea.add(1),await xu(n),n.Ra.set("Offline"),t||(t=()=>zC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(po,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Cd(n)}))}function XC(n,e){return e().catch((t=>td(n,t,e)))}async function Id(n){const e=xe(n),t=vr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rg;for(;Dk(e);)try{const o=await dk(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,Mk(e,o)}catch(o){await td(e,o)}WC(e)&&ZC(e)}function Dk(n){return yo(n)&&n.Ta.length<10}function Mk(n,e){n.Ta.push(e);const t=vr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function WC(n){return yo(n)&&!vr(n).x_()&&n.Ta.length>0}function ZC(n){vr(n).start()}async function kk(n){vr(n).ra()}async function Pk(n){const e=vr(n);for(const t of n.Ta)e.ea(t.mutations)}async function Vk(n,e,t){const i=n.Ta.shift(),o=fg.from(i,e,t);await XC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Id(n)}async function Uk(n,e){e&&vr(n).X_&&await(async function(i,o){if((function(u){return yM(u)&&u!==ee.ABORTED})(o.code)){const a=i.Ta.shift();vr(i).B_(),await XC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Id(i)}})(n,e),WC(n)&&ZC(n)}async function Y0(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),he(po,"RemoteStore received new credentials");const i=yo(t);t.Ea.add(3),await xu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Cd(t)}async function Lk(n,e){const t=xe(n);e?(t.Ea.delete(2),await Cd(t)):e||(t.Ea.add(2),await xu(t),t.Ra.set("Unknown"))}function qa(n){return n.ma||(n.ma=(function(t,i,o){const a=xe(t);return a.sa(),new Tk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:Rk.bind(null,n),t_:bk.bind(null,n),r_:Nk.bind(null,n),H_:xk.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Tg(n)?Eg(n):n.Ra.set("Unknown")):(await n.ma.stop(),QC(n))}))),n.ma}function vr(n){return n.fa||(n.fa=(function(t,i,o){const a=xe(t);return a.sa(),new Ak(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:kk.bind(null,n),r_:Uk.bind(null,n),ta:Pk.bind(null,n),na:Vk.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Id(n)):(await n.fa.stop(),n.Ta.length>0&&(he(po,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Ag(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sg(n,e){if(ys("AsyncQueue",`${e}: ${n}`),Fa(n))return new de(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{static emptySet(e){return new Ta(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=nu(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ta;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.ga=new mt(Te.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ka{constructor(e,t,i,o,a,u,d,m,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ka(e,t,Ta.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Fk{constructor(){this.queries=$0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=xe(t),a=o.queries;o.queries=$0(),a.forEach(((u,d)=>{for(const m of d.Sa)m.onError(i)}))})(this,new de(ee.ABORTED,"Firestore shutting down"))}}function $0(){return new go((n=>vC(n)),yd)}async function Bk(n,e){const t=xe(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new Ok,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=Sg(u,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Cg(t)}async function qk(n,e){const t=xe(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Gk(n,e){const t=xe(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.Sa)d.Fa(o)&&(i=!0);u.wa=o}}i&&Cg(t)}function Hk(n,e,t){const i=xe(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function Cg(n){n.Ca.forEach((e=>{e.next()}))}var Rm,Q0;(Q0=Rm||(Rm={})).Ma="default",Q0.Cache="cache";class zk{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ka(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.key=e}}class eI{constructor(e){this.key=e}}class Kk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=EC(e),this.tu=new Ta(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new J0,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const A=o.get(_),I=_d(this.query,E)?E:null,P=!!A&&this.mutatedKeys.has(A.key),B=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let L=!1;A&&I?A.data.isEqual(I.data)?P!==B&&(i.track({type:3,doc:I}),L=!0):this.su(A,I)||(i.track({type:2,doc:I}),L=!0,(m&&this.eu(I,m)>0||h&&this.eu(I,h)<0)&&(d=!0)):!A&&I?(i.track({type:0,doc:I}),L=!0):A&&!I&&(i.track({type:1,doc:A}),L=!0,(m||h)&&(d=!0)),L&&(I?(u=u.add(I),a=B?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,E)=>(function(I,P){const B=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:L})}};return B(I)-B(P)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,h=m!==this.Za;return this.Za=m,u.length!==0||h?{snapshot:new ka(this.query,e.tu,a,u,e.mutatedKeys,m===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new J0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new eI(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new jC(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ka.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ig="SyncEngine";class Yk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Jk{constructor(e){this.key=e,this.hu=!1}}class $k{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new go((d=>vC(d)),yd),this.Iu=new Map,this.Eu=new Set,this.du=new mt(Te.comparator),this.Au=new Map,this.Ru=new pg,this.Vu={},this.mu=new Map,this.fu=Ma.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Qk(n,e,t=!0){const i=oI(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await tI(i,e,t,!0),o}async function Xk(n,e){const t=oI(n);await tI(t,e,!0,!1)}async function tI(n,e,t,i){const o=await hk(n.localStore,Gi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await Wk(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&JC(n.remoteStore,o),d}async function Wk(n,e,t,i,o){n.pu=(E,A,I)=>(async function(B,L,Q,ie){let Z=L.view.ru(Q);Z.Cs&&(Z=await q0(B.localStore,L.query,!1).then((({documents:M})=>L.view.ru(M,Z))));const oe=ie&&ie.targetChanges.get(L.targetId),le=ie&&ie.targetMismatches.get(L.targetId)!=null,ue=L.view.applyChanges(Z,B.isPrimaryClient,oe,le);return W0(B,L.targetId,ue.au),ue.snapshot})(n,E,A,I);const a=await q0(n.localStore,e,!0),u=new Kk(e,a.Qs),d=u.ru(a.documents),m=Nu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(d,n.isPrimaryClient,m);W0(n,t,h.au);const _=new Yk(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function Zk(n,e,t){const i=xe(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!yd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Im(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&_g(i.remoteStore,o.targetId),bm(i,o.targetId)})).catch(Oa)):(bm(i,o.targetId),await Im(i.localStore,o.targetId,!0))}async function jk(n,e){const t=xe(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),_g(t.remoteStore,i.targetId))}async function eP(n,e,t){const i=aP(n);try{const o=await(function(u,d){const m=xe(u),h=ft.now(),_=d.reduce(((I,P)=>I.add(P.key)),Ge());let E,A;return m.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=_s(),B=Ge();return m.Ns.getEntries(I,_).next((L=>{P=L,P.forEach(((Q,ie)=>{ie.isValidDocument()||(B=B.add(Q))}))})).next((()=>m.localDocuments.getOverlayedDocuments(I,P))).next((L=>{E=L;const Q=[];for(const ie of d){const Z=dM(ie,E.get(ie.key).overlayedDocument);Z!=null&&Q.push(new Cr(ie.key,Z,cC(Z.value.mapValue),Pn.exists(!0)))}return m.mutationQueue.addMutationBatch(I,h,Q,d)})).next((L=>{A=L;const Q=L.applyToLocalDocumentSet(E,B);return m.documentOverlayCache.saveOverlays(I,L.batchId,Q)}))})).then((()=>({batchId:A.batchId,changes:AC(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,m){let h=u.Vu[u.currentUser.toKey()];h||(h=new mt(qe)),h=h.insert(d,m),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await Du(i,o.changes),await Id(i.remoteStore)}catch(o){const a=Sg(o,"Failed to persist write");t.reject(a)}}async function nI(n,e){const t=xe(n);try{const i=await ck(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?je(u.hu,14607):o.removedDocuments.size>0&&(je(u.hu,42227),u.hu=!1))})),await Du(t,i,e)}catch(i){await Oa(i)}}function X0(n,e,t){const i=xe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const m=xe(u);m.onlineState=d;let h=!1;m.queries.forEach(((_,E)=>{for(const A of E.Sa)A.va(d)&&(h=!0)})),h&&Cg(m)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function tP(n,e,t){const i=xe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new mt(Te.comparator);u=u.insert(a,an.newNoDocument(a,be.min()));const d=Ge().add(a),m=new Ad(be.min(),new Map,new mt(qe),u,d);await nI(i,m),i.du=i.du.remove(a),i.Au.delete(e),wg(i)}else await Im(i.localStore,e,!1).then((()=>bm(i,e,t))).catch(Oa)}async function nP(n,e){const t=xe(n),i=e.batch.batchId;try{const o=await uk(t.localStore,e);sI(t,i,null),iI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Du(t,o)}catch(o){await Oa(o)}}async function iP(n,e,t){const i=xe(n);try{const o=await(function(u,d){const m=xe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return m.mutationQueue.lookupMutationBatch(h,d).next((E=>(je(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(h,E)))).next((()=>m.mutationQueue.performConsistencyCheck(h))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>m.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);sI(i,e,t),iI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Du(i,o)}catch(o){await Oa(o)}}function iI(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function sI(n,e,t){const i=xe(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function bm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||rI(n,i)}))}function rI(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(_g(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),wg(n))}function W0(n,e,t){for(const i of t)i instanceof jC?(n.Ru.addReference(i.key,e),sP(n,i)):i instanceof eI?(he(Ig,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||rI(n,i.key)):Ie(19791,{wu:i})}function sP(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(he(Ig,"New document in limbo: "+t),n.Eu.add(i),wg(n))}function wg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(lt.fromString(e)),i=n.fu.next();n.Au.set(i,new Jk(t)),n.du=n.du.insert(t,i),JC(n.remoteStore,new lr(Gi(yC(t.path)),i,"TargetPurposeLimboResolution",pd.ce))}}async function Du(n,e,t){const i=xe(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{u.push(i.pu(m,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const E=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(h){o.push(h);const E=gg.As(m.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(m,h){const _=xe(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(h,(A=>se.forEach(A.Es,(I=>_.persistence.referenceDelegate.addReference(E,A.targetId,I))).next((()=>se.forEach(A.ds,(I=>_.persistence.referenceDelegate.removeReference(E,A.targetId,I)))))))))}catch(E){if(!Fa(E))throw E;he(yg,"Failed to update sequence numbers: "+E)}for(const E of h){const A=E.targetId;if(!E.fromCache){const I=_.Ms.get(A),P=I.snapshotVersion,B=I.withLastLimboFreeSnapshotVersion(P);_.Ms=_.Ms.insert(A,B)}}})(i.localStore,a))}async function rP(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){he(Ig,"User change. New user:",e.toKey());const i=await HC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((m=>{m.reject(new de(ee.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Du(t,i.Ls)}}function oP(n,e){const t=xe(n),i=t.Au.get(e);if(i&&i.hu)return Ge().add(i.key);{let o=Ge();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function oI(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tP.bind(null,e),e.Pu.H_=Gk.bind(null,e.eventManager),e.Pu.yu=Hk.bind(null,e.eventManager),e}function aP(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iP.bind(null,e),e}class nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lk(this.persistence,new rk,e.initialUser,this.serializer)}Cu(e){return new GC(mg.mi,this.serializer)}Du(e){return new mk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nd.provider={build:()=>new nd};class lP extends nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){je(this.persistence.referenceDelegate instanceof ed,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new zM(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new GC((i=>ed.mi(i,t)),this.serializer)}}class Nm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>X0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rP.bind(null,this.syncEngine),await Lk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Fk})()}createDatastore(e){const t=Sd(e.databaseInfo.databaseId),i=(function(a){return new Ek(a)})(e.databaseInfo);return(function(a,u,d,m){return new Ck(a,u,d,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new wk(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>X0(this.syncEngine,t,0)),(function(){return z0.v()?new z0:new gk})())}createSyncEngine(e,t){return(function(o,a,u,d,m,h,_){const E=new $k(o,a,u,d,m,h);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=xe(o);he(po,"RemoteStore shutting down."),a.Ea.add(5),await xu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Nm.provider={build:()=>new Nm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ys("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="FirestoreClient";class cP{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=sg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{he(Er,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(he(Er,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Sg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Zp(n,e){n.asyncQueue.verifyOperationInProgress(),he(Er,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await HC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Z0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await fP(n);he(Er,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Y0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Y0(e.remoteStore,o))),n._onlineComponents=e}async function fP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Er,"Using user provided OfflineComponentProvider");try{await Zp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ba("Error using user provided cache. Falling back to memory cache: "+t),await Zp(n,new nd)}}else he(Er,"Using default OfflineComponentProvider"),await Zp(n,new lP(void 0));return n._offlineComponents}async function aI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Er,"Using user provided OnlineComponentProvider"),await Z0(n,n._uninitializedComponentsProvider._online)):(he(Er,"Using default OnlineComponentProvider"),await Z0(n,new Nm))),n._onlineComponents}function dP(n){return aI(n).then((e=>e.syncEngine))}async function hP(n){const e=await aI(n),t=e.eventManager;return t.onListen=Qk.bind(null,e.syncEngine),t.onUnlisten=Zk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Xk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jk.bind(null,e.syncEngine),t}function pP(n,e,t={}){const i=new hr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,m,h){const _=new uP({next:A=>{_.Nu(),u.enqueueAndForget((()=>qk(a,E))),A.fromCache&&m.source==="server"?h.reject(new de(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(A)},error:A=>h.reject(A)}),E=new zk(d,_,{includeMetadataChanges:!0,qa:!0});return Bk(a,E)})(await hP(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="firestore.googleapis.com",eT=!0;class tT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uI,this.ssl=eT}else this.host=e.host,this.ssl=e.ssl??eT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GM)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lI(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new gD;switch(i.type){case"firstParty":return new ED(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=j0.get(t);i&&(he("ComponentProvider","Removing Datastore"),j0.delete(t),i.terminate())})(this),Promise.resolve()}}function mP(n,e,t,i={}){var h;n=ho(n,wd);const o=Pa(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(iS(`https://${d}`),sS("Firestore",!0)),a.host!==uI&&a.host!==d&&ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:d,ssl:o,emulatorOptions:i};if(!ao(m,u)&&(n._setSettings(m),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=on.MOCK_USER;else{_=Cb(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(A)}n._authCredentials=new yD(new ZS(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ru(t,qt._jsonSchema))return new qt(e,i||null,new Te(lt.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:Ut("string",qt._jsonSchemaVersion),referencePath:Ut("string")};class pr extends _o{constructor(e,t,i){super(e,t,yC(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Te(e))}withConverter(e){return new pr(this.firestore,e,this._path)}}function gP(n,e,...t){if(n=Lt(n),jS("collection","path",e),n instanceof wd){const i=lt.fromString(e,...t);return p0(i),new pr(n,null,i)}{if(!(n instanceof qt||n instanceof pr))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(lt.fromString(e,...t));return p0(i),new pr(n.firestore,null,i)}}function Rd(n,e,...t){if(n=Lt(n),arguments.length===1&&(e=sg.newId()),jS("doc","path",e),n instanceof wd){const i=lt.fromString(e,...t);return h0(i),new qt(n,null,new Te(i))}{if(!(n instanceof qt||n instanceof pr))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(lt.fromString(e,...t));return h0(i),new qt(n.firestore,n instanceof pr?n.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="AsyncQueue";class iT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KC(this,"async_queue_retry"),this._c=()=>{const i=Wp();i&&he(nT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Wp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Wp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new hr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fa(e))throw e;he(nT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ys("INTERNAL UNHANDLED ERROR: ",sT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Ag.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:sT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Mu extends wd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new iT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iT(e),this._firestoreClient=void 0,await e}}}function yP(n,e){const t=typeof n=="object"?n:lS(),i=typeof n=="string"?n:$f,o=$m(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=Ab("firestore");a&&mP(o,...a)}return o}function Rg(n){if(n._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_P(n),n._firestoreClient}function _P(n){var i,o,a;const e=n._freezeSettings(),t=(function(d,m,h,_){return new LD(d,m,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,lI(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new cP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(nn.fromBase64String(e))}catch(t){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qn(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ru(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:Ut("string",Qn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zi._jsonSchemaVersion}}static fromJSON(e){if(Ru(e,zi._jsonSchema))return new zi(e.latitude,e.longitude)}}zi._jsonSchemaVersion="firestore/geoPoint/1.0",zi._jsonSchema={type:Ut("string",zi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ru(e,Ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ki(e.vectorValues);throw new de(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ki._jsonSchemaVersion="firestore/vectorValue/1.0",Ki._jsonSchema={type:Ut("string",Ki._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=/^__.*__$/;class EP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Cr(e,this.data,this.fieldMask,t,this.fieldTransforms):new bu(e,this.data,t,this.fieldTransforms)}}class cI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Cr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class Ng{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ng({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return id(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fI(this.Ac)&&vP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Sd(e)}Cc(e,t,i,o=!1){return new Ng({Ac:e,methodName:t,Dc:i,path:tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xg(n){const e=n._freezeSettings(),t=Sd(n._databaseId);return new TP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dI(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);Dg("Data must be an object, but it was:",u,i);const d=hI(i,u);let m,h;if(a.merge)m=new kn(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const A=xm(e,E,t);if(!u.contains(A))throw new de(ee.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);mI(_,A)||_.push(A)}m=new kn(_),h=u.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,h=u.fieldTransforms;return new EP(new Sn(d),m,h)}class Nd extends bg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nd}}function AP(n,e,t,i){const o=n.Cc(1,e,t);Dg("Data must be an object, but it was:",o,i);const a=[],u=Sn.empty();Sr(i,((m,h)=>{const _=Mg(e,m,t);h=Lt(h);const E=o.yc(_);if(h instanceof Nd)a.push(_);else{const A=ku(h,E);A!=null&&(a.push(_),u.set(_,A))}}));const d=new kn(a);return new cI(u,d,o.fieldTransforms)}function SP(n,e,t,i,o,a){const u=n.Cc(1,e,t),d=[xm(e,i,t)],m=[o];if(a.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<a.length;A+=2)d.push(xm(e,a[A])),m.push(a[A+1]);const h=[],_=Sn.empty();for(let A=d.length-1;A>=0;--A)if(!mI(h,d[A])){const I=d[A];let P=m[A];P=Lt(P);const B=u.yc(I);if(P instanceof Nd)h.push(I);else{const L=ku(P,B);L!=null&&(h.push(I),_.set(I,L))}}const E=new kn(h);return new cI(_,E,u.fieldTransforms)}function CP(n,e,t,i=!1){return ku(t,n.Cc(i?4:3,e))}function ku(n,e){if(pI(n=Lt(n)))return Dg("Unsupported field value:",e,n),hI(n,e);if(n instanceof bg)return(function(i,o){if(!fI(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let m=ku(d,o.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return oM(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ft.fromDate(i);return{timestampValue:jf(o.serializer,a)}}if(i instanceof ft){const a=new ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:jf(o.serializer,a)}}if(i instanceof zi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qn)return{bytesValue:PC(o.serializer,i._byteString)};if(i instanceof qt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:hg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ki)return(function(u,d){return{mapValue:{fields:{[lC]:{stringValue:uC},[Qf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return cg(d.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${hd(i)}`)})(n,e)}function hI(n,e){const t={};return nC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sr(n,((i,o)=>{const a=ku(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function pI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof zi||n instanceof Qn||n instanceof qt||n instanceof bg||n instanceof Ki)}function Dg(n,e,t){if(!pI(t)||!eC(t)){const i=hd(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function xm(n,e,t){if((e=Lt(e))instanceof bd)return e._internalPath;if(typeof e=="string")return Mg(n,e);throw id("Field path arguments must be of type string or ",n,!1,void 0,t)}const IP=new RegExp("[~\\*/\\[\\]]");function Mg(n,e,t){if(e.search(IP)>=0)throw id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bd(...e.split("."))._internalPath}catch{throw id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function id(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${i}`),u&&(m+=` in document ${o}`),m+=")"),new de(ee.INVALID_ARGUMENT,d+n+m)}function mI(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wP extends gI{data(){return super.data()}}function kg(n,e){return typeof e=="string"?Mg(n,e):e instanceof bd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pg{}class yI extends Pg{}function bP(n,e,...t){let i=[];e instanceof Pg&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((m=>m instanceof Ug)).length,d=a.filter((m=>m instanceof Vg)).length;if(u>1||u>0&&d>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Vg extends yI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Vg(e,t,i)}_apply(e){const t=this._parse(e);return _I(e._query,t),new _o(e.firestore,e.converter,vm(e._query,t))}_parse(e){const t=xg(e.firestore);return(function(a,u,d,m,h,_,E){let A;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){oT(E,_);const P=[];for(const B of E)P.push(rT(m,a,B));A={arrayValue:{values:P}}}else A=rT(m,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||oT(E,_),A=CP(d,u,E,_==="in"||_==="not-in");return Vt.create(h,_,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ug extends Pg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ug(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:mi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const m of d)_I(u,m),u=vm(u,m)})(e._query,t),new _o(e.firestore,e.converter,vm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lg extends yI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Lg(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yu(a,u)})(e._query,this._field,this._direction);return new _o(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Ba(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function NP(n,e="asc"){const t=e,i=kg("orderBy",n);return Lg._create(i,t)}function rT(n,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_C(e)&&t.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(lt.fromString(t));if(!Te.isDocumentKey(i))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return A0(n,new Te(i))}if(t instanceof qt)return A0(n,t._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hd(t)}.`)}function oT(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _I(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xP{convertValue(e,t="none"){switch(_r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Sr(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[Qf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>Ct(u.doubleValue)));return new Ki(t)}convertGeoPoint(e){return new zi(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=gd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const t=gr(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=lt.fromString(e);je(BC(i),9688,{name:e});const o=new mu(i.get(1),i.get(3)),a=new Te(i.popFirst(5));return o.isEqual(t)||ys(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class _f{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Aa extends gI{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(kg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Aa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Aa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Aa._jsonSchema={type:Ut("string",Aa._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Pf extends Aa{data(e={}){return super.data(e)}}class Sa{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new _f(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Pf(this._firestore,this._userDataWriter,i.key,i,new _f(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const m=new Pf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new _f(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const m=new Pf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new _f(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,_=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:DP(d.type),doc:m,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}Sa._jsonSchemaVersion="firestore/querySnapshot/1.0",Sa._jsonSchema={type:Ut("string",Sa._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class MP extends xP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function kP(n){n=ho(n,_o);const e=ho(n.firestore,Mu),t=Rg(e),i=new MP(e);return RP(n._query),pP(t,n._query).then((o=>new Sa(e,i,n,o)))}function PP(n,e,t){n=ho(n,qt);const i=ho(n.firestore,Mu),o=vI(n.converter,e,t);return Og(i,[dI(xg(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Pn.none())])}function VP(n){return Og(ho(n.firestore,Mu),[new Td(n._key,Pn.none())])}function Og(n,e){return(function(i,o){const a=new hr;return i.asyncQueue.enqueueAndForget((async()=>eP(await dP(i),o,a))),a.promise})(Rg(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xg(e)}set(e,t,i){this._verifyNotCommitted();const o=jp(e,this._firestore),a=vI(o.converter,t,i),u=dI(this._dataReader,"WriteBatch.set",o._key,a,o.converter!==null,i);return this._mutations.push(u.toMutation(o._key,Pn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const a=jp(e,this._firestore);let u;return u=typeof(t=Lt(t))=="string"||t instanceof bd?SP(this._dataReader,"WriteBatch.update",a._key,t,i,o):AP(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jp(e,this._firestore);return this._mutations=this._mutations.concat(new Td(t._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jp(n,e){if((n=Lt(n)).firestore!==e)throw new de(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(n){return Rg(n=ho(n,Mu)),new UP(n,(e=>Og(n,e)))}(function(e,t=!0){(function(o){La=o})(Va),wa(new lo("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Mu(new _D(i.getProvider("auth-internal")),new TD(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(h.options.projectId,_)})(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),fr(u0,c0,e),fr(u0,c0,"esm2020")})();const LP={apiKey:"AIzaSyDAbQWI8JJJZxi4u2m3CpXoVXo_tfV9idQ",authDomain:"spanish-reading-7f2f6.firebaseapp.com",projectId:"spanish-reading-7f2f6",storageBucket:"spanish-reading-7f2f6.firebasestorage.app",messagingSenderId:"199552752380",appId:"1:199552752380:web:7f00e4d764d4cefcde5579",measurementId:"G-B41M23QF87"},TI=aS(LP),Xn=pD(TI),Pu=yP(TI),OP=({currentView:n,onChangeView:e,children:t,theme:i,onToggleTheme:o,isGuest:a,onLogoutGuest:u})=>{var h,_,E;const d=async()=>{if(window.confirm("Mchten Sie sich wirklich abmelden?"))if(a)u==null||u();else try{await i2(Xn)}catch(A){console.error("Logout failed:",A)}},m=a?"Gast":((h=Xn.currentUser)==null?void 0:h.displayName)||((E=(_=Xn.currentUser)==null?void 0:_.email)==null?void 0:E.split("@")[0]);return b.jsxs("div",{className:"min-h-screen flex flex-col bg-[#FDFBF7] dark:bg-[#12100E]",children:[b.jsx("header",{className:"bg-[#FDFBF7]/90 dark:bg-[#12100E]/90 backdrop-blur-xl border-b border-[#EAE2D6] dark:border-[#2C2420] sticky top-0 z-50 transition-colors",children:b.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-20 flex justify-between items-center",children:[b.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>e(St.HOME),children:[b.jsx("div",{className:"bg-[#2C2420] dark:bg-[#D4A373] p-2 rounded-xl text-[#FDFBF7] dark:text-[#12100E] shadow-md group-hover:bg-[#B26B4A] dark:group-hover:bg-[#B26B4A] transition-colors duration-500",children:b.jsx(nm,{className:"w-4 h-4"})}),b.jsxs("div",{className:"hidden sm:block",children:[b.jsx("h1",{className:"text-lg font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] tracking-tight",children:"Leseassistent"}),b.jsx("p",{className:"text-[8px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-[0.2em] -mt-1 opacity-60",children:"Tu compaero"})]})]}),b.jsxs("nav",{className:"flex items-center bg-[#2C2420]/5 dark:bg-white/5 p-1.5 rounded-2xl border border-[#2C2420]/5 dark:border-white/5 mx-2",children:[b.jsxs("button",{onClick:()=>e(St.HOME),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===St.HOME?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[b.jsx(nm,{className:"w-4 h-4"}),b.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Lesen"})]}),b.jsxs("button",{onClick:()=>e(St.ANALYZE),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===St.ANALYZE?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[b.jsx(KA,{className:"w-4 h-4"}),b.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Scan"})]}),b.jsxs("button",{onClick:()=>e(St.VOCAB),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===St.VOCAB?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[b.jsx(zA,{className:"w-4 h-4"}),b.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Lernen"})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsxs("div",{className:"hidden lg:flex items-center gap-2 px-3 py-1.5 bg-[#FDFBF7] dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-xl mr-2",children:[b.jsx(XA,{className:"w-3.5 h-3.5 text-[#B26B4A] dark:text-[#D4A373]"}),b.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D]",children:m})]}),b.jsx("button",{onClick:o,className:"p-2.5 rounded-xl bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-[#B26B4A] dark:hover:text-[#D4A373] transition-all",title:"Design ndern",children:i==="dark"?b.jsx(ob,{className:"w-4 h-4"}):b.jsx(X1,{className:"w-4 h-4"})}),b.jsx("button",{onClick:()=>e(St.SETTINGS),className:`p-2.5 rounded-xl transition-colors shadow-sm ${n===St.SETTINGS?"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E]":"bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-[#B26B4A] dark:hover:text-[#D4A373]"}`,title:"Einstellungen",children:b.jsx(YA,{className:"w-4 h-4"})}),b.jsx("button",{onClick:d,className:"p-2.5 rounded-xl bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-red-500 transition-all",title:"Abmelden",children:b.jsx(Y1,{className:"w-4 h-4"})})]})]})}),b.jsx("main",{className:`flex-grow p-6 w-full mx-auto ${n===St.ANALYZE?"max-w-6xl":"max-w-4xl"} transition-colors`,children:t})]})};var FP={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let BP,qP;function GP(){return{geminiUrl:BP,vertexUrl:qP}}function HP(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=GP();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class As{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const m=n[d];if(Array.isArray(t))for(let h=0;h<m.length;h++){const _=m[h];p(_,e.slice(a+1),t[h])}else for(const h of m)p(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const m=n[d];p(m[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function zP(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){d=m;break}if(d!==-1&&a.length>d)for(let m=d;m<a.length;m++){const h=a[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Dm(n,o,a,0,u)}}function Dm(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const m of d[u])Dm(m,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),m={};for(const h of d)m[h]=u[h];for(const[h,_]of Object.entries(m)){const E=[];for(const A of t.slice(i))A==="*"?E.push(h):E.push(A);p(u,E,_)}for(const h of d)delete u[h]}}else{const u=n;a in u&&Dm(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KP(n){const e={},t=f(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function YP(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],$P(u)),e}function JP(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],QP(u)),e}function $P(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>XP(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function QP(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>WP(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function XP(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],iV(t)),e}function WP(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],sV(t)),e}function ZP(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function jP(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function eV(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],tV(u)),e}function tV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function AI(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],nV(u)),e}function nV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function iV(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Fg(i));const o=f(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function sV(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Fg(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var aT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(aT||(aT={}));var lT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(lT||(lT={}));var uT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(uT||(uT={}));var At;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(At||(At={}));var cT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(cT||(cT={}));var fT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fT||(fT={}));var dT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(dT||(dT={}));var hT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(hT||(hT={}));var pT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pT||(pT={}));var mT;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(mT||(mT={}));var gT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(gT||(gT={}));var yT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(yT||(yT={}));var _T;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(_T||(_T={}));var vT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(vT||(vT={}));var ET;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(ET||(ET={}));var TT;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(TT||(TT={}));var AT;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(AT||(AT={}));var ST;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(ST||(ST={}));var CT;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(CT||(CT={}));var Eu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Eu||(Eu={}));var IT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(IT||(IT={}));var wT;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(wT||(wT={}));var RT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(RT||(RT={}));var Mm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Mm||(Mm={}));var bT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(bT||(bT={}));var NT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(NT||(NT={}));var xT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(xT||(xT={}));var DT;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(DT||(DT={}));var MT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(MT||(MT={}));var kT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(kT||(kT={}));var PT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(PT||(PT={}));var VT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(VT||(VT={}));var UT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(UT||(UT={}));var LT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(LT||(LT={}));var OT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(OT||(OT={}));var FT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(FT||(FT={}));var BT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(BT||(BT={}));var qT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(qT||(qT={}));var GT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(GT||(GT={}));var HT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(HT||(HT={}));var zT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(zT||(zT={}));var KT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(KT||(KT={}));var YT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(YT||(YT={}));var JT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(JT||(JT={}));var $T;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})($T||($T={}));var QT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(QT||(QT={}));var XT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(XT||(XT={}));var WT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(WT||(WT={}));var ZT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ZT||(ZT={}));var jT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(jT||(jT={}));var eA;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(eA||(eA={}));var tA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(tA||(tA={}));var nA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(nA||(nA={}));var iA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(iA||(iA={}));var sA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(sA||(sA={}));var ga;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ga||(ga={}));class km{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Wl{get text(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const E=[];for(const A of(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[I,P]of Object.entries(A))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(P!==null||P!==void 0)&&E.push(I);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;_=!0,h+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const E of(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[A,I]of Object.entries(E))A!=="inlineData"&&(I!==null||I!==void 0)&&_.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,d,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,d,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class rA{}class oA{}class rV{}class oV{}class aV{}class lV{}class aA{}class lA{}class uA{}class uV{}class sd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new sd;let o;const a=e;return t?o=JP(a):o=YP(a),Object.assign(i,o),i}}class cA{}class fA{}class dA{}class hA{}class cV{}class fV{}class dV{}class Bg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Bg,a=eV(e);return Object.assign(i,a),i}}class hV{}class pV{}class mV{}class pA{}class gV{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[m,h]of Object.entries(d))m!=="text"&&m!=="thought"&&h!==null&&u.push(m);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,m]of Object.entries(u))d!=="inlineData"&&m!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class yV{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class qg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new qg,a=AI(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function SI(n,e){const t=Xe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function CI(n){return Array.isArray(n)?n.map(e=>rd(e)):[rd(n)]}function rd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function II(n){const e=rd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function wI(n){const e=rd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function mA(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function RI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>mA(e)):[mA(n)]}function Pm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function gA(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function yA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ln(n){if(n==null)throw new Error("ContentUnion is required");return Pm(n)?n:{role:"user",parts:RI(n)}}function Gg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=ln(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=ln(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ln(t)):[ln(e)]}function Wn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(gA(n)||yA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ln(n)]}const e=[],t=[],i=Pm(n[0]);for(const o of n){const a=Pm(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(gA(o)||yA(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:RI(t)}),e}function _V(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(At).includes(t[0].toUpperCase())?t[0].toUpperCase():At.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(At).includes(i.toUpperCase())?i.toUpperCase():At.TYPE_UNSPECIFIED})}}function Ca(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&_V(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(At).includes(d.toUpperCase())?d.toUpperCase():At.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Ca(d);else if(i.includes(u)){const m=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}m.push(Ca(h))}e[u]=m}else if(o.includes(u)){const m={};for(const[h,_]of Object.entries(d))m[h]=Ca(_);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=d}return e}function Hg(n){return Ca(n)}function zg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Kg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ga(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ca(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ca(e.response));return n}function Ha(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function vV(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ss(n,e){if(typeof e!="string")throw new Error("name must be a string");return vV(n,e,"cachedContents")}function bI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ir(n){return Fg(n)}function EV(n){return n!=null&&typeof n=="object"&&"name"in n}function TV(n){return n!=null&&typeof n=="object"&&"video"in n}function AV(n){return n!=null&&typeof n=="object"&&"uri"in n}function NI(n){var e;let t;if(EV(n)&&(t=n.name),!(AV(n)&&(t=n.uri,t===void 0))&&!(TV(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function xI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function DI(n){for(const e of["models","tunedModels","publisherModels"])if(SV(n,e))return n[e];return[]}function SV(n,e){return n!==null&&typeof n=="object"&&e in n}function CV(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function IV(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=CV(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function MI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function wV(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function kI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function za(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function PI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RV(n){const e={},t=f(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>a4(u))),p(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function bV(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function NV(n){const e={},t=f(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&p(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Vf(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&p(e,["state"],PI(o));const a=f(n,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const m=f(n,["metadata","model"]);m!=null&&p(e,["model"],m);const h=f(n,["metadata","output"]);return h!=null&&p(e,["dest"],RV(kI(h))),e}function Vm(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["state"]);o!=null&&p(e,["state"],PI(o));const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(e,["startTime"],d);const m=f(n,["endTime"]);m!=null&&p(e,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=f(n,["model"]);_!=null&&p(e,["model"],_);const E=f(n,["inputConfig"]);E!=null&&p(e,["src"],xV(E));const A=f(n,["outputConfig"]);A!=null&&p(e,["dest"],bV(kI(A)));const I=f(n,["completionStats"]);return I!=null&&p(e,["completionStats"],I),e}function xV(n){const e={},t=f(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function DV(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&p(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>o4(n,u))),p(t,["requests","requests"],a)}return t}function MV(n){const e={},t=f(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&p(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function kV(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function PV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],za(n,i)),t}function VV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],za(n,i)),t}function UV(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],LV(i));const o=f(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const m=f(n,["index"]);m!=null&&p(e,["index"],m);const h=f(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(I=>I)),p(e,["safetyRatings"],A)}const E=f(n,["urlContextMetadata"]);return E!=null&&p(e,["urlContextMetadata"],E),e}function LV(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function VI(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>p4(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function OV(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function FV(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&p(e,["outputConfig"],NV(wV(o))),t}function _A(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["src"]);o!=null&&p(t,["batch","inputConfig"],DV(n,MI(n,o)));const a=f(e,["config"]);return a!=null&&OV(a,t),t}function BV(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],Xe(n,i));const o=f(e,["src"]);o!=null&&p(t,["inputConfig"],MV(MI(n,o)));const a=f(e,["config"]);return a!=null&&FV(a,t),t}function qV(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function GV(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["src"]);o!=null&&p(t,["batch","inputConfig"],QV(n,o));const a=f(e,["config"]);return a!=null&&qV(a,t),t}function HV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],za(n,i)),t}function zV(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],za(n,i)),t}function KV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function YV(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function JV(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Gg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(p(t,["_self"],$V(o,t)),zP(t,{"requests[].*":"requests[].request.*"})),t}function $V(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function QV(n,e){const t={},i=f(e,["fileName"]);i!=null&&p(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&p(t,["requests"],JV(n,o)),t}function XV(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function WV(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ZV(n){const e={},t=f(n,["mode"]);t!=null&&p(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jV(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],VI(ln(o)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&p(i,["logprobs"],A);const I=f(e,["presencePenalty"]);I!=null&&p(i,["presencePenalty"],I);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const B=f(e,["seed"]);B!=null&&p(i,["seed"],B);const L=f(e,["responseMimeType"]);L!=null&&p(i,["responseMimeType"],L);const Q=f(e,["responseSchema"]);Q!=null&&p(i,["responseSchema"],Hg(Q));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&p(i,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let x=Z;Array.isArray(x)&&(x=x.map(pe=>m4(pe))),p(t,["safetySettings"],x)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let x=Ha(oe);Array.isArray(x)&&(x=x.map(pe=>y4(Ga(pe)))),p(t,["tools"],x)}const le=f(e,["toolConfig"]);if(t!==void 0&&le!=null&&p(t,["toolConfig"],g4(le)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&p(t,["cachedContent"],Ss(n,ue));const M=f(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const D=f(e,["mediaResolution"]);D!=null&&p(i,["mediaResolution"],D);const N=f(e,["speechConfig"]);if(N!=null&&p(i,["speechConfig"],zg(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&p(i,["thinkingConfig"],V);const k=f(e,["imageConfig"]);k!=null&&p(i,["imageConfig"],r4(k));const O=f(e,["enableEnhancedCivicAnswers"]);return O!=null&&p(i,["enableEnhancedCivicAnswers"],O),i}function e4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>UV(h))),p(e,["candidates"],m)}const o=f(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function t4(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],za(n,i)),t}function n4(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],za(n,i)),t}function i4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function s4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function r4(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function o4(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["request","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let d=Wn(o);Array.isArray(d)&&(d=d.map(m=>VI(m))),p(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&p(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&p(t,["request","generationConfig"],jV(n,u,f(t,["request"],{}))),t}function a4(n){const e={},t=f(n,["response"]);t!=null&&p(e,["response"],e4(t));const i=f(n,["error"]);return i!=null&&p(e,["error"],i),e}function l4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function u4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),t}function c4(n){const e={},t=f(n,["config"]);return t!=null&&l4(t,e),e}function f4(n){const e={},t=f(n,["config"]);return t!=null&&u4(t,e),e}function d4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Vf(u))),p(e,["batchJobs"],a)}return e}function h4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Vm(u))),p(e,["batchJobs"],a)}return e}function p4(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],XV(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],WV(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],kV(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function m4(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function g4(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],ZV(t));const i=f(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function y4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],i4(d));const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],s4(m));const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(vs||(vs={}));class vo{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _4 extends As{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new vo(vs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=_A(this.apiClient,e),i=t._url,o=fe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,m=d.requests,h=[];for(const _ of m){const E=Object.assign({},_);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=A,E.request=I}h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=BV(this.apiClient,e);return d=fe("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Vm(_))}else{const h=_A(this.apiClient,e);return d=fe("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Vf(_))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=GV(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Vf(m))}}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=n4(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Vm(_))}else{const h=t4(this.apiClient,e);return d=fe("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Vf(_))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const m=VV(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=PV(this.apiClient,e);u=fe("batches/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=f4(e);return d=fe("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=h4(_),A=new pA;return Object.assign(A,E),A})}else{const h=c4(e);return d=fe("batches",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=d4(_),A=new pA;return Object.assign(A,E),A})}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=zV(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>YV(_))}else{const h=HV(this.apiClient,e);return d=fe("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>KV(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v4(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function vA(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>G4(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function E4(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=Wn(u);Array.isArray(_)&&(_=_.map(E=>vA(E))),p(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],vA(ln(d)));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(E=>z4(E))),p(e,["tools"],_)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],H4(h)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function T4(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=Wn(u);Array.isArray(E)&&(E=E.map(A=>A)),p(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],ln(d));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(A=>K4(A))),p(e,["tools"],E)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function A4(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],SI(n,i));const o=f(e,["config"]);return o!=null&&E4(o,t),t}function S4(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],SI(n,i));const o=f(e,["config"]);return o!=null&&T4(o,t),t}function C4(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function I4(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function w4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function R4(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function b4(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function N4(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function x4(n){const e={},t=f(n,["mode"]);t!=null&&p(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function D4(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function M4(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function k4(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function P4(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function V4(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function U4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function L4(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function O4(n){const e={},t=f(n,["config"]);return t!=null&&U4(t,e),e}function F4(n){const e={},t=f(n,["config"]);return t!=null&&L4(t,e),e}function B4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function q4(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function G4(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],b4(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],N4(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],v4(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function H4(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],x4(t));const i=f(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function z4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],P4(d));const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],V4(m));const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function K4(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>D4(A))),p(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const m=f(n,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function Y4(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function J4(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function $4(n,e){const t={},i=f(e,["name"]);i!=null&&p(t,["_url","name"],Ss(n,i));const o=f(e,["config"]);return o!=null&&Y4(o,t),t}function Q4(n,e){const t={},i=f(e,["name"]);i!=null&&p(t,["_url","name"],Ss(n,i));const o=f(e,["config"]);return o!=null&&J4(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X4 extends As{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new vo(vs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=S4(this.apiClient,e);return d=fe("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=A4(this.apiClient,e);return d=fe("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=k4(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=M4(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=I4(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=R4(_),A=new dA;return Object.assign(A,E),A})}else{const h=C4(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=w4(_),A=new dA;return Object.assign(A,E),A})}}async update(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Q4(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=$4(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=F4(e);return d=fe("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=q4(_),A=new hA;return Object.assign(A,E),A})}else{const h=O4(e);return d=fe("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=B4(_),A=new hA;return Object.assign(A,E),A})}}}function od(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function EA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Re(n){return this instanceof Re?(this.v=n,this):new Re(n)}function di(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(I){return function(P){return Promise.resolve(P).then(I,E)}}function d(I,P){i[I]&&(o[I]=function(B){return new Promise(function(L,Q){a.push([I,B,L,Q])>1||m(I,B)})},P&&(o[I]=P(o[I])))}function m(I,P){try{h(i[I](P))}catch(B){A(a[0][3],B)}}function h(I){I.value instanceof Re?Promise.resolve(I.value.v).then(_,E):A(a[0][2],I)}function _(I){m("next",I)}function E(I){m("throw",I)}function A(I,P){I(P),a.shift(),a.length&&m(a[0][0],a[0][1])}}function hi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof EA=="function"?EA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,m){u=n[a](u),o(d,m,u.done,u.value)})}}function o(a,u,d,m){Promise.resolve(m).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W4(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:UI(t)}function UI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Z4(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function TA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!UI(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class j4{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new eU(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class eU{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),Z4(a)}async sendMessage(e){var t;await this.sendPromise;const i=ln(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const m=await o,h=(u=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=m.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];_!=null&&(A=(d=_.slice(E))!==null&&d!==void 0?d:[]);const I=h?[h]:[];this.recordHistory(i,I,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=ln(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?TA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return di(this,arguments,function*(){var o,a,u,d,m,h;const _=[];try{for(var E=!0,A=hi(e),I;I=yield Re(A.next()),o=I.done,!o;E=!0){d=I.value,E=!1;const P=d;if(W4(P)){const B=(h=(m=P.candidates)===null||m===void 0?void 0:m[0])===null||h===void 0?void 0:h.content;B!==void 0&&_.push(B)}yield yield Re(P)}}catch(P){a={error:P}}finally{try{!E&&!o&&(u=A.return)&&(yield Re(u.call(A)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...TA(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,xd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tU(n){const e={},t=f(n,["file"]);return t!=null&&p(e,["file"],t),e}function nU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function iU(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],NI(t)),e}function sU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function rU(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],NI(t)),e}function oU(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function aU(n){const e={},t=f(n,["config"]);return t!=null&&oU(t,e),e}function lU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uU extends As{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new vo(vs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=aU(e);return a=fe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>{const h=lU(m),_=new hV;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tU(e);return a=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=nU(m),_=new pV;return Object.assign(_,h),_})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rU(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iU(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>{const h=sU(m),_=new mV;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uf(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function cU(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>wU(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function fU(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function dU(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hU(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function pU(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const m=f(n,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=f(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const E=f(n,["presencePenalty"]);E!=null&&p(e,["presencePenalty"],E);const A=f(n,["responseLogprobs"]);A!=null&&p(e,["responseLogprobs"],A);const I=f(n,["responseMimeType"]);I!=null&&p(e,["responseMimeType"],I);const P=f(n,["responseModalities"]);P!=null&&p(e,["responseModalities"],P);const B=f(n,["responseSchema"]);B!=null&&p(e,["responseSchema"],B);const L=f(n,["routingConfig"]);L!=null&&p(e,["routingConfig"],L);const Q=f(n,["seed"]);Q!=null&&p(e,["seed"],Q);const ie=f(n,["speechConfig"]);ie!=null&&p(e,["speechConfig"],ie);const Z=f(n,["stopSequences"]);Z!=null&&p(e,["stopSequences"],Z);const oe=f(n,["temperature"]);oe!=null&&p(e,["temperature"],oe);const le=f(n,["thinkingConfig"]);le!=null&&p(e,["thinkingConfig"],le);const ue=f(n,["topK"]);ue!=null&&p(e,["topK"],ue);const M=f(n,["topP"]);if(M!=null&&p(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mU(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function gU(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function yU(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],Kg(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","thinkingConfig"],A);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],I);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],cU(ln(P)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ue=Ha(B);Array.isArray(ue)&&(ue=ue.map(M=>bU(Ga(M)))),p(e,["setup","tools"],ue)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&p(e,["setup","sessionResumption"],RU(L));const Q=f(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","inputAudioTranscription"],Q);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&p(e,["setup","outputAudioTranscription"],ie);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const le=f(n,["proactivity"]);if(e!==void 0&&le!=null&&p(e,["setup","proactivity"],le),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function _U(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],pU(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],Kg(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","thinkingConfig"],A);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],I);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],ln(P));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let M=Ha(B);Array.isArray(M)&&(M=M.map(D=>NU(Ga(D)))),p(e,["setup","tools"],M)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&p(e,["setup","sessionResumption"],L);const Q=f(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","inputAudioTranscription"],Q);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&p(e,["setup","outputAudioTranscription"],ie);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const le=f(n,["proactivity"]);e!==void 0&&le!=null&&p(e,["setup","proactivity"],le);const ue=f(n,["explicitVadSignal"]);return e!==void 0&&ue!=null&&p(e,["setup","explicitVadSignal"],ue),t}function vU(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],yU(o,t)),t}function EU(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],_U(o,t)),t}function TU(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function AU(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["weightedPrompts"],i)}return e}function SU(n){const e={},t=f(n,["media"]);if(t!=null){let h=CI(t);Array.isArray(h)&&(h=h.map(_=>Uf(_))),p(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&p(e,["audio"],Uf(wI(i)));const o=f(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&p(e,["video"],Uf(II(a)));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(n,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function CU(n){const e={},t=f(n,["media"]);if(t!=null){let h=CI(t);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&p(e,["audio"],wI(i));const o=f(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&p(e,["video"],II(a));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(n,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function IU(n){const e={},t=f(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&p(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],xU(u));const d=f(n,["goAway"]);d!=null&&p(e,["goAway"],d);const m=f(n,["sessionResumptionUpdate"]);m!=null&&p(e,["sessionResumptionUpdate"],m);const h=f(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function wU(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],fU(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],dU(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],Uf(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function RU(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],mU(d));const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],gU(m));const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function NU(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>hU(A))),p(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const m=f(n,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function xU(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&p(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const m=f(n,["promptTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(P=>P)),p(e,["promptTokensDetails"],I)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(P=>P)),p(e,["cacheTokensDetails"],I)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(P=>P)),p(e,["responseTokensDetails"],I)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(P=>P)),p(e,["toolUsePromptTokensDetails"],I)}const A=f(n,["trafficType"]);return A!=null&&p(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DU(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function MU(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],kU(i));const o=f(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const m=f(n,["index"]);m!=null&&p(e,["index"],m);const h=f(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(I=>I)),p(e,["safetyRatings"],A)}const E=f(n,["urlContextMetadata"]);return E!=null&&p(e,["urlContextMetadata"],E),e}function kU(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function PU(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let a=Wn(o);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["contents"],a)}return t}function VU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["tokensInfo"],o)}return e}function UU(n){const e={},t=f(n,["values"]);t!=null&&p(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&p(e,["statistics"],LU(i)),e}function LU(n){const e={},t=f(n,["truncated"]);t!=null&&p(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function Dd(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>YL(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function OU(n){const e={},t=f(n,["controlType"]);t!=null&&p(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function FU(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function BU(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],ln(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>BI(d))),p(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&p(e,["generationConfig"],DL(a)),t}function qU(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(d=>Dd(d))),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&FU(a),t}function GU(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(d=>d)),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&BU(a,t),t}function HU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&p(e,["cachedContentTokenCount"],o),e}function zU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function KU(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],Xe(n,i)),t}function YU(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],Xe(n,i)),t}function JU(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function $U(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function QU(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const m=f(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&p(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&p(e,["parameters","includeRaiReason"],A);const I=f(n,["language"]);e!==void 0&&I!=null&&p(e,["parameters","language"],I);const P=f(n,["outputMimeType"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","mimeType"],P);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&p(e,["parameters","outputOptions","compressionQuality"],B);const L=f(n,["addWatermark"]);e!==void 0&&L!=null&&p(e,["parameters","addWatermark"],L);const Q=f(n,["labels"]);e!==void 0&&Q!=null&&p(e,["labels"],Q);const ie=f(n,["editMode"]);e!==void 0&&ie!=null&&p(e,["parameters","editMode"],ie);const Z=f(n,["baseSteps"]);return e!==void 0&&Z!=null&&p(e,["parameters","editConfig","baseSteps"],Z),t}function XU(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(m=>ZL(m))),p(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&QU(u,t),t}function WU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Md(a))),p(e,["generatedImages"],o)}return e}function ZU(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function jU(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&p(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&p(e,["parameters","autoTruncate"],d),t}function eL(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let d=Gg(n,o);Array.isArray(d)&&(d=d.map(m=>m)),p(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&ZU(a,t);const u=f(e,["model"]);return u!==void 0&&p(t,["requests[]","model"],Xe(n,u)),t}function tL(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=Gg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),p(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&jU(a,t),t}function nL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function iL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>UU(u))),p(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function sL(n){const e={},t=f(n,["endpoint"]);t!=null&&p(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function rL(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function oL(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aL(n){const e={},t=f(n,["mode"]);t!=null&&p(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lL(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function uL(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],Dd(ln(o)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&p(i,["logprobs"],A);const I=f(e,["presencePenalty"]);I!=null&&p(i,["presencePenalty"],I);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const B=f(e,["seed"]);B!=null&&p(i,["seed"],B);const L=f(e,["responseMimeType"]);L!=null&&p(i,["responseMimeType"],L);const Q=f(e,["responseSchema"]);Q!=null&&p(i,["responseSchema"],Hg(Q));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&p(i,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(t!==void 0&&Z!=null){let x=Z;Array.isArray(x)&&(x=x.map(pe=>jL(pe))),p(t,["safetySettings"],x)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let x=Ha(oe);Array.isArray(x)&&(x=x.map(pe=>oO(Ga(pe)))),p(t,["tools"],x)}const le=f(e,["toolConfig"]);if(t!==void 0&&le!=null&&p(t,["toolConfig"],rO(le)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&p(t,["cachedContent"],Ss(n,ue));const M=f(e,["responseModalities"]);M!=null&&p(i,["responseModalities"],M);const D=f(e,["mediaResolution"]);D!=null&&p(i,["mediaResolution"],D);const N=f(e,["speechConfig"]);if(N!=null&&p(i,["speechConfig"],zg(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(e,["thinkingConfig"]);V!=null&&p(i,["thinkingConfig"],V);const k=f(e,["imageConfig"]);k!=null&&p(i,["imageConfig"],UL(k));const O=f(e,["enableEnhancedCivicAnswers"]);return O!=null&&p(i,["enableEnhancedCivicAnswers"],O),i}function cL(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],ln(o));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const A=f(e,["logprobs"]);A!=null&&p(i,["logprobs"],A);const I=f(e,["presencePenalty"]);I!=null&&p(i,["presencePenalty"],I);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const B=f(e,["seed"]);B!=null&&p(i,["seed"],B);const L=f(e,["responseMimeType"]);L!=null&&p(i,["responseMimeType"],L);const Q=f(e,["responseSchema"]);Q!=null&&p(i,["responseSchema"],Hg(Q));const ie=f(e,["responseJsonSchema"]);ie!=null&&p(i,["responseJsonSchema"],ie);const Z=f(e,["routingConfig"]);Z!=null&&p(i,["routingConfig"],Z);const oe=f(e,["modelSelectionConfig"]);oe!=null&&p(i,["modelConfig"],oe);const le=f(e,["safetySettings"]);if(t!==void 0&&le!=null){let Y=le;Array.isArray(Y)&&(Y=Y.map(re=>re)),p(t,["safetySettings"],Y)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let Y=Ha(ue);Array.isArray(Y)&&(Y=Y.map(re=>BI(Ga(re)))),p(t,["tools"],Y)}const M=f(e,["toolConfig"]);t!==void 0&&M!=null&&p(t,["toolConfig"],M);const D=f(e,["labels"]);t!==void 0&&D!=null&&p(t,["labels"],D);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&p(t,["cachedContent"],Ss(n,N));const V=f(e,["responseModalities"]);V!=null&&p(i,["responseModalities"],V);const k=f(e,["mediaResolution"]);k!=null&&p(i,["mediaResolution"],k);const O=f(e,["speechConfig"]);O!=null&&p(i,["speechConfig"],zg(O));const x=f(e,["audioTimestamp"]);x!=null&&p(i,["audioTimestamp"],x);const pe=f(e,["thinkingConfig"]);pe!=null&&p(i,["thinkingConfig"],pe);const ve=f(e,["imageConfig"]);if(ve!=null&&p(i,["imageConfig"],LL(ve)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function AA(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(d=>Dd(d))),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&p(t,["generationConfig"],uL(n,a,t)),t}function SA(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["contents"]);if(o!=null){let u=Wn(o);Array.isArray(u)&&(u=u.map(d=>d)),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&p(t,["generationConfig"],cL(n,a,t)),t}function CA(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>MU(h))),p(e,["candidates"],m)}const o=f(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function IA(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const o=f(n,["createTime"]);o!=null&&p(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&p(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&p(e,["responseId"],d);const m=f(n,["usageMetadata"]);return m!=null&&p(e,["usageMetadata"],m),e}function fL(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=f(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const h=f(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=f(n,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const A=f(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&p(e,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(e!==void 0&&I!=null&&p(e,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function dL(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const m=f(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&p(e,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);e!==void 0&&A!=null&&p(e,["parameters","includeRaiReason"],A);const I=f(n,["language"]);e!==void 0&&I!=null&&p(e,["parameters","language"],I);const P=f(n,["outputMimeType"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","mimeType"],P);const B=f(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&p(e,["parameters","outputOptions","compressionQuality"],B);const L=f(n,["addWatermark"]);e!==void 0&&L!=null&&p(e,["parameters","addWatermark"],L);const Q=f(n,["labels"]);e!==void 0&&Q!=null&&p(e,["labels"],Q);const ie=f(n,["imageSize"]);e!==void 0&&ie!=null&&p(e,["parameters","sampleImageSize"],ie);const Z=f(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&p(e,["parameters","enhancePrompt"],Z),t}function hL(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&fL(a,t),t}function pL(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&dL(a,t),t}function mL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>RL(u))),p(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],OI(o)),e}function gL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Md(u))),p(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],FI(o)),e}function yL(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(n,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const h=f(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(n,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],kd(_));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(I=>vO(I))),p(e,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function _L(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&p(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const m=f(n,["aspectRatio"]);e!==void 0&&m!=null&&p(e,["parameters","aspectRatio"],m);const h=f(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&p(e,["parameters","pubsubTopic"],E);const A=f(n,["negativePrompt"]);e!==void 0&&A!=null&&p(e,["parameters","negativePrompt"],A);const I=f(n,["enhancePrompt"]);e!==void 0&&I!=null&&p(e,["parameters","enhancePrompt"],I);const P=f(n,["generateAudio"]);e!==void 0&&P!=null&&p(e,["parameters","generateAudio"],P);const B=f(n,["lastFrame"]);e!==void 0&&B!=null&&p(e,["instances[0]","lastFrame"],gi(B));const L=f(n,["referenceImages"]);if(e!==void 0&&L!=null){let Z=L;Array.isArray(Z)&&(Z=Z.map(oe=>EO(oe))),p(e,["instances[0]","referenceImages"],Z)}const Q=f(n,["mask"]);e!==void 0&&Q!=null&&p(e,["instances[0]","mask"],_O(Q));const ie=f(n,["compressionQuality"]);return e!==void 0&&ie!=null&&p(e,["parameters","compressionQuality"],ie),t}function vL(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],SL(u)),e}function EL(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],CL(u)),e}function TL(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&p(t,["instances[0]","image"],kd(a));const u=f(e,["video"]);u!=null&&p(t,["instances[0]","video"],qI(u));const d=f(e,["source"]);d!=null&&IL(d,t);const m=f(e,["config"]);return m!=null&&yL(m,t),t}function AL(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&p(t,["instances[0]","image"],gi(a));const u=f(e,["video"]);u!=null&&p(t,["instances[0]","video"],GI(u));const d=f(e,["source"]);d!=null&&wL(d,t);const m=f(e,["config"]);return m!=null&&_L(m,t),t}function SL(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>NL(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function CL(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>xL(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function IL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],kd(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],qI(a)),t}function wL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],gi(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],GI(a)),t}function RL(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["image"],OL(t));const i=f(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&p(e,["safetyAttributes"],OI(o)),e}function Md(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["image"],LI(t));const i=f(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&p(e,["safetyAttributes"],FI(o));const a=f(n,["prompt"]);return a!=null&&p(e,["enhancedPrompt"],a),e}function bL(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["mask"],LI(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["labels"],o)}return e}function NL(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],gO(t)),e}function xL(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],yO(t)),e}function DL(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const m=f(n,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=f(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const E=f(n,["presencePenalty"]);E!=null&&p(e,["presencePenalty"],E);const A=f(n,["responseLogprobs"]);A!=null&&p(e,["responseLogprobs"],A);const I=f(n,["responseMimeType"]);I!=null&&p(e,["responseMimeType"],I);const P=f(n,["responseModalities"]);P!=null&&p(e,["responseModalities"],P);const B=f(n,["responseSchema"]);B!=null&&p(e,["responseSchema"],B);const L=f(n,["routingConfig"]);L!=null&&p(e,["routingConfig"],L);const Q=f(n,["seed"]);Q!=null&&p(e,["seed"],Q);const ie=f(n,["speechConfig"]);ie!=null&&p(e,["speechConfig"],ie);const Z=f(n,["stopSequences"]);Z!=null&&p(e,["stopSequences"],Z);const oe=f(n,["temperature"]);oe!=null&&p(e,["temperature"],oe);const le=f(n,["thinkingConfig"]);le!=null&&p(e,["thinkingConfig"],le);const ue=f(n,["topK"]);ue!=null&&p(e,["topK"],ue);const M=f(n,["topP"]);if(M!=null&&p(e,["topP"],M),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ML(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],Xe(n,i)),t}function kL(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],Xe(n,i)),t}function PL(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function VL(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function UL(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function LL(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);i!=null&&p(e,["imageSize"],i);const o=f(n,["outputMimeType"]);o!=null&&p(e,["imageOutputOptions","mimeType"],o);const a=f(n,["outputCompressionQuality"]);return a!=null&&p(e,["imageOutputOptions","compressionQuality"],a),e}function OL(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],Ir(t));const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function LI(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],Ir(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function kd(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],Ir(t));const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function gi(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Ir(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function FL(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&p(t,["_url","models_url"],xI(n,d)),i}function BL(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&p(t,["_url","models_url"],xI(n,d)),i}function qL(n,e){const t={},i=f(e,["config"]);return i!=null&&FL(n,i,t),t}function GL(n,e){const t={},i=f(e,["config"]);return i!=null&&BL(n,i,t),t}function HL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=DI(o);Array.isArray(a)&&(a=a.map(u=>Um(u))),p(e,["models"],a)}return e}function zL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=DI(o);Array.isArray(a)&&(a=a.map(u=>Lm(u))),p(e,["models"],a)}return e}function KL(n){const e={},t=f(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&p(e,["dilation"],o),e}function Um(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);o!=null&&p(e,["description"],o);const a=f(n,["version"]);a!=null&&p(e,["version"],a);const u=f(n,["_self"]);u!=null&&p(e,["tunedModelInfo"],aO(u));const d=f(n,["inputTokenLimit"]);d!=null&&p(e,["inputTokenLimit"],d);const m=f(n,["outputTokenLimit"]);m!=null&&p(e,["outputTokenLimit"],m);const h=f(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=f(n,["temperature"]);_!=null&&p(e,["temperature"],_);const E=f(n,["maxTemperature"]);E!=null&&p(e,["maxTemperature"],E);const A=f(n,["topP"]);A!=null&&p(e,["topP"],A);const I=f(n,["topK"]);I!=null&&p(e,["topK"],I);const P=f(n,["thinking"]);return P!=null&&p(e,["thinking"],P),e}function Lm(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);o!=null&&p(e,["description"],o);const a=f(n,["versionId"]);a!=null&&p(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(A=>sL(A))),p(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&p(e,["labels"],d);const m=f(n,["_self"]);m!=null&&p(e,["tunedModelInfo"],lO(m));const h=f(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=f(n,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(A=>A)),p(e,["checkpoints"],E)}return e}function YL(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],rL(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],oL(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],DU(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function JL(n){const e={},t=f(n,["productImage"]);return t!=null&&p(e,["image"],gi(t)),e}function $L(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&p(e,["parameters","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const h=f(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","compressionQuality"],E);const A=f(n,["enhancePrompt"]);e!==void 0&&A!=null&&p(e,["parameters","enhancePrompt"],A);const I=f(n,["labels"]);return e!==void 0&&I!=null&&p(e,["labels"],I),t}function QL(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["source"]);o!=null&&WL(o,t);const a=f(e,["config"]);return a!=null&&$L(a,t),t}function XL(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Md(o))),p(e,["generatedImages"],i)}return e}function WL(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&p(e,["instances[0]","personImage","image"],gi(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>JL(d))),p(e,["instances[0]","productImages"],u)}return t}function ZL(n){const e={},t=f(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],gi(t));const i=f(n,["referenceId"]);i!=null&&p(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&p(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&p(e,["maskImageConfig"],KL(a));const u=f(n,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],OU(u));const d=f(n,["styleImageConfig"]);d!=null&&p(e,["styleImageConfig"],d);const m=f(n,["subjectImageConfig"]);return m!=null&&p(e,["subjectImageConfig"],m),e}function OI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function FI(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function jL(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function eO(n){const e={},t=f(n,["image"]);return t!=null&&p(e,["image"],gi(t)),e}function tO(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&p(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&p(e,["parameters","binaryColorThreshold"],d);const m=f(n,["labels"]);return e!==void 0&&m!=null&&p(e,["labels"],m),t}function nO(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["source"]);o!=null&&sO(o,t);const a=f(e,["config"]);return a!=null&&tO(a,t),t}function iO(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>bL(o))),p(e,["generatedMasks"],i)}return e}function sO(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],gi(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&p(e,["instances[0]","scribble"],eO(a)),t}function rO(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],aL(t));const i=f(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function oO(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],PL(d));const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],VL(m));const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function BI(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(A=>lL(A))),p(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&p(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const m=f(n,["googleMaps"]);m!=null&&p(e,["googleMaps"],m);const h=f(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function aO(n){const e={},t=f(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function lO(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function uO(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),t}function cO(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),t}function fO(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","name"],Xe(n,i));const o=f(e,["config"]);return o!=null&&uO(o,t),t}function dO(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&cO(o,t),t}function hO(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const m=f(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const h=f(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=f(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=f(n,["labels"]);e!==void 0&&E!=null&&p(e,["labels"],E);const A=f(n,["numberOfImages"]);e!==void 0&&A!=null&&p(e,["parameters","sampleCount"],A);const I=f(n,["mode"]);return e!==void 0&&I!=null&&p(e,["parameters","mode"],I),t}function pO(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],Xe(n,i));const o=f(e,["image"]);o!=null&&p(t,["instances[0]","image"],gi(o));const a=f(e,["upscaleFactor"]);a!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&hO(u,t),t}function mO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Md(a))),p(e,["generatedImages"],o)}return e}function gO(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Ir(i));const o=f(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function yO(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Ir(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function _O(n){const e={},t=f(n,["image"]);t!=null&&p(e,["_self"],gi(t));const i=f(n,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function vO(n){const e={},t=f(n,["image"]);t!=null&&p(e,["image"],kd(t));const i=f(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function EO(n){const e={},t=f(n,["image"]);t!=null&&p(e,["image"],gi(t));const i=f(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function qI(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&p(e,["encodedVideo"],Ir(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["encoding"],o),e}function GI(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],Ir(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TO(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function AO(n){const e={},t=f(n,["config"]);return t!=null&&TO(t,e),e}function SO(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function CO(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&SO(i,e),e}function IO(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function wO(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),t}function RO(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],NO(u)),e}function bO(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&p(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&wO(o,e),e}function NO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function xO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function DO(n){const e={},t=f(n,["config"]);return t!=null&&xO(t,e),e}function MO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function HI(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function kO(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&HI(i,e),e}function PO(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VO="Content-Type",UO="X-Server-Timeout",LO="User-Agent",Om="x-goog-api-client",OO="1.34.0",FO=`google-genai-sdk/${OO}`,BO="v1beta1",qO="v1beta";class GO{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:BO,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:qO,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&HO(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await wA(o),new km(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await wA(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return di(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const d="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Re(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(_,{stream:!0});try{const P=JSON.parse(E);if("error"in P){const B=JSON.parse(JSON.stringify(P.error)),L=B.status,Q=B.code,ie=`got status: ${L}. ${JSON.stringify(P)}`;if(Q>=400&&Q<600)throw new xd({message:ie,status:Q})}}catch(P){if(P.name==="ApiError")throw P}u+=E;let A=-1,I=0;for(;;){A=-1,I=0;for(const L of m){const Q=u.indexOf(L);Q!==-1&&(A===-1||Q<A)&&(A=Q,I=L.length)}if(A===-1)break;const P=u.substring(0,A);u=u.substring(A+I);const B=P.trim();if(B.startsWith(d)){const L=B.substring(d.length).trim();try{const Q=new Response(L,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Re(new km(Q))}catch(Q){throw new Error(`exception parsing stream chunk ${L}. ${Q}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=FO+" "+this.clientOptions.userAgentExtra;return e[LO]=t,e[Om]=t,e[VO]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(UO,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const m={file:o},h=this.getFileName(e),_=fe("upload/v1beta/files",m._url),E=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,m,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),m=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),E={};i!=null&&HI(i,E);const A=await this.fetchUploadUrl(h,d,m,_,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,A,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:m});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function wA(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new xd({message:o,status:t}):new Error(o)}}function HO(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const h=u[m],_=d[m];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[m]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[m]=h)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zO="mcp_used/unknown";let KO=!1;function zI(n){for(const e of n)if(YO(e)||typeof e=="object"&&"inputSchema"in e)return!0;return KO}function KI(n){var e;const t=(e=n[Om])!==null&&e!==void 0?e:"";n[Om]=(t+` ${zO}`).trimStart()}function YO(n){return n!==null&&typeof n=="object"&&n instanceof Yg}function JO(n){return di(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield Re(t.listTools({cursor:o}));for(const d of u.tools)yield yield Re(d),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class Yg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Yg(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,m=(t=void 0,hi(JO(_))),h;h=await m.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const E=o;u.push(E);const A=E.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=_}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),IV(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $O(n,e,t){const i=new yV;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class QO{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=ZO(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(Z=>{h=Z}),E=e.callbacks,A=function(){h({})},I=this.apiClient,P={onopen:A,onmessage:Z=>{$O(I,E.onmessage,Z)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(Z){}},B=this.webSocketFactory.create(m,WO(u),P);B.connect(),await _;const ie={setup:{model:Xe(this.apiClient,e.model)}};return B.send(JSON.stringify(ie)),new XO(B,this.apiClient)}}class XO{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=AU(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=TU(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ga.PLAY)}pause(){this.sendPlaybackControl(ga.PAUSE)}stop(){this.sendPlaybackControl(ga.STOP)}resetContext(){this.sendPlaybackControl(ga.RESET_CONTEXT)}close(){this.conn.close()}}function WO(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function ZO(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jO="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function e3(n,e,t){const i=new gV;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=IU(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class t3{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new QO(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&zI(e.config.tools)&&KI(E);const A=r3(E);if(this.apiClient.isVertexAI())_=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,_);else{const N=this.apiClient.getApiKey();let V="BidiGenerateContent",k="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",k="access_token"),_=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${V}?${k}=${N}`}let I=()=>{};const P=new Promise(N=>{I=N}),B=e.callbacks,L=function(){var N;(N=B==null?void 0:B.onopen)===null||N===void 0||N.call(B),I({})},Q=this.apiClient,ie={onopen:L,onmessage:N=>{e3(Q,B.onmessage,N)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(N){},onclose:(i=B==null?void 0:B.onclose)!==null&&i!==void 0?i:function(N){}},Z=this.webSocketFactory.create(_,s3(A),ie);Z.connect(),await P;let oe=Xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const N=this.apiClient.getProject(),V=this.apiClient.getLocation();oe=`projects/${N}/locations/${V}/`+oe}let le={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Eu.AUDIO]}:e.config.responseModalities=[Eu.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],M=[];for(const N of ue)if(this.isCallableTool(N)){const V=N;M.push(await V.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const D={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?le=EU(this.apiClient,D):le=vU(this.apiClient,D),delete le.config,Z.send(JSON.stringify(le)),new i3(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const n3={turnComplete:!0};class i3{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Wn(t.turns),e.isVertexAI()||(i=i.map(o=>Dd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(jO)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},n3),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:CU(e)}:t={realtimeInput:SU(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function s3(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function r3(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RA=10;function bA(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ia(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ia(n){return"callTool"in n&&typeof n.callTool=="function"}function o3(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ia(o)))!==null&&i!==void 0?i:!1}function NA(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Ia(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function xA(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a3 extends As{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!o3(t)||bA(t.config))return await this.generateContentInternal(m);const h=NA(t);if(h.length>0){const B=h.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let _,E;const A=Wn(m.contents),I=(a=(o=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:RA;let P=0;for(;P<I&&(_=await this.generateContentInternal(m),!(!_.functionCalls||_.functionCalls.length===0));){const B=_.candidates[0].content,L=[];for(const Q of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Ia(Q)){const Z=await Q.callTool(_.functionCalls);L.push(...Z)}P++,E={role:"user",parts:L},m.contents=Wn(m.contents),m.contents.push(B),m.contents.push(E),xA(m.config)&&(A.push(B),A.push(E))}return xA(m.config)&&(_.automaticFunctionCallingHistory=A),_},this.generateContentStream=async t=>{var i,o,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),bA(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const m=NA(t);if(m.length>0){const E=m.map(A=>`tools[${A}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:u.push(m);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new vo(vs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((m=(d=t.source)===null||d===void 0?void 0:d.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async m=>Ia(m)?await m.tool():m)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&zI(e.config.tools)){const m=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),KI(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ia(u)){const d=u,m=await d.tool();for(const h of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:RA;let u=!1,d=0;const m=await this.initAfcToolsMap(e);return(function(h,_,E){return di(this,arguments,function*(){for(var A,I,P,B,L,Q;d<a;){u&&(d++,u=!1);const le=yield Re(h.processParamsMaybeAddMcpUsage(E)),ue=yield Re(h.generateContentStreamInternal(le)),M=[],D=[];try{for(var ie=!0,Z=(I=void 0,hi(ue)),oe;oe=yield Re(Z.next()),A=oe.done,!A;ie=!0){B=oe.value,ie=!1;const N=B;if(yield yield Re(N),N.candidates&&(!((L=N.candidates[0])===null||L===void 0)&&L.content)){D.push(N.candidates[0].content);for(const V of(Q=N.candidates[0].content.parts)!==null&&Q!==void 0?Q:[])if(d<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(V.functionCall.name)){const k=yield Re(_.get(V.functionCall.name).callTool([V.functionCall]));M.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(N){I={error:N}}finally{try{!ie&&!A&&(P=Z.return)&&(yield Re(P.call(Z)))}finally{if(I)throw I.error}}if(M.length>0){u=!0;const N=new Wl;N.candidates=[{content:{role:"user",parts:M}}],yield yield Re(N);const V=[];V.push(...D),V.push({role:"user",parts:M});const k=Wn(E.contents).concat(V);E.contents=k}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=SA(this.apiClient,e);return d=fe("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=IA(_),A=new Wl;return Object.assign(A,E),A})}else{const h=AA(this.apiClient,e);return d=fe("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=CA(_),A=new Wl;return Object.assign(A,E),A})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=SA(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return di(this,arguments,function*(){var A,I,P,B;try{for(var L=!0,Q=hi(E),ie;ie=yield Re(Q.next()),A=ie.done,!A;L=!0){B=ie.value,L=!1;const Z=B,oe=IA(yield Re(Z.json()));oe.sdkHttpResponse={headers:Z.headers};const le=new Wl;Object.assign(le,oe),yield yield Re(le)}}catch(Z){I={error:Z}}finally{try{!L&&!A&&(P=Q.return)&&(yield Re(P.call(Q)))}finally{if(I)throw I.error}}})})}else{const h=AA(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return di(this,arguments,function*(){var A,I,P,B;try{for(var L=!0,Q=hi(E),ie;ie=yield Re(Q.next()),A=ie.done,!A;L=!0){B=ie.value,L=!1;const Z=B,oe=CA(yield Re(Z.json()));oe.sdkHttpResponse={headers:Z.headers};const le=new Wl;Object.assign(le,oe),yield yield Re(le)}}catch(Z){I={error:Z}}finally{try{!L&&!A&&(P=Q.return)&&(yield Re(P.call(Q)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=tL(this.apiClient,e);return d=fe("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=iL(_),A=new rA;return Object.assign(A,E),A})}else{const h=eL(this.apiClient,e);return d=fe("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=nL(_),A=new rA;return Object.assign(A,E),A})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=pL(this.apiClient,e);return d=fe("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=gL(_),A=new oA;return Object.assign(A,E),A})}else{const h=hL(this.apiClient,e);return d=fe("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=mL(_),A=new oA;return Object.assign(A,E),A})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=XU(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>{const h=WU(m),_=new rV;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=pO(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>{const h=mO(m),_=new oV;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=QL(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=XL(m),_=new aV;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=nO(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=iO(m),_=new lV;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=kL(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Lm(_))}else{const h=ML(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Um(_))}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=GL(this.apiClient,e);return d=fe("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=zL(_),A=new aA;return Object.assign(A,E),A})}else{const h=qL(this.apiClient,e);return d=fe("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=HL(_),A=new aA;return Object.assign(A,E),A})}}async update(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=dO(this.apiClient,e);return d=fe("{model}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Lm(_))}else{const h=fO(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Um(_))}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=YU(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=$U(_),A=new lA;return Object.assign(A,E),A})}else{const h=KU(this.apiClient,e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=JU(_),A=new lA;return Object.assign(A,E),A})}}async countTokens(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=GU(this.apiClient,e);return d=fe("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=zU(_),A=new uA;return Object.assign(A,E),A})}else{const h=qU(this.apiClient,e);return d=fe("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=HU(_),A=new uA;return Object.assign(A,E),A})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=PU(this.apiClient,e);return a=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>{const h=VU(m),_=new uV;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=AL(this.apiClient,e);return d=fe("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const E=EL(_),A=new sd;return Object.assign(A,E),A})}else{const h=TL(this.apiClient,e);return d=fe("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const E=vL(_),A=new sd;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l3 extends As{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=jP(e);return d=fe("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=ZP(e);return d=fe("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=KP(e);return a=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u3(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function c3(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>v3(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function f3(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&p(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&p(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&p(t,["bidiGenerateContentSetup"],_3(n,d));const m=f(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&p(t,["fieldMask"],m),i}function d3(n,e){const t={},i=f(e,["config"]);return i!=null&&p(t,["config"],f3(n,i,t)),t}function h3(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function p3(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function m3(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function g3(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function y3(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],Kg(E));const A=f(n,["thinkingConfig"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","thinkingConfig"],A);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],I);const P=f(n,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],c3(ln(P)));const B=f(n,["tools"]);if(e!==void 0&&B!=null){let ue=Ha(B);Array.isArray(ue)&&(ue=ue.map(M=>T3(Ga(M)))),p(e,["setup","tools"],ue)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&p(e,["setup","sessionResumption"],E3(L));const Q=f(n,["inputAudioTranscription"]);e!==void 0&&Q!=null&&p(e,["setup","inputAudioTranscription"],Q);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&p(e,["setup","outputAudioTranscription"],ie);const Z=f(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const le=f(n,["proactivity"]);if(e!==void 0&&le!=null&&p(e,["setup","proactivity"],le),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function _3(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],Xe(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],y3(o,t)),t}function v3(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],h3(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],p3(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],u3(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function E3(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function T3(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&p(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],m3(d));const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],g3(m));const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A3(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function S3(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=A3(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const m=[];a&&m.push(a),d.length>0&&m.push(...d),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class C3 extends As{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=d3(this.apiClient,e);a=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const m=S3(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I3(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function w3(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&I3(i,e),e}function R3(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function b3(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function N3(n){const e={},t=f(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&b3(i,e),e}function x3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D3 extends As{constructor(e){super(),this.apiClient=e,this.list=async t=>new vo(vs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=R3(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=w3(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=N3(e);return a=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=x3(m),_=new cV;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M3 extends As{constructor(e,t=new D3(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new vo(vs.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=AO(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IO(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=CO(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DO(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=MO(m),_=new fV;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=kO(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=PO(m),_=new dV;return Object.assign(_,h),_})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=bO(e);return a=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=RO(m),_=new Bg;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let YI=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return YI=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const k3=()=>YI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Bm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zn extends Error{}class pn extends Zn{constructor(e,t,i,o){super(`${pn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new Pd({message:i,cause:Bm(t)});const a=t;return e===400?new $I(e,a,i,o):e===401?new QI(e,a,i,o):e===403?new XI(e,a,i,o):e===404?new WI(e,a,i,o):e===409?new ZI(e,a,i,o):e===422?new jI(e,a,i,o):e===429?new ew(e,a,i,o):e>=500?new tw(e,a,i,o):new pn(e,a,i,o)}}class qm extends pn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Pd extends pn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class JI extends Pd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $I extends pn{}class QI extends pn{}class XI extends pn{}class WI extends pn{}class ZI extends pn{}class jI extends pn{}class ew extends pn{}class tw extends pn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P3=/^[a-z][a-z0-9+.-]*:/i,V3=n=>P3.test(n);let Gm=n=>(Gm=Array.isArray,Gm(n));const U3=Gm;let L3=U3;const DA=L3;function O3(n){if(!n)return!0;for(const e in n)return!1;return!0}function F3(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const B3=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Zn(`${n} must be an integer`);if(e<0)throw new Zn(`${n} must be a positive integer`);return e},q3=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G3=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H3(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const z3=()=>{var n,e,t,i,o;const a=H3();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":kA(Deno.build.os),"X-Stainless-Arch":MA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":kA((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":MA((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=K3();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function K3(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const MA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",kA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let vf;const Y3=()=>vf??(vf=z3());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J3(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function nw(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function $3(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return nw({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function iw(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Q3(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X3=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sw=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function em(n,e,t){return sw(),new File(n,e??"unknown_file",t)}function W3(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const Z3=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rw=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",j3=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&rw(n),e6=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function t6(n,e,t){if(sw(),n=await n,j3(n))return n instanceof File?n:em([await n.arrayBuffer()],n.name);if(e6(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),em(await Hm(o),e,t)}const i=await Hm(n);if(e||(e=W3(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return em(i,e,t)}async function Hm(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(rw(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(Z3(n))try{for(var d=!0,m=hi(n),h;h=await m.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const _=o;u.push(...await Hm(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${n6(n)}`)}return u}function n6(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ow{constructor(e){this._client=e}}ow._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aw(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const PA=Object.freeze(Object.create(null)),i6=(n=aw)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((_,E,A)=>{var I,P,B;/[?#]/.test(E)&&(o=!0);const L=i[A];let Q=(o?encodeURIComponent:n)(""+L);return A!==i.length&&(L==null||typeof L=="object"&&L.toString===((B=Object.getPrototypeOf((P=Object.getPrototypeOf((I=L.hasOwnProperty)!==null&&I!==void 0?I:PA))!==null&&P!==void 0?P:PA))===null||B===void 0?void 0:B.toString))&&(Q=L+"",a.push({start:_.length+E.length,length:Q.length,error:`Value of type ${Object.prototype.toString.call(L).slice(8,-1)} is not a valid path parameter`})),_+E+(A===i.length?"":Q)},""),d=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=m.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,E)=>_.start-E.start),a.length>0){let _=0;const E=a.reduce((A,I)=>{const P=" ".repeat(I.start-_),B="^".repeat(I.length);return _=I.start+I.length,A+P+B},"");throw new Zn(`Path parameters result in path with invalid segments:
${a.map(A=>A.error).join(`
`)}
${u}
${E}`)}return u}),Ef=i6(aw);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lw extends ow{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=od(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Zn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Zn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ef`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(Ef`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(Ef`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=od(a,["api_version"]);return this._client.get(Ef`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}lw._key=Object.freeze(["interactions"]);class uw extends lw{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s6(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let Tf;function Jg(n){let e;return(Tf??(e=new globalThis.TextEncoder,Tf=e.encode.bind(e)))(n)}let Af;function VA(n){let e;return(Af??(e=new globalThis.TextDecoder,Af=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Jg(e):e;this.buffer=s6([this.buffer,t]);const i=[];let o;for(;(o=r6(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(VA(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=VA(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Vd.NEWLINE_CHARS=new Set([`
`,"\r"]);Vd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function r6(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function o6(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ad={off:0,error:200,warn:300,info:400,debug:500},UA=(n,e,t)=>{if(n){if(F3(ad,n))return n;hn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ad))}`)}};function su(){}function Sf(n,e,t){return!e||ad[n]>ad[t]?su:e[n].bind(e)}const a6={error:su,warn:su,info:su,debug:su};let LA=new WeakMap;function hn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return a6;const o=LA.get(t);if(o&&o[0]===i)return o[1];const a={error:Sf("error",t,i),warn:Sf("warn",t,i),info:Sf("info",t,i),debug:Sf("debug",t,i)};return LA.set(t,[i,a]),a}const so=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ya{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?hn(i):console;function u(){return di(this,arguments,function*(){var m,h,_,E;if(o)throw new Zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let A=!1;try{try{for(var I=!0,P=hi(l6(e,t)),B;B=yield Re(P.next()),m=B.done,!m;I=!0){E=B.value,I=!1;const L=E;if(!A)if(L.data.startsWith("[DONE]")){A=!0;continue}else try{yield yield Re(JSON.parse(L.data))}catch(Q){throw a.error("Could not parse message into JSON:",L.data),a.error("From chunk:",L.raw),Q}}}catch(L){h={error:L}}finally{try{!I&&!m&&(_=P.return)&&(yield Re(_.call(P)))}finally{if(h)throw h.error}}A=!0}catch(L){if(Fm(L))return yield Re(void 0);throw L}finally{A||t.abort()}})}return new ya(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return di(this,arguments,function*(){var m,h,_,E;const A=new Vd,I=iw(e);try{for(var P=!0,B=hi(I),L;L=yield Re(B.next()),m=L.done,!m;P=!0){E=L.value,P=!1;const Q=E;for(const ie of A.decode(Q))yield yield Re(ie)}}catch(Q){h={error:Q}}finally{try{!P&&!m&&(_=B.return)&&(yield Re(_.call(B)))}finally{if(h)throw h.error}}for(const Q of A.flush())yield yield Re(Q)})}function u(){return di(this,arguments,function*(){var m,h,_,E;if(o)throw new Zn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let A=!1;try{try{for(var I=!0,P=hi(a()),B;B=yield Re(P.next()),m=B.done,!m;I=!0){E=B.value,I=!1;const L=E;A||L&&(yield yield Re(JSON.parse(L)))}}catch(L){h={error:L}}finally{try{!I&&!m&&(_=P.return)&&(yield Re(_.call(P)))}finally{if(h)throw h.error}}A=!0}catch(L){if(Fm(L))return yield Re(void 0);throw L}finally{A||t.abort()}})}return new ya(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new ya(()=>o(e),this.controller,this.client),new ya(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return nw({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=Jg(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function l6(n,e){return di(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Zn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Zn("Attempted to iterate over a response with no body");const d=new c6,m=new Vd,h=iw(n.body);try{for(var _=!0,E=hi(u6(h)),A;A=yield Re(E.next()),i=A.done,!i;_=!0){u=A.value,_=!1;const I=u;for(const P of m.decode(I)){const B=d.decode(P);B&&(yield yield Re(B))}}}catch(I){o={error:I}}finally{try{!_&&!i&&(a=E.return)&&(yield Re(a.call(E)))}finally{if(o)throw o.error}}for(const I of m.flush()){const P=d.decode(I);P&&(yield yield Re(P))}})}function u6(n){return di(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var d=!0,m=hi(n),h;h=yield Re(m.next()),t=h.done,!t;d=!0){a=h.value,d=!1;const _=a;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Jg(_):_;let A=new Uint8Array(u.length+E.length);A.set(u),A.set(E,u.length),u=A;let I;for(;(I=o6(u))!==-1;)yield yield Re(u.slice(0,I)),u=u.slice(I)}}catch(_){i={error:_}}finally{try{!d&&!t&&(o=m.return)&&(yield Re(o.call(m)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Re(u))})}class c6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=f6(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function f6(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function d6(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return hn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):ya.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const m=t.headers.get("content-type"),h=(d=m==null?void 0:m.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return hn(n).debug(`[${i}] response parsed`,so({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $g extends Promise{constructor(e,t,i=d6){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new $g(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cw=Symbol("brand.privateNullableHeaders");function*h6(n){if(!n)return;if(cw in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():DA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=DA(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,d])}}const Zl=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of h6(i)){const d=a.toLowerCase();o.has(d)||(e.delete(a),o.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[cw]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tm=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=FP)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fw;class Ud{constructor(e){var t,i,o,a,u,d,m,{baseURL:h=tm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=tm("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,A=od(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:_,apiVersion:E},A),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(i=I.timeout)!==null&&i!==void 0?i:Ud.DEFAULT_TIMEOUT,this.logger=(o=I.logger)!==null&&o!==void 0?o:console;const P="warn";this.logLevel=P,this.logLevel=(u=(a=UA(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:UA(tm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:P,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(m=I.fetch)!==null&&m!==void 0?m:J3(),this.encoder=X3,this._options=I,this.apiKey=_,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Zl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Zl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Zl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Zn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${pa}`}defaultIdempotencyKey(){return`stainless-node-retry-${k3()}`}makeStatusError(e,t,i,o){return pn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=V3(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return O3(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new $g(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const d=await e,m=(o=d.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=m),await this.prepareOptions(d);const{req:h,url:_,timeout:E}=await this.buildRequest(d,{retryCount:m-t});await this.prepareRequest(h,{url:_,options:d});const A="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=i===void 0?"":`, retryOf: ${i}`,P=Date.now();if(hn(this).debug(`[${A}] sending request`,so({retryOfRequestLogID:i,method:d.method,url:_,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new qm;const B=new AbortController,L=await this.fetchWithTimeout(_,h,E,B).catch(Bm),Q=Date.now();if(L instanceof globalThis.Error){const Z=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new qm;const oe=Fm(L)||/timed? ?out/i.test(String(L)+("cause"in L?String(L.cause):""));if(t)return hn(this).info(`[${A}] connection ${oe?"timed out":"failed"} - ${Z}`),hn(this).debug(`[${A}] connection ${oe?"timed out":"failed"} (${Z})`,so({retryOfRequestLogID:i,url:_,durationMs:Q-P,message:L.message})),this.retryRequest(d,t,i??A);throw hn(this).info(`[${A}] connection ${oe?"timed out":"failed"} - error; no more retries left`),hn(this).debug(`[${A}] connection ${oe?"timed out":"failed"} (error; no more retries left)`,so({retryOfRequestLogID:i,url:_,durationMs:Q-P,message:L.message})),oe?new JI:new Pd({cause:L})}const ie=`[${A}${I}] ${h.method} ${_} ${L.ok?"succeeded":"failed"} with status ${L.status} in ${Q-P}ms`;if(!L.ok){const Z=await this.shouldRetry(L);if(t&&Z){const N=`retrying, ${t} attempts remaining`;return await Q3(L.body),hn(this).info(`${ie} - ${N}`),hn(this).debug(`[${A}] response error (${N})`,so({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:Q-P})),this.retryRequest(d,t,i??A,L.headers)}const oe=Z?"error; no more retries left":"error; not retryable";hn(this).info(`${ie} - ${oe}`);const le=await L.text().catch(N=>Bm(N).message),ue=q3(le),M=ue?void 0:le;throw hn(this).debug(`[${A}] response error (${oe})`,so({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,message:M,durationMs:Date.now()-P})),this.makeStatusError(L.status,ue,M,L.headers)}return hn(this).info(ie),hn(this).debug(`[${A}] response start`,so({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:Q-P})),{response:L,options:d,controller:B,requestLogID:A,retryOfRequestLogID:i,startTime:P}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:d}=a,m=od(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),_=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,E=Object.assign(Object.assign(Object.assign({signal:o.signal},_?{duplex:"half"}:{}),{method:"GET"}),m);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const d=o==null?void 0:o.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const m=o==null?void 0:o.get("retry-after");if(m&&!u){const h=parseFloat(m);Number.isNaN(h)?u=Date.parse(m)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await G3(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:d,path:m,query:h,defaultBaseURL:_}=u,E=this.buildURL(m,h,_);"timeout"in u&&B3("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:A,body:I}=this.buildBody({options:u}),P=await this.buildHeaders({options:e,method:d,bodyHeaders:A,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:P},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Zl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Y3()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Zl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:$3(e)}:this.encoder({body:e,headers:i})}}Ud.DEFAULT_TIMEOUT=6e4;class Jt extends Ud{constructor(){super(...arguments),this.interactions=new uw(this)}}fw=Jt;Jt.GeminiNextGenAPIClient=fw;Jt.GeminiNextGenAPIClientError=Zn;Jt.APIError=pn;Jt.APIConnectionError=Pd;Jt.APIConnectionTimeoutError=JI;Jt.APIUserAbortError=qm;Jt.NotFoundError=WI;Jt.ConflictError=ZI;Jt.RateLimitError=ew;Jt.BadRequestError=$I;Jt.AuthenticationError=QI;Jt.InternalServerError=tw;Jt.PermissionDeniedError=XI;Jt.UnprocessableEntityError=jI;Jt.toFile=t6;Jt.Interactions=uw;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p6(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function m6(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function g6(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function y6(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function _6(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&p(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const m=f(n,["learningRate"]);if(e!==void 0&&m!=null&&p(e,["tuningTask","hyperparameters","learningRate"],m),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function v6(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&p(e,["supervisedTuningSpec"],OA(I))}else if(o==="PREFERENCE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec"],OA(I))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(m==="PREFERENCE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(h==="PREFERENCE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(_==="PREFERENCE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&p(e,["labels"],E);const A=f(n,["beta"]);return e!==void 0&&A!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],A),i}function E6(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&D6(a);const u=f(n,["config"]);return u!=null&&_6(u,t),t}function T6(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&M6(a,t,e);const u=f(n,["config"]);return u!=null&&v6(u,t,e),t}function A6(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function S6(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function C6(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function I6(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function w6(n,e){const t={},i=f(n,["config"]);return i!=null&&C6(i,t),t}function R6(n,e){const t={},i=f(n,["config"]);return i!=null&&I6(i,t),t}function b6(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>dw(d))),p(t,["tuningJobs"],u)}return t}function N6(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>zm(d))),p(t,["tuningJobs"],u)}return t}function x6(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["model"],i);const o=f(n,["name"]);return o!=null&&p(t,["endpoint"],o),t}function D6(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(t,["examples","examples"],o)}return t}function M6(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function dw(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["state"]);a!=null&&p(t,["state"],bI(a));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&p(t,["startTime"],d);const m=f(n,["tuningTask","completeTime"]);m!=null&&p(t,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=f(n,["description"]);_!=null&&p(t,["description"],_);const E=f(n,["baseModel"]);E!=null&&p(t,["baseModel"],E);const A=f(n,["_self"]);return A!=null&&p(t,["tunedModel"],x6(A)),t}function zm(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["state"]);a!=null&&p(t,["state"],bI(a));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(t,["startTime"],d);const m=f(n,["endTime"]);m!=null&&p(t,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=f(n,["error"]);_!=null&&p(t,["error"],_);const E=f(n,["description"]);E!=null&&p(t,["description"],E);const A=f(n,["baseModel"]);A!=null&&p(t,["baseModel"],A);const I=f(n,["tunedModel"]);I!=null&&p(t,["tunedModel"],I);const P=f(n,["preTunedModel"]);P!=null&&p(t,["preTunedModel"],P);const B=f(n,["supervisedTuningSpec"]);B!=null&&p(t,["supervisedTuningSpec"],B);const L=f(n,["preferenceOptimizationSpec"]);L!=null&&p(t,["preferenceOptimizationSpec"],L);const Q=f(n,["tuningDataStats"]);Q!=null&&p(t,["tuningDataStats"],Q);const ie=f(n,["encryptionSpec"]);ie!=null&&p(t,["encryptionSpec"],ie);const Z=f(n,["partnerModelTuningSpec"]);Z!=null&&p(t,["partnerModelTuningSpec"],Z);const oe=f(n,["customBaseModel"]);oe!=null&&p(t,["customBaseModel"],oe);const le=f(n,["experiment"]);le!=null&&p(t,["experiment"],le);const ue=f(n,["labels"]);ue!=null&&p(t,["labels"],ue);const M=f(n,["outputUri"]);M!=null&&p(t,["outputUri"],M);const D=f(n,["pipelineJob"]);D!=null&&p(t,["pipelineJob"],D);const N=f(n,["serviceAccount"]);N!=null&&p(t,["serviceAccount"],N);const V=f(n,["tunedModelDisplayName"]);V!=null&&p(t,["tunedModelDisplayName"],V);const k=f(n,["veoTuningSpec"]);return k!=null&&p(t,["veoTuningSpec"],k),t}function k6(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["metadata"]);a!=null&&p(t,["metadata"],a);const u=f(n,["done"]);u!=null&&p(t,["done"],u);const d=f(n,["error"]);return d!=null&&p(t,["error"],d),t}function OA(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&p(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P6 extends As{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new vo(vs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Mm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=S6(e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>zm(_))}else{const h=A6(e);return d=fe("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>dw(_))}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=R6(e);return d=fe("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=N6(_),A=new cA;return Object.assign(A,E),A})}else{const h=w6(e);return d=fe("tunedModels",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=b6(_),A=new cA;return Object.assign(A,E),A})}}async cancel(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=m6(e);return d=fe("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=y6(_),A=new fA;return Object.assign(A,E),A})}else{const h=p6(e);return d=fe("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const E=g6(_),A=new fA;return Object.assign(A,E),A})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=T6(e,e);return a=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>zm(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=E6(e);return a=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>k6(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V6{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const U6=1024*1024*8,L6=3,O6=1e3,F6=2,ld="x-goog-upload-status";async function B6(n,e,t){var i;const o=await hw(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[ld])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function q6(n,e,t){var i;const o=await hw(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[ld])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=AI(a),d=new qg;return Object.assign(d,u),d}async function hw(n,e,t){var i,o;let a=0,u=0,d=new km(new Response),m="upload";for(a=n.size;u<a;){const h=Math.min(U6,a-u),_=n.slice(u,u+h);u+h>=a&&(m+=", finalize");let E=0,A=O6;for(;E<L6&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[ld]));)E++,await H6(A),A=A*F6;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[ld])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function G6(n){return{size:n.size,type:n.type}}function H6(n){return new Promise(e=>setTimeout(e,n))}class z6{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await B6(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await q6(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await G6(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K6{create(e,t,i){return new Y6(e,t,i)}}class Y6{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FA="x-goog-api-key";class J6{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(FA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(FA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $6="gl-node/";class Q6{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Jt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=HP(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new J6(this.apiKey);this.apiClient=new GO({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:$6+"web",uploader:new z6,downloader:new V6}),this.models=new a3(this.apiClient),this.live=new t3(this.apiClient,o,new K6),this.batches=new _4(this.apiClient),this.chats=new j4(this.models,this.apiClient),this.caches=new X4(this.apiClient),this.files=new uU(this.apiClient),this.operations=new l3(this.apiClient),this.authTokens=new C3(this.apiClient),this.tunings=new P6(this.apiClient),this.fileSearchStores=new M3(this.apiClient)}}const Vu="spanish_assistant_vocab",Qg="spanish_assistant_last_analysis",pw="spanish_assistant_history",mw="spanish_assistant_theme",Xg="spanish_assistant_session_key",gw=n=>{sessionStorage.setItem(Xg,n)},Wg=()=>sessionStorage.getItem(Xg),X6=()=>{sessionStorage.removeItem(Xg)},Zg=()=>{const n=Xn.currentUser;return n?gP(Pu,"users",n.uid,"vocabulary"):null},Tr=async()=>{if(Xn.currentUser)try{const e=Zg();if(!e)return[];const t=bP(e,NP("addedAt","desc"));return(await kP(t)).docs.map(o=>o.data())}catch(e){return console.error("Failed to load vocab from Firestore",e),[]}try{const e=localStorage.getItem(Vu);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load vocab from LocalStorage",e),[]}},W6=async n=>{const e=Xn.currentUser,t=Date.now();let i=0;if(e)try{const u=EI(Pu),d=Zg();if(!d)return 0;for(const m of n){const h=crypto.randomUUID(),_={...m,id:h,addedAt:t,mastered:!1},E=Rd(d,h);u.set(E,_),i++}return await u.commit(),i}catch(u){return console.error("Batch add failed in Firestore",u),0}const a=[...await Tr()];return n.forEach(u=>{a.some(d=>d.word.toLowerCase()===u.word.toLowerCase())||(a.unshift({...u,id:crypto.randomUUID(),addedAt:t,mastered:!1}),i++)}),i>0&&localStorage.setItem(Vu,JSON.stringify(a)),i},Z6=async n=>{const e=Xn.currentUser;let t=0;if(e)try{const a=EI(Pu),u=Zg();if(!u)return 0;const d=await Tr();for(const m of n)if(!d.some(h=>h.word.toLowerCase()===m.word.toLowerCase())){const h=m.id||crypto.randomUUID(),_=Rd(u,h);a.set(_,{...m,id:h}),t++}return await a.commit(),t}catch(a){return console.error("Import failed in Firestore",a),0}const o=[...await Tr()];return n.forEach(a=>{o.some(u=>u.word.toLowerCase()===a.word.toLowerCase())||(o.unshift({...a,id:a.id||crypto.randomUUID()}),t++)}),t>0&&localStorage.setItem(Vu,JSON.stringify(o)),t},j6=async n=>{const e=Xn.currentUser;if(e)try{const o=Rd(Pu,"users",e.uid,"vocabulary",n);await VP(o);return}catch(o){console.error("Failed to delete from Firestore",o)}const i=(await Tr()).filter(o=>o.id!==n);localStorage.setItem(Vu,JSON.stringify(i))},e5=async n=>{const e=Xn.currentUser,t=await Tr(),i=t.find(u=>u.id===n);if(!i)return;const o={...i,mastered:!i.mastered};if(e)try{const u=Rd(Pu,"users",e.uid,"vocabulary",n);await PP(u,o,{merge:!0});return}catch(u){console.error("Failed to update Firestore",u)}const a=t.map(u=>u.id===n?o:u);localStorage.setItem(Vu,JSON.stringify(a))},t5=async n=>(await Tr()).some(t=>t.word.toLowerCase()===n.toLowerCase()),n5=(n,e)=>{const t={data:n,image:e,timestamp:Date.now()};localStorage.setItem(Qg,JSON.stringify(t));const i=i5(),o=[t,...i].slice(0,10);localStorage.setItem(pw,JSON.stringify(o))},yw=()=>{const n=localStorage.getItem(Qg);return n?JSON.parse(n):null},BA=()=>{localStorage.removeItem(Qg)},i5=()=>{const n=localStorage.getItem(pw);return n?JSON.parse(n):[]},s5=()=>localStorage.getItem(mw)||"light",r5=n=>{localStorage.setItem(mw,n)};function o5(n){const e=atob(n),t=e.length,i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=e.charCodeAt(o);return i}async function a5(n,e,t,i){const o=new Int16Array(n.buffer),a=o.length/i,u=e.createBuffer(i,a,t);for(let d=0;d<i;d++){const m=u.getChannelData(d);for(let h=0;h<a;h++)m[h]=o[h*i+d]/32768}return u}const l5={type:At.OBJECT,properties:{sentences:{type:At.ARRAY,items:{type:At.OBJECT,properties:{original:{type:At.STRING,description:"The EXACT verbatim sentence from the image. No omissions."},translation:{type:At.STRING,description:"Natural German translation of the full sentence."},words:{type:At.ARRAY,items:{type:At.OBJECT,properties:{word:{type:At.STRING,description:"The word, phrase, punctuation, or space."},type:{type:At.STRING,enum:["word","punctuation"],description:"Use 'word' for lexical units/phrases, 'punctuation' for symbols/spaces."},translation:{type:At.STRING,description:"German translation (required if type='word')."},explanation:{type:At.STRING,description:"German Grammar/context explanation (required if type='word')."},category:{type:At.STRING,enum:["noun","verb","adjective","function"],description:"Grammatical category."},baseForm:{type:At.STRING,description:"Lemma/Infinitiv."}},required:["word","type"]}}},required:["original","translation","words"]}}},required:["sentences"]},_w=()=>{const t=Wg()||void 0;if(!t)throw new Error("Kein API Key gefunden. Bitte geben Sie einen in den Einstellungen ein.");return new Q6({apiKey:t})},u5=async n=>{const e=_w(),t=`
    Analyze the attached Spanish book page. You are an expert Spanish teacher.
    
    CRITICAL INSTRUCTIONS:
    1. COMPLETE TRANSCRIPTION: You MUST process EVERY SINGLE SENTENCE visible on the page. Do not skip any sentences.
    2. PHRASE BINDING: Combine words that belong together (reflexive verbs like "se levant", idioms like "tener que") into a SINGLE 'word' object.
    3. FULL CHARACTER COVERAGE: Reconstruct the 'original' string perfectly including spaces.
    4. Provide the result in German.
  `;try{const o=(await e.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:n}},{text:t}]},config:{responseMimeType:"application/json",responseSchema:l5,systemInstruction:"You are a professional Spanish-to-German translator. Extract all text and provide linguistic analysis for learners."}})).text;if(!o)throw new Error("No response text from Gemini.");return JSON.parse(o)}catch(i){throw console.error("Analysis failed:",i),i}},vw=async n=>{var t,i,o,a,u,d;const e=_w();try{const h=(d=(u=(a=(o=(i=(t=(await e.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:n}]}],config:{responseModalities:[Eu.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Puck"}}}}})).candidates)==null?void 0:t[0])==null?void 0:i.content)==null?void 0:o.parts)==null?void 0:a[0])==null?void 0:u.inlineData)==null?void 0:d.data;if(!h)throw new Error("No audio data returned");const _=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),E=_.createGain();E.connect(_.destination);const A=await a5(o5(h),_,24e3,1),I=_.createBufferSource();I.buffer=A,I.connect(E),I.start()}catch(m){throw console.error("TTS failed:",m),m}},c5=({onChangeView:n})=>{const[e,t]=Ae.useState(null),[i,o]=Ae.useState(!1),[a,u]=Ae.useState(null),[d,m]=Ae.useState(0),[h,_]=Ae.useState("sentence"),[E,A]=Ae.useState(0),[I,P]=Ae.useState(null),[B,L]=Ae.useState(!1),[Q,ie]=Ae.useState(0),[Z,oe]=Ae.useState(new Set),le=Ae.useRef(null);Ae.useEffect(()=>{const ve=yw();ve&&!a&&(u(ve.data),t(ve.image))},[]),Ae.useEffect(()=>{(async()=>{if(!a)return;const Y=new Set;for(const re of a.sentences)for(const ge of re.words)ge.type==="word"&&await t5(ge.word)&&Y.add(ge.word.toLowerCase());oe(Y)})()},[a]);const ue=async ve=>{o(!0),u(null),L(!1),m(0),_("sentence"),A(0);try{const Y=await u5(ve);u(Y),n5(Y,ve)}catch(Y){console.error(Y),t(null)}finally{o(!1)}},M=ve=>{var re;const Y=(re=ve.target.files)==null?void 0:re[0];if(Y){const ge=new FileReader;ge.onloadend=()=>{const Je=ge.result.split(",")[1];t(Je),ue(Je)},ge.readAsDataURL(Y)}},D=async(ve,Y)=>{if(!I){P(Y);try{await vw(ve)}catch(re){console.error(re)}finally{P(null)}}},N=a==null?void 0:a.sentences[d],V=(N==null?void 0:N.words.filter(ve=>ve.type==="word"))||[],k=Ae.useCallback(async()=>{if(!(!a||!N)){if(h==="sentence")V.length>0?(_("words"),A(0)):_("translation");else if(h==="words")E<V.length-1?A(ve=>ve+1):_("translation");else if(h==="translation"){o(!0);const ve=V.map(re=>({word:re.word,translation:re.translation||"",explanation:re.explanation||"",category:re.category,baseForm:re.baseForm,contextSentence:N.original})),Y=await W6(ve);ie(re=>re+Y),o(!1),d<a.sentences.length-1?(m(re=>re+1),_("sentence"),A(0)):(L(!0),BA())}}},[a,h,E,d,V,N]),O=()=>{h==="translation"?V.length>0?(_("words"),A(V.length-1)):_("sentence"):h==="words"?E>0?A(ve=>ve-1):_("sentence"):h==="sentence"&&d>0&&(m(ve=>ve-1),_("translation"))},x=()=>{t(null),u(null),L(!1),BA()};if(Ae.useEffect(()=>{const ve=Y=>{Y.code==="Space"&&a&&!B&&(Y.preventDefault(),k())};return window.addEventListener("keydown",ve),()=>window.removeEventListener("keydown",ve)},[a,B,k]),i)return b.jsxs("div",{className:"fixed inset-0 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col items-center justify-center text-center p-6 z-50",children:[b.jsx(oo,{className:"w-12 h-12 animate-spin text-[#6B705C] dark:text-[#D4A373] mb-4"}),b.jsx("h2",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Verarbeite..."})]});if(!a&&!e)return b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-6 animate-fade-in text-center px-6",children:[b.jsx(nm,{className:"w-16 h-16 text-[#6B705C] dark:text-[#A5A58D] opacity-20"}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"Bereit zum Lesen?"}),b.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Scanne eine Seite deines spanischen Buches."})]}),b.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:le,className:"hidden",onChange:M}),b.jsx("button",{onClick:()=>{var ve;return(ve=le.current)==null?void 0:ve.click()},className:"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 px-10 rounded-2xl shadow-xl font-bold uppercase text-[10px] tracking-widest active:scale-95 transition-transform",children:"Kamera starten"})]});if(B)return b.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-6 animate-fade-in",children:[b.jsx("div",{className:"w-16 h-16 bg-[#E9EDC9] dark:bg-[#2C2420] rounded-2xl flex items-center justify-center text-[#6B705C] dark:text-[#D4A373] mb-6",children:b.jsx(im,{className:"w-8 h-8"})}),b.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"Seite beendet!"}),b.jsxs("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic mb-8",children:["Du hast ",Q," neue Wrter gelernt."]}),b.jsx("button",{onClick:x,className:"bg-[#6B705C] dark:bg-[#2C2420] text-white px-10 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest border dark:border-[#2C2420]",children:"Nchste Seite"})]});const pe=V[E];return b.jsxs("div",{className:"fixed inset-0 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col overflow-hidden animate-fade-in transition-colors",children:[b.jsxs("div",{className:"px-6 pt-4 pb-2 flex justify-between items-center bg-[#FDFBF7] dark:bg-[#12100E] z-10 transition-colors",children:[b.jsxs("div",{className:"flex flex-col gap-1 w-full max-w-[150px]",children:[b.jsxs("span",{className:"text-[9px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-widest",children:["Satz ",d+1," / ",a==null?void 0:a.sentences.length]}),b.jsx("div",{className:"h-1 bg-[#EAE2D6] dark:bg-[#2C2420] rounded-full overflow-hidden",children:b.jsx("div",{className:"h-full bg-[#B26B4A] dark:bg-[#D4A373] transition-all duration-500",style:{width:`${(d+1)/((a==null?void 0:a.sentences.length)||1)*100}%`}})})]}),b.jsx("button",{onClick:x,className:"p-2 text-[#A5A58D] dark:text-[#2C2420] hover:text-[#B26B4A] dark:hover:text-[#D4A373]",children:b.jsx(x1,{className:"w-5 h-5"})})]}),b.jsxs("div",{className:"flex-grow flex flex-col px-6 py-4 overflow-hidden relative",children:[h==="sentence"&&b.jsx("div",{className:"flex-grow flex items-center justify-center animate-fade-in",children:b.jsx("p",{className:"text-2xl sm:text-3xl font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed text-center italic",children:N==null?void 0:N.original})}),h==="words"&&N&&b.jsxs("div",{className:"flex-grow flex flex-col gap-6 animate-fade-in h-full",children:[b.jsx("div",{className:"bg-white dark:bg-[#1C1917] p-4 rounded-2xl border border-[#EAE2D6] dark:border-[#2C2420] shadow-sm shrink-0",children:b.jsx("p",{className:"text-lg font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed",children:N.words.map((ve,Y)=>{const re=pe&&ve.word===pe.word;return b.jsx("span",{className:`transition-colors duration-300 ${re?"bg-[#FEFAE0] dark:bg-[#2C2420] text-[#B26B4A] dark:text-[#D4A373] font-bold px-1 rounded":"opacity-40"}`,children:ve.word},Y)})})}),b.jsx("div",{className:"flex-grow flex items-center justify-center overflow-hidden",children:pe&&b.jsxs("div",{className:"w-full bg-[#2C2420] dark:bg-[#1C1917] text-[#FDFBF7] p-6 rounded-[2rem] shadow-xl border border-transparent dark:border-[#2C2420] flex flex-col animate-fade-in overflow-hidden max-h-full",children:[b.jsxs("div",{className:"overflow-y-auto",children:[b.jsx("span",{className:"text-[8px] font-bold uppercase tracking-[0.2em] text-[#B26B4A] dark:text-[#D4A373] mb-2 block",children:pe.category||"Vokabel"}),b.jsx("h3",{className:"text-3xl font-serif font-bold text-[#FEFAE0] dark:text-[#D4A373] mb-2",children:pe.word}),b.jsx("p",{className:"text-xl font-serif italic text-[#FDFBF7]/90 mb-4",children:pe.translation}),pe.explanation&&b.jsx("div",{className:"bg-white/5 dark:bg-black/20 p-4 rounded-xl border border-white/10 dark:border-white/5 mb-4",children:b.jsx("p",{className:"text-sm font-serif italic text-[#FDFBF7]/70 leading-relaxed",children:pe.explanation})})]}),b.jsxs("div",{className:"mt-auto pt-4 flex justify-between items-center border-t border-white/10",children:[b.jsx("button",{onClick:()=>D(pe.word,`w-${d}-${E}`),className:"w-10 h-10 bg-[#B26B4A] dark:bg-[#D4A373] rounded-xl flex items-center justify-center",children:I===`w-${d}-${E}`?b.jsx(oo,{className:"w-4 h-4 animate-spin text-white"}):b.jsx(Of,{className:"w-4 h-4 fill-white text-white dark:text-[#12100E] dark:fill-[#12100E]"})}),Z.has(pe.word.toLowerCase())&&b.jsx("span",{className:"text-[8px] font-bold uppercase tracking-widest text-[#E9EDC9]",children:"Gemerkt"})]})]})})]}),h==="translation"&&N&&b.jsxs("div",{className:"flex-grow flex flex-col justify-center gap-8 animate-fade-in",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("span",{className:"text-[8px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-widest mb-2 block",children:"Original"}),b.jsx("p",{className:"text-2xl font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed italic",children:N.original})]}),b.jsx("div",{className:"w-12 h-[1px] bg-[#EAE2D6] dark:bg-[#2C2420] mx-auto opacity-50"}),b.jsxs("div",{className:"text-center",children:[b.jsx("span",{className:"text-[8px] font-bold text-[#B26B4A] dark:text-[#D4A373] uppercase tracking-widest mb-2 block",children:"bersetzung"}),b.jsx("p",{className:"text-xl font-serif text-[#6B705C] dark:text-[#A5A58D] leading-relaxed",children:N.translation})]}),b.jsx("button",{onClick:()=>D(N.original,`s-${d}`),className:"mx-auto w-12 h-12 bg-[#FDFBF7] dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-full flex items-center justify-center text-[#6B705C] dark:text-[#A5A58D] hover:bg-[#FEFAE0] dark:hover:bg-[#2C2420] transition-colors",children:I===`s-${d}`?b.jsx(oo,{className:"w-4 h-4 animate-spin"}):b.jsx(Of,{className:"w-4 h-4 fill-current"})})]})]}),b.jsx("div",{className:"px-6 py-6 bg-[#FDFBF7] dark:bg-[#12100E] border-t border-[#EAE2D6] dark:border-[#2C2420] shrink-0 pb-[max(1.5rem,env(safe-area-inset-bottom))] transition-colors",children:b.jsxs("div",{className:"flex gap-3 max-w-lg mx-auto",children:[b.jsx("button",{onClick:O,disabled:h==="sentence"&&d===0,className:"w-14 h-14 flex items-center justify-center bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl text-[#6B705C] dark:text-[#A5A58D] disabled:opacity-20 active:scale-95 transition-all shadow-sm",children:b.jsx(A1,{className:"w-6 h-6"})}),b.jsxs("button",{onClick:k,className:`flex-grow h-14 rounded-2xl flex items-center justify-center gap-3 font-bold text-[10px] uppercase tracking-[0.2em] shadow-lg active:scale-95 transition-all ${h==="translation"?"bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E]":"bg-[#2C2420] dark:bg-white text-white dark:text-[#12100E]"}`,children:[h==="sentence"?"Wrter analysieren":h==="words"&&E<V.length-1?"Nchstes Wort":h==="words"?"bersetzung":"Nchster Satz",b.jsx(E1,{className:"w-4 h-4"})]})]})})]})},f5=()=>{const[n,e]=Ae.useState([]),[t,i]=Ae.useState(!0),[o,a]=Ae.useState("list"),[u,d]=Ae.useState("all"),[m,h]=Ae.useState([]),[_,E]=Ae.useState(0),[A,I]=Ae.useState(!1),[P,B]=Ae.useState(!1),L=Ae.useRef(null);Ae.useEffect(()=>{Q()},[]);const Q=async()=>{i(!0);const O=await Tr();e(O.sort((x,pe)=>pe.addedAt-x.addedAt)),i(!1)},ie=()=>u==="all"?n:n.filter(O=>(O.category||"function")===u),Z=async O=>{await j6(O),Q()},oe=()=>{const O=JSON.stringify(n,null,2),x="data:application/json;charset=utf-8,"+encodeURIComponent(O),pe=`spanish-vocab-${new Date().toISOString().split("T")[0]}.json`,ve=document.createElement("a");ve.setAttribute("href",x),ve.setAttribute("download",pe),ve.click()},le=()=>{var O;(O=L.current)==null||O.click()},ue=async O=>{var ve;const x=(ve=O.target.files)==null?void 0:ve[0];if(!x)return;B(!0);const pe=new FileReader;pe.onload=async Y=>{var re;try{const ge=JSON.parse((re=Y.target)==null?void 0:re.result);if(Array.isArray(ge)){const Le=await Z6(ge);alert(`${Le} neue Vokabeln importiert!`),await Q()}else alert("Ungltiges JSON-Format. Erwartet wird ein Array von Vokabeln.")}catch(ge){console.error("Import failed:",ge),alert("Import fehlgeschlagen. Bitte berprfen Sie die Datei.")}finally{B(!1),L.current&&(L.current.value="")}},pe.readAsText(x)},M=()=>{const O=ie().filter(pe=>!pe.mastered);if(O.length===0){alert("Keine offenen Vokabeln in dieser Kategorie!");return}const x=[...O].sort(()=>Math.random()-.5);h(x),E(0),I(!1),a("train")},D=async O=>{const x=m[_];O==="good"?await e5(x.id):h(pe=>[...pe,x]),I(!1),_<m.length-1?E(pe=>pe+1):(alert("Sitzung abgeschlossen!"),a("list"),Q())},N=async()=>{if(o==="train"&&m[_])try{await vw(m[_].word)}catch(O){console.error(O)}},V=()=>b.jsx("div",{className:"flex overflow-x-auto gap-3 pb-3 mb-6 scrollbar-hide px-1",children:["all","noun","verb","adjective","function"].map(O=>b.jsx("button",{onClick:()=>d(O),className:`px-5 py-2.5 rounded-2xl whitespace-nowrap text-xs font-bold uppercase tracking-widest transition-all duration-300 ${u===O?"bg-[#B26B4A] dark:bg-[#D4A373] text-[#FDFBF7] dark:text-[#12100E] shadow-lg":"bg-white dark:bg-[#1C1917] text-[#6B705C] dark:text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420]"}`,children:O==="all"?"Alle":O==="noun"?"Nomen":O==="verb"?"Verben":O==="adjective"?"Adjektive":"Andere"},O))});if(t)return b.jsx("div",{className:"flex flex-col items-center justify-center h-[50vh] animate-fade-in",children:b.jsx(oo,{className:"w-10 h-10 animate-spin text-[#B26B4A] dark:text-[#D4A373]"})});if(n.length===0&&!P)return b.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] text-center p-8 animate-fade-in",children:[b.jsx("div",{className:"w-20 h-20 bg-white dark:bg-[#1C1917] rounded-full flex items-center justify-center mb-6 text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420]",children:b.jsx(P1,{className:"w-10 h-10"})}),b.jsx("h3",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Deine Sammlung ist leer"}),b.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] mt-3 font-serif italic mb-6",children:"Schlage ein Buch auf oder importiere eine bestehende Sammlung."}),b.jsx("input",{type:"file",accept:".json",ref:L,className:"hidden",onChange:ue}),b.jsxs("button",{onClick:le,className:"bg-white dark:bg-[#1C1917] text-[#6B705C] dark:text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420] px-6 py-3 rounded-2xl flex items-center gap-2 font-bold uppercase text-[10px] tracking-widest shadow-sm hover:bg-[#FDFBF7] transition-all",children:[b.jsx(DE,{className:"w-4 h-4"}),"JSON Importieren"]})]});if(o==="list"){const O=ie(),x=O.filter(pe=>!pe.mastered).length;return b.jsxs("div",{className:"space-y-6 pb-24 animate-fade-in",children:[b.jsxs("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] rounded-[2.5rem] p-8 text-[#FDFBF7] shadow-2xl mb-8 relative overflow-hidden border border-transparent dark:border-[#2C2420]",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#B26B4A]/10 dark:bg-[#D4A373]/5 rounded-full -mr-16 -mt-16"}),b.jsxs("div",{className:"relative z-10",children:[b.jsxs("div",{className:"flex justify-between items-start mb-4",children:[b.jsxs("div",{children:[b.jsx("h2",{className:"text-4xl font-serif font-bold",children:x}),b.jsx("p",{className:"text-[#FDFBF7]/60 text-sm font-serif italic tracking-wide",children:"Wrter warten auf dich."})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{type:"file",accept:".json",ref:L,className:"hidden",onChange:ue}),b.jsx("button",{onClick:le,disabled:P,className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl text-[#FDFBF7] transition-all border border-white/10",title:"Vokabeln importieren",children:P?b.jsx(oo,{className:"w-5 h-5 animate-spin"}):b.jsx(DE,{className:"w-5 h-5"})}),b.jsx("button",{onClick:oe,className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl text-[#FDFBF7] transition-all border border-white/10",title:"Vokabeln exportieren",children:b.jsx(M1,{className:"w-5 h-5"})}),b.jsx(F1,{className:"w-8 h-8 text-[#B26B4A] dark:text-[#D4A373] ml-2"})]})]}),b.jsx("button",{onClick:M,disabled:x===0,className:"w-full bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] font-bold py-4 rounded-2xl shadow-xl hover:bg-[#9E5A3B] transition-all disabled:opacity-30 mt-4 uppercase text-xs tracking-[0.2em]",children:"Lern-Sitzung starten"})]})]}),V(),b.jsx("div",{className:"grid gap-4",children:O.length===0?b.jsx("p",{className:"text-center text-[#A5A58D] py-12 font-serif italic",children:"Hier gibt es noch nichts zu entdecken."}):O.map(pe=>b.jsxs("div",{className:"bg-white dark:bg-[#1C1917] p-5 rounded-3xl border border-[#EAE2D6] dark:border-[#2C2420] shadow-sm flex justify-between items-center group transition-all hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30",children:[b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[b.jsx("p",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] text-xl",children:pe.word}),pe.mastered&&b.jsx(im,{className:"w-4 h-4 text-[#6B705C] dark:text-[#D4A373]"})]}),b.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] text-sm italic font-serif",children:pe.translation})]}),b.jsx("button",{onClick:()=>Z(pe.id),className:"p-3 text-[#A5A58D] hover:text-[#B26B4A] dark:hover:text-[#D4A373] hover:bg-[#FEFAE0] dark:hover:bg-[#2C2420] rounded-2xl transition-all",children:b.jsx(QA,{className:"w-5 h-5"})})]},pe.id))})]})}const k=m[_];return b.jsxs("div",{className:"h-full flex flex-col items-center max-w-md mx-auto animate-fade-in",children:[b.jsxs("div",{className:"w-full flex justify-between items-center mb-8",children:[b.jsx("button",{onClick:()=>a("list"),className:"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7] text-xs font-bold uppercase tracking-widest bg-white dark:bg-[#1C1917] px-4 py-2 rounded-xl border border-[#EAE2D6] dark:border-[#2C2420]",children:"Abbrechen"}),b.jsxs("span",{className:"text-[#A5A58D] text-xs font-bold tracking-[0.3em]",children:[_+1," / ",m.length]})]}),b.jsx("div",{className:"w-full aspect-[4/5] perspective-1000 cursor-pointer mb-10",onClick:()=>!A&&I(!0),children:b.jsxs("div",{className:"relative w-full h-full bg-white dark:bg-[#1C1917] rounded-[3rem] shadow-2xl border border-[#EAE2D6] dark:border-[#2C2420] overflow-hidden flex flex-col transition-all duration-500",children:[b.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center p-10 text-center ${A?"border-b border-[#FDFBF7] dark:border-[#12100E]":""}`,children:[b.jsx("span",{className:"text-[10px] font-bold text-[#B26B4A] dark:text-[#D4A373] uppercase tracking-[0.3em] mb-6",children:k.category||"Wort"}),b.jsx("h2",{className:"text-5xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-8",children:k.word}),!A&&b.jsxs("div",{className:"flex flex-col items-center gap-4",children:[b.jsx("p",{className:"text-[#A5A58D] text-sm font-serif italic animate-pulse",children:"Karte aufdecken"}),b.jsx("button",{onClick:O=>{O.stopPropagation(),N()},className:"p-4 bg-[#FEFAE0] dark:bg-[#2C2420] text-[#B26B4A] dark:text-[#D4A373] rounded-2xl hover:bg-[#FAEDCD] dark:hover:bg-black/20",children:b.jsx(Of,{className:"w-6 h-6 fill-current"})})]})]}),A&&b.jsxs("div",{className:"flex-1 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col items-center justify-center p-10 text-center animate-in fade-in slide-in-from-bottom-6 duration-500",children:[b.jsx("h2",{className:"text-3xl font-serif font-bold text-[#B26B4A] dark:text-[#D4A373] mb-3",children:k.translation}),k.baseForm&&k.baseForm!==k.word&&b.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] mb-4 font-bold uppercase tracking-widest opacity-60",children:k.baseForm}),b.jsxs("p",{className:"text-[#6B705C] dark:text-[#A5A58D] italic font-serif text-lg leading-relaxed mb-6",children:['"',k.explanation,'"']}),b.jsx("button",{onClick:O=>{O.stopPropagation(),N()},className:"p-3 bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] rounded-xl hover:bg-[#E9EDC9] dark:hover:bg-[#2C2420]",children:b.jsx(Of,{className:"w-5 h-5 fill-current"})})]})]})}),A?b.jsxs("div",{className:"grid grid-cols-2 gap-6 w-full px-4",children:[b.jsxs("button",{onClick:()=>D("again"),className:"flex flex-col items-center justify-center p-5 bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#B26B4A] dark:text-[#D4A373] rounded-3xl hover:bg-[#FEFAE0] dark:hover:bg-[#2C2420] active:scale-95 transition-all shadow-sm",children:[b.jsx(j1,{className:"w-6 h-6 mb-2"}),b.jsx("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Nochmal"})]}),b.jsxs("button",{onClick:()=>D("good"),className:"flex flex-col items-center justify-center p-5 bg-[#6B705C] dark:bg-[#D4A373] text-white dark:text-[#12100E] rounded-3xl hover:bg-[#585E4A] dark:hover:bg-[#B26B4A] active:scale-95 transition-all shadow-xl",children:[b.jsx(im,{className:"w-6 h-6 mb-2"}),b.jsx("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Gelernt"})]})]}):b.jsx("div",{className:"w-full px-4",children:b.jsx("button",{onClick:()=>I(!0),className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-[#FDFBF7] dark:text-[#12100E] font-bold py-5 rounded-3xl shadow-2xl hover:bg-[#3D332D] dark:hover:bg-[#B26B4A] active:scale-95 transition-all uppercase text-xs tracking-[0.3em]",children:"Antwort zeigen"})})]})},d5=()=>{const[n,e]=Ae.useState(""),[t,i]=Ae.useState(!1),[o,a]=Ae.useState(!1);Ae.useEffect(()=>{const m=Wg();m&&(i(!0),e(m))},[]);const u=()=>{n.trim()&&(gw(n.trim()),i(!0),a(!0),setTimeout(()=>a(!1),3e3))},d=()=>{X6(),e(""),i(!1)};return b.jsxs("div",{className:"max-w-2xl mx-auto py-8 animate-fade-in",children:[b.jsxs("div",{className:"mb-10",children:[b.jsx("h2",{className:"text-3xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"Einstellungen"}),b.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Verwalte deinen Zugang zur KI und deine lokalen Daten."})]}),b.jsxs("div",{className:"space-y-6",children:[b.jsxs("section",{className:"bg-white dark:bg-[#1C1917] rounded-[2.5rem] border border-[#EAE2D6] dark:border-[#2C2420] p-8 shadow-sm",children:[b.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[b.jsx("div",{className:"w-12 h-12 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] shadow-sm",children:b.jsx(Lf,{className:"w-6 h-6"})}),b.jsxs("div",{children:[b.jsx("h3",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] text-xl",children:"API Konfiguration"}),b.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Dein persnlicher Schlssel fr Google Gemini."})]})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"relative",children:[b.jsx("input",{type:"password",value:n,onChange:m=>e(m.target.value),placeholder:"Geben Sie Ihren API Key ein...",className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-4 pr-12 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm font-mono"}),b.jsx(Lf,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D] opacity-40"})]}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[b.jsxs("button",{onClick:u,disabled:!n.trim(),className:"flex-1 bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2 disabled:opacity-30",children:[o?b.jsx(xE,{className:"w-4 h-4"}):b.jsx(tb,{className:"w-4 h-4"}),o?"Gespeichert":"Key Speichern"]}),t&&b.jsxs("button",{onClick:d,className:"bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900/30 px-6 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] active:scale-95 transition-all flex items-center justify-center gap-2",children:[b.jsx(QA,{className:"w-4 h-4"}),"Lschen"]})]}),b.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-2xl border transition-colors ${t?"bg-[#E9EDC9]/30 border-[#CCD5AE]/30":"bg-[#FEFAE0]/50 border-[#FAEDCD]"}`,children:[t?b.jsx(xE,{className:"w-5 h-5 text-[#6B705C] shrink-0 mt-0.5"}):b.jsx(C1,{className:"w-5 h-5 text-[#B26B4A] shrink-0 mt-0.5"}),b.jsxs("div",{children:[b.jsxs("p",{className:"text-xs font-bold uppercase tracking-widest text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:["Status: ",t?"Persnlicher Key aktiv":"Kein Key konfiguriert"]}),b.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:t?"Dieser Key wird ausschlielich in deiner aktuellen Browser-Session verwendet und nicht permanent gespeichert.":"Bitte hinterlege einen Key, um die bersetzungs- und Audio-Funktionen nutzen zu knnen."})]})]})]})]}),b.jsxs("section",{className:"bg-[#FEFAE0]/30 dark:bg-[#1C1917]/50 rounded-[2.5rem] border border-[#FAEDCD] dark:border-[#2C2420] p-8",children:[b.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[b.jsx("div",{className:"w-10 h-10 bg-white dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#6B705C] dark:text-[#A5A58D] shadow-sm",children:b.jsx(JA,{className:"w-5 h-5"})}),b.jsx("h3",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Sicherheit & Lokalitt"})]}),b.jsxs("p",{className:"text-sm text-[#6B705C] dark:text-[#A5A58D] font-serif italic leading-relaxed",children:["Dein Lernfortschritt wird bei Gsten ausschlielich in deinem Browser (Local Storage) gespeichert. API Keys werden aus Sicherheitsgrnden nur im ",b.jsx("strong",{children:"Session Storage"})," gehalten  sie verschwinden, sobald du den Tab schliet."]})]})]})]})},h5=({onGuestLogin:n})=>{const[e,t]=Ae.useState(!0),[i,o]=Ae.useState(""),[a,u]=Ae.useState(""),[d,m]=Ae.useState(""),[h,_]=Ae.useState(!1),[E,A]=Ae.useState(null),I=async P=>{P.preventDefault(),_(!0),A(null);try{if(e)await Wx(Xn,i,a);else{const B=await Xx(Xn,i,a);await jx(B.user,{displayName:d})}}catch(B){console.error("Auth error:",B),A(B.message||"Authentifizierung fehlgeschlagen.")}finally{_(!1)}};return b.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#FDFBF7] dark:bg-[#12100E]",children:b.jsxs("div",{className:"w-full max-w-md animate-fade-in",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#2C2420] dark:bg-[#D4A373] rounded-2xl text-[#FDFBF7] dark:text-[#12100E] shadow-xl mb-6",children:b.jsx(HA,{className:"w-8 h-8"})}),b.jsx("h1",{className:"text-3xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2 tracking-tight",children:"Spanish Reading Assistant"}),b.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Melde dich an, um deine Lesereise zu beginnen."})]}),b.jsxs("div",{className:"bg-white dark:bg-[#1C1917] p-8 rounded-[2.5rem] border border-[#EAE2D6] dark:border-[#2C2420] shadow-2xl",children:[b.jsxs("div",{className:"flex bg-[#FDFBF7] dark:bg-[#12100E] p-1 rounded-2xl border border-[#EAE2D6] dark:border-[#2C2420] mb-8",children:[b.jsx("button",{onClick:()=>t(!0),className:`flex-1 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all ${e?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D]"}`,children:"Anmelden"}),b.jsx("button",{onClick:()=>t(!1),className:`flex-1 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all ${e?"text-[#6B705C] dark:text-[#A5A58D]":"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm"}`,children:"Registrieren"})]}),b.jsxs("form",{onSubmit:I,className:"space-y-5",children:[!e&&b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Name"}),b.jsxs("div",{className:"relative",children:[b.jsx(XA,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),b.jsx("input",{type:"text",required:!0,value:d,onChange:P=>m(P.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:"Dein Name"})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Email"}),b.jsxs("div",{className:"relative",children:[b.jsx($1,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),b.jsx("input",{type:"email",required:!0,value:i,onChange:P=>o(P.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:"name@beispiel.de"})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Passwort"}),b.jsxs("div",{className:"relative",children:[b.jsx(G1,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),b.jsx("input",{type:"password",required:!0,value:a,onChange:P=>u(P.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:""})]})]}),E&&b.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 rounded-2xl text-red-600 dark:text-red-400 text-xs font-serif italic",children:E}),b.jsx("button",{type:"submit",disabled:h,className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-50",children:h?b.jsx(oo,{className:"w-4 h-4 animate-spin"}):e?b.jsxs(b.Fragment,{children:[b.jsx(z1,{className:"w-4 h-4"}),"Anmelden"]}):b.jsxs(b.Fragment,{children:[b.jsx(cb,{className:"w-4 h-4"}),"Konto erstellen"]})})]}),b.jsxs("div",{className:"relative my-8",children:[b.jsx("div",{className:"absolute inset-0 flex items-center",children:b.jsx("div",{className:"w-full border-t border-[#EAE2D6] dark:border-[#2C2420]"})}),b.jsx("div",{className:"relative flex justify-center text-[8px] font-bold uppercase tracking-[0.3em]",children:b.jsx("span",{className:"bg-white dark:bg-[#1C1917] px-4 text-[#A5A58D]",children:"Oder"})})]}),b.jsxs("button",{onClick:n,disabled:h,className:"w-full bg-white dark:bg-transparent border border-[#EAE2D6] dark:border-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-sm active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-50 hover:bg-[#FDFBF7] dark:hover:bg-[#2C2420]/30",children:[b.jsx(b1,{className:"w-4 h-4"}),"Als Gast fortfahren"]}),b.jsxs("div",{className:"mt-8 pt-8 border-t border-[#EAE2D6] dark:border-[#2C2420] flex items-center justify-center gap-2 text-[#6B705C] dark:text-[#A5A58D]",children:[b.jsx($A,{className:"w-4 h-4 opacity-50"}),b.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50",children:"App by Spanish Learners"})]})]})]})})},p5=({onClose:n})=>{const[e,t]=Ae.useState(""),i=()=>{e.trim()&&(gw(e.trim()),n())};return b.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-[#12100E]/80 backdrop-blur-sm animate-fade-in",children:b.jsxs("div",{className:"w-full max-w-md bg-[#FDFBF7] dark:bg-[#1C1917] rounded-[2.5rem] shadow-2xl border border-[#EAE2D6] dark:border-[#2C2420] p-8 relative",children:[b.jsx("button",{onClick:n,className:"absolute top-6 right-6 p-2 text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7] transition-colors",children:b.jsx(hb,{className:"w-5 h-5"})}),b.jsxs("div",{className:"mb-6",children:[b.jsx("div",{className:"w-14 h-14 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-2xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] mb-4",children:b.jsx(Lf,{className:"w-7 h-7"})}),b.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"API Key bentigt"}),b.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] text-sm font-serif italic",children:"Um die KI-Funktionen nutzen zu knnen, geben Sie bitte Ihren Gemini API Key ein. Dieser wird nur fr diese Sitzung gespeichert."})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"relative",children:[b.jsx(Lf,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),b.jsx("input",{type:"password",value:e,onChange:o=>t(o.target.value),placeholder:"Geben Sie Ihren Key ein...",className:"w-full bg-white dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm font-mono"})]}),b.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[#E9EDC9]/30 dark:bg-[#2C2420]/30 rounded-xl border border-[#CCD5AE]/30 dark:border-[#2C2420]/50",children:[b.jsx(JA,{className:"w-4 h-4 text-[#6B705C] dark:text-[#A5A58D]"}),b.jsx("p",{className:"text-[10px] text-[#6B705C] dark:text-[#A5A58D] font-serif",children:"Sicher: Der Key wird beim Schlieen des Tabs gelscht."})]}),b.jsxs("button",{onClick:i,disabled:!e.trim(),className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-30",children:["Sitzung starten",b.jsx(Cf,{className:"w-4 h-4"})]}),b.jsx("button",{onClick:n,className:"w-full text-[#A5A58D] text-[10px] font-bold uppercase tracking-widest mt-2 hover:text-[#6B705C] transition-colors",children:"Spter eingeben"})]})]})})};function m5(){const[n,e]=Ae.useState(St.HOME),[t,i]=Ae.useState(null),[o,a]=Ae.useState(0),[u,d]=Ae.useState(s5()),[m,h]=Ae.useState(null),[_,E]=Ae.useState(localStorage.getItem("spanish_assistant_is_guest")==="true"),[A,I]=Ae.useState(!0),[P,B]=Ae.useState(!1);Ae.useEffect(()=>{const le=n2(Xn,ue=>{h(ue),ue&&(E(!1),localStorage.removeItem("spanish_assistant_is_guest"),L()),I(!1)});return()=>le()},[]),Ae.useEffect(()=>{i(yw()),Tr().then(le=>a(le.length))},[n,m,_]),Ae.useEffect(()=>{u==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),r5(u)},[u]);const L=()=>{Wg()||B(!0)},Q=()=>d(le=>le==="light"?"dark":"light"),ie=()=>{E(!0),localStorage.setItem("spanish_assistant_is_guest","true"),L()},Z=()=>{E(!1),localStorage.removeItem("spanish_assistant_is_guest")};if(A)return b.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#FDFBF7] dark:bg-[#12100E]",children:[b.jsx(oo,{className:"w-12 h-12 animate-spin text-[#B26B4A] dark:text-[#D4A373] mb-4"}),b.jsx("p",{className:"font-serif italic text-[#6B705C] dark:text-[#A5A58D]",children:"Wird geladen..."})]});if(!m&&!_)return b.jsx(h5,{onGuestLogin:ie});const oe=()=>{switch(n){case St.ANALYZE:return b.jsx(c5,{onChangeView:e});case St.VOCAB:return b.jsx(f5,{});case St.SETTINGS:return b.jsx(d5,{});case St.HOME:default:return b.jsxs("div",{className:"flex flex-col gap-6 py-4 animate-fade-in",children:[b.jsxs("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] rounded-[2.5rem] p-8 text-[#FDFBF7] shadow-xl relative overflow-hidden border border-transparent dark:border-[#2C2420]",children:[b.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#B26B4A]/20 dark:bg-[#D4A373]/10 rounded-full -mr-12 -mt-12 blur-2xl"}),b.jsxs("div",{className:"relative z-10",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[b.jsx($A,{className:"text-[#FEFAE0] dark:text-[#D4A373] w-5 h-5"}),b.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest text-[#FEFAE0]/80 dark:text-[#D4A373]/80",children:_?"Bienvenido, Invitado":`Bienvenido, ${(m==null?void 0:m.displayName)||"Amigo"}`})]}),b.jsx("h2",{className:"text-4xl font-serif font-bold mb-4 tracking-tight",children:"Hola amigo."}),b.jsx("p",{className:"text-[#FDFBF7]/70 text-md font-serif italic leading-relaxed mb-6 max-w-sm",children:_?"Deine Vokabeln werden lokal im Browser gespeichert. Exportiere sie regelmig!":"Dein Fortschritt wird sicher in der Cloud synchronisiert."}),b.jsxs("div",{className:"flex flex-wrap gap-3",children:[b.jsxs("button",{onClick:()=>e(St.ANALYZE),className:"bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] font-bold py-3.5 px-6 rounded-xl shadow-lg hover:bg-[#9E5A3B] transition-all inline-flex items-center gap-3 uppercase text-[10px] tracking-widest",children:[b.jsx(KA,{className:"w-4 h-4"}),"Seite scannen"]}),t&&b.jsxs("button",{onClick:()=>e(St.ANALYZE),className:"bg-white/10 text-white border border-white/20 font-bold py-3.5 px-6 rounded-xl shadow-lg hover:bg-white/20 transition-all inline-flex items-center gap-3 uppercase text-[10px] tracking-widest",children:[b.jsx(U1,{className:"w-4 h-4"}),"Letzte Seite fortsetzen"]})]})]})]}),b.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[b.jsxs("div",{onClick:()=>e(St.ANALYZE),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] shadow-sm border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30 hover:shadow-md transition-all group",children:[b.jsx("div",{className:"w-12 h-12 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] mb-4 group-hover:scale-105 transition-transform",children:b.jsx(HA,{className:"w-6 h-6"})}),b.jsxs("div",{className:"flex justify-between items-start",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:"Lesereise"}),b.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Analysiere Texte und lerne Schtze kennen."})]}),b.jsx(Cf,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420] group-hover:text-[#B26B4A] dark:group-hover:text-[#D4A373] transition-colors"})]})]}),b.jsxs("div",{onClick:()=>e(St.VOCAB),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] shadow-sm border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30 hover:shadow-md transition-all group",children:[b.jsx("div",{className:"w-12 h-12 bg-[#E9EDC9] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#6B705C] dark:text-[#A5A58D] mb-4 group-hover:scale-105 transition-transform",children:b.jsx(zA,{className:"w-6 h-6"})}),b.jsxs("div",{className:"flex justify-between items-start",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:"Wortschatz"}),b.jsxs("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:[o," Fundstcke in deiner Sammlung."]})]}),b.jsx(Cf,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420] group-hover:text-[#6B705C] dark:group-hover:text-[#D4A373] transition-colors"})]})]})]}),b.jsxs("div",{onClick:()=>e(St.SETTINGS),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer flex items-center justify-between hover:bg-[#FDFBF7] dark:hover:bg-[#12100E] transition-colors",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx("div",{className:"bg-[#2C2420]/5 dark:bg-white/5 p-3 rounded-xl",children:b.jsx(YA,{className:"w-5 h-5 text-[#6B705C] dark:text-[#A5A58D]"})}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Einstellungen"}),b.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] italic",children:"Verwalte deinen Zugang und lerne mehr."})]})]}),b.jsx(Cf,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420]"})]})]})}};return b.jsxs(OP,{currentView:n,onChangeView:e,theme:u,onToggleTheme:Q,isGuest:_,onLogoutGuest:Z,children:[oe(),P&&b.jsx(p5,{onClose:()=>B(!1)})]})}const Ew=document.getElementById("root");if(!Ew)throw new Error("Could not find root element to mount to");const g5=l1.createRoot(Ew);g5.render(b.jsx(e1.StrictMode,{children:b.jsx(m5,{})}));
