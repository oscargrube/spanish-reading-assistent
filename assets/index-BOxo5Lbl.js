(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function VS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nm={exports:{}},du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE;function y1(){if(tE)return du;tE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return du.Fragment=e,du.jsx=t,du.jsxs=t,du}var nE;function _1(){return nE||(nE=1,nm.exports=y1()),nm.exports}var w=_1(),im={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE;function v1(){if(iE)return xe;iE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function I(q){return q===null||typeof q!="object"?null:(q=T&&q[T]||q["@@iterator"],typeof q=="function"?q:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,U={};function Y(q,ne,ue){this.props=q,this.context=ne,this.refs=U,this.updater=ue||k}Y.prototype.isReactComponent={},Y.prototype.setState=function(q,ne){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ne,"setState")},Y.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function te(){}te.prototype=Y.prototype;function W(q,ne,ue){this.props=q,this.context=ne,this.refs=U,this.updater=ue||k}var re=W.prototype=new te;re.constructor=W,F(re,Y.prototype),re.isPureReactComponent=!0;var ce=Array.isArray;function le(){}var x={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function D(q,ne,ue){var pe=ue.ref;return{$$typeof:n,type:q,key:ne,ref:pe!==void 0?pe:null,props:ue}}function L(q,ne){return D(q.type,ne,q.props)}function P(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function O(q){var ne={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ue){return ne[ue]})}var N=/\/+/g;function ye(q,ne){return typeof q=="object"&&q!==null&&q.key!=null?O(""+q.key):ne.toString(36)}function Ze(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(le,le):(q.status="pending",q.then(function(ne){q.status==="pending"&&(q.status="fulfilled",q.value=ne)},function(ne){q.status==="pending"&&(q.status="rejected",q.reason=ne)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function X(q,ne,ue,pe,Ie){var De=typeof q;(De==="undefined"||De==="boolean")&&(q=null);var Oe=!1;if(q===null)Oe=!0;else switch(De){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(q.$$typeof){case n:case e:Oe=!0;break;case _:return Oe=q._init,X(Oe(q._payload),ne,ue,pe,Ie)}}if(Oe)return Ie=Ie(q),Oe=pe===""?"."+ye(q,0):pe,ce(Ie)?(ue="",Oe!=null&&(ue=Oe.replace(N,"$&/")+"/"),X(Ie,ne,ue,"",function(ci){return ci})):Ie!=null&&(P(Ie)&&(Ie=L(Ie,ue+(Ie.key==null||q&&q.key===Ie.key?"":(""+Ie.key).replace(N,"$&/")+"/")+Oe)),ne.push(Ie)),1;Oe=0;var Ue=pe===""?".":pe+":";if(ce(q))for(var Qe=0;Qe<q.length;Qe++)pe=q[Qe],De=Ue+ye(pe,Qe),Oe+=X(pe,ne,ue,De,Ie);else if(Qe=I(q),typeof Qe=="function")for(q=Qe.call(q),Qe=0;!(pe=q.next()).done;)pe=pe.value,De=Ue+ye(pe,Qe++),Oe+=X(pe,ne,ue,De,Ie);else if(De==="object"){if(typeof q.then=="function")return X(Ze(q),ne,ue,pe,Ie);throw ne=String(q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function oe(q,ne,ue){if(q==null)return q;var pe=[],Ie=0;return X(q,pe,"","",function(De){return ne.call(ue,De,Ie++)}),pe}function _e(q){if(q._status===-1){var ne=q._result;ne=ne(),ne.then(function(ue){(q._status===0||q._status===-1)&&(q._status=1,q._result=ue)},function(ue){(q._status===0||q._status===-1)&&(q._status=2,q._result=ue)}),q._status===-1&&(q._status=0,q._result=ne)}if(q._status===1)return q._result.default;throw q._result}var Le=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Je={map:oe,forEach:function(q,ne,ue){oe(q,function(){ne.apply(this,arguments)},ue)},count:function(q){var ne=0;return oe(q,function(){ne++}),ne},toArray:function(q){return oe(q,function(ne){return ne})||[]},only:function(q){if(!P(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return xe.Activity=E,xe.Children=Je,xe.Component=Y,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=W,xe.StrictMode=i,xe.Suspense=p,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,xe.__COMPILER_RUNTIME={__proto__:null,c:function(q){return x.H.useMemoCache(q)}},xe.cache=function(q){return function(){return q.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(q,ne,ue){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var pe=F({},q.props),Ie=q.key;if(ne!=null)for(De in ne.key!==void 0&&(Ie=""+ne.key),ne)!M.call(ne,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ne.ref===void 0||(pe[De]=ne[De]);var De=arguments.length-2;if(De===1)pe.children=ue;else if(1<De){for(var Oe=Array(De),Ue=0;Ue<De;Ue++)Oe[Ue]=arguments[Ue+2];pe.children=Oe}return D(q.type,Ie,pe)},xe.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},xe.createElement=function(q,ne,ue){var pe,Ie={},De=null;if(ne!=null)for(pe in ne.key!==void 0&&(De=""+ne.key),ne)M.call(ne,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ie[pe]=ne[pe]);var Oe=arguments.length-2;if(Oe===1)Ie.children=ue;else if(1<Oe){for(var Ue=Array(Oe),Qe=0;Qe<Oe;Qe++)Ue[Qe]=arguments[Qe+2];Ie.children=Ue}if(q&&q.defaultProps)for(pe in Oe=q.defaultProps,Oe)Ie[pe]===void 0&&(Ie[pe]=Oe[pe]);return D(q,De,Ie)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(q){return{$$typeof:d,render:q}},xe.isValidElement=P,xe.lazy=function(q){return{$$typeof:_,_payload:{_status:-1,_result:q},_init:_e}},xe.memo=function(q,ne){return{$$typeof:h,type:q,compare:ne===void 0?null:ne}},xe.startTransition=function(q){var ne=x.T,ue={};x.T=ue;try{var pe=q(),Ie=x.S;Ie!==null&&Ie(ue,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(le,Le)}catch(De){Le(De)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),x.T=ne}},xe.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},xe.use=function(q){return x.H.use(q)},xe.useActionState=function(q,ne,ue){return x.H.useActionState(q,ne,ue)},xe.useCallback=function(q,ne){return x.H.useCallback(q,ne)},xe.useContext=function(q){return x.H.useContext(q)},xe.useDebugValue=function(){},xe.useDeferredValue=function(q,ne){return x.H.useDeferredValue(q,ne)},xe.useEffect=function(q,ne){return x.H.useEffect(q,ne)},xe.useEffectEvent=function(q){return x.H.useEffectEvent(q)},xe.useId=function(){return x.H.useId()},xe.useImperativeHandle=function(q,ne,ue){return x.H.useImperativeHandle(q,ne,ue)},xe.useInsertionEffect=function(q,ne){return x.H.useInsertionEffect(q,ne)},xe.useLayoutEffect=function(q,ne){return x.H.useLayoutEffect(q,ne)},xe.useMemo=function(q,ne){return x.H.useMemo(q,ne)},xe.useOptimistic=function(q,ne){return x.H.useOptimistic(q,ne)},xe.useReducer=function(q,ne,ue){return x.H.useReducer(q,ne,ue)},xe.useRef=function(q){return x.H.useRef(q)},xe.useState=function(q){return x.H.useState(q)},xe.useSyncExternalStore=function(q,ne,ue){return x.H.useSyncExternalStore(q,ne,ue)},xe.useTransition=function(){return x.H.useTransition()},xe.version="19.2.3",xe}var sE;function gg(){return sE||(sE=1,im.exports=v1()),im.exports}var de=gg();const E1=VS(de);var sm={exports:{}},fu={},rm={exports:{}},om={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rE;function T1(){return rE||(rE=1,(function(n){function e(X,oe){var _e=X.length;X.push(oe);e:for(;0<_e;){var Le=_e-1>>>1,Je=X[Le];if(0<o(Je,oe))X[Le]=oe,X[_e]=Je,_e=Le;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var oe=X[0],_e=X.pop();if(_e!==oe){X[0]=_e;e:for(var Le=0,Je=X.length,q=Je>>>1;Le<q;){var ne=2*(Le+1)-1,ue=X[ne],pe=ne+1,Ie=X[pe];if(0>o(ue,_e))pe<Je&&0>o(Ie,ue)?(X[Le]=Ie,X[pe]=_e,Le=pe):(X[Le]=ue,X[ne]=_e,Le=ne);else if(pe<Je&&0>o(Ie,_e))X[Le]=Ie,X[pe]=_e,Le=pe;else break e}}return oe}function o(X,oe){var _e=X.sortIndex-oe.sortIndex;return _e!==0?_e:X.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],h=[],_=1,E=null,T=3,I=!1,k=!1,F=!1,U=!1,Y=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function re(X){for(var oe=t(h);oe!==null;){if(oe.callback===null)i(h);else if(oe.startTime<=X)i(h),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=t(h)}}function ce(X){if(F=!1,re(X),!k)if(t(p)!==null)k=!0,le||(le=!0,O());else{var oe=t(h);oe!==null&&Ze(ce,oe.startTime-X)}}var le=!1,x=-1,M=5,D=-1;function L(){return U?!0:!(n.unstable_now()-D<M)}function P(){if(U=!1,le){var X=n.unstable_now();D=X;var oe=!0;try{e:{k=!1,F&&(F=!1,te(x),x=-1),I=!0;var _e=T;try{t:{for(re(X),E=t(p);E!==null&&!(E.expirationTime>X&&L());){var Le=E.callback;if(typeof Le=="function"){E.callback=null,T=E.priorityLevel;var Je=Le(E.expirationTime<=X);if(X=n.unstable_now(),typeof Je=="function"){E.callback=Je,re(X),oe=!0;break t}E===t(p)&&i(p),re(X)}else i(p);E=t(p)}if(E!==null)oe=!0;else{var q=t(h);q!==null&&Ze(ce,q.startTime-X),oe=!1}}break e}finally{E=null,T=_e,I=!1}oe=void 0}}finally{oe?O():le=!1}}}var O;if(typeof W=="function")O=function(){W(P)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ye=N.port2;N.port1.onmessage=P,O=function(){ye.postMessage(null)}}else O=function(){Y(P,0)};function Ze(X,oe){x=Y(function(){X(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(X){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var _e=T;T=oe;try{return X()}finally{T=_e}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var _e=T;T=X;try{return oe()}finally{T=_e}},n.unstable_scheduleCallback=function(X,oe,_e){var Le=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Le+_e:Le):_e=Le,X){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=_e+Je,X={id:_++,callback:oe,priorityLevel:X,startTime:_e,expirationTime:Je,sortIndex:-1},_e>Le?(X.sortIndex=_e,e(h,X),t(p)===null&&X===t(h)&&(F?(te(x),x=-1):F=!0,Ze(ce,_e-Le))):(X.sortIndex=Je,e(p,X),k||I||(k=!0,le||(le=!0,O()))),X},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(X){var oe=T;return function(){var _e=T;T=oe;try{return X.apply(this,arguments)}finally{T=_e}}}})(om)),om}var oE;function A1(){return oE||(oE=1,rm.exports=T1()),rm.exports}var am={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE;function S1(){if(aE)return cn;aE=1;var n=gg();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(p,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(p,h,null,_)},cn.flushSync=function(p){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=_,i.d.f()}},cn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},cn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},cn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:I}):_==="script"&&i.d.X(p,{crossOrigin:E,integrity:T,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},cn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},cn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin);i.d.L(p,_,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},cn.preloadModule=function(p,h){if(typeof p=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},cn.requestFormReset=function(p){i.d.r(p)},cn.unstable_batchedUpdates=function(p,h){return p(h)},cn.useFormState=function(p,h,_){return u.H.useFormState(p,h,_)},cn.useFormStatus=function(){return u.H.useHostTransitionStatus()},cn.version="19.2.3",cn}var lE;function C1(){if(lE)return am.exports;lE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),am.exports=S1(),am.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uE;function w1(){if(uE)return fu;uE=1;var n=A1(),e=gg(),t=C1();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return p(y),s;if(v===c)return p(y),r;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var S=!1,R=y.child;R;){if(R===l){S=!0,l=y,c=v;break}if(R===c){S=!0,c=y,l=v;break}R=R.sibling}if(!S){for(R=v.child;R;){if(R===l){S=!0,l=v,c=y;break}if(R===c){S=!0,c=v,l=y;break}R=R.sibling}if(!S)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function _(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=_(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),W=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function ye(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case F:return"Fragment";case Y:return"Profiler";case U:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList";case D:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case W:return s.displayName||"Context";case te:return(s._context.displayName||"Context")+".Consumer";case re:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case x:return r=s.displayName||null,r!==null?r:ye(s.type)||"Memo";case M:r=s._payload,s=s._init;try{return ye(s(r))}catch{}}return null}var Ze=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Le=[],Je=-1;function q(s){return{current:s}}function ne(s){0>Je||(s.current=Le[Je],Le[Je]=null,Je--)}function ue(s,r){Je++,Le[Je]=s.current,s.current=r}var pe=q(null),Ie=q(null),De=q(null),Oe=q(null);function Ue(s,r){switch(ue(De,r),ue(Ie,s),ue(pe,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?C0(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=C0(r),s=w0(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(pe),ue(pe,s)}function Qe(){ne(pe),ne(Ie),ne(De)}function ci(s){s.memoizedState!==null&&ue(Oe,s);var r=pe.current,l=w0(r,s.type);r!==l&&(ue(Ie,s),ue(pe,l))}function Gs(s){Ie.current===s&&(ne(pe),ne(Ie)),Oe.current===s&&(ne(Oe),au._currentValue=_e)}var Hs,Mi;function mt(s){if(Hs===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Hs=r&&r[1]||"",Mi=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hs+s+Mi}var Ae=!1;function st(s,r){if(!s||Ae)return"";Ae=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Q){var $=Q}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(Q){$=Q}s.call(ie.prototype)}}else{try{throw Error()}catch(Q){$=Q}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),S=v[0],R=v[1];if(S&&R){var V=S.split(`
`),K=R.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===K.length)for(c=V.length-1,y=K.length-1;1<=c&&0<=y&&V[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==K[y]){var j=`
`+V[c].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=c&&0<=y);break}}}finally{Ae=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?mt(l):""}function It(s,r){switch(s.tag){case 26:case 27:case 5:return mt(s.type);case 16:return mt("Lazy");case 13:return s.child!==r&&r!==null?mt("Suspense Fallback"):mt("Suspense");case 19:return mt("SuspenseList");case 0:case 15:return st(s.type,!1);case 11:return st(s.type.render,!1);case 1:return st(s.type,!0);case 31:return mt("Activity");default:return""}}function Kn(s){try{var r="",l=null;do r+=It(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var gt=Object.prototype.hasOwnProperty,nt=n.unstable_scheduleCallback,Kt=n.unstable_cancelCallback,zs=n.unstable_shouldYield,Ks=n.unstable_requestPaint,$t=n.unstable_now,gn=n.unstable_getCurrentPriorityLevel,Mn=n.unstable_ImmediatePriority,$s=n.unstable_UserBlockingPriority,cs=n.unstable_NormalPriority,Ho=n.unstable_LowPriority,tc=n.unstable_IdlePriority,nc=n.log,ic=n.unstable_setDisableYieldValue,di=null,en=null;function $n(s){if(typeof nc=="function"&&ic(s),en&&typeof en.setStrictMode=="function")try{en.setStrictMode(di,s)}catch{}}var Rt=Math.clz32?Math.clz32:rc,sc=Math.log,zo=Math.LN2;function rc(s){return s>>>=0,s===0?32:31-(sc(s)/zo|0)|0}var ki=256,Qr=262144,kt=4194304;function Pi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Vi(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~v,c!==0?y=Pi(c):(S&=R,S!==0?y=Pi(S):l||(l=R&~s,l!==0&&(y=Pi(l))))):(R=c&~v,R!==0?y=Pi(R):S!==0?y=Pi(S):l||(l=c&~s,l!==0&&(y=Pi(l)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:y}function fi(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function oh(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oc(){var s=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),s}function Ui(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Xr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ah(s,r,l,c,y,v){var S=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,V=s.expirationTimes,K=s.hiddenUpdates;for(l=S&~l;0<l;){var j=31-Rt(l),ie=1<<j;R[j]=0,V[j]=-1;var $=K[j];if($!==null)for(K[j]=null,j=0;j<$.length;j++){var Q=$[j];Q!==null&&(Q.lane&=-536870913)}l&=~ie}c!==0&&Wr(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(S&~r))}function Wr(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-Rt(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function fl(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-Rt(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function hl(s,r){var l=r&-r;return l=(l&42)!==0?1:jr(l),(l&(s.suspendedLanes|r))!==0?0:l}function jr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ds(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ac(){var s=oe.p;return s!==0?s:(s=window.event,s===void 0?32:J0(s.type))}function hi(s,r){var l=oe.p;try{return oe.p=s,r()}finally{oe.p=l}}var pi=Math.random().toString(36).slice(2),Pt="__reactFiber$"+pi,Qt="__reactProps$"+pi,Li="__reactContainer$"+pi,Ko="__reactEvents$"+pi,lh="__reactListeners$"+pi,lc="__reactHandles$"+pi,uc="__reactResources$"+pi,Oi="__reactMarker$"+pi;function $o(s){delete s[Pt],delete s[Qt],delete s[Ko],delete s[lh],delete s[lc]}function Fi(s){var r=s[Pt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Li]||l[Pt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=M0(s);s!==null;){if(l=s[Pt])return l;s=M0(s)}return r}s=l,l=s.parentNode}return null}function Yn(s){if(s=s[Pt]||s[Li]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function kn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Bi(s){var r=s[uc];return r||(r=s[uc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Vt(s){s[Oi]=!0}var pl=new Set,ml={};function qi(s,r){Gi(s,r),Gi(s+"Capture",r)}function Gi(s,r){for(ml[s]=r,s=0;s<r.length;s++)pl.add(r[s])}var gl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yl={},_l={};function cc(s){return gt.call(_l,s)?!0:gt.call(yl,s)?!1:gl.test(s)?_l[s]=!0:(yl[s]=!0,!1)}function Yo(s,r,l){if(cc(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Pn(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Ut(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function Xt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ys(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function vl(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(S){l=""+S,v.call(this,S)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function rt(s){if(!s._valueTracker){var r=Ys(s)?"checked":"value";s._valueTracker=vl(s,r,""+s[r])}}function Zr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Ys(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Hi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var eo=/[\n"\\]/g;function Sn(s){return s.replace(eo,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Jo(s,r,l,c,y,v,S,R){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),r!=null?S==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Xt(r)):s.value!==""+Xt(r)&&(s.value=""+Xt(r)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),r!=null?El(s,S,Xt(r)):l!=null?El(s,S,Xt(l)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+Xt(R):s.removeAttribute("name")}function dc(s,r,l,c,y,v,S,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){rt(s);return}l=l!=null?""+Xt(l):"",r=r!=null?""+Xt(r):l,R||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S),rt(s)}function El(s,r,l){r==="number"&&Hi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Js(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+Xt(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function fc(s,r,l){if(r!=null&&(r=""+Xt(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+Xt(l):""}function Qs(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(Ze(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=Xt(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),rt(s)}function Cn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||hc.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function Al(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&Tl(s,y,c)}else for(var v in r)r.hasOwnProperty(v)&&Tl(s,v,r[v])}function Qo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xo(s){return Xs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function mi(){}var Sl=null;function Jn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ws=null,zi=null;function to(s){var r=Yn(s);if(r&&(s=r.stateNode)){var l=s[Qt]||null;e:switch(s=r.stateNode,r.type){case"input":if(Jo(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Sn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Qt]||null;if(!y)throw Error(i(90));Jo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&Zr(c)}break e;case"textarea":fc(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Js(s,!!l.multiple,r,!1)}}}var Wo=!1;function js(s,r,l){if(Wo)return s(r,l);Wo=!0;try{var c=s(r);return c}finally{if(Wo=!1,(Ws!==null||zi!==null)&&(ad(),Ws&&(r=Ws,s=zi,zi=Ws=null,to(r),s)))for(r=0;r<s.length;r++)to(s[r])}}function gi(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Qt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),no=!1;if(Qn)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){no=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{no=!1}var Ki=null,Cl=null,io=null;function wl(){if(io)return io;var s,r=Cl,l=r.length,c,y="value"in Ki?Ki.value:Ki.textContent,v=y.length;for(s=0;s<l&&r[s]===y[s];s++);var S=l-s;for(c=1;c<=S&&r[l-c]===y[v-c];c++);return io=y.slice(s,1<c?1-c:void 0)}function so(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function fs(){return!0}function yi(){return!1}function tn(s){function r(l,c,y,v,S){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?fs:yi,this.isPropagationStopped=yi,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),r}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$i=tn(hs),Zs=E({},hs,{view:0,detail:0}),Il=tn(Zs),er,jo,Yi,Zo=E({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Yi&&(Yi&&s.type==="mousemove"?(er=s.screenX-Yi.screenX,jo=s.screenY-Yi.screenY):jo=er=0,Yi=s),er)},movementY:function(s){return"movementY"in s?s.movementY:jo}}),Rl=tn(Zo),ro=E({},Zo,{dataTransfer:0}),mc=tn(ro),gc=E({},Zs,{relatedTarget:0}),oo=tn(gc),bl=E({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),yc=tn(bl),ea=E({},hs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),_c=tn(ea),vc=E({},hs,{data:0}),Ji=tn(vc),Ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Ac[s])?!!r[s]:!1}function tr(){return Sc}var yn=E({},Zs,{key:function(s){if(s.key){var r=Ec[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=so(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Tc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(s){return s.type==="keypress"?so(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?so(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Cc=tn(yn),wc=E({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ps=tn(wc),g=E({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),A=tn(g),C=E({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=tn(C),H=E({},Zo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),J=tn(H),ae=E({},hs,{newState:0,oldState:0}),Me=tn(ae),bt=[9,13,27,32],et=Qn&&"CompositionEvent"in window,Et=null;Qn&&"documentMode"in document&&(Et=document.documentMode);var Xn=Qn&&"TextEvent"in window&&!Et,Qi=Qn&&(!et||Et&&8<Et&&11>=Et),_i=" ",vi=!1;function ao(s,r){switch(s){case"keyup":return bt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ta(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var na=!1;function qR(s,r){switch(s){case"compositionend":return ta(r);case"keypress":return r.which!==32?null:(vi=!0,_i);case"textInput":return s=r.data,s===_i&&vi?null:s;default:return null}}function GR(s,r){if(na)return s==="compositionend"||!et&&ao(s,r)?(s=wl(),io=Cl=Ki=null,na=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Qi&&r.locale!=="ko"?null:r.data;default:return null}}var HR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!HR[s.type]:r==="textarea"}function Uy(s,r,l,c){Ws?zi?zi.push(c):zi=[c]:Ws=c,r=pd(r,"onChange"),0<r.length&&(l=new $i("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var xl=null,Nl=null;function zR(s){_0(s,0)}function Ic(s){var r=kn(s);if(Zr(r))return s}function Ly(s,r){if(s==="change")return r}var Oy=!1;if(Qn){var uh;if(Qn){var ch="oninput"in document;if(!ch){var Fy=document.createElement("div");Fy.setAttribute("oninput","return;"),ch=typeof Fy.oninput=="function"}uh=ch}else uh=!1;Oy=uh&&(!document.documentMode||9<document.documentMode)}function By(){xl&&(xl.detachEvent("onpropertychange",qy),Nl=xl=null)}function qy(s){if(s.propertyName==="value"&&Ic(Nl)){var r=[];Uy(r,Nl,s,Jn(s)),js(zR,r)}}function KR(s,r,l){s==="focusin"?(By(),xl=r,Nl=l,xl.attachEvent("onpropertychange",qy)):s==="focusout"&&By()}function $R(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ic(Nl)}function YR(s,r){if(s==="click")return Ic(r)}function JR(s,r){if(s==="input"||s==="change")return Ic(r)}function QR(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Vn=typeof Object.is=="function"?Object.is:QR;function Dl(s,r){if(Vn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!gt.call(r,y)||!Vn(s[y],r[y]))return!1}return!0}function Gy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Hy(s,r){var l=Gy(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Gy(l)}}function zy(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?zy(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Ky(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Hi(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Hi(s.document)}return r}function dh(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var XR=Qn&&"documentMode"in document&&11>=document.documentMode,ia=null,fh=null,Ml=null,hh=!1;function $y(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;hh||ia==null||ia!==Hi(c)||(c=ia,"selectionStart"in c&&dh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ml&&Dl(Ml,c)||(Ml=c,c=pd(fh,"onSelect"),0<c.length&&(r=new $i("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=ia)))}function lo(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var sa={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionrun:lo("Transition","TransitionRun"),transitionstart:lo("Transition","TransitionStart"),transitioncancel:lo("Transition","TransitionCancel"),transitionend:lo("Transition","TransitionEnd")},ph={},Yy={};Qn&&(Yy=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function uo(s){if(ph[s])return ph[s];if(!sa[s])return s;var r=sa[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Yy)return ph[s]=r[l];return s}var Jy=uo("animationend"),Qy=uo("animationiteration"),Xy=uo("animationstart"),WR=uo("transitionrun"),jR=uo("transitionstart"),ZR=uo("transitioncancel"),Wy=uo("transitionend"),jy=new Map,mh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mh.push("scrollEnd");function Ei(s,r){jy.set(s,r),qi(r,[s])}var Rc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Wn=[],ra=0,gh=0;function bc(){for(var s=ra,r=gh=ra=0;r<s;){var l=Wn[r];Wn[r++]=null;var c=Wn[r];Wn[r++]=null;var y=Wn[r];Wn[r++]=null;var v=Wn[r];if(Wn[r++]=null,c!==null&&y!==null){var S=c.pending;S===null?y.next=y:(y.next=S.next,S.next=y),c.pending=y}v!==0&&Zy(l,y,v)}}function xc(s,r,l,c){Wn[ra++]=s,Wn[ra++]=r,Wn[ra++]=l,Wn[ra++]=c,gh|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function yh(s,r,l,c){return xc(s,r,l,c),Nc(s)}function co(s,r){return xc(s,null,null,r),Nc(s)}function Zy(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=s.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&r!==null&&(y=31-Rt(l),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),v):null}function Nc(s){if(50<eu)throw eu=0,Ip=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var oa={};function eb(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(s,r,l,c){return new eb(s,r,l,c)}function _h(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ms(s,r){var l=s.alternate;return l===null?(l=Un(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function e_(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Dc(s,r,l,c,y,v){var S=0;if(c=s,typeof s=="function")_h(s)&&(S=1);else if(typeof s=="string")S=r1(s,l,pe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case D:return s=Un(31,l,r,y),s.elementType=D,s.lanes=v,s;case F:return fo(l.children,y,v,r);case U:S=8,y|=24;break;case Y:return s=Un(12,l,r,y|2),s.elementType=Y,s.lanes=v,s;case ce:return s=Un(13,l,r,y),s.elementType=ce,s.lanes=v,s;case le:return s=Un(19,l,r,y),s.elementType=le,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:S=10;break e;case te:S=9;break e;case re:S=11;break e;case x:S=14;break e;case M:S=16,c=null;break e}S=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Un(S,l,r,y),r.elementType=s,r.type=c,r.lanes=v,r}function fo(s,r,l,c){return s=Un(7,s,c,r),s.lanes=l,s}function vh(s,r,l){return s=Un(6,s,null,r),s.lanes=l,s}function t_(s){var r=Un(18,null,null,0);return r.stateNode=s,r}function Eh(s,r,l){return r=Un(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var n_=new WeakMap;function jn(s,r){if(typeof s=="object"&&s!==null){var l=n_.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Kn(r)},n_.set(s,r),r)}return{value:s,source:r,stack:Kn(r)}}var aa=[],la=0,Mc=null,kl=0,Zn=[],ei=0,nr=null,Xi=1,Wi="";function gs(s,r){aa[la++]=kl,aa[la++]=Mc,Mc=s,kl=r}function i_(s,r,l){Zn[ei++]=Xi,Zn[ei++]=Wi,Zn[ei++]=nr,nr=s;var c=Xi;s=Wi;var y=32-Rt(c)-1;c&=~(1<<y),l+=1;var v=32-Rt(r)+y;if(30<v){var S=y-y%5;v=(c&(1<<S)-1).toString(32),c>>=S,y-=S,Xi=1<<32-Rt(r)+y|l<<y|c,Wi=v+s}else Xi=1<<v|l<<y|c,Wi=s}function Th(s){s.return!==null&&(gs(s,1),i_(s,1,0))}function Ah(s){for(;s===Mc;)Mc=aa[--la],aa[la]=null,kl=aa[--la],aa[la]=null;for(;s===nr;)nr=Zn[--ei],Zn[ei]=null,Wi=Zn[--ei],Zn[ei]=null,Xi=Zn[--ei],Zn[ei]=null}function s_(s,r){Zn[ei++]=Xi,Zn[ei++]=Wi,Zn[ei++]=nr,Xi=r.id,Wi=r.overflow,nr=s}var nn=null,yt=null,$e=!1,ir=null,ti=!1,Sh=Error(i(519));function sr(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pl(jn(r,s)),Sh}function r_(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[Pt]=s,r[Qt]=c,l){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(l=0;l<nu.length;l++)Be(nu[l],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),dc(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),Qs(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||A0(r.textContent,l)?(c.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),c.onScroll!=null&&Be("scroll",r),c.onScrollEnd!=null&&Be("scrollend",r),c.onClick!=null&&(r.onclick=mi),r=!0):r=!1,r||sr(s,!0)}function o_(s){for(nn=s.return;nn;)switch(nn.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:nn=nn.return}}function ua(s){if(s!==nn)return!1;if(!$e)return o_(s),$e=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||qp(s.type,s.memoizedProps)),l=!l),l&&yt&&sr(s),o_(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));yt=D0(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));yt=D0(s)}else r===27?(r=yt,_r(s.type)?(s=$p,$p=null,yt=s):yt=r):yt=nn?ii(s.stateNode.nextSibling):null;return!0}function ho(){yt=nn=null,$e=!1}function Ch(){var s=ir;return s!==null&&(bn===null?bn=s:bn.push.apply(bn,s),ir=null),s}function Pl(s){ir===null?ir=[s]:ir.push(s)}var wh=q(null),po=null,ys=null;function rr(s,r,l){ue(wh,r._currentValue),r._currentValue=l}function _s(s){s._currentValue=wh.current,ne(wh)}function Ih(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Rh(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var S=y.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=y;for(var V=0;V<r.length;V++)if(R.context===r[V]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),Ih(v.return,l,s),c||(S=null);break e}v=R.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(i(341));S.lanes|=l,v=S.alternate,v!==null&&(v.lanes|=l),Ih(S,l,s),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===s){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function ca(s,r,l,c){s=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var R=y.type;Vn(y.pendingProps.value,S.value)||(s!==null?s.push(R):s=[R])}}else if(y===Oe.current){if(S=y.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(au):s=[au])}y=y.return}s!==null&&Rh(r,s,l,c),r.flags|=262144}function kc(s){for(s=s.firstContext;s!==null;){if(!Vn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function mo(s){po=s,ys=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function sn(s){return a_(po,s)}function Pc(s,r){return po===null&&mo(s),a_(s,r)}function a_(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ys===null){if(s===null)throw Error(i(308));ys=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ys=ys.next=r;return l}var tb=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},nb=n.unstable_scheduleCallback,ib=n.unstable_NormalPriority,Lt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bh(){return{controller:new tb,data:new Map,refCount:0}}function Vl(s){s.refCount--,s.refCount===0&&nb(ib,function(){s.controller.abort()})}var Ul=null,xh=0,da=0,fa=null;function sb(s,r){if(Ul===null){var l=Ul=[];xh=0,da=Mp(),fa={status:"pending",value:void 0,then:function(c){l.push(c)}}}return xh++,r.then(l_,l_),r}function l_(){if(--xh===0&&Ul!==null){fa!==null&&(fa.status="fulfilled");var s=Ul;Ul=null,da=0,fa=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function rb(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var u_=X.S;X.S=function(s,r){$v=$t(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&sb(s,r),u_!==null&&u_(s,r)};var go=q(null);function Nh(){var s=go.current;return s!==null?s:ht.pooledCache}function Vc(s,r){r===null?ue(go,go.current):ue(go,r.pool)}function c_(){var s=Nh();return s===null?null:{parent:Lt._currentValue,pool:s}}var ha=Error(i(460)),Dh=Error(i(474)),Uc=Error(i(542)),Lc={then:function(){}};function d_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function f_(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(mi,mi),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,p_(s),s;default:if(typeof r.status=="string")r.then(mi,mi);else{if(s=ht,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,p_(s),s}throw _o=r,ha}}function yo(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(_o=l,ha):l}}var _o=null;function h_(){if(_o===null)throw Error(i(459));var s=_o;return _o=null,s}function p_(s){if(s===ha||s===Uc)throw Error(i(483))}var pa=null,Ll=0;function Oc(s){var r=Ll;return Ll+=1,pa===null&&(pa=[]),f_(pa,s,r)}function Ol(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Fc(s,r){throw r.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function m_(s){function r(G,B){if(s){var z=G.deletions;z===null?(G.deletions=[B],G.flags|=16):z.push(B)}}function l(G,B){if(!s)return null;for(;B!==null;)r(G,B),B=B.sibling;return null}function c(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=ms(G,B),G.index=0,G.sibling=null,G}function v(G,B,z){return G.index=z,s?(z=G.alternate,z!==null?(z=z.index,z<B?(G.flags|=67108866,B):z):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function S(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function R(G,B,z,Z){return B===null||B.tag!==6?(B=vh(z,G.mode,Z),B.return=G,B):(B=y(B,z),B.return=G,B)}function V(G,B,z,Z){var Ee=z.type;return Ee===F?j(G,B,z.props.children,Z,z.key):B!==null&&(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&yo(Ee)===B.type)?(B=y(B,z.props),Ol(B,z),B.return=G,B):(B=Dc(z.type,z.key,z.props,null,G.mode,Z),Ol(B,z),B.return=G,B)}function K(G,B,z,Z){return B===null||B.tag!==4||B.stateNode.containerInfo!==z.containerInfo||B.stateNode.implementation!==z.implementation?(B=Eh(z,G.mode,Z),B.return=G,B):(B=y(B,z.children||[]),B.return=G,B)}function j(G,B,z,Z,Ee){return B===null||B.tag!==7?(B=fo(z,G.mode,Z,Ee),B.return=G,B):(B=y(B,z),B.return=G,B)}function ie(G,B,z){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=vh(""+B,G.mode,z),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return z=Dc(B.type,B.key,B.props,null,G.mode,z),Ol(z,B),z.return=G,z;case k:return B=Eh(B,G.mode,z),B.return=G,B;case M:return B=yo(B),ie(G,B,z)}if(Ze(B)||O(B))return B=fo(B,G.mode,z,null),B.return=G,B;if(typeof B.then=="function")return ie(G,Oc(B),z);if(B.$$typeof===W)return ie(G,Pc(G,B),z);Fc(G,B)}return null}function $(G,B,z,Z){var Ee=B!==null?B.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Ee!==null?null:R(G,B,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===Ee?V(G,B,z,Z):null;case k:return z.key===Ee?K(G,B,z,Z):null;case M:return z=yo(z),$(G,B,z,Z)}if(Ze(z)||O(z))return Ee!==null?null:j(G,B,z,Z,null);if(typeof z.then=="function")return $(G,B,Oc(z),Z);if(z.$$typeof===W)return $(G,B,Pc(G,z),Z);Fc(G,z)}return null}function Q(G,B,z,Z,Ee){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return G=G.get(z)||null,R(B,G,""+Z,Ee);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case I:return G=G.get(Z.key===null?z:Z.key)||null,V(B,G,Z,Ee);case k:return G=G.get(Z.key===null?z:Z.key)||null,K(B,G,Z,Ee);case M:return Z=yo(Z),Q(G,B,z,Z,Ee)}if(Ze(Z)||O(Z))return G=G.get(z)||null,j(B,G,Z,Ee,null);if(typeof Z.then=="function")return Q(G,B,z,Oc(Z),Ee);if(Z.$$typeof===W)return Q(G,B,z,Pc(B,Z),Ee);Fc(B,Z)}return null}function ge(G,B,z,Z){for(var Ee=null,Xe=null,ve=B,Pe=B=0,Ge=null;ve!==null&&Pe<z.length;Pe++){ve.index>Pe?(Ge=ve,ve=null):Ge=ve.sibling;var We=$(G,ve,z[Pe],Z);if(We===null){ve===null&&(ve=Ge);break}s&&ve&&We.alternate===null&&r(G,ve),B=v(We,B,Pe),Xe===null?Ee=We:Xe.sibling=We,Xe=We,ve=Ge}if(Pe===z.length)return l(G,ve),$e&&gs(G,Pe),Ee;if(ve===null){for(;Pe<z.length;Pe++)ve=ie(G,z[Pe],Z),ve!==null&&(B=v(ve,B,Pe),Xe===null?Ee=ve:Xe.sibling=ve,Xe=ve);return $e&&gs(G,Pe),Ee}for(ve=c(ve);Pe<z.length;Pe++)Ge=Q(ve,G,Pe,z[Pe],Z),Ge!==null&&(s&&Ge.alternate!==null&&ve.delete(Ge.key===null?Pe:Ge.key),B=v(Ge,B,Pe),Xe===null?Ee=Ge:Xe.sibling=Ge,Xe=Ge);return s&&ve.forEach(function(Sr){return r(G,Sr)}),$e&&gs(G,Pe),Ee}function Se(G,B,z,Z){if(z==null)throw Error(i(151));for(var Ee=null,Xe=null,ve=B,Pe=B=0,Ge=null,We=z.next();ve!==null&&!We.done;Pe++,We=z.next()){ve.index>Pe?(Ge=ve,ve=null):Ge=ve.sibling;var Sr=$(G,ve,We.value,Z);if(Sr===null){ve===null&&(ve=Ge);break}s&&ve&&Sr.alternate===null&&r(G,ve),B=v(Sr,B,Pe),Xe===null?Ee=Sr:Xe.sibling=Sr,Xe=Sr,ve=Ge}if(We.done)return l(G,ve),$e&&gs(G,Pe),Ee;if(ve===null){for(;!We.done;Pe++,We=z.next())We=ie(G,We.value,Z),We!==null&&(B=v(We,B,Pe),Xe===null?Ee=We:Xe.sibling=We,Xe=We);return $e&&gs(G,Pe),Ee}for(ve=c(ve);!We.done;Pe++,We=z.next())We=Q(ve,G,Pe,We.value,Z),We!==null&&(s&&We.alternate!==null&&ve.delete(We.key===null?Pe:We.key),B=v(We,B,Pe),Xe===null?Ee=We:Xe.sibling=We,Xe=We);return s&&ve.forEach(function(g1){return r(G,g1)}),$e&&gs(G,Pe),Ee}function ft(G,B,z,Z){if(typeof z=="object"&&z!==null&&z.type===F&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var Ee=z.key;B!==null;){if(B.key===Ee){if(Ee=z.type,Ee===F){if(B.tag===7){l(G,B.sibling),Z=y(B,z.props.children),Z.return=G,G=Z;break e}}else if(B.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&yo(Ee)===B.type){l(G,B.sibling),Z=y(B,z.props),Ol(Z,z),Z.return=G,G=Z;break e}l(G,B);break}else r(G,B);B=B.sibling}z.type===F?(Z=fo(z.props.children,G.mode,Z,z.key),Z.return=G,G=Z):(Z=Dc(z.type,z.key,z.props,null,G.mode,Z),Ol(Z,z),Z.return=G,G=Z)}return S(G);case k:e:{for(Ee=z.key;B!==null;){if(B.key===Ee)if(B.tag===4&&B.stateNode.containerInfo===z.containerInfo&&B.stateNode.implementation===z.implementation){l(G,B.sibling),Z=y(B,z.children||[]),Z.return=G,G=Z;break e}else{l(G,B);break}else r(G,B);B=B.sibling}Z=Eh(z,G.mode,Z),Z.return=G,G=Z}return S(G);case M:return z=yo(z),ft(G,B,z,Z)}if(Ze(z))return ge(G,B,z,Z);if(O(z)){if(Ee=O(z),typeof Ee!="function")throw Error(i(150));return z=Ee.call(z),Se(G,B,z,Z)}if(typeof z.then=="function")return ft(G,B,Oc(z),Z);if(z.$$typeof===W)return ft(G,B,Pc(G,z),Z);Fc(G,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,B!==null&&B.tag===6?(l(G,B.sibling),Z=y(B,z),Z.return=G,G=Z):(l(G,B),Z=vh(z,G.mode,Z),Z.return=G,G=Z),S(G)):l(G,B)}return function(G,B,z,Z){try{Ll=0;var Ee=ft(G,B,z,Z);return pa=null,Ee}catch(ve){if(ve===ha||ve===Uc)throw ve;var Xe=Un(29,ve,null,G.mode);return Xe.lanes=Z,Xe.return=G,Xe}finally{}}}var vo=m_(!0),g_=m_(!1),or=!1;function Mh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ar(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function lr(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Nc(s),Zy(s,null,l),r}return xc(s,c,r,l),Nc(s)}function Fl(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,fl(s,l)}}function Ph(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?y=v=r:v=v.next=r}else y=v=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Vh=!1;function Bl(){if(Vh){var s=fa;if(s!==null)throw s}}function ql(s,r,l,c){Vh=!1;var y=s.updateQueue;or=!1;var v=y.firstBaseUpdate,S=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var V=R,K=V.next;V.next=null,S===null?v=K:S.next=K,S=V;var j=s.alternate;j!==null&&(j=j.updateQueue,R=j.lastBaseUpdate,R!==S&&(R===null?j.firstBaseUpdate=K:R.next=K,j.lastBaseUpdate=V))}if(v!==null){var ie=y.baseState;S=0,j=K=V=null,R=v;do{var $=R.lane&-536870913,Q=$!==R.lane;if(Q?(qe&$)===$:(c&$)===$){$!==0&&$===da&&(Vh=!0),j!==null&&(j=j.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ge=s,Se=R;$=r;var ft=l;switch(Se.tag){case 1:if(ge=Se.payload,typeof ge=="function"){ie=ge.call(ft,ie,$);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Se.payload,$=typeof ge=="function"?ge.call(ft,ie,$):ge,$==null)break e;ie=E({},ie,$);break e;case 2:or=!0}}$=R.callback,$!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[$]:Q.push($))}else Q={lane:$,tag:R.tag,payload:R.payload,callback:R.callback,next:null},j===null?(K=j=Q,V=ie):j=j.next=Q,S|=$;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;Q=R,R=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);j===null&&(V=ie),y.baseState=V,y.firstBaseUpdate=K,y.lastBaseUpdate=j,v===null&&(y.shared.lanes=0),hr|=S,s.lanes=S,s.memoizedState=ie}}function y_(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function __(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)y_(l[s],r)}var ma=q(null),Bc=q(0);function v_(s,r){s=Rs,ue(Bc,s),ue(ma,r),Rs=s|r.baseLanes}function Uh(){ue(Bc,Rs),ue(ma,ma.current)}function Lh(){Rs=Bc.current,ne(ma),ne(Bc)}var Ln=q(null),ni=null;function ur(s){var r=s.alternate;ue(xt,xt.current&1),ue(Ln,s),ni===null&&(r===null||ma.current!==null||r.memoizedState!==null)&&(ni=s)}function Oh(s){ue(xt,xt.current),ue(Ln,s),ni===null&&(ni=s)}function E_(s){s.tag===22?(ue(xt,xt.current),ue(Ln,s),ni===null&&(ni=s)):cr()}function cr(){ue(xt,xt.current),ue(Ln,Ln.current)}function On(s){ne(Ln),ni===s&&(ni=null),ne(xt)}var xt=q(0);function qc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||zp(l)||Kp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var vs=0,ke=null,ct=null,Ot=null,Gc=!1,ga=!1,Eo=!1,Hc=0,Gl=0,ya=null,ob=0;function Ct(){throw Error(i(321))}function Fh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Vn(s[l],r[l]))return!1;return!0}function Bh(s,r,l,c,y,v){return vs=v,ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=s===null||s.memoizedState===null?iv:tp,Eo=!1,v=l(c,y),Eo=!1,ga&&(v=A_(r,l,c,y)),T_(s),v}function T_(s){X.H=Kl;var r=ct!==null&&ct.next!==null;if(vs=0,Ot=ct=ke=null,Gc=!1,Gl=0,ya=null,r)throw Error(i(300));s===null||Ft||(s=s.dependencies,s!==null&&kc(s)&&(Ft=!0))}function A_(s,r,l,c){ke=s;var y=0;do{if(ga&&(ya=null),Gl=0,ga=!1,25<=y)throw Error(i(301));if(y+=1,Ot=ct=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}X.H=sv,v=r(l,c)}while(ga);return v}function ab(){var s=X.H,r=s.useState()[0];return r=typeof r.then=="function"?Hl(r):r,s=s.useState()[0],(ct!==null?ct.memoizedState:null)!==s&&(ke.flags|=1024),r}function qh(){var s=Hc!==0;return Hc=0,s}function Gh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Hh(s){if(Gc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Gc=!1}vs=0,Ot=ct=ke=null,ga=!1,Gl=Hc=0,ya=null}function _n(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ke.memoizedState=Ot=s:Ot=Ot.next=s,Ot}function Nt(){if(ct===null){var s=ke.alternate;s=s!==null?s.memoizedState:null}else s=ct.next;var r=Ot===null?ke.memoizedState:Ot.next;if(r!==null)Ot=r,ct=s;else{if(s===null)throw ke.alternate===null?Error(i(467)):Error(i(310));ct=s,s={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Ot===null?ke.memoizedState=Ot=s:Ot=Ot.next=s}return Ot}function zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(s){var r=Gl;return Gl+=1,ya===null&&(ya=[]),s=f_(ya,s,r),r=ke,(Ot===null?r.memoizedState:Ot.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?iv:tp),s}function Kc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Hl(s);if(s.$$typeof===W)return sn(s)}throw Error(i(438,String(s)))}function zh(s){var r=null,l=ke.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=zc(),ke.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=L;return r.index++,l}function Es(s,r){return typeof r=="function"?r(s):r}function $c(s){var r=Nt();return Kh(r,ct,s)}function Kh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var S=y.next;y.next=v.next,v.next=S}r.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{r=y.next;var R=S=null,V=null,K=r,j=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(qe&ie)===ie:(vs&ie)===ie){var $=K.revertLane;if($===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===da&&(j=!0);else if((vs&$)===$){K=K.next,$===da&&(j=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},V===null?(R=V=ie,S=v):V=V.next=ie,ke.lanes|=$,hr|=$;ie=K.action,Eo&&l(v,ie),v=K.hasEagerState?K.eagerState:l(v,ie)}else $={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},V===null?(R=V=$,S=v):V=V.next=$,ke.lanes|=ie,hr|=ie;K=K.next}while(K!==null&&K!==r);if(V===null?S=v:V.next=R,!Vn(v,s.memoizedState)&&(Ft=!0,j&&(l=fa,l!==null)))throw l;s.memoizedState=v,s.baseState=S,s.baseQueue=V,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function $h(s){var r=Nt(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,v=r.memoizedState;if(y!==null){l.pending=null;var S=y=y.next;do v=s(v,S.action),S=S.next;while(S!==y);Vn(v,r.memoizedState)||(Ft=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,c]}function S_(s,r,l){var c=ke,y=Nt(),v=$e;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=r();var S=!Vn((ct||y).memoizedState,l);if(S&&(y.memoizedState=l,Ft=!0),y=y.queue,Qh(I_.bind(null,c,y,s),[s]),y.getSnapshot!==r||S||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,_a(9,{destroy:void 0},w_.bind(null,c,y,l,r),null),ht===null)throw Error(i(349));v||(vs&127)!==0||C_(c,r,l)}return l}function C_(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=ke.updateQueue,r===null?(r=zc(),ke.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function w_(s,r,l,c){r.value=l,r.getSnapshot=c,R_(r)&&b_(s)}function I_(s,r,l){return l(function(){R_(r)&&b_(s)})}function R_(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Vn(s,l)}catch{return!0}}function b_(s){var r=co(s,2);r!==null&&xn(r,s,2)}function Yh(s){var r=_n();if(typeof s=="function"){var l=s;if(s=l(),Eo){$n(!0);try{l()}finally{$n(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:s},r}function x_(s,r,l,c){return s.baseState=l,Kh(s,ct,typeof c=="function"?c:Es)}function lb(s,r,l,c,y){if(Qc(s))throw Error(i(485));if(s=r.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};X.T!==null?l(!0):v.isTransition=!1,c(v),l=r.pending,l===null?(v.next=r.pending=v,N_(r,v)):(v.next=l.next,r.pending=l.next=v)}}function N_(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var v=X.T,S={};X.T=S;try{var R=l(y,c),V=X.S;V!==null&&V(S,R),D_(s,r,R)}catch(K){Jh(s,r,K)}finally{v!==null&&S.types!==null&&(v.types=S.types),X.T=v}}else try{v=l(y,c),D_(s,r,v)}catch(K){Jh(s,r,K)}}function D_(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){M_(s,r,c)},function(c){return Jh(s,r,c)}):M_(s,r,l)}function M_(s,r,l){r.status="fulfilled",r.value=l,k_(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,N_(s,l)))}function Jh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,k_(r),r=r.next;while(r!==c)}s.action=null}function k_(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function P_(s,r){return r}function V_(s,r){if($e){var l=ht.formState;if(l!==null){e:{var c=ke;if($e){if(yt){t:{for(var y=yt,v=ti;y.nodeType!==8;){if(!v){y=null;break t}if(y=ii(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){yt=ii(y.nextSibling),c=y.data==="F!";break e}}sr(c)}c=!1}c&&(r=l[0])}}return l=_n(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:P_,lastRenderedState:r},l.queue=c,l=ev.bind(null,ke,c),c.dispatch=l,c=Yh(!1),v=ep.bind(null,ke,!1,c.queue),c=_n(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=lb.bind(null,ke,y,v,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function U_(s){var r=Nt();return L_(r,ct,s)}function L_(s,r,l){if(r=Kh(s,r,P_)[0],s=$c(Es)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Hl(r)}catch(S){throw S===ha?Uc:S}else c=r;r=Nt();var y=r.queue,v=y.dispatch;return l!==r.memoizedState&&(ke.flags|=2048,_a(9,{destroy:void 0},ub.bind(null,y,l),null)),[c,v,s]}function ub(s,r){s.action=r}function O_(s){var r=Nt(),l=ct;if(l!==null)return L_(r,l,s);Nt(),r=r.memoizedState,l=Nt();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function _a(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=ke.updateQueue,r===null&&(r=zc(),ke.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function F_(){return Nt().memoizedState}function Yc(s,r,l,c){var y=_n();ke.flags|=s,y.memoizedState=_a(1|r,{destroy:void 0},l,c===void 0?null:c)}function Jc(s,r,l,c){var y=Nt();c=c===void 0?null:c;var v=y.memoizedState.inst;ct!==null&&c!==null&&Fh(c,ct.memoizedState.deps)?y.memoizedState=_a(r,v,l,c):(ke.flags|=s,y.memoizedState=_a(1|r,v,l,c))}function B_(s,r){Yc(8390656,8,s,r)}function Qh(s,r){Jc(2048,8,s,r)}function cb(s){ke.flags|=4;var r=ke.updateQueue;if(r===null)r=zc(),ke.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function q_(s){var r=Nt().memoizedState;return cb({ref:r,nextImpl:s}),function(){if((tt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function G_(s,r){return Jc(4,2,s,r)}function H_(s,r){return Jc(4,4,s,r)}function z_(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function K_(s,r,l){l=l!=null?l.concat([s]):null,Jc(4,4,z_.bind(null,r,s),l)}function Xh(){}function $_(s,r){var l=Nt();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&Fh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function Y_(s,r){var l=Nt();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&Fh(r,c[1]))return c[0];if(c=s(),Eo){$n(!0);try{s()}finally{$n(!1)}}return l.memoizedState=[c,r],c}function Wh(s,r,l){return l===void 0||(vs&1073741824)!==0&&(qe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=Jv(),ke.lanes|=s,hr|=s,l)}function J_(s,r,l,c){return Vn(l,r)?l:ma.current!==null?(s=Wh(s,l,c),Vn(s,r)||(Ft=!0),s):(vs&42)===0||(vs&1073741824)!==0&&(qe&261930)===0?(Ft=!0,s.memoizedState=l):(s=Jv(),ke.lanes|=s,hr|=s,r)}function Q_(s,r,l,c,y){var v=oe.p;oe.p=v!==0&&8>v?v:8;var S=X.T,R={};X.T=R,ep(s,!1,r,l);try{var V=y(),K=X.S;if(K!==null&&K(R,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var j=rb(V,c);zl(s,r,j,qn(s))}else zl(s,r,c,qn(s))}catch(ie){zl(s,r,{then:function(){},status:"rejected",reason:ie},qn())}finally{oe.p=v,S!==null&&R.types!==null&&(S.types=R.types),X.T=S}}function db(){}function jh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=X_(s).queue;Q_(s,y,r,_e,l===null?db:function(){return W_(s),l(c)})}function X_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:_e},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function W_(s){var r=X_(s);r.next===null&&(r=s.alternate.memoizedState),zl(s,r.next.queue,{},qn())}function Zh(){return sn(au)}function j_(){return Nt().memoizedState}function Z_(){return Nt().memoizedState}function fb(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=qn();s=ar(l);var c=lr(r,s,l);c!==null&&(xn(c,r,l),Fl(c,r,l)),r={cache:bh()},s.payload=r;return}r=r.return}}function hb(s,r,l){var c=qn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Qc(s)?tv(r,l):(l=yh(s,r,l,c),l!==null&&(xn(l,s,c),nv(l,r,c)))}function ev(s,r,l){var c=qn();zl(s,r,l,c)}function zl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Qc(s))tv(r,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var S=r.lastRenderedState,R=v(S,l);if(y.hasEagerState=!0,y.eagerState=R,Vn(R,S))return xc(s,r,y,0),ht===null&&bc(),!1}catch{}finally{}if(l=yh(s,r,y,c),l!==null)return xn(l,s,c),nv(l,r,c),!0}return!1}function ep(s,r,l,c){if(c={lane:2,revertLane:Mp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Qc(s)){if(r)throw Error(i(479))}else r=yh(s,l,c,2),r!==null&&xn(r,s,2)}function Qc(s){var r=s.alternate;return s===ke||r!==null&&r===ke}function tv(s,r){ga=Gc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function nv(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,fl(s,l)}}var Kl={readContext:sn,use:Kc,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};Kl.useEffectEvent=Ct;var iv={readContext:sn,use:Kc,useCallback:function(s,r){return _n().memoizedState=[s,r===void 0?null:r],s},useContext:sn,useEffect:B_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Yc(4194308,4,z_.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Yc(4194308,4,s,r)},useInsertionEffect:function(s,r){Yc(4,2,s,r)},useMemo:function(s,r){var l=_n();r=r===void 0?null:r;var c=s();if(Eo){$n(!0);try{s()}finally{$n(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=_n();if(l!==void 0){var y=l(r);if(Eo){$n(!0);try{l(r)}finally{$n(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=hb.bind(null,ke,s),[c.memoizedState,s]},useRef:function(s){var r=_n();return s={current:s},r.memoizedState=s},useState:function(s){s=Yh(s);var r=s.queue,l=ev.bind(null,ke,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Xh,useDeferredValue:function(s,r){var l=_n();return Wh(l,s,r)},useTransition:function(){var s=Yh(!1);return s=Q_.bind(null,ke,s.queue,!0,!1),_n().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=ke,y=_n();if($e){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ht===null)throw Error(i(349));(qe&127)!==0||C_(c,r,l)}y.memoizedState=l;var v={value:l,getSnapshot:r};return y.queue=v,B_(I_.bind(null,c,v,s),[s]),c.flags|=2048,_a(9,{destroy:void 0},w_.bind(null,c,v,l,r),null),l},useId:function(){var s=_n(),r=ht.identifierPrefix;if($e){var l=Wi,c=Xi;l=(c&~(1<<32-Rt(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Hc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=ob++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Zh,useFormState:V_,useActionState:V_,useOptimistic:function(s){var r=_n();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=ep.bind(null,ke,!0,l),l.dispatch=r,[s,r]},useMemoCache:zh,useCacheRefresh:function(){return _n().memoizedState=fb.bind(null,ke)},useEffectEvent:function(s){var r=_n(),l={impl:s};return r.memoizedState=l,function(){if((tt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},tp={readContext:sn,use:Kc,useCallback:$_,useContext:sn,useEffect:Qh,useImperativeHandle:K_,useInsertionEffect:G_,useLayoutEffect:H_,useMemo:Y_,useReducer:$c,useRef:F_,useState:function(){return $c(Es)},useDebugValue:Xh,useDeferredValue:function(s,r){var l=Nt();return J_(l,ct.memoizedState,s,r)},useTransition:function(){var s=$c(Es)[0],r=Nt().memoizedState;return[typeof s=="boolean"?s:Hl(s),r]},useSyncExternalStore:S_,useId:j_,useHostTransitionStatus:Zh,useFormState:U_,useActionState:U_,useOptimistic:function(s,r){var l=Nt();return x_(l,ct,s,r)},useMemoCache:zh,useCacheRefresh:Z_};tp.useEffectEvent=q_;var sv={readContext:sn,use:Kc,useCallback:$_,useContext:sn,useEffect:Qh,useImperativeHandle:K_,useInsertionEffect:G_,useLayoutEffect:H_,useMemo:Y_,useReducer:$h,useRef:F_,useState:function(){return $h(Es)},useDebugValue:Xh,useDeferredValue:function(s,r){var l=Nt();return ct===null?Wh(l,s,r):J_(l,ct.memoizedState,s,r)},useTransition:function(){var s=$h(Es)[0],r=Nt().memoizedState;return[typeof s=="boolean"?s:Hl(s),r]},useSyncExternalStore:S_,useId:j_,useHostTransitionStatus:Zh,useFormState:O_,useActionState:O_,useOptimistic:function(s,r){var l=Nt();return ct!==null?x_(l,ct,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:zh,useCacheRefresh:Z_};sv.useEffectEvent=q_;function np(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:E({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var ip={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=qn(),y=ar(c);y.payload=r,l!=null&&(y.callback=l),r=lr(s,y,c),r!==null&&(xn(r,s,c),Fl(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=qn(),y=ar(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=lr(s,y,c),r!==null&&(xn(r,s,c),Fl(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=qn(),c=ar(l);c.tag=2,r!=null&&(c.callback=r),r=lr(s,c,l),r!==null&&(xn(r,s,l),Fl(r,s,l))}};function rv(s,r,l,c,y,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,S):r.prototype&&r.prototype.isPureReactComponent?!Dl(l,c)||!Dl(y,v):!0}function ov(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&ip.enqueueReplaceState(r,r.state,null)}function To(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=E({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function av(s){Rc(s)}function lv(s){console.error(s)}function uv(s){Rc(s)}function Xc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function cv(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function sp(s,r,l){return l=ar(l),l.tag=3,l.payload={element:null},l.callback=function(){Xc(s,r)},l}function dv(s){return s=ar(s),s.tag=3,s}function fv(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){cv(r,l,c)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){cv(r,l,c),typeof y!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function pb(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&ca(r,l,y,!0),l=Ln.current,l!==null){switch(l.tag){case 31:case 13:return ni===null?ld():l.alternate===null&&wt===0&&(wt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Lc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),xp(s,c,y)),!1;case 22:return l.flags|=65536,c===Lc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),xp(s,c,y)),!1}throw Error(i(435,l.tag))}return xp(s,c,y),ld(),!1}if($e)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Sh&&(s=Error(i(422),{cause:c}),Pl(jn(s,l)))):(c!==Sh&&(r=Error(i(423),{cause:c}),Pl(jn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=jn(c,l),y=sp(s.stateNode,c,y),Ph(s,y),wt!==4&&(wt=2)),!1;var v=Error(i(520),{cause:c});if(v=jn(v,l),Zl===null?Zl=[v]:Zl.push(v),wt!==4&&(wt=2),r===null)return!0;c=jn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=sp(l.stateNode,c,s),Ph(l,s),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(pr===null||!pr.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=dv(y),fv(y,s,l,c),Ph(l,y),!1}l=l.return}while(l!==null);return!1}var rp=Error(i(461)),Ft=!1;function rn(s,r,l,c){r.child=s===null?g_(r,null,l,c):vo(r,s.child,l,c)}function hv(s,r,l,c,y){l=l.render;var v=r.ref;if("ref"in c){var S={};for(var R in c)R!=="ref"&&(S[R]=c[R])}else S=c;return mo(r),c=Bh(s,r,l,S,v,y),R=qh(),s!==null&&!Ft?(Gh(s,r,y),Ts(s,r,y)):($e&&R&&Th(r),r.flags|=1,rn(s,r,c,y),r.child)}function pv(s,r,l,c,y){if(s===null){var v=l.type;return typeof v=="function"&&!_h(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,mv(s,r,v,c,y)):(s=Dc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(v=s.child,!hp(s,y)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:Dl,l(S,c)&&s.ref===r.ref)return Ts(s,r,y)}return r.flags|=1,s=ms(v,c),s.ref=r.ref,s.return=r,r.child=s}function mv(s,r,l,c,y){if(s!==null){var v=s.memoizedProps;if(Dl(v,c)&&s.ref===r.ref)if(Ft=!1,r.pendingProps=c=v,hp(s,y))(s.flags&131072)!==0&&(Ft=!0);else return r.lanes=s.lanes,Ts(s,r,y)}return op(s,r,l,c,y)}function gv(s,r,l,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,r.child=null;return yv(s,r,v,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Vc(r,v!==null?v.cachePool:null),v!==null?v_(r,v):Uh(),E_(r);else return c=r.lanes=536870912,yv(s,r,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Vc(r,v.cachePool),v_(r,v),cr(),r.memoizedState=null):(s!==null&&Vc(r,null),Uh(),cr());return rn(s,r,y,l),r.child}function $l(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function yv(s,r,l,c,y){var v=Nh();return v=v===null?null:{parent:Lt._currentValue,pool:v},r.memoizedState={baseLanes:l,cachePool:v},s!==null&&Vc(r,null),Uh(),E_(r),s!==null&&ca(s,r,c,!0),r.childLanes=y,null}function Wc(s,r){return r=Zc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function _v(s,r,l){return vo(r,s.child,null,l),s=Wc(r,r.pendingProps),s.flags|=2,On(r),r.memoizedState=null,s}function mb(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if($e){if(c.mode==="hidden")return s=Wc(r,c),r.lanes=536870912,$l(null,s);if(Oh(r),(s=yt)?(s=N0(s,ti),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:nr!==null?{id:Xi,overflow:Wi}:null,retryLane:536870912,hydrationErrors:null},l=t_(s),l.return=r,r.child=l,nn=r,yt=null)):s=null,s===null)throw sr(r);return r.lanes=536870912,null}return Wc(r,c)}var v=s.memoizedState;if(v!==null){var S=v.dehydrated;if(Oh(r),y)if(r.flags&256)r.flags&=-257,r=_v(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Ft||ca(s,r,l,!1),y=(l&s.childLanes)!==0,Ft||y){if(c=ht,c!==null&&(S=hl(c,l),S!==0&&S!==v.retryLane))throw v.retryLane=S,co(s,S),xn(c,s,S),rp;ld(),r=_v(s,r,l)}else s=v.treeContext,yt=ii(S.nextSibling),nn=r,$e=!0,ir=null,ti=!1,s!==null&&s_(r,s),r=Wc(r,c),r.flags|=4096;return r}return s=ms(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function jc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function op(s,r,l,c,y){return mo(r),l=Bh(s,r,l,c,void 0,y),c=qh(),s!==null&&!Ft?(Gh(s,r,y),Ts(s,r,y)):($e&&c&&Th(r),r.flags|=1,rn(s,r,l,y),r.child)}function vv(s,r,l,c,y,v){return mo(r),r.updateQueue=null,l=A_(r,c,l,y),T_(s),c=qh(),s!==null&&!Ft?(Gh(s,r,v),Ts(s,r,v)):($e&&c&&Th(r),r.flags|=1,rn(s,r,l,v),r.child)}function Ev(s,r,l,c,y){if(mo(r),r.stateNode===null){var v=oa,S=l.contextType;typeof S=="object"&&S!==null&&(v=sn(S)),v=new l(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=ip,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},Mh(r),S=l.contextType,v.context=typeof S=="object"&&S!==null?sn(S):oa,v.state=r.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(np(r,l,S,c),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&ip.enqueueReplaceState(v,v.state,null),ql(r,c,v,y),Bl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){v=r.stateNode;var R=r.memoizedProps,V=To(l,R);v.props=V;var K=v.context,j=l.contextType;S=oa,typeof j=="object"&&j!==null&&(S=sn(j));var ie=l.getDerivedStateFromProps;j=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||K!==S)&&ov(r,v,c,S),or=!1;var $=r.memoizedState;v.state=$,ql(r,c,v,y),Bl(),K=r.memoizedState,R||$!==K||or?(typeof ie=="function"&&(np(r,l,ie,c),K=r.memoizedState),(V=or||rv(r,l,V,c,$,K,S))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),v.props=c,v.state=K,v.context=S,c=V):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,kh(s,r),S=r.memoizedProps,j=To(l,S),v.props=j,ie=r.pendingProps,$=v.context,K=l.contextType,V=oa,typeof K=="object"&&K!==null&&(V=sn(K)),R=l.getDerivedStateFromProps,(K=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==ie||$!==V)&&ov(r,v,c,V),or=!1,$=r.memoizedState,v.state=$,ql(r,c,v,y),Bl();var Q=r.memoizedState;S!==ie||$!==Q||or||s!==null&&s.dependencies!==null&&kc(s.dependencies)?(typeof R=="function"&&(np(r,l,R,c),Q=r.memoizedState),(j=or||rv(r,l,j,c,$,Q,V)||s!==null&&s.dependencies!==null&&kc(s.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Q,V),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Q,V)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),v.props=c,v.state=Q,v.context=V,c=j):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),c=!1)}return v=c,jc(s,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,s!==null&&c?(r.child=vo(r,s.child,null,y),r.child=vo(r,null,l,y)):rn(s,r,l,y),r.memoizedState=v.state,s=r.child):s=Ts(s,r,y),s}function Tv(s,r,l,c){return ho(),r.flags|=256,rn(s,r,l,c),r.child}var ap={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lp(s){return{baseLanes:s,cachePool:c_()}}function up(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Bn),s}function Av(s,r,l){var c=r.pendingProps,y=!1,v=(r.flags&128)!==0,S;if((S=v)||(S=s!==null&&s.memoizedState===null?!1:(xt.current&2)!==0),S&&(y=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,s===null){if($e){if(y?ur(r):cr(),(s=yt)?(s=N0(s,ti),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:nr!==null?{id:Xi,overflow:Wi}:null,retryLane:536870912,hydrationErrors:null},l=t_(s),l.return=r,r.child=l,nn=r,yt=null)):s=null,s===null)throw sr(r);return Kp(s)?r.lanes=32:r.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(cr(),y=r.mode,R=Zc({mode:"hidden",children:R},y),c=fo(c,y,l,null),R.return=r,c.return=r,R.sibling=c,r.child=R,c=r.child,c.memoizedState=lp(l),c.childLanes=up(s,S,l),r.memoizedState=ap,$l(null,c)):(ur(r),cp(r,R))}var V=s.memoizedState;if(V!==null&&(R=V.dehydrated,R!==null)){if(v)r.flags&256?(ur(r),r.flags&=-257,r=dp(s,r,l)):r.memoizedState!==null?(cr(),r.child=s.child,r.flags|=128,r=null):(cr(),R=c.fallback,y=r.mode,c=Zc({mode:"visible",children:c.children},y),R=fo(R,y,l,null),R.flags|=2,c.return=r,R.return=r,c.sibling=R,r.child=c,vo(r,s.child,null,l),c=r.child,c.memoizedState=lp(l),c.childLanes=up(s,S,l),r.memoizedState=ap,r=$l(null,c));else if(ur(r),Kp(R)){if(S=R.nextSibling&&R.nextSibling.dataset,S)var K=S.dgst;S=K,c=Error(i(419)),c.stack="",c.digest=S,Pl({value:c,source:null,stack:null}),r=dp(s,r,l)}else if(Ft||ca(s,r,l,!1),S=(l&s.childLanes)!==0,Ft||S){if(S=ht,S!==null&&(c=hl(S,l),c!==0&&c!==V.retryLane))throw V.retryLane=c,co(s,c),xn(S,s,c),rp;zp(R)||ld(),r=dp(s,r,l)}else zp(R)?(r.flags|=192,r.child=s.child,r=null):(s=V.treeContext,yt=ii(R.nextSibling),nn=r,$e=!0,ir=null,ti=!1,s!==null&&s_(r,s),r=cp(r,c.children),r.flags|=4096);return r}return y?(cr(),R=c.fallback,y=r.mode,V=s.child,K=V.sibling,c=ms(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,K!==null?R=ms(K,R):(R=fo(R,y,l,null),R.flags|=2),R.return=r,c.return=r,c.sibling=R,r.child=c,$l(null,c),c=r.child,R=s.child.memoizedState,R===null?R=lp(l):(y=R.cachePool,y!==null?(V=Lt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=c_(),R={baseLanes:R.baseLanes|l,cachePool:y}),c.memoizedState=R,c.childLanes=up(s,S,l),r.memoizedState=ap,$l(s.child,c)):(ur(r),l=s.child,s=l.sibling,l=ms(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(S=r.deletions,S===null?(r.deletions=[s],r.flags|=16):S.push(s)),r.child=l,r.memoizedState=null,l)}function cp(s,r){return r=Zc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Zc(s,r){return s=Un(22,s,null,r),s.lanes=0,s}function dp(s,r,l){return vo(r,s.child,null,l),s=cp(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Sv(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),Ih(s.return,r,l)}function fp(s,r,l,c,y,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=l,S.tailMode=y,S.treeForkCount=v)}function Cv(s,r,l){var c=r.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var S=xt.current,R=(S&2)!==0;if(R?(S=S&1|2,r.flags|=128):S&=1,ue(xt,S),rn(s,r,c,l),c=$e?kl:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Sv(s,l,r);else if(s.tag===19)Sv(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&qc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),fp(r,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&qc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}fp(r,!0,l,null,v,c);break;case"together":fp(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Ts(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),hr|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(ca(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=ms(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=ms(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function hp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&kc(s)))}function gb(s,r,l){switch(r.tag){case 3:Ue(r,r.stateNode.containerInfo),rr(r,Lt,s.memoizedState.cache),ho();break;case 27:case 5:ci(r);break;case 4:Ue(r,r.stateNode.containerInfo);break;case 10:rr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Oh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ur(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Av(s,r,l):(ur(r),s=Ts(s,r,l),s!==null?s.sibling:null);ur(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(ca(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return Cv(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ue(xt,xt.current),c)break;return null;case 22:return r.lanes=0,gv(s,r,l,r.pendingProps);case 24:rr(r,Lt,s.memoizedState.cache)}return Ts(s,r,l)}function wv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Ft=!0;else{if(!hp(s,l)&&(r.flags&128)===0)return Ft=!1,gb(s,r,l);Ft=(s.flags&131072)!==0}else Ft=!1,$e&&(r.flags&1048576)!==0&&i_(r,kl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=yo(r.elementType),r.type=s,typeof s=="function")_h(s)?(c=To(s,c),r.tag=1,r=Ev(null,r,s,c,l)):(r.tag=0,r=op(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===re){r.tag=11,r=hv(null,r,s,c,l);break e}else if(y===x){r.tag=14,r=pv(null,r,s,c,l);break e}}throw r=ye(s)||s,Error(i(306,r,""))}}return r;case 0:return op(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=To(c,r.pendingProps),Ev(s,r,c,y,l);case 3:e:{if(Ue(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var v=r.memoizedState;y=v.element,kh(s,r),ql(r,c,null,l);var S=r.memoizedState;if(c=S.cache,rr(r,Lt,c),c!==v.cache&&Rh(r,[Lt],l,!0),Bl(),c=S.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=Tv(s,r,c,l);break e}else if(c!==y){y=jn(Error(i(424)),r),Pl(y),r=Tv(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(yt=ii(s.firstChild),nn=r,$e=!0,ir=null,ti=!0,l=g_(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ho(),c===y){r=Ts(s,r,l);break e}rn(s,r,c,l)}r=r.child}return r;case 26:return jc(s,r),s===null?(l=U0(r.type,null,r.pendingProps,null))?r.memoizedState=l:$e||(l=r.type,s=r.pendingProps,c=md(De.current).createElement(l),c[Pt]=r,c[Qt]=s,on(c,l,s),Vt(c),r.stateNode=c):r.memoizedState=U0(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return ci(r),s===null&&$e&&(c=r.stateNode=k0(r.type,r.pendingProps,De.current),nn=r,ti=!0,y=yt,_r(r.type)?($p=y,yt=ii(c.firstChild)):yt=y),rn(s,r,r.pendingProps.children,l),jc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&$e&&((y=c=yt)&&(c=$b(c,r.type,r.pendingProps,ti),c!==null?(r.stateNode=c,nn=r,yt=ii(c.firstChild),ti=!1,y=!0):y=!1),y||sr(r)),ci(r),y=r.type,v=r.pendingProps,S=s!==null?s.memoizedProps:null,c=v.children,qp(y,v)?c=null:S!==null&&qp(y,S)&&(r.flags|=32),r.memoizedState!==null&&(y=Bh(s,r,ab,null,null,l),au._currentValue=y),jc(s,r),rn(s,r,c,l),r.child;case 6:return s===null&&$e&&((s=l=yt)&&(l=Yb(l,r.pendingProps,ti),l!==null?(r.stateNode=l,nn=r,yt=null,s=!0):s=!1),s||sr(r)),null;case 13:return Av(s,r,l);case 4:return Ue(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=vo(r,null,c,l):rn(s,r,c,l),r.child;case 11:return hv(s,r,r.type,r.pendingProps,l);case 7:return rn(s,r,r.pendingProps,l),r.child;case 8:return rn(s,r,r.pendingProps.children,l),r.child;case 12:return rn(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,rr(r,r.type,c.value),rn(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,mo(r),y=sn(y),c=c(y),r.flags|=1,rn(s,r,c,l),r.child;case 14:return pv(s,r,r.type,r.pendingProps,l);case 15:return mv(s,r,r.type,r.pendingProps,l);case 19:return Cv(s,r,l);case 31:return mb(s,r,l);case 22:return gv(s,r,l,r.pendingProps);case 24:return mo(r),c=sn(Lt),s===null?(y=Nh(),y===null&&(y=ht,v=bh(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),r.memoizedState={parent:c,cache:y},Mh(r),rr(r,Lt,y)):((s.lanes&l)!==0&&(kh(s,r),ql(r,null,null,l),Bl()),y=s.memoizedState,v=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),rr(r,Lt,c)):(c=v.cache,rr(r,Lt,c),c!==y.cache&&Rh(r,[Lt],l,!0))),rn(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function As(s){s.flags|=4}function pp(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(jv())s.flags|=8192;else throw _o=Lc,Dh}else s.flags&=-16777217}function Iv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!q0(r))if(jv())s.flags|=8192;else throw _o=Lc,Dh}function ed(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?oc():536870912,s.lanes|=r,Aa|=r)}function Yl(s,r){if(!$e)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function _t(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function yb(s,r,l){var c=r.pendingProps;switch(Ah(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(r),null;case 1:return _t(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),_s(Lt),Qe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(ua(r)?As(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ch())),_t(r),null;case 26:var y=r.type,v=r.memoizedState;return s===null?(As(r),v!==null?(_t(r),Iv(r,v)):(_t(r),pp(r,y,null,c,l))):v?v!==s.memoizedState?(As(r),_t(r),Iv(r,v)):(_t(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&As(r),_t(r),pp(r,y,s,c,l)),null;case 27:if(Gs(r),l=De.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&As(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return _t(r),null}s=pe.current,ua(r)?r_(r):(s=k0(y,c,l),r.stateNode=s,As(r))}return _t(r),null;case 5:if(Gs(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&As(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return _t(r),null}if(v=pe.current,ua(r))r_(r);else{var S=md(De.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?S.createElement(y,{is:c.is}):S.createElement(y)}}v[Pt]=r,v[Qt]=c;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=v;e:switch(on(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&As(r)}}return _t(r),pp(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&As(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=De.current,ua(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=nn,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[Pt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||A0(s.nodeValue,l)),s||sr(r,!0)}else s=md(s).createTextNode(c),s[Pt]=r,r.stateNode=s}return _t(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=ua(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Pt]=r}else ho(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;_t(r),s=!1}else l=Ch(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(On(r),r):(On(r),null);if((r.flags&128)!==0)throw Error(i(558))}return _t(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ua(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Pt]=r}else ho(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;_t(r),y=!1}else y=Ch(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(On(r),r):(On(r),null)}return On(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),ed(r,r.updateQueue),_t(r),null);case 4:return Qe(),s===null&&Up(r.stateNode.containerInfo),_t(r),null;case 10:return _s(r.type),_t(r),null;case 19:if(ne(xt),c=r.memoizedState,c===null)return _t(r),null;if(y=(r.flags&128)!==0,v=c.rendering,v===null)if(y)Yl(c,!1);else{if(wt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(v=qc(s),v!==null){for(r.flags|=128,Yl(c,!1),s=v.updateQueue,r.updateQueue=s,ed(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)e_(l,s),l=l.sibling;return ue(xt,xt.current&1|2),$e&&gs(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&$t()>rd&&(r.flags|=128,y=!0,Yl(c,!1),r.lanes=4194304)}else{if(!y)if(s=qc(v),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,ed(r,s),Yl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!$e)return _t(r),null}else 2*$t()-c.renderingStartTime>rd&&l!==536870912&&(r.flags|=128,y=!0,Yl(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(s=c.last,s!==null?s.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=$t(),s.sibling=null,l=xt.current,ue(xt,y?l&1|2:l&1),$e&&gs(r,c.treeForkCount),s):(_t(r),null);case 22:case 23:return On(r),Lh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(_t(r),r.subtreeFlags&6&&(r.flags|=8192)):_t(r),l=r.updateQueue,l!==null&&ed(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&ne(go),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),_s(Lt),_t(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function _b(s,r){switch(Ah(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return _s(Lt),Qe(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Gs(r),null;case 31:if(r.memoizedState!==null){if(On(r),r.alternate===null)throw Error(i(340));ho()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(On(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ho()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ne(xt),null;case 4:return Qe(),null;case 10:return _s(r.type),null;case 22:case 23:return On(r),Lh(),s!==null&&ne(go),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return _s(Lt),null;case 25:return null;default:return null}}function Rv(s,r){switch(Ah(r),r.tag){case 3:_s(Lt),Qe();break;case 26:case 27:case 5:Gs(r);break;case 4:Qe();break;case 31:r.memoizedState!==null&&On(r);break;case 13:On(r);break;case 19:ne(xt);break;case 10:_s(r.type);break;case 22:case 23:On(r),Lh(),s!==null&&ne(go);break;case 24:_s(Lt)}}function Jl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var v=l.create,S=l.inst;c=v(),S.destroy=c}l=l.next}while(l!==y)}}catch(R){at(r,r.return,R)}}function dr(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var S=c.inst,R=S.destroy;if(R!==void 0){S.destroy=void 0,y=r;var V=l,K=R;try{K()}catch(j){at(y,V,j)}}}c=c.next}while(c!==v)}}catch(j){at(r,r.return,j)}}function bv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{__(r,l)}catch(c){at(s,s.return,c)}}}function xv(s,r,l){l.props=To(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){at(s,r,c)}}function Ql(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){at(s,r,y)}}function ji(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){at(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){at(s,r,y)}else l.current=null}function Nv(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){at(s,s.return,y)}}function mp(s,r,l){try{var c=s.stateNode;Bb(c,s.type,l,r),c[Qt]=r}catch(y){at(s,s.return,y)}}function Dv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&_r(s.type)||s.tag===4}function gp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Dv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&_r(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function yp(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=mi));else if(c!==4&&(c===27&&_r(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(yp(s,r,l),s=s.sibling;s!==null;)yp(s,r,l),s=s.sibling}function td(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&_r(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(td(s,r,l),s=s.sibling;s!==null;)td(s,r,l),s=s.sibling}function Mv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);on(r,c,l),r[Pt]=s,r[Qt]=l}catch(v){at(s,s.return,v)}}var Ss=!1,Bt=!1,_p=!1,kv=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function vb(s,r){if(s=s.containerInfo,Fp=Ad,s=Ky(s),dh(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,R=-1,V=-1,K=0,j=0,ie=s,$=null;t:for(;;){for(var Q;ie!==l||y!==0&&ie.nodeType!==3||(R=S+y),ie!==v||c!==0&&ie.nodeType!==3||(V=S+c),ie.nodeType===3&&(S+=ie.nodeValue.length),(Q=ie.firstChild)!==null;)$=ie,ie=Q;for(;;){if(ie===s)break t;if($===l&&++K===y&&(R=S),$===v&&++j===c&&(V=S),(Q=ie.nextSibling)!==null)break;ie=$,$=ie.parentNode}ie=Q}l=R===-1||V===-1?null:{start:R,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Bp={focusedElem:s,selectionRange:l},Ad=!1,Wt=r;Wt!==null;)if(r=Wt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Wt=s;else for(;Wt!==null;){switch(r=Wt,v=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=r,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ge=To(l.type,y);s=c.getSnapshotBeforeUpdate(ge,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){at(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Hp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Hp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Wt=s;break}Wt=r.return}}function Pv(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ws(s,l),c&4&&Jl(5,l);break;case 1:if(ws(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(S){at(l,l.return,S)}else{var y=To(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(S){at(l,l.return,S)}}c&64&&bv(l),c&512&&Ql(l,l.return);break;case 3:if(ws(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{__(s,r)}catch(S){at(l,l.return,S)}}break;case 27:r===null&&c&4&&Mv(l);case 26:case 5:ws(s,l),r===null&&c&4&&Nv(l),c&512&&Ql(l,l.return);break;case 12:ws(s,l);break;case 31:ws(s,l),c&4&&Lv(s,l);break;case 13:ws(s,l),c&4&&Ov(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=bb.bind(null,l),Jb(s,l))));break;case 22:if(c=l.memoizedState!==null||Ss,!c){r=r!==null&&r.memoizedState!==null||Bt,y=Ss;var v=Bt;Ss=c,(Bt=r)&&!v?Is(s,l,(l.subtreeFlags&8772)!==0):ws(s,l),Ss=y,Bt=v}break;case 30:break;default:ws(s,l)}}function Vv(s){var r=s.alternate;r!==null&&(s.alternate=null,Vv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&$o(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Tt=null,wn=!1;function Cs(s,r,l){for(l=l.child;l!==null;)Uv(s,r,l),l=l.sibling}function Uv(s,r,l){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(di,l)}catch{}switch(l.tag){case 26:Bt||ji(l,r),Cs(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Bt||ji(l,r);var c=Tt,y=wn;_r(l.type)&&(Tt=l.stateNode,wn=!1),Cs(s,r,l),su(l.stateNode),Tt=c,wn=y;break;case 5:Bt||ji(l,r);case 6:if(c=Tt,y=wn,Tt=null,Cs(s,r,l),Tt=c,wn=y,Tt!==null)if(wn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(l.stateNode)}catch(v){at(l,r,v)}else try{Tt.removeChild(l.stateNode)}catch(v){at(l,r,v)}break;case 18:Tt!==null&&(wn?(s=Tt,b0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Na(s)):b0(Tt,l.stateNode));break;case 4:c=Tt,y=wn,Tt=l.stateNode.containerInfo,wn=!0,Cs(s,r,l),Tt=c,wn=y;break;case 0:case 11:case 14:case 15:dr(2,l,r),Bt||dr(4,l,r),Cs(s,r,l);break;case 1:Bt||(ji(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&xv(l,r,c)),Cs(s,r,l);break;case 21:Cs(s,r,l);break;case 22:Bt=(c=Bt)||l.memoizedState!==null,Cs(s,r,l),Bt=c;break;default:Cs(s,r,l)}}function Lv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Na(s)}catch(l){at(r,r.return,l)}}}function Ov(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Na(s)}catch(l){at(r,r.return,l)}}function Eb(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new kv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new kv),r;default:throw Error(i(435,s.tag))}}function nd(s,r){var l=Eb(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=xb.bind(null,s,c);c.then(y,y)}})}function In(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=s,S=r,R=S;e:for(;R!==null;){switch(R.tag){case 27:if(_r(R.type)){Tt=R.stateNode,wn=!1;break e}break;case 5:Tt=R.stateNode,wn=!1;break e;case 3:case 4:Tt=R.stateNode.containerInfo,wn=!0;break e}R=R.return}if(Tt===null)throw Error(i(160));Uv(v,S,y),Tt=null,wn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Fv(r,s),r=r.sibling}var Ti=null;function Fv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:In(r,s),Rn(s),c&4&&(dr(3,s,s.return),Jl(3,s),dr(5,s,s.return));break;case 1:In(r,s),Rn(s),c&512&&(Bt||l===null||ji(l,l.return)),c&64&&Ss&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=Ti;if(In(r,s),Rn(s),c&512&&(Bt||l===null||ji(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Oi]||v[Pt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),on(v,c,l),v[Pt]=s,Vt(v),c=v;break e;case"link":var S=F0("link","href",y).get(c+(l.href||""));if(S){for(var R=0;R<S.length;R++)if(v=S[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(R,1);break t}}v=y.createElement(c),on(v,c,l),y.head.appendChild(v);break;case"meta":if(S=F0("meta","content",y).get(c+(l.content||""))){for(R=0;R<S.length;R++)if(v=S[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(R,1);break t}}v=y.createElement(c),on(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[Pt]=s,Vt(v),c=v}s.stateNode=c}else B0(y,s.type,s.stateNode);else s.stateNode=O0(y,c,s.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?B0(y,s.type,s.stateNode):O0(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&mp(s,s.memoizedProps,l.memoizedProps)}break;case 27:In(r,s),Rn(s),c&512&&(Bt||l===null||ji(l,l.return)),l!==null&&c&4&&mp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(In(r,s),Rn(s),c&512&&(Bt||l===null||ji(l,l.return)),s.flags&32){y=s.stateNode;try{Cn(y,"")}catch(ge){at(s,s.return,ge)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,mp(s,y,l!==null?l.memoizedProps:y)),c&1024&&(_p=!0);break;case 6:if(In(r,s),Rn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ge){at(s,s.return,ge)}}break;case 3:if(_d=null,y=Ti,Ti=gd(r.containerInfo),In(r,s),Ti=y,Rn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Na(r.containerInfo)}catch(ge){at(s,s.return,ge)}_p&&(_p=!1,Bv(s));break;case 4:c=Ti,Ti=gd(s.stateNode.containerInfo),In(r,s),Rn(s),Ti=c;break;case 12:In(r,s),Rn(s);break;case 31:In(r,s),Rn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,nd(s,c)));break;case 13:In(r,s),Rn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(sd=$t()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,nd(s,c)));break;case 22:y=s.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,K=Ss,j=Bt;if(Ss=K||y,Bt=j||V,In(r,s),Bt=j,Ss=K,Rn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||V||Ss||Bt||Ao(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){V=l=r;try{if(v=V.stateNode,y)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{R=V.stateNode;var ie=V.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;R.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ge){at(V,V.return,ge)}}}else if(r.tag===6){if(l===null){V=r;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(ge){at(V,V.return,ge)}}}else if(r.tag===18){if(l===null){V=r;try{var Q=V.stateNode;y?x0(Q,!0):x0(V.stateNode,!1)}catch(ge){at(V,V.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,nd(s,l))));break;case 19:In(r,s),Rn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,nd(s,c)));break;case 30:break;case 21:break;default:In(r,s),Rn(s)}}function Rn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(Dv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=gp(s);td(s,v,y);break;case 5:var S=l.stateNode;l.flags&32&&(Cn(S,""),l.flags&=-33);var R=gp(s);td(s,R,S);break;case 3:case 4:var V=l.stateNode.containerInfo,K=gp(s);yp(s,K,V);break;default:throw Error(i(161))}}catch(j){at(s,s.return,j)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function Bv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;Bv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ws(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Pv(s,r.alternate,r),r=r.sibling}function Ao(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:dr(4,r,r.return),Ao(r);break;case 1:ji(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&xv(r,r.return,l),Ao(r);break;case 27:su(r.stateNode);case 26:case 5:ji(r,r.return),Ao(r);break;case 22:r.memoizedState===null&&Ao(r);break;case 30:Ao(r);break;default:Ao(r)}s=s.sibling}}function Is(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,v=r,S=v.flags;switch(v.tag){case 0:case 11:case 15:Is(y,v,l),Jl(4,v);break;case 1:if(Is(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){at(c,c.return,K)}if(c=v,y=c.updateQueue,y!==null){var R=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)y_(V[y],R)}catch(K){at(c,c.return,K)}}l&&S&64&&bv(v),Ql(v,v.return);break;case 27:Mv(v);case 26:case 5:Is(y,v,l),l&&c===null&&S&4&&Nv(v),Ql(v,v.return);break;case 12:Is(y,v,l);break;case 31:Is(y,v,l),l&&S&4&&Lv(y,v);break;case 13:Is(y,v,l),l&&S&4&&Ov(y,v);break;case 22:v.memoizedState===null&&Is(y,v,l),Ql(v,v.return);break;case 30:break;default:Is(y,v,l)}r=r.sibling}}function vp(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Vl(l))}function Ep(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Vl(s))}function Ai(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qv(s,r,l,c),r=r.sibling}function qv(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Ai(s,r,l,c),y&2048&&Jl(9,r);break;case 1:Ai(s,r,l,c);break;case 3:Ai(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Vl(s)));break;case 12:if(y&2048){Ai(s,r,l,c),s=r.stateNode;try{var v=r.memoizedProps,S=v.id,R=v.onPostCommit;typeof R=="function"&&R(S,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){at(r,r.return,V)}}else Ai(s,r,l,c);break;case 31:Ai(s,r,l,c);break;case 13:Ai(s,r,l,c);break;case 23:break;case 22:v=r.stateNode,S=r.alternate,r.memoizedState!==null?v._visibility&2?Ai(s,r,l,c):Xl(s,r):v._visibility&2?Ai(s,r,l,c):(v._visibility|=2,va(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&vp(S,r);break;case 24:Ai(s,r,l,c),y&2048&&Ep(r.alternate,r);break;default:Ai(s,r,l,c)}}function va(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=s,S=r,R=l,V=c,K=S.flags;switch(S.tag){case 0:case 11:case 15:va(v,S,R,V,y),Jl(8,S);break;case 23:break;case 22:var j=S.stateNode;S.memoizedState!==null?j._visibility&2?va(v,S,R,V,y):Xl(v,S):(j._visibility|=2,va(v,S,R,V,y)),y&&K&2048&&vp(S.alternate,S);break;case 24:va(v,S,R,V,y),y&&K&2048&&Ep(S.alternate,S);break;default:va(v,S,R,V,y)}r=r.sibling}}function Xl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Xl(l,c),y&2048&&vp(c.alternate,c);break;case 24:Xl(l,c),y&2048&&Ep(c.alternate,c);break;default:Xl(l,c)}r=r.sibling}}var Wl=8192;function Ea(s,r,l){if(s.subtreeFlags&Wl)for(s=s.child;s!==null;)Gv(s,r,l),s=s.sibling}function Gv(s,r,l){switch(s.tag){case 26:Ea(s,r,l),s.flags&Wl&&s.memoizedState!==null&&o1(l,Ti,s.memoizedState,s.memoizedProps);break;case 5:Ea(s,r,l);break;case 3:case 4:var c=Ti;Ti=gd(s.stateNode.containerInfo),Ea(s,r,l),Ti=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Wl,Wl=16777216,Ea(s,r,l),Wl=c):Ea(s,r,l));break;default:Ea(s,r,l)}}function Hv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function jl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Wt=c,Kv(c,s)}Hv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zv(s),s=s.sibling}function zv(s){switch(s.tag){case 0:case 11:case 15:jl(s),s.flags&2048&&dr(9,s,s.return);break;case 3:jl(s);break;case 12:jl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,id(s)):jl(s);break;default:jl(s)}}function id(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Wt=c,Kv(c,s)}Hv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:dr(8,r,r.return),id(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,id(r));break;default:id(r)}s=s.sibling}}function Kv(s,r){for(;Wt!==null;){var l=Wt;switch(l.tag){case 0:case 11:case 15:dr(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Vl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Wt=c;else e:for(l=s;Wt!==null;){c=Wt;var y=c.sibling,v=c.return;if(Vv(c),c===l){Wt=null;break e}if(y!==null){y.return=v,Wt=y;break e}Wt=v}}}var Tb={getCacheForType:function(s){var r=sn(Lt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return sn(Lt).controller.signal}},Ab=typeof WeakMap=="function"?WeakMap:Map,tt=0,ht=null,Fe=null,qe=0,ot=0,Fn=null,fr=!1,Ta=!1,Tp=!1,Rs=0,wt=0,hr=0,So=0,Ap=0,Bn=0,Aa=0,Zl=null,bn=null,Sp=!1,sd=0,$v=0,rd=1/0,od=null,pr=null,Yt=0,mr=null,Sa=null,bs=0,Cp=0,wp=null,Yv=null,eu=0,Ip=null;function qn(){return(tt&2)!==0&&qe!==0?qe&-qe:X.T!==null?Mp():ac()}function Jv(){if(Bn===0)if((qe&536870912)===0||$e){var s=Qr;Qr<<=1,(Qr&3932160)===0&&(Qr=262144),Bn=s}else Bn=536870912;return s=Ln.current,s!==null&&(s.flags|=32),Bn}function xn(s,r,l){(s===ht&&(ot===2||ot===9)||s.cancelPendingCommit!==null)&&(Ca(s,0),gr(s,qe,Bn,!1)),Xr(s,l),((tt&2)===0||s!==ht)&&(s===ht&&((tt&2)===0&&(So|=l),wt===4&&gr(s,qe,Bn,!1)),Zi(s))}function Qv(s,r,l){if((tt&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||fi(s,r),y=c?wb(s,r):bp(s,r,!0),v=c;do{if(y===0){Ta&&!c&&gr(s,r,0,!1);break}else{if(l=s.current.alternate,v&&!Sb(l)){y=bp(s,r,!1),v=!1;continue}if(y===2){if(v=r,s.errorRecoveryDisabledLanes&v)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var R=s;y=Zl;var V=R.current.memoizedState.isDehydrated;if(V&&(Ca(R,S).flags|=256),S=bp(R,S,!1),S!==2){if(Tp&&!V){R.errorRecoveryDisabledLanes|=v,So|=v,y=4;break e}v=bn,bn=y,v!==null&&(bn===null?bn=v:bn.push.apply(bn,v))}y=S}if(v=!1,y!==2)continue}}if(y===1){Ca(s,0),gr(s,r,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:gr(c,r,Bn,!fr);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=sd+300-$t(),10<y)){if(gr(c,r,Bn,!fr),Vi(c,0,!0)!==0)break e;bs=r,c.timeoutHandle=I0(Xv.bind(null,c,l,bn,od,Sp,r,Bn,So,Aa,fr,v,"Throttled",-0,0),y);break e}Xv(c,l,bn,od,Sp,r,Bn,So,Aa,fr,v,null,-0,0)}}break}while(!0);Zi(s)}function Xv(s,r,l,c,y,v,S,R,V,K,j,ie,$,Q){if(s.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mi},Gv(r,v,ie);var ge=(v&62914560)===v?sd-$t():(v&4194048)===v?$v-$t():0;if(ge=a1(ie,ge),ge!==null){bs=v,s.cancelPendingCommit=ge(s0.bind(null,s,r,v,l,c,y,S,R,V,j,ie,null,$,Q)),gr(s,v,S,!K);return}}s0(s,r,v,l,c,y,S,R,V)}function Sb(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!Vn(v(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function gr(s,r,l,c){r&=~Ap,r&=~So,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var v=31-Rt(y),S=1<<v;c[v]=-1,y&=~S}l!==0&&Wr(s,l,r)}function ad(){return(tt&6)===0?(tu(0),!1):!0}function Rp(){if(Fe!==null){if(ot===0)var s=Fe.return;else s=Fe,ys=po=null,Hh(s),pa=null,Ll=0,s=Fe;for(;s!==null;)Rv(s.alternate,s),s=s.return;Fe=null}}function Ca(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Hb(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),bs=0,Rp(),ht=s,Fe=l=ms(s.current,null),qe=r,ot=0,Fn=null,fr=!1,Ta=fi(s,r),Tp=!1,Aa=Bn=Ap=So=hr=wt=0,bn=Zl=null,Sp=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-Rt(c),v=1<<y;r|=s[y],c&=~v}return Rs=r,bc(),l}function Wv(s,r){ke=null,X.H=Kl,r===ha||r===Uc?(r=h_(),ot=3):r===Dh?(r=h_(),ot=4):ot=r===rp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Fn=r,Fe===null&&(wt=1,Xc(s,jn(r,s.current)))}function jv(){var s=Ln.current;return s===null?!0:(qe&4194048)===qe?ni===null:(qe&62914560)===qe||(qe&536870912)!==0?s===ni:!1}function Zv(){var s=X.H;return X.H=Kl,s===null?Kl:s}function e0(){var s=X.A;return X.A=Tb,s}function ld(){wt=4,fr||(qe&4194048)!==qe&&Ln.current!==null||(Ta=!0),(hr&134217727)===0&&(So&134217727)===0||ht===null||gr(ht,qe,Bn,!1)}function bp(s,r,l){var c=tt;tt|=2;var y=Zv(),v=e0();(ht!==s||qe!==r)&&(od=null,Ca(s,r)),r=!1;var S=wt;e:do try{if(ot!==0&&Fe!==null){var R=Fe,V=Fn;switch(ot){case 8:Rp(),S=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var K=ot;if(ot=0,Fn=null,wa(s,R,V,K),l&&Ta){S=0;break e}break;default:K=ot,ot=0,Fn=null,wa(s,R,V,K)}}Cb(),S=wt;break}catch(j){Wv(s,j)}while(!0);return r&&s.shellSuspendCounter++,ys=po=null,tt=c,X.H=y,X.A=v,Fe===null&&(ht=null,qe=0,bc()),S}function Cb(){for(;Fe!==null;)t0(Fe)}function wb(s,r){var l=tt;tt|=2;var c=Zv(),y=e0();ht!==s||qe!==r?(od=null,rd=$t()+500,Ca(s,r)):Ta=fi(s,r);e:do try{if(ot!==0&&Fe!==null){r=Fe;var v=Fn;t:switch(ot){case 1:ot=0,Fn=null,wa(s,r,v,1);break;case 2:case 9:if(d_(v)){ot=0,Fn=null,n0(r);break}r=function(){ot!==2&&ot!==9||ht!==s||(ot=7),Zi(s)},v.then(r,r);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:d_(v)?(ot=0,Fn=null,n0(r)):(ot=0,Fn=null,wa(s,r,v,7));break;case 5:var S=null;switch(Fe.tag){case 26:S=Fe.memoizedState;case 5:case 27:var R=Fe;if(S?q0(S):R.stateNode.complete){ot=0,Fn=null;var V=R.sibling;if(V!==null)Fe=V;else{var K=R.return;K!==null?(Fe=K,ud(K)):Fe=null}break t}}ot=0,Fn=null,wa(s,r,v,5);break;case 6:ot=0,Fn=null,wa(s,r,v,6);break;case 8:Rp(),wt=6;break e;default:throw Error(i(462))}}Ib();break}catch(j){Wv(s,j)}while(!0);return ys=po=null,X.H=c,X.A=y,tt=l,Fe!==null?0:(ht=null,qe=0,bc(),wt)}function Ib(){for(;Fe!==null&&!zs();)t0(Fe)}function t0(s){var r=wv(s.alternate,s,Rs);s.memoizedProps=s.pendingProps,r===null?ud(s):Fe=r}function n0(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=vv(l,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=vv(l,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:Hh(r);default:Rv(l,r),r=Fe=e_(r,Rs),r=wv(l,r,Rs)}s.memoizedProps=s.pendingProps,r===null?ud(s):Fe=r}function wa(s,r,l,c){ys=po=null,Hh(r),pa=null,Ll=0;var y=r.return;try{if(pb(s,y,r,l,qe)){wt=1,Xc(s,jn(l,s.current)),Fe=null;return}}catch(v){if(y!==null)throw Fe=y,v;wt=1,Xc(s,jn(l,s.current)),Fe=null;return}r.flags&32768?($e||c===1?s=!0:Ta||(qe&536870912)!==0?s=!1:(fr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Ln.current,c!==null&&c.tag===13&&(c.flags|=16384))),i0(r,s)):ud(r)}function ud(s){var r=s;do{if((r.flags&32768)!==0){i0(r,fr);return}s=r.return;var l=yb(r.alternate,r,Rs);if(l!==null){Fe=l;return}if(r=r.sibling,r!==null){Fe=r;return}Fe=r=s}while(r!==null);wt===0&&(wt=5)}function i0(s,r){do{var l=_b(s.alternate,s);if(l!==null){l.flags&=32767,Fe=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Fe=s;return}Fe=s=l}while(s!==null);wt=6,Fe=null}function s0(s,r,l,c,y,v,S,R,V){s.cancelPendingCommit=null;do cd();while(Yt!==0);if((tt&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=gh,ah(s,l,v,S,R,V),s===ht&&(Fe=ht=null,qe=0),Sa=r,mr=s,bs=l,Cp=v,wp=y,Yv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Nb(cs,function(){return u0(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,y=oe.p,oe.p=2,S=tt,tt|=4;try{vb(s,r,l)}finally{tt=S,oe.p=y,X.T=c}}Yt=1,r0(),o0(),a0()}}function r0(){if(Yt===1){Yt=0;var s=mr,r=Sa,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var c=oe.p;oe.p=2;var y=tt;tt|=4;try{Fv(r,s);var v=Bp,S=Ky(s.containerInfo),R=v.focusedElem,V=v.selectionRange;if(S!==R&&R&&R.ownerDocument&&zy(R.ownerDocument.documentElement,R)){if(V!==null&&dh(R)){var K=V.start,j=V.end;if(j===void 0&&(j=K),"selectionStart"in R)R.selectionStart=K,R.selectionEnd=Math.min(j,R.value.length);else{var ie=R.ownerDocument||document,$=ie&&ie.defaultView||window;if($.getSelection){var Q=$.getSelection(),ge=R.textContent.length,Se=Math.min(V.start,ge),ft=V.end===void 0?Se:Math.min(V.end,ge);!Q.extend&&Se>ft&&(S=ft,ft=Se,Se=S);var G=Hy(R,Se),B=Hy(R,ft);if(G&&B&&(Q.rangeCount!==1||Q.anchorNode!==G.node||Q.anchorOffset!==G.offset||Q.focusNode!==B.node||Q.focusOffset!==B.offset)){var z=ie.createRange();z.setStart(G.node,G.offset),Q.removeAllRanges(),Se>ft?(Q.addRange(z),Q.extend(B.node,B.offset)):(z.setEnd(B.node,B.offset),Q.addRange(z))}}}}for(ie=[],Q=R;Q=Q.parentNode;)Q.nodeType===1&&ie.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ie.length;R++){var Z=ie[R];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Ad=!!Fp,Bp=Fp=null}finally{tt=y,oe.p=c,X.T=l}}s.current=r,Yt=2}}function o0(){if(Yt===2){Yt=0;var s=mr,r=Sa,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var c=oe.p;oe.p=2;var y=tt;tt|=4;try{Pv(s,r.alternate,r)}finally{tt=y,oe.p=c,X.T=l}}Yt=3}}function a0(){if(Yt===4||Yt===3){Yt=0,Ks();var s=mr,r=Sa,l=bs,c=Yv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Yt=5:(Yt=0,Sa=mr=null,l0(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(pr=null),ds(l),r=r.stateNode,en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(di,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=X.T,y=oe.p,oe.p=2,X.T=null;try{for(var v=s.onRecoverableError,S=0;S<c.length;S++){var R=c[S];v(R.value,{componentStack:R.stack})}}finally{X.T=r,oe.p=y}}(bs&3)!==0&&cd(),Zi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===Ip?eu++:(eu=0,Ip=s):eu=0,tu(0)}}function l0(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Vl(r)))}function cd(){return r0(),o0(),a0(),u0()}function u0(){if(Yt!==5)return!1;var s=mr,r=Cp;Cp=0;var l=ds(bs),c=X.T,y=oe.p;try{oe.p=32>l?32:l,X.T=null,l=wp,wp=null;var v=mr,S=bs;if(Yt=0,Sa=mr=null,bs=0,(tt&6)!==0)throw Error(i(331));var R=tt;if(tt|=4,zv(v.current),qv(v,v.current,S,l),tt=R,tu(0,!1),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(di,v)}catch{}return!0}finally{oe.p=y,X.T=c,l0(s,r)}}function c0(s,r,l){r=jn(l,r),r=sp(s.stateNode,r,2),s=lr(s,r,2),s!==null&&(Xr(s,2),Zi(s))}function at(s,r,l){if(s.tag===3)c0(s,s,l);else for(;r!==null;){if(r.tag===3){c0(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(pr===null||!pr.has(c))){s=jn(l,s),l=dv(2),c=lr(r,l,2),c!==null&&(fv(l,c,r,s),Xr(c,2),Zi(c));break}}r=r.return}}function xp(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new Ab;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(Tp=!0,y.add(l),s=Rb.bind(null,s,r,l),r.then(s,s))}function Rb(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ht===s&&(qe&l)===l&&(wt===4||wt===3&&(qe&62914560)===qe&&300>$t()-sd?(tt&2)===0&&Ca(s,0):Ap|=l,Aa===qe&&(Aa=0)),Zi(s)}function d0(s,r){r===0&&(r=oc()),s=co(s,r),s!==null&&(Xr(s,r),Zi(s))}function bb(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),d0(s,l)}function xb(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),d0(s,l)}function Nb(s,r){return nt(s,r)}var dd=null,Ia=null,Np=!1,fd=!1,Dp=!1,yr=0;function Zi(s){s!==Ia&&s.next===null&&(Ia===null?dd=Ia=s:Ia=Ia.next=s),fd=!0,Np||(Np=!0,Mb())}function tu(s,r){if(!Dp&&fd){Dp=!0;do for(var l=!1,c=dd;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var S=c.suspendedLanes,R=c.pingedLanes;v=(1<<31-Rt(42|s)+1)-1,v&=y&~(S&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,m0(c,v))}else v=qe,v=Vi(c,c===ht?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||fi(c,v)||(l=!0,m0(c,v));c=c.next}while(l);Dp=!1}}function Db(){f0()}function f0(){fd=Np=!1;var s=0;yr!==0&&Gb()&&(s=yr);for(var r=$t(),l=null,c=dd;c!==null;){var y=c.next,v=h0(c,r);v===0?(c.next=null,l===null?dd=y:l.next=y,y===null&&(Ia=l)):(l=c,(s!==0||(v&3)!==0)&&(fd=!0)),c=y}Yt!==0&&Yt!==5||tu(s),yr!==0&&(yr=0)}function h0(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var S=31-Rt(v),R=1<<S,V=y[S];V===-1?((R&l)===0||(R&c)!==0)&&(y[S]=oh(R,r)):V<=r&&(s.expiredLanes|=R),v&=~R}if(r=ht,l=qe,l=Vi(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(ot===2||ot===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Kt(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||fi(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Kt(c),ds(l)){case 2:case 8:l=$s;break;case 32:l=cs;break;case 268435456:l=tc;break;default:l=cs}return c=p0.bind(null,s),l=nt(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Kt(c),s.callbackPriority=2,s.callbackNode=null,2}function p0(s,r){if(Yt!==0&&Yt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(cd()&&s.callbackNode!==l)return null;var c=qe;return c=Vi(s,s===ht?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Qv(s,c,r),h0(s,$t()),s.callbackNode!=null&&s.callbackNode===l?p0.bind(null,s):null)}function m0(s,r){if(cd())return null;Qv(s,r,!0)}function Mb(){zb(function(){(tt&6)!==0?nt(Mn,Db):f0()})}function Mp(){if(yr===0){var s=da;s===0&&(s=ki,ki<<=1,(ki&261888)===0&&(ki=256)),yr=s}return yr}function g0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Xo(""+s)}function y0(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function kb(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var v=g0((y[Qt]||null).action),S=c.submitter;S&&(r=(r=S[Qt]||null)?g0(r.formAction):S.getAttribute("formAction"),r!==null&&(v=r,S=null));var R=new $i("action","action",null,c,y);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(yr!==0){var V=S?y0(y,S):new FormData(y);jh(l,{pending:!0,data:V,method:y.method,action:v},null,V)}}else typeof v=="function"&&(R.preventDefault(),V=S?y0(y,S):new FormData(y),jh(l,{pending:!0,data:V,method:y.method,action:v},v,V))},currentTarget:y}]})}}for(var kp=0;kp<mh.length;kp++){var Pp=mh[kp],Pb=Pp.toLowerCase(),Vb=Pp[0].toUpperCase()+Pp.slice(1);Ei(Pb,"on"+Vb)}Ei(Jy,"onAnimationEnd"),Ei(Qy,"onAnimationIteration"),Ei(Xy,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(WR,"onTransitionRun"),Ei(jR,"onTransitionStart"),Ei(ZR,"onTransitionCancel"),Ei(Wy,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ub=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nu));function _0(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var S=c.length-1;0<=S;S--){var R=c[S],V=R.instance,K=R.currentTarget;if(R=R.listener,V!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=K;try{v(y)}catch(j){Rc(j)}y.currentTarget=null,v=V}else for(S=0;S<c.length;S++){if(R=c[S],V=R.instance,K=R.currentTarget,R=R.listener,V!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=K;try{v(y)}catch(j){Rc(j)}y.currentTarget=null,v=V}}}}function Be(s,r){var l=r[Ko];l===void 0&&(l=r[Ko]=new Set);var c=s+"__bubble";l.has(c)||(v0(r,s,2,!1),l.add(c))}function Vp(s,r,l){var c=0;r&&(c|=4),v0(l,s,c,r)}var hd="_reactListening"+Math.random().toString(36).slice(2);function Up(s){if(!s[hd]){s[hd]=!0,pl.forEach(function(l){l!=="selectionchange"&&(Ub.has(l)||Vp(l,!1,s),Vp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[hd]||(r[hd]=!0,Vp("selectionchange",!1,r))}}function v0(s,r,l,c){switch(J0(r)){case 2:var y=c1;break;case 8:y=d1;break;default:y=Wp}l=y.bind(null,r,l,s),y=void 0,!no||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function Lp(s,r,l,c,y){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var R=c.stateNode.containerInfo;if(R===y)break;if(S===4)for(S=c.return;S!==null;){var V=S.tag;if((V===3||V===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;R!==null;){if(S=Fi(R),S===null)return;if(V=S.tag,V===5||V===6||V===26||V===27){c=v=S;continue e}R=R.parentNode}}c=c.return}js(function(){var K=v,j=Jn(l),ie=[];e:{var $=jy.get(s);if($!==void 0){var Q=$i,ge=s;switch(s){case"keypress":if(so(l)===0)break e;case"keydown":case"keyup":Q=Cc;break;case"focusin":ge="focus",Q=oo;break;case"focusout":ge="blur",Q=oo;break;case"beforeblur":case"afterblur":Q=oo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=A;break;case Jy:case Qy:case Xy:Q=yc;break;case Wy:Q=b;break;case"scroll":case"scrollend":Q=Il;break;case"wheel":Q=J;break;case"copy":case"cut":case"paste":Q=_c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ps;break;case"toggle":case"beforetoggle":Q=Me}var Se=(r&4)!==0,ft=!Se&&(s==="scroll"||s==="scrollend"),G=Se?$!==null?$+"Capture":null:$;Se=[];for(var B=K,z;B!==null;){var Z=B;if(z=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||z===null||G===null||(Z=gi(B,G),Z!=null&&Se.push(iu(B,Z,z))),ft)break;B=B.return}0<Se.length&&($=new Q($,ge,null,l,j),ie.push({event:$,listeners:Se}))}}if((r&7)===0){e:{if($=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",$&&l!==Sl&&(ge=l.relatedTarget||l.fromElement)&&(Fi(ge)||ge[Li]))break e;if((Q||$)&&($=j.window===j?j:($=j.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(ge=l.relatedTarget||l.toElement,Q=K,ge=ge?Fi(ge):null,ge!==null&&(ft=a(ge),Se=ge.tag,ge!==ft||Se!==5&&Se!==27&&Se!==6)&&(ge=null)):(Q=null,ge=K),Q!==ge)){if(Se=Rl,Z="onMouseLeave",G="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Se=ps,Z="onPointerLeave",G="onPointerEnter",B="pointer"),ft=Q==null?$:kn(Q),z=ge==null?$:kn(ge),$=new Se(Z,B+"leave",Q,l,j),$.target=ft,$.relatedTarget=z,Z=null,Fi(j)===K&&(Se=new Se(G,B+"enter",ge,l,j),Se.target=z,Se.relatedTarget=ft,Z=Se),ft=Z,Q&&ge)t:{for(Se=Lb,G=Q,B=ge,z=0,Z=G;Z;Z=Se(Z))z++;Z=0;for(var Ee=B;Ee;Ee=Se(Ee))Z++;for(;0<z-Z;)G=Se(G),z--;for(;0<Z-z;)B=Se(B),Z--;for(;z--;){if(G===B||B!==null&&G===B.alternate){Se=G;break t}G=Se(G),B=Se(B)}Se=null}else Se=null;Q!==null&&E0(ie,$,Q,Se,!1),ge!==null&&ft!==null&&E0(ie,ft,ge,Se,!0)}}e:{if($=K?kn(K):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var Xe=Ly;else if(Vy($))if(Oy)Xe=JR;else{Xe=$R;var ve=KR}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&Qo(K.elementType)&&(Xe=Ly):Xe=YR;if(Xe&&(Xe=Xe(s,K))){Uy(ie,Xe,l,j);break e}ve&&ve(s,$,K),s==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&El($,"number",$.value)}switch(ve=K?kn(K):window,s){case"focusin":(Vy(ve)||ve.contentEditable==="true")&&(ia=ve,fh=K,Ml=null);break;case"focusout":Ml=fh=ia=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,$y(ie,l,j);break;case"selectionchange":if(XR)break;case"keydown":case"keyup":$y(ie,l,j)}var Pe;if(et)e:{switch(s){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else na?ao(s,l)&&(Ge="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ge="onCompositionStart");Ge&&(Qi&&l.locale!=="ko"&&(na||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&na&&(Pe=wl()):(Ki=j,Cl="value"in Ki?Ki.value:Ki.textContent,na=!0)),ve=pd(K,Ge),0<ve.length&&(Ge=new Ji(Ge,s,null,l,j),ie.push({event:Ge,listeners:ve}),Pe?Ge.data=Pe:(Pe=ta(l),Pe!==null&&(Ge.data=Pe)))),(Pe=Xn?qR(s,l):GR(s,l))&&(Ge=pd(K,"onBeforeInput"),0<Ge.length&&(ve=new Ji("onBeforeInput","beforeinput",null,l,j),ie.push({event:ve,listeners:Ge}),ve.data=Pe)),kb(ie,s,K,l,j)}_0(ie,r)})}function iu(s,r,l){return{instance:s,listener:r,currentTarget:l}}function pd(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=gi(s,l),y!=null&&c.unshift(iu(s,y,v)),y=gi(s,r),y!=null&&c.push(iu(s,y,v))),s.tag===3)return c;s=s.return}return[]}function Lb(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function E0(s,r,l,c,y){for(var v=r._reactName,S=[];l!==null&&l!==c;){var R=l,V=R.alternate,K=R.stateNode;if(R=R.tag,V!==null&&V===c)break;R!==5&&R!==26&&R!==27||K===null||(V=K,y?(K=gi(l,v),K!=null&&S.unshift(iu(l,K,V))):y||(K=gi(l,v),K!=null&&S.push(iu(l,K,V)))),l=l.return}S.length!==0&&s.push({event:r,listeners:S})}var Ob=/\r\n?/g,Fb=/\u0000|\uFFFD/g;function T0(s){return(typeof s=="string"?s:""+s).replace(Ob,`
`).replace(Fb,"")}function A0(s,r){return r=T0(r),T0(s)===r}function dt(s,r,l,c,y,v){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Cn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Cn(s,""+c);break;case"className":Pn(s,"class",c);break;case"tabIndex":Pn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Pn(s,l,c);break;case"style":Al(s,c,v);break;case"data":if(r!=="object"){Pn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Xo(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&dt(s,r,"name",y.name,y,null),dt(s,r,"formEncType",y.formEncType,y,null),dt(s,r,"formMethod",y.formMethod,y,null),dt(s,r,"formTarget",y.formTarget,y,null)):(dt(s,r,"encType",y.encType,y,null),dt(s,r,"method",y.method,y,null),dt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Xo(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=mi);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Xo(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Be("beforetoggle",s),Be("toggle",s),Yo(s,"popover",c);break;case"xlinkActuate":Ut(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ut(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ut(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ut(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ut(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ut(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ut(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ut(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ut(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Yo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=pc.get(l)||l,Yo(s,l,c))}}function Op(s,r,l,c,y,v){switch(l){case"style":Al(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?Cn(s,c):(typeof c=="number"||typeof c=="bigint")&&Cn(s,""+c);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"onClick":c!=null&&(s.onclick=mi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ml.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),v=s[Qt]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(r,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Yo(s,l,c)}}}function on(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var S=l[v];if(S!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dt(s,r,v,S,l,null)}}y&&dt(s,r,"srcSet",l.srcSet,l,null),c&&dt(s,r,"src",l.src,l,null);return;case"input":Be("invalid",s);var R=v=S=y=null,V=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var j=l[c];if(j!=null)switch(c){case"name":y=j;break;case"type":S=j;break;case"checked":V=j;break;case"defaultChecked":K=j;break;case"value":v=j;break;case"defaultValue":R=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,r));break;default:dt(s,r,c,j,l,null)}}dc(s,v,R,V,K,S,y,!1);return;case"select":Be("invalid",s),c=S=v=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":v=R;break;case"defaultValue":S=R;break;case"multiple":c=R;default:dt(s,r,y,R,l,null)}r=v,l=S,s.multiple=!!c,r!=null?Js(s,!!c,r,!1):l!=null&&Js(s,!!c,l,!0);return;case"textarea":Be("invalid",s),v=y=c=null;for(S in l)if(l.hasOwnProperty(S)&&(R=l[S],R!=null))switch(S){case"value":c=R;break;case"defaultValue":y=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:dt(s,r,S,R,l,null)}Qs(s,c,y,v);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(c=l[V],c!=null))switch(V){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:dt(s,r,V,c,l,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(c=0;c<nu.length;c++)Be(nu[c],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dt(s,r,K,c,l,null)}return;default:if(Qo(r)){for(j in l)l.hasOwnProperty(j)&&(c=l[j],c!==void 0&&Op(s,r,j,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&dt(s,r,R,c,l,null))}function Bb(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,S=null,R=null,V=null,K=null,j=null;for(Q in l){var ie=l[Q];if(l.hasOwnProperty(Q)&&ie!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=ie;default:c.hasOwnProperty(Q)||dt(s,r,Q,null,c,ie)}}for(var $ in c){var Q=c[$];if(ie=l[$],c.hasOwnProperty($)&&(Q!=null||ie!=null))switch($){case"type":v=Q;break;case"name":y=Q;break;case"checked":K=Q;break;case"defaultChecked":j=Q;break;case"value":S=Q;break;case"defaultValue":R=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Q!==ie&&dt(s,r,$,Q,c,ie)}}Jo(s,S,R,V,K,j,v,y);return;case"select":Q=S=R=$=null;for(v in l)if(V=l[v],l.hasOwnProperty(v)&&V!=null)switch(v){case"value":break;case"multiple":Q=V;default:c.hasOwnProperty(v)||dt(s,r,v,null,c,V)}for(y in c)if(v=c[y],V=l[y],c.hasOwnProperty(y)&&(v!=null||V!=null))switch(y){case"value":$=v;break;case"defaultValue":R=v;break;case"multiple":S=v;default:v!==V&&dt(s,r,y,v,c,V)}r=R,l=S,c=Q,$!=null?Js(s,!!l,$,!1):!!c!=!!l&&(r!=null?Js(s,!!l,r,!0):Js(s,!!l,l?[]:"",!1));return;case"textarea":Q=$=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:dt(s,r,R,null,c,y)}for(S in c)if(y=c[S],v=l[S],c.hasOwnProperty(S)&&(y!=null||v!=null))switch(S){case"value":$=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&dt(s,r,S,y,c,v)}fc(s,$,Q);return;case"option":for(var ge in l)if($=l[ge],l.hasOwnProperty(ge)&&$!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:dt(s,r,ge,null,c,$)}for(V in c)if($=c[V],Q=l[V],c.hasOwnProperty(V)&&$!==Q&&($!=null||Q!=null))switch(V){case"selected":s.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:dt(s,r,V,$,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)$=l[Se],l.hasOwnProperty(Se)&&$!=null&&!c.hasOwnProperty(Se)&&dt(s,r,Se,null,c,$);for(K in c)if($=c[K],Q=l[K],c.hasOwnProperty(K)&&$!==Q&&($!=null||Q!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:dt(s,r,K,$,c,Q)}return;default:if(Qo(r)){for(var ft in l)$=l[ft],l.hasOwnProperty(ft)&&$!==void 0&&!c.hasOwnProperty(ft)&&Op(s,r,ft,void 0,c,$);for(j in c)$=c[j],Q=l[j],!c.hasOwnProperty(j)||$===Q||$===void 0&&Q===void 0||Op(s,r,j,$,c,Q);return}}for(var G in l)$=l[G],l.hasOwnProperty(G)&&$!=null&&!c.hasOwnProperty(G)&&dt(s,r,G,null,c,$);for(ie in c)$=c[ie],Q=l[ie],!c.hasOwnProperty(ie)||$===Q||$==null&&Q==null||dt(s,r,ie,$,c,Q)}function S0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qb(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,S=y.initiatorType,R=y.duration;if(v&&R&&S0(S)){for(S=0,R=y.responseEnd,c+=1;c<l.length;c++){var V=l[c],K=V.startTime;if(K>R)break;var j=V.transferSize,ie=V.initiatorType;j&&S0(ie)&&(V=V.responseEnd,S+=j*(V<R?1:(R-K)/(V-K)))}if(--c,r+=8*(v+S)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Fp=null,Bp=null;function md(s){return s.nodeType===9?s:s.ownerDocument}function C0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w0(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function qp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Gp=null;function Gb(){var s=window.event;return s&&s.type==="popstate"?s===Gp?!1:(Gp=s,!0):(Gp=null,!1)}var I0=typeof setTimeout=="function"?setTimeout:void 0,Hb=typeof clearTimeout=="function"?clearTimeout:void 0,R0=typeof Promise=="function"?Promise:void 0,zb=typeof queueMicrotask=="function"?queueMicrotask:typeof R0<"u"?function(s){return R0.resolve(null).then(s).catch(Kb)}:I0;function Kb(s){setTimeout(function(){throw s})}function _r(s){return s==="head"}function b0(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),Na(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")su(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,su(l);for(var v=l.firstChild;v;){var S=v.nextSibling,R=v.nodeName;v[Oi]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=S}}else l==="body"&&su(s.ownerDocument.body);l=y}while(l);Na(r)}function x0(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Hp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Hp(l),$o(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function $b(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Oi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=ii(s.nextSibling),s===null)break}return null}function Yb(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ii(s.nextSibling),s===null))return null;return s}function N0(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=ii(s.nextSibling),s===null))return null;return s}function zp(s){return s.data==="$?"||s.data==="$~"}function Kp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Jb(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function ii(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var $p=null;function D0(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return ii(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function M0(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function k0(s,r,l){switch(r=md(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function su(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);$o(s)}var si=new Map,P0=new Set;function gd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var xs=oe.d;oe.d={f:Qb,r:Xb,D:Wb,C:jb,L:Zb,m:e1,X:n1,S:t1,M:i1};function Qb(){var s=xs.f(),r=ad();return s||r}function Xb(s){var r=Yn(s);r!==null&&r.tag===5&&r.type==="form"?W_(r):xs.r(s)}var Ra=typeof document>"u"?null:document;function V0(s,r,l){var c=Ra;if(c&&typeof r=="string"&&r){var y=Sn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),P0.has(y)||(P0.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),on(r,"link",s),Vt(r),c.head.appendChild(r)))}}function Wb(s){xs.D(s),V0("dns-prefetch",s,null)}function jb(s,r){xs.C(s,r),V0("preconnect",s,r)}function Zb(s,r,l){xs.L(s,r,l);var c=Ra;if(c&&s&&r){var y='link[rel="preload"][as="'+Sn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+Sn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+Sn(l.imageSizes)+'"]')):y+='[href="'+Sn(s)+'"]';var v=y;switch(r){case"style":v=ba(s);break;case"script":v=xa(s)}si.has(v)||(s=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),si.set(v,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(ru(v))||r==="script"&&c.querySelector(ou(v))||(r=c.createElement("link"),on(r,"link",s),Vt(r),c.head.appendChild(r)))}}function e1(s,r){xs.m(s,r);var l=Ra;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Sn(c)+'"][href="'+Sn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=xa(s)}if(!si.has(v)&&(s=E({rel:"modulepreload",href:s},r),si.set(v,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ou(v)))return}c=l.createElement("link"),on(c,"link",s),Vt(c),l.head.appendChild(c)}}}function t1(s,r,l){xs.S(s,r,l);var c=Ra;if(c&&s){var y=Bi(c).hoistableStyles,v=ba(s);r=r||"default";var S=y.get(v);if(!S){var R={loading:0,preload:null};if(S=c.querySelector(ru(v)))R.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},l),(l=si.get(v))&&Yp(s,l);var V=S=c.createElement("link");Vt(V),on(V,"link",s),V._p=new Promise(function(K,j){V.onload=K,V.onerror=j}),V.addEventListener("load",function(){R.loading|=1}),V.addEventListener("error",function(){R.loading|=2}),R.loading|=4,yd(S,r,c)}S={type:"stylesheet",instance:S,count:1,state:R},y.set(v,S)}}}function n1(s,r){xs.X(s,r);var l=Ra;if(l&&s){var c=Bi(l).hoistableScripts,y=xa(s),v=c.get(y);v||(v=l.querySelector(ou(y)),v||(s=E({src:s,async:!0},r),(r=si.get(y))&&Jp(s,r),v=l.createElement("script"),Vt(v),on(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function i1(s,r){xs.M(s,r);var l=Ra;if(l&&s){var c=Bi(l).hoistableScripts,y=xa(s),v=c.get(y);v||(v=l.querySelector(ou(y)),v||(s=E({src:s,async:!0,type:"module"},r),(r=si.get(y))&&Jp(s,r),v=l.createElement("script"),Vt(v),on(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function U0(s,r,l,c){var y=(y=De.current)?gd(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ba(l.href),l=Bi(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=ba(l.href);var v=Bi(y).hoistableStyles,S=v.get(s);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,S),(v=y.querySelector(ru(s)))&&!v._p&&(S.instance=v,S.state.loading=5),si.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},si.set(s,l),v||s1(y,s,l,S.state))),r&&c===null)throw Error(i(528,""));return S}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=xa(l),l=Bi(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ba(s){return'href="'+Sn(s)+'"'}function ru(s){return'link[rel="stylesheet"]['+s+"]"}function L0(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function s1(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),on(r,"link",l),Vt(r),s.head.appendChild(r))}function xa(s){return'[src="'+Sn(s)+'"]'}function ou(s){return"script[async]"+s}function O0(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+Sn(l.href)+'"]');if(c)return r.instance=c,Vt(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Vt(c),on(c,"style",y),yd(c,l.precedence,s),r.instance=c;case"stylesheet":y=ba(l.href);var v=s.querySelector(ru(y));if(v)return r.state.loading|=4,r.instance=v,Vt(v),v;c=L0(l),(y=si.get(y))&&Yp(c,y),v=(s.ownerDocument||s).createElement("link"),Vt(v);var S=v;return S._p=new Promise(function(R,V){S.onload=R,S.onerror=V}),on(v,"link",c),r.state.loading|=4,yd(v,l.precedence,s),r.instance=v;case"script":return v=xa(l.src),(y=s.querySelector(ou(v)))?(r.instance=y,Vt(y),y):(c=l,(y=si.get(v))&&(c=E({},l),Jp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Vt(y),on(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,yd(c,l.precedence,s));return r.instance}function yd(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,S=0;S<c.length;S++){var R=c[S];if(R.dataset.precedence===r)v=R;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Yp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Jp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var _d=null;function F0(s,r,l){if(_d===null){var c=new Map,y=_d=new Map;y.set(l,c)}else y=_d,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var v=l[y];if(!(v[Oi]||v[Pt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(r)||"";S=s+S;var R=c.get(S);R?R.push(v):c.set(S,[v])}}return c}function B0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function r1(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function q0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function o1(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ba(c.href),v=r.querySelector(ru(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=vd.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=v,Vt(v);return}v=r.ownerDocument||r,c=L0(c),(y=si.get(y))&&Yp(c,y),v=v.createElement("link"),Vt(v);var S=v;S._p=new Promise(function(R,V){S.onload=R,S.onerror=V}),on(v,"link",c),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=vd.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Qp=0;function a1(s,r){return s.stylesheets&&s.count===0&&Td(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&Td(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+r);0<s.imgBytes&&Qp===0&&(Qp=62500*qb());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Td(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>Qp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function vd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Td(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ed=null;function Td(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ed=new Map,r.forEach(l1,s),Ed=null,vd.call(s))}function l1(s,r){if(!(r.state.loading&4)){var l=Ed.get(s);if(l)var c=l.get(null);else{l=new Map,Ed.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var S=y[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),c=S)}c&&l.set(null,c)}y=r.instance,S=y.getAttribute("data-precedence"),v=l.get(S)||c,v===c&&l.set(null,y),l.set(S,y),this.count++,c=vd.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var au={$$typeof:W,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function u1(s,r,l,c,y,v,S,R,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ui(0),this.hiddenUpdates=Ui(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function G0(s,r,l,c,y,v,S,R,V,K,j,ie){return s=new u1(s,r,l,S,V,K,j,ie,R),r=1,v===!0&&(r|=24),v=Un(3,null,null,r),s.current=v,v.stateNode=s,r=bh(),r.refCount++,s.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:r},Mh(v),s}function H0(s){return s?(s=oa,s):oa}function z0(s,r,l,c,y,v){y=H0(y),c.context===null?c.context=y:c.pendingContext=y,c=ar(r),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=lr(s,c,r),l!==null&&(xn(l,s,r),Fl(l,s,r))}function K0(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Xp(s,r){K0(s,r),(s=s.alternate)&&K0(s,r)}function $0(s){if(s.tag===13||s.tag===31){var r=co(s,67108864);r!==null&&xn(r,s,67108864),Xp(s,67108864)}}function Y0(s){if(s.tag===13||s.tag===31){var r=qn();r=jr(r);var l=co(s,r);l!==null&&xn(l,s,r),Xp(s,r)}}var Ad=!0;function c1(s,r,l,c){var y=X.T;X.T=null;var v=oe.p;try{oe.p=2,Wp(s,r,l,c)}finally{oe.p=v,X.T=y}}function d1(s,r,l,c){var y=X.T;X.T=null;var v=oe.p;try{oe.p=8,Wp(s,r,l,c)}finally{oe.p=v,X.T=y}}function Wp(s,r,l,c){if(Ad){var y=jp(c);if(y===null)Lp(s,r,c,Sd,l),Q0(s,c);else if(h1(y,s,r,l,c))c.stopPropagation();else if(Q0(s,c),r&4&&-1<f1.indexOf(s)){for(;y!==null;){var v=Yn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Pi(v.pendingLanes);if(S!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;S;){var V=1<<31-Rt(S);R.entanglements[1]|=V,S&=~V}Zi(v),(tt&6)===0&&(rd=$t()+500,tu(0))}}break;case 31:case 13:R=co(v,2),R!==null&&xn(R,v,2),ad(),Xp(v,2)}if(v=jp(c),v===null&&Lp(s,r,c,Sd,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else Lp(s,r,c,null,l)}}function jp(s){return s=Jn(s),Zp(s)}var Sd=null;function Zp(s){if(Sd=null,s=Fi(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Sd=s,null}function J0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gn()){case Mn:return 2;case $s:return 8;case cs:case Ho:return 32;case tc:return 268435456;default:return 32}default:return 32}}var em=!1,vr=null,Er=null,Tr=null,lu=new Map,uu=new Map,Ar=[],f1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Q0(s,r){switch(s){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":lu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(r.pointerId)}}function cu(s,r,l,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},r!==null&&(r=Yn(r),r!==null&&$0(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function h1(s,r,l,c,y){switch(r){case"focusin":return vr=cu(vr,s,r,l,c,y),!0;case"dragenter":return Er=cu(Er,s,r,l,c,y),!0;case"mouseover":return Tr=cu(Tr,s,r,l,c,y),!0;case"pointerover":var v=y.pointerId;return lu.set(v,cu(lu.get(v)||null,s,r,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,uu.set(v,cu(uu.get(v)||null,s,r,l,c,y)),!0}return!1}function X0(s){var r=Fi(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,hi(s.priority,function(){Y0(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,hi(s.priority,function(){Y0(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Cd(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=jp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Sl=c,l.target.dispatchEvent(c),Sl=null}else return r=Yn(l),r!==null&&$0(r),s.blockedOn=l,!1;r.shift()}return!0}function W0(s,r,l){Cd(s)&&l.delete(r)}function p1(){em=!1,vr!==null&&Cd(vr)&&(vr=null),Er!==null&&Cd(Er)&&(Er=null),Tr!==null&&Cd(Tr)&&(Tr=null),lu.forEach(W0),uu.forEach(W0)}function wd(s,r){s.blockedOn===r&&(s.blockedOn=null,em||(em=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,p1)))}var Id=null;function j0(s){Id!==s&&(Id=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Id===s&&(Id=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Zp(c||l)===null)continue;break}var v=Yn(l);v!==null&&(s.splice(r,3),r-=3,jh(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Na(s){function r(V){return wd(V,s)}vr!==null&&wd(vr,s),Er!==null&&wd(Er,s),Tr!==null&&wd(Tr,s),lu.forEach(r),uu.forEach(r);for(var l=0;l<Ar.length;l++){var c=Ar[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Ar.length&&(l=Ar[0],l.blockedOn===null);)X0(l),l.blockedOn===null&&Ar.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],S=y[Qt]||null;if(typeof v=="function")S||j0(l);else if(S){var R=null;if(v&&v.hasAttribute("formAction")){if(y=v,S=v[Qt]||null)R=S.formAction;else if(Zp(y)!==null)continue}else R=S.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),j0(l)}}}function Z0(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function tm(s){this._internalRoot=s}Rd.prototype.render=tm.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=qn();z0(l,c,s,r,null,null)},Rd.prototype.unmount=tm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;z0(s.current,2,null,s,null,null),ad(),r[Li]=null}};function Rd(s){this._internalRoot=s}Rd.prototype.unstable_scheduleHydration=function(s){if(s){var r=ac();s={blockedOn:null,target:s,priority:r};for(var l=0;l<Ar.length&&r!==0&&r<Ar[l].priority;l++);Ar.splice(l,0,s),l===0&&X0(s)}};var eE=e.version;if(eE!=="19.2.3")throw Error(i(527,eE,"19.2.3"));oe.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var m1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bd.isDisabled&&bd.supportsFiber)try{di=bd.inject(m1),en=bd}catch{}}return fu.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=av,v=lv,S=uv;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=G0(s,1,!1,null,null,l,c,null,y,v,S,Z0),s[Li]=r.current,Up(s),new tm(r)},fu.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",v=av,S=lv,R=uv,V=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),r=G0(s,1,!0,r,l??null,c,y,V,v,S,R,Z0),r.context=H0(null),l=r.current,c=qn(),c=jr(c),y=ar(c),y.callback=null,lr(l,y,c),l=c,r.current.lanes=l,Xr(r,l),Zi(r),s[Li]=r.current,Up(s),new Rd(r)},fu.version="19.2.3",fu}var cE;function I1(){if(cE)return sm.exports;cE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sm.exports=w1(),sm.exports}var R1=I1();const b1=VS(R1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N1=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),dE=n=>{const e=N1(n);return e.charAt(0).toUpperCase()+e.slice(1)},US=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),D1=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var M1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=de.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...d},p)=>de.createElement("svg",{ref:p,...M1,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:US("lucide",o),...!a&&!D1(d)&&{"aria-hidden":"true"},...d},[...u.map(([h,_])=>de.createElement(h,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=(n,e)=>{const t=de.forwardRef(({className:i,...o},a)=>de.createElement(k1,{ref:a,iconNode:e,className:US(`lucide-${x1(dE(n))}`,`lucide-${n}`,i),...o}));return t.displayName=dE(n),t};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],V1=Ve("arrow-left",P1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Gd=Ve("arrow-right",U1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],yg=Ve("book-open",L1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Im=Ve("book",O1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],LS=Ve("bookmark",F1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],OS=Ve("camera",B1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fE=Ve("chevron-right",q1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],H1=Ve("chevron-left",G1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],K1=Ve("circle-alert",z1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nf=Ve("circle-check-big",$1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],hE=Ve("circle-check",Y1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Q1=Ve("circle-user",J1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],W1=Ve("circle-x",X1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Z1=Ve("download",j1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],tx=Ve("graduation-cap",ex);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],sf=Ve("key",nx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],sx=Ve("layers",ix);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],pE=Ve("library",rx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xr=Ve("loader-circle",ox);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],lx=Ve("lock",ax);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],cx=Ve("log-in",ux);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fx=Ve("log-out",dx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],px=Ve("mail",hx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],gx=Ve("moon",mx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],mE=Ve("play",yx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hd=Ve("plus",_x);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],Ex=Ve("quote",vx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ax=Ve("refresh-cw",Tx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cx=Ve("save",Sx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],FS=Ve("settings",wx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],BS=Ve("shield-check",Ix);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],bx=Ve("skip-forward",Rx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],qS=Ve("sparkles",xx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Dx=Ve("sun",Nx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_g=Ve("trash-2",Mx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],gE=Ve("upload",kx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Vx=Ve("user-plus",Px);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],GS=Ve("user",Ux);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],xd=Ve("volume-2",Lx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fx=Ve("x",Ox);var lt=(n=>(n.HOME="HOME",n.ANALYZE="ANALYZE",n.VOCAB="VOCAB",n.LIBRARY="LIBRARY",n.HISTORY="HISTORY",n.SETTINGS="SETTINGS",n))(lt||{});const Bx=()=>{};var yE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},qx=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},zS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,h=p?n[o+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let T=(d&15)<<2|h>>6,I=h&63;p||(I=64,u||(T=64)),i.push(t[_],t[E],t[T],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(HS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||h==null||E==null)throw new Gx;const T=a<<2|d>>4;if(i.push(T),h!==64){const I=d<<4&240|h>>2;if(i.push(I),E!==64){const k=h<<6&192|E;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Gx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hx=function(n){const e=HS(n);return zS.encodeByteArray(e,!0)},rf=function(n){return Hx(n).replace(/\./g,"")},KS=function(n){try{return zS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=()=>zx().__FIREBASE_DEFAULTS__,$x=()=>{if(typeof process>"u"||typeof yE>"u")return;const n=yE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Yx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&KS(n[1]);return e&&JSON.parse(e)},Nf=()=>{try{return Bx()||Kx()||$x()||Yx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$S=n=>{var e,t;return(t=(e=Nf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Jx=n=>{const e=$S(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},YS=()=>{var n;return(n=Nf())==null?void 0:n.config},JS=n=>{var e;return(e=Nf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[rf(JSON.stringify(t)),rf(JSON.stringify(u)),""].join(".")}const Tu={};function Wx(){const n={prod:[],emulator:[]};for(const e of Object.keys(Tu))Tu[e]?n.emulator.push(e):n.prod.push(e);return n}function jx(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let _E=!1;function XS(n,e){if(typeof window>"u"||typeof document>"u"||!tl(window.location.host)||Tu[n]===e||Tu[n]||_E)return;Tu[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=Wx().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{_E=!0,u()},T}function _(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=jx(i),I=t("text"),k=document.getElementById(I)||document.createElement("span"),F=t("learnmore"),U=document.getElementById(F)||document.createElement("a"),Y=t("preprendIcon"),te=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const W=T.element;d(W),_(U,F);const re=h();p(te,Y),W.append(te,k,U,re),document.body.appendChild(W)}a?(k.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function eN(){var e;const n=(e=Nf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iN(){const n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sN(){return!eN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jS(){try{return typeof indexedDB=="object"}catch{return!1}}function ZS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}function rN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="FirebaseError";class xi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=oN,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vo.prototype.create)}}class Vo{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?aN(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new xi(o,d,i)}}function aN(n,e){return n.replace(lN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const lN=/\{\$([^}]+)}/g;function uN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ur(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(vE(a)&&vE(u)){if(!Ur(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function vE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function mu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function gu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function cN(n,e){const t=new dN(n,e);return t.subscribe.bind(t)}class dN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");fN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=lm),o.error===void 0&&(o.error=lm),o.complete===void 0&&(o.complete=lm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=1e3,pN=2,mN=14400*1e3,gN=.5;function EE(n,e=hN,t=pN){const i=e*Math.pow(t,n),o=Math.round(gN*i*(Math.random()-.5)*2);return Math.min(mN,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n){return n&&n._delegate?n._delegate:n}class Ii{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Qx;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vN(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_N(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _N(n){return n===Co?void 0:n}function vN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const TN={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},AN=He.INFO,SN={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},CN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=SN[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Df{constructor(e){this.name=e,this._logLevel=AN,this._logHandler=CN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const wN=(n,e)=>e.some(t=>n instanceof t);let TE,AE;function IN(){return TE||(TE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RN(){return AE||(AE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eC=new WeakMap,Rm=new WeakMap,tC=new WeakMap,um=new WeakMap,vg=new WeakMap;function bN(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Dr(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&eC.set(t,n)}).catch(()=>{}),vg.set(e,n),e}function xN(n){if(Rm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Rm.set(n,e)}let bm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Dr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function NN(n){bm=n(bm)}function DN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(cm(this),e,...t);return tC.set(i,e.sort?e.sort():[e]),Dr(i)}:RN().includes(n)?function(...e){return n.apply(cm(this),e),Dr(eC.get(this))}:function(...e){return Dr(n.apply(cm(this),e))}}function MN(n){return typeof n=="function"?DN(n):(n instanceof IDBTransaction&&xN(n),wN(n,IN())?new Proxy(n,bm):n)}function Dr(n){if(n instanceof IDBRequest)return bN(n);if(um.has(n))return um.get(n);const e=MN(n);return e!==n&&(um.set(n,e),vg.set(e,n)),e}const cm=n=>vg.get(n);function nC(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=Dr(u);return i&&u.addEventListener("upgradeneeded",p=>{i(Dr(u.result),p.oldVersion,p.newVersion,Dr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const kN=["get","getKey","getAll","getAllKeys","count"],PN=["put","add","delete","clear"],dm=new Map;function SE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=PN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||kN.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let h=p.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&p.done]))[0]};return dm.set(e,a),a}NN(n=>({...n,get:(e,t,i)=>SE(e,t)||n.get(e,t,i),has:(e,t)=>!!SE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function UN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xm="@firebase/app",CE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Df("@firebase/app"),LN="@firebase/app-compat",ON="@firebase/analytics-compat",FN="@firebase/analytics",BN="@firebase/app-check-compat",qN="@firebase/app-check",GN="@firebase/auth",HN="@firebase/auth-compat",zN="@firebase/database",KN="@firebase/data-connect",$N="@firebase/database-compat",YN="@firebase/functions",JN="@firebase/functions-compat",QN="@firebase/installations",XN="@firebase/installations-compat",WN="@firebase/messaging",jN="@firebase/messaging-compat",ZN="@firebase/performance",e2="@firebase/performance-compat",t2="@firebase/remote-config",n2="@firebase/remote-config-compat",i2="@firebase/storage",s2="@firebase/storage-compat",r2="@firebase/firestore",o2="@firebase/ai",a2="@firebase/firestore-compat",l2="firebase",u2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="[DEFAULT]",c2={[xm]:"fire-core",[LN]:"fire-core-compat",[FN]:"fire-analytics",[ON]:"fire-analytics-compat",[qN]:"fire-app-check",[BN]:"fire-app-check-compat",[GN]:"fire-auth",[HN]:"fire-auth-compat",[zN]:"fire-rtdb",[KN]:"fire-data-connect",[$N]:"fire-rtdb-compat",[YN]:"fire-fn",[JN]:"fire-fn-compat",[QN]:"fire-iid",[XN]:"fire-iid-compat",[WN]:"fire-fcm",[jN]:"fire-fcm-compat",[ZN]:"fire-perf",[e2]:"fire-perf-compat",[t2]:"fire-rc",[n2]:"fire-rc-compat",[i2]:"fire-gcs",[s2]:"fire-gcs-compat",[r2]:"fire-fst",[a2]:"fire-fst-compat",[o2]:"fire-vertex","fire-js":"fire-js",[l2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new Map,d2=new Map,Dm=new Map;function wE(n,e){try{n.container.addComponent(e)}catch(t){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function as(n){const e=n.name;if(Dm.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;Dm.set(e,n);for(const t of of.values())wE(t,n);for(const t of d2.values())wE(t,n);return!0}function Uo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ri(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Vo("app","Firebase",f2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=u2;function iC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Nm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Mr.create("bad-app-name",{appName:String(o)});if(t||(t=YS()),!t)throw Mr.create("no-options");const a=of.get(o);if(a){if(Ur(t,a.options)&&Ur(i,a.config))return a;throw Mr.create("duplicate-app",{appName:o})}const u=new EN(o);for(const p of Dm.values())u.addComponent(p);const d=new h2(t,i,u);return of.set(o,d),d}function Eg(n=Nm){const e=of.get(n);if(!e&&n===Nm&&YS())return iC();if(!e)throw Mr.create("no-app",{appName:n});return e}function ai(n,e,t){let i=c2[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(u.join(" "));return}as(new Ii(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="firebase-heartbeat-database",m2=1,Ru="firebase-heartbeat-store";let fm=null;function sC(){return fm||(fm=nC(p2,m2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ru)}catch(t){console.warn(t)}}}}).catch(n=>{throw Mr.create("idb-open",{originalErrorMessage:n.message})})),fm}async function g2(n){try{const t=(await sC()).transaction(Ru),i=await t.objectStore(Ru).get(rC(n));return await t.done,i}catch(e){if(e instanceof xi)ks.warn(e.message);else{const t=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(t.message)}}}async function IE(n,e){try{const i=(await sC()).transaction(Ru,"readwrite");await i.objectStore(Ru).put(e,rC(n)),await i.done}catch(t){if(t instanceof xi)ks.warn(t.message);else{const i=Mr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ks.warn(i.message)}}}function rC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=1024,_2=30;class v2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new T2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=RE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>_2){const u=A2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ks.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=RE(),{heartbeatsToSend:i,unsentEntries:o}=E2(this._heartbeatsCache.heartbeats),a=rf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ks.warn(t),""}}}function RE(){return new Date().toISOString().substring(0,10)}function E2(n,e=y2){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),bE(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),bE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class T2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jS()?ZS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await g2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return IE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return IE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bE(n){return rf(JSON.stringify({version:2,heartbeats:n})).length}function A2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(n){as(new Ii("platform-logger",e=>new VN(e),"PRIVATE")),as(new Ii("heartbeat",e=>new v2(e),"PRIVATE")),ai(xm,CE,n),ai(xm,CE,"esm2020"),ai("fire-js","")}S2("");var C2="firebase",w2="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ai(C2,w2,"app");var xE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kr,oC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,M){function D(){}D.prototype=M.prototype,x.F=M.prototype,x.prototype=new D,x.prototype.constructor=x,x.D=function(L,P,O){for(var N=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)N[ye-2]=arguments[ye];return M.prototype[P].apply(L,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,M,D){D||(D=0);const L=Array(16);if(typeof M=="string")for(var P=0;P<16;++P)L[P]=M.charCodeAt(D++)|M.charCodeAt(D++)<<8|M.charCodeAt(D++)<<16|M.charCodeAt(D++)<<24;else for(P=0;P<16;++P)L[P]=M[D++]|M[D++]<<8|M[D++]<<16|M[D++]<<24;M=x.g[0],D=x.g[1],P=x.g[2];let O=x.g[3],N;N=M+(O^D&(P^O))+L[0]+3614090360&4294967295,M=D+(N<<7&4294967295|N>>>25),N=O+(P^M&(D^P))+L[1]+3905402710&4294967295,O=M+(N<<12&4294967295|N>>>20),N=P+(D^O&(M^D))+L[2]+606105819&4294967295,P=O+(N<<17&4294967295|N>>>15),N=D+(M^P&(O^M))+L[3]+3250441966&4294967295,D=P+(N<<22&4294967295|N>>>10),N=M+(O^D&(P^O))+L[4]+4118548399&4294967295,M=D+(N<<7&4294967295|N>>>25),N=O+(P^M&(D^P))+L[5]+1200080426&4294967295,O=M+(N<<12&4294967295|N>>>20),N=P+(D^O&(M^D))+L[6]+2821735955&4294967295,P=O+(N<<17&4294967295|N>>>15),N=D+(M^P&(O^M))+L[7]+4249261313&4294967295,D=P+(N<<22&4294967295|N>>>10),N=M+(O^D&(P^O))+L[8]+1770035416&4294967295,M=D+(N<<7&4294967295|N>>>25),N=O+(P^M&(D^P))+L[9]+2336552879&4294967295,O=M+(N<<12&4294967295|N>>>20),N=P+(D^O&(M^D))+L[10]+4294925233&4294967295,P=O+(N<<17&4294967295|N>>>15),N=D+(M^P&(O^M))+L[11]+2304563134&4294967295,D=P+(N<<22&4294967295|N>>>10),N=M+(O^D&(P^O))+L[12]+1804603682&4294967295,M=D+(N<<7&4294967295|N>>>25),N=O+(P^M&(D^P))+L[13]+4254626195&4294967295,O=M+(N<<12&4294967295|N>>>20),N=P+(D^O&(M^D))+L[14]+2792965006&4294967295,P=O+(N<<17&4294967295|N>>>15),N=D+(M^P&(O^M))+L[15]+1236535329&4294967295,D=P+(N<<22&4294967295|N>>>10),N=M+(P^O&(D^P))+L[1]+4129170786&4294967295,M=D+(N<<5&4294967295|N>>>27),N=O+(D^P&(M^D))+L[6]+3225465664&4294967295,O=M+(N<<9&4294967295|N>>>23),N=P+(M^D&(O^M))+L[11]+643717713&4294967295,P=O+(N<<14&4294967295|N>>>18),N=D+(O^M&(P^O))+L[0]+3921069994&4294967295,D=P+(N<<20&4294967295|N>>>12),N=M+(P^O&(D^P))+L[5]+3593408605&4294967295,M=D+(N<<5&4294967295|N>>>27),N=O+(D^P&(M^D))+L[10]+38016083&4294967295,O=M+(N<<9&4294967295|N>>>23),N=P+(M^D&(O^M))+L[15]+3634488961&4294967295,P=O+(N<<14&4294967295|N>>>18),N=D+(O^M&(P^O))+L[4]+3889429448&4294967295,D=P+(N<<20&4294967295|N>>>12),N=M+(P^O&(D^P))+L[9]+568446438&4294967295,M=D+(N<<5&4294967295|N>>>27),N=O+(D^P&(M^D))+L[14]+3275163606&4294967295,O=M+(N<<9&4294967295|N>>>23),N=P+(M^D&(O^M))+L[3]+4107603335&4294967295,P=O+(N<<14&4294967295|N>>>18),N=D+(O^M&(P^O))+L[8]+1163531501&4294967295,D=P+(N<<20&4294967295|N>>>12),N=M+(P^O&(D^P))+L[13]+2850285829&4294967295,M=D+(N<<5&4294967295|N>>>27),N=O+(D^P&(M^D))+L[2]+4243563512&4294967295,O=M+(N<<9&4294967295|N>>>23),N=P+(M^D&(O^M))+L[7]+1735328473&4294967295,P=O+(N<<14&4294967295|N>>>18),N=D+(O^M&(P^O))+L[12]+2368359562&4294967295,D=P+(N<<20&4294967295|N>>>12),N=M+(D^P^O)+L[5]+4294588738&4294967295,M=D+(N<<4&4294967295|N>>>28),N=O+(M^D^P)+L[8]+2272392833&4294967295,O=M+(N<<11&4294967295|N>>>21),N=P+(O^M^D)+L[11]+1839030562&4294967295,P=O+(N<<16&4294967295|N>>>16),N=D+(P^O^M)+L[14]+4259657740&4294967295,D=P+(N<<23&4294967295|N>>>9),N=M+(D^P^O)+L[1]+2763975236&4294967295,M=D+(N<<4&4294967295|N>>>28),N=O+(M^D^P)+L[4]+1272893353&4294967295,O=M+(N<<11&4294967295|N>>>21),N=P+(O^M^D)+L[7]+4139469664&4294967295,P=O+(N<<16&4294967295|N>>>16),N=D+(P^O^M)+L[10]+3200236656&4294967295,D=P+(N<<23&4294967295|N>>>9),N=M+(D^P^O)+L[13]+681279174&4294967295,M=D+(N<<4&4294967295|N>>>28),N=O+(M^D^P)+L[0]+3936430074&4294967295,O=M+(N<<11&4294967295|N>>>21),N=P+(O^M^D)+L[3]+3572445317&4294967295,P=O+(N<<16&4294967295|N>>>16),N=D+(P^O^M)+L[6]+76029189&4294967295,D=P+(N<<23&4294967295|N>>>9),N=M+(D^P^O)+L[9]+3654602809&4294967295,M=D+(N<<4&4294967295|N>>>28),N=O+(M^D^P)+L[12]+3873151461&4294967295,O=M+(N<<11&4294967295|N>>>21),N=P+(O^M^D)+L[15]+530742520&4294967295,P=O+(N<<16&4294967295|N>>>16),N=D+(P^O^M)+L[2]+3299628645&4294967295,D=P+(N<<23&4294967295|N>>>9),N=M+(P^(D|~O))+L[0]+4096336452&4294967295,M=D+(N<<6&4294967295|N>>>26),N=O+(D^(M|~P))+L[7]+1126891415&4294967295,O=M+(N<<10&4294967295|N>>>22),N=P+(M^(O|~D))+L[14]+2878612391&4294967295,P=O+(N<<15&4294967295|N>>>17),N=D+(O^(P|~M))+L[5]+4237533241&4294967295,D=P+(N<<21&4294967295|N>>>11),N=M+(P^(D|~O))+L[12]+1700485571&4294967295,M=D+(N<<6&4294967295|N>>>26),N=O+(D^(M|~P))+L[3]+2399980690&4294967295,O=M+(N<<10&4294967295|N>>>22),N=P+(M^(O|~D))+L[10]+4293915773&4294967295,P=O+(N<<15&4294967295|N>>>17),N=D+(O^(P|~M))+L[1]+2240044497&4294967295,D=P+(N<<21&4294967295|N>>>11),N=M+(P^(D|~O))+L[8]+1873313359&4294967295,M=D+(N<<6&4294967295|N>>>26),N=O+(D^(M|~P))+L[15]+4264355552&4294967295,O=M+(N<<10&4294967295|N>>>22),N=P+(M^(O|~D))+L[6]+2734768916&4294967295,P=O+(N<<15&4294967295|N>>>17),N=D+(O^(P|~M))+L[13]+1309151649&4294967295,D=P+(N<<21&4294967295|N>>>11),N=M+(P^(D|~O))+L[4]+4149444226&4294967295,M=D+(N<<6&4294967295|N>>>26),N=O+(D^(M|~P))+L[11]+3174756917&4294967295,O=M+(N<<10&4294967295|N>>>22),N=P+(M^(O|~D))+L[2]+718787259&4294967295,P=O+(N<<15&4294967295|N>>>17),N=D+(O^(P|~M))+L[9]+3951481745&4294967295,x.g[0]=x.g[0]+M&4294967295,x.g[1]=x.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+O&4294967295}i.prototype.v=function(x,M){M===void 0&&(M=x.length);const D=M-this.blockSize,L=this.C;let P=this.h,O=0;for(;O<M;){if(P==0)for(;O<=D;)o(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<M;)if(L[P++]=x.charCodeAt(O++),P==this.blockSize){o(this,L),P=0;break}}else for(;O<M;)if(L[P++]=x[O++],P==this.blockSize){o(this,L),P=0;break}}this.h=P,this.o+=M},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var M=1;M<x.length-8;++M)x[M]=0;M=this.o*8;for(var D=x.length-8;D<x.length;++D)x[D]=M&255,M/=256;for(this.v(x),x=Array(16),M=0,D=0;D<4;++D)for(let L=0;L<32;L+=8)x[M++]=this.g[D]>>>L&255;return x};function a(x,M){var D=d;return Object.prototype.hasOwnProperty.call(D,x)?D[x]:D[x]=M(x)}function u(x,M){this.h=M;const D=[];let L=!0;for(let P=x.length-1;P>=0;P--){const O=x[P]|0;L&&O==M||(D[P]=O,L=!1)}this.g=D}var d={};function p(x){return-128<=x&&x<128?a(x,function(M){return new u([M|0],M<0?-1:0)}):new u([x|0],x<0?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return U(h(-x));const M=[];let D=1;for(let L=0;x>=D;L++)M[L]=x/D|0,D*=4294967296;return new u(M,0)}function _(x,M){if(x.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(x.charAt(0)=="-")return U(_(x.substring(1),M));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=h(Math.pow(M,8));let L=E;for(let O=0;O<x.length;O+=8){var P=Math.min(8,x.length-O);const N=parseInt(x.substring(O,O+P),M);P<8?(P=h(Math.pow(M,P)),L=L.j(P).add(h(N))):(L=L.j(D),L=L.add(h(N)))}return L}var E=p(0),T=p(1),I=p(16777216);n=u.prototype,n.m=function(){if(F(this))return-U(this).m();let x=0,M=1;for(let D=0;D<this.g.length;D++){const L=this.i(D);x+=(L>=0?L:4294967296+L)*M,M*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(k(this))return"0";if(F(this))return"-"+U(this).toString(x);const M=h(Math.pow(x,6));var D=this;let L="";for(;;){const P=re(D,M).g;D=Y(D,P.j(M));let O=((D.g.length>0?D.g[0]:D.h)>>>0).toString(x);if(D=P,k(D))return O+L;for(;O.length<6;)O="0"+O;L=O+L}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function k(x){if(x.h!=0)return!1;for(let M=0;M<x.g.length;M++)if(x.g[M]!=0)return!1;return!0}function F(x){return x.h==-1}n.l=function(x){return x=Y(this,x),F(x)?-1:k(x)?0:1};function U(x){const M=x.g.length,D=[];for(let L=0;L<M;L++)D[L]=~x.g[L];return new u(D,~x.h).add(T)}n.abs=function(){return F(this)?U(this):this},n.add=function(x){const M=Math.max(this.g.length,x.g.length),D=[];let L=0;for(let P=0;P<=M;P++){let O=L+(this.i(P)&65535)+(x.i(P)&65535),N=(O>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);L=N>>>16,O&=65535,N&=65535,D[P]=N<<16|O}return new u(D,D[D.length-1]&-2147483648?-1:0)};function Y(x,M){return x.add(U(M))}n.j=function(x){if(k(this)||k(x))return E;if(F(this))return F(x)?U(this).j(U(x)):U(U(this).j(x));if(F(x))return U(this.j(U(x)));if(this.l(I)<0&&x.l(I)<0)return h(this.m()*x.m());const M=this.g.length+x.g.length,D=[];for(var L=0;L<2*M;L++)D[L]=0;for(L=0;L<this.g.length;L++)for(let P=0;P<x.g.length;P++){const O=this.i(L)>>>16,N=this.i(L)&65535,ye=x.i(P)>>>16,Ze=x.i(P)&65535;D[2*L+2*P]+=N*Ze,te(D,2*L+2*P),D[2*L+2*P+1]+=O*Ze,te(D,2*L+2*P+1),D[2*L+2*P+1]+=N*ye,te(D,2*L+2*P+1),D[2*L+2*P+2]+=O*ye,te(D,2*L+2*P+2)}for(x=0;x<M;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=M;x<2*M;x++)D[x]=0;return new u(D,0)};function te(x,M){for(;(x[M]&65535)!=x[M];)x[M+1]+=x[M]>>>16,x[M]&=65535,M++}function W(x,M){this.g=x,this.h=M}function re(x,M){if(k(M))throw Error("division by zero");if(k(x))return new W(E,E);if(F(x))return M=re(U(x),M),new W(U(M.g),U(M.h));if(F(M))return M=re(x,U(M)),new W(U(M.g),M.h);if(x.g.length>30){if(F(x)||F(M))throw Error("slowDivide_ only works with positive integers.");for(var D=T,L=M;L.l(x)<=0;)D=ce(D),L=ce(L);var P=le(D,1),O=le(L,1);for(L=le(L,2),D=le(D,2);!k(L);){var N=O.add(L);N.l(x)<=0&&(P=P.add(D),O=N),L=le(L,1),D=le(D,1)}return M=Y(x,P.j(M)),new W(P,M)}for(P=E;x.l(M)>=0;){for(D=Math.max(1,Math.floor(x.m()/M.m())),L=Math.ceil(Math.log(D)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),O=h(D),N=O.j(M);F(N)||N.l(x)>0;)D-=L,O=h(D),N=O.j(M);k(O)&&(O=T),P=P.add(O),x=Y(x,N)}return new W(P,x)}n.B=function(x){return re(this,x).h},n.and=function(x){const M=Math.max(this.g.length,x.g.length),D=[];for(let L=0;L<M;L++)D[L]=this.i(L)&x.i(L);return new u(D,this.h&x.h)},n.or=function(x){const M=Math.max(this.g.length,x.g.length),D=[];for(let L=0;L<M;L++)D[L]=this.i(L)|x.i(L);return new u(D,this.h|x.h)},n.xor=function(x){const M=Math.max(this.g.length,x.g.length),D=[];for(let L=0;L<M;L++)D[L]=this.i(L)^x.i(L);return new u(D,this.h^x.h)};function ce(x){const M=x.g.length+1,D=[];for(let L=0;L<M;L++)D[L]=x.i(L)<<1|x.i(L-1)>>>31;return new u(D,x.h)}function le(x,M){const D=M>>5;M%=32;const L=x.g.length-D,P=[];for(let O=0;O<L;O++)P[O]=M>0?x.i(O+D)>>>M|x.i(O+D+1)<<32-M:x.i(O+D);return new u(P,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,oC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,kr=u}).apply(typeof xE<"u"?xE:typeof self<"u"?self:typeof window<"u"?window:{});var Nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aC,yu,lC,zd,Mm,uC,cC,dC;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nd=="object"&&Nd];for(var A=0;A<g.length;++A){var C=g[A];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(g,A){if(A)e:{var C=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var H=g[b];if(!(H in C))break e;C=C[H]}g=g[g.length-1],b=C[g],A=A(b),A!=b&&A!=null&&e(C,g,{configurable:!0,writable:!0,value:A})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(A){var C=[],b;for(b in A)Object.prototype.hasOwnProperty.call(A,b)&&C.push([b,A[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function p(g,A,C){return g.call.apply(g.bind,arguments)}function h(g,A,C){return h=p,h.apply(null,arguments)}function _(g,A){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function E(g,A){function C(){}C.prototype=A.prototype,g.Z=A.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(b,H,J){for(var ae=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ae[Me-2]=arguments[Me];return A.prototype[H].apply(b,ae)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const A=g.length;if(A>0){const C=Array(A);for(let b=0;b<A;b++)C[b]=g[b];return C}return[]}function k(g,A){for(let b=1;b<arguments.length;b++){const H=arguments[b];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=g.length||0;const J=H.length||0;g.length=C+J;for(let ae=0;ae<J;ae++)g[C+ae]=H[ae]}else g.push(H)}}class F{constructor(A,C){this.i=A,this.j=C,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function U(g){u.setTimeout(()=>{throw g},0)}function Y(){var g=x;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class te{constructor(){this.h=this.g=null}add(A,C){const b=W.get();b.set(A,C),this.h?this.h.next=b:this.g=b,this.h=b}}var W=new F(()=>new re,g=>g.reset());class re{constructor(){this.next=this.g=this.h=null}set(A,C){this.h=A,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,le=!1,x=new te,M=()=>{const g=Promise.resolve(void 0);ce=()=>{g.then(D)}};function D(){for(var g;g=Y();){try{g.h.call(g.g)}catch(C){U(C)}var A=W;A.j(g),A.h<100&&(A.h++,g.next=A.g,A.g=g)}le=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,A),u.removeEventListener("test",C,A)}catch{}return g})();function N(g){return/^[\s\xa0]*$/.test(g)}function ye(g,A){P.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,A)}E(ye,P),ye.prototype.init=function(g,A){const C=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget,A||(C=="mouseover"?A=g.fromElement:C=="mouseout"&&(A=g.toElement)),this.relatedTarget=A,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Ze="closure_listenable_"+(Math.random()*1e6|0),X=0;function oe(g,A,C,b,H){this.listener=g,this.proxy=null,this.src=A,this.type=C,this.capture=!!b,this.ha=H,this.key=++X,this.da=this.fa=!1}function _e(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Le(g,A,C){for(const b in g)A.call(C,g[b],b,g)}function Je(g,A){for(const C in g)A.call(void 0,g[C],C,g)}function q(g){const A={};for(const C in g)A[C]=g[C];return A}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(g,A){let C,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(C in b)g[C]=b[C];for(let J=0;J<ne.length;J++)C=ne[J],Object.prototype.hasOwnProperty.call(b,C)&&(g[C]=b[C])}}function pe(g){this.src=g,this.g={},this.h=0}pe.prototype.add=function(g,A,C,b,H){const J=g.toString();g=this.g[J],g||(g=this.g[J]=[],this.h++);const ae=De(g,A,b,H);return ae>-1?(A=g[ae],C||(A.fa=!1)):(A=new oe(A,this.src,J,!!b,H),A.fa=C,g.push(A)),A};function Ie(g,A){const C=A.type;if(C in g.g){var b=g.g[C],H=Array.prototype.indexOf.call(b,A,void 0),J;(J=H>=0)&&Array.prototype.splice.call(b,H,1),J&&(_e(A),g.g[C].length==0&&(delete g.g[C],g.h--))}}function De(g,A,C,b){for(let H=0;H<g.length;++H){const J=g[H];if(!J.da&&J.listener==A&&J.capture==!!C&&J.ha==b)return H}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),Ue={};function Qe(g,A,C,b,H){if(Array.isArray(A)){for(let J=0;J<A.length;J++)Qe(g,A[J],C,b,H);return null}return C=Kn(C),g&&g[Ze]?g.J(A,C,d(b)?!!b.capture:!1,H):ci(g,A,C,!1,b,H)}function ci(g,A,C,b,H,J){if(!A)throw Error("Invalid event type");const ae=d(H)?!!H.capture:!!H;let Me=st(g);if(Me||(g[Oe]=Me=new pe(g)),C=Me.add(A,C,b,ae,J),C.proxy)return C;if(b=Gs(),C.proxy=b,b.src=g,b.listener=C,g.addEventListener)O||(H=ae),H===void 0&&(H=!1),g.addEventListener(A.toString(),b,H);else if(g.attachEvent)g.attachEvent(mt(A.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Gs(){function g(C){return A.call(g.src,g.listener,C)}const A=Ae;return g}function Hs(g,A,C,b,H){if(Array.isArray(A))for(var J=0;J<A.length;J++)Hs(g,A[J],C,b,H);else b=d(b)?!!b.capture:!!b,C=Kn(C),g&&g[Ze]?(g=g.i,J=String(A).toString(),J in g.g&&(A=g.g[J],C=De(A,C,b,H),C>-1&&(_e(A[C]),Array.prototype.splice.call(A,C,1),A.length==0&&(delete g.g[J],g.h--)))):g&&(g=st(g))&&(A=g.g[A.toString()],g=-1,A&&(g=De(A,C,b,H)),(C=g>-1?A[g]:null)&&Mi(C))}function Mi(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[Ze])Ie(A.i,g);else{var C=g.type,b=g.proxy;A.removeEventListener?A.removeEventListener(C,b,g.capture):A.detachEvent?A.detachEvent(mt(C),b):A.addListener&&A.removeListener&&A.removeListener(b),(C=st(A))?(Ie(C,g),C.h==0&&(C.src=null,A[Oe]=null)):_e(g)}}}function mt(g){return g in Ue?Ue[g]:Ue[g]="on"+g}function Ae(g,A){if(g.da)g=!0;else{A=new ye(A,this);const C=g.listener,b=g.ha||g.src;g.fa&&Mi(g),g=C.call(b,A)}return g}function st(g){return g=g[Oe],g instanceof pe?g:null}var It="__closure_events_fn_"+(Math.random()*1e9>>>0);function Kn(g){return typeof g=="function"?g:(g[It]||(g[It]=function(A){return g.handleEvent(A)}),g[It])}function gt(){L.call(this),this.i=new pe(this),this.M=this,this.G=null}E(gt,L),gt.prototype[Ze]=!0,gt.prototype.removeEventListener=function(g,A,C,b){Hs(this,g,A,C,b)};function nt(g,A){var C,b=g.G;if(b)for(C=[];b;b=b.G)C.push(b);if(g=g.M,b=A.type||A,typeof A=="string")A=new P(A,g);else if(A instanceof P)A.target=A.target||g;else{var H=A;A=new P(b,g),ue(A,H)}H=!0;let J,ae;if(C)for(ae=C.length-1;ae>=0;ae--)J=A.g=C[ae],H=Kt(J,b,!0,A)&&H;if(J=A.g=g,H=Kt(J,b,!0,A)&&H,H=Kt(J,b,!1,A)&&H,C)for(ae=0;ae<C.length;ae++)J=A.g=C[ae],H=Kt(J,b,!1,A)&&H}gt.prototype.N=function(){if(gt.Z.N.call(this),this.i){var g=this.i;for(const A in g.g){const C=g.g[A];for(let b=0;b<C.length;b++)_e(C[b]);delete g.g[A],g.h--}}this.G=null},gt.prototype.J=function(g,A,C,b){return this.i.add(String(g),A,!1,C,b)},gt.prototype.K=function(g,A,C,b){return this.i.add(String(g),A,!0,C,b)};function Kt(g,A,C,b){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();let H=!0;for(let J=0;J<A.length;++J){const ae=A[J];if(ae&&!ae.da&&ae.capture==C){const Me=ae.listener,bt=ae.ha||ae.src;ae.fa&&Ie(g.i,ae),H=Me.call(bt,b)!==!1&&H}}return H&&!b.defaultPrevented}function zs(g,A){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:u.setTimeout(g,A||0)}function Ks(g){g.g=zs(()=>{g.g=null,g.i&&(g.i=!1,Ks(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class $t extends L{constructor(A,C){super(),this.m=A,this.l=C,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Ks(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gn(g){L.call(this),this.h=g,this.g={}}E(gn,L);var Mn=[];function $s(g){Le(g.g,function(A,C){this.g.hasOwnProperty(C)&&Mi(A)},g),g.g={}}gn.prototype.N=function(){gn.Z.N.call(this),$s(this)},gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cs=u.JSON.stringify,Ho=u.JSON.parse,tc=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function nc(){}function ic(){}var di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function en(){P.call(this,"d")}E(en,P);function $n(){P.call(this,"c")}E($n,P);var Rt={},sc=null;function zo(){return sc=sc||new gt}Rt.Ia="serverreachability";function rc(g){P.call(this,Rt.Ia,g)}E(rc,P);function ki(g){const A=zo();nt(A,new rc(A))}Rt.STAT_EVENT="statevent";function Qr(g,A){P.call(this,Rt.STAT_EVENT,g),this.stat=A}E(Qr,P);function kt(g){const A=zo();nt(A,new Qr(A,g))}Rt.Ja="timingevent";function Pi(g,A){P.call(this,Rt.Ja,g),this.size=A}E(Pi,P);function Vi(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},A)}function fi(){this.g=!0}fi.prototype.ua=function(){this.g=!1};function oh(g,A,C,b,H,J){g.info(function(){if(g.g)if(J){var ae="",Me=J.split("&");for(let et=0;et<Me.length;et++){var bt=Me[et].split("=");if(bt.length>1){const Et=bt[0];bt=bt[1];const Xn=Et.split("_");ae=Xn.length>=2&&Xn[1]=="type"?ae+(Et+"="+bt+"&"):ae+(Et+"=redacted&")}}}else ae=null;else ae=J;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+A+`
`+C+`
`+ae})}function oc(g,A,C,b,H,J,ae){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+A+`
`+C+`
`+J+" "+ae})}function Ui(g,A,C,b){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+ah(g,C)+(b?" "+b:"")})}function Xr(g,A){g.info(function(){return"TIMEOUT: "+A})}fi.prototype.info=function(){};function ah(g,A){if(!g.g)return A;if(!A)return null;try{const J=JSON.parse(A);if(J){for(g=0;g<J.length;g++)if(Array.isArray(J[g])){var C=J[g];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ae=1;ae<b.length;ae++)b[ae]=""}}}}return cs(J)}catch{return A}}var Wr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hl;function jr(){}E(jr,nc),jr.prototype.g=function(){return new XMLHttpRequest},hl=new jr;function ds(g){return encodeURIComponent(String(g))}function ac(g){var A=1;g=g.split(":");const C=[];for(;A>0&&g.length;)C.push(g.shift()),A--;return g.length&&C.push(g.join(":")),C}function hi(g,A,C,b){this.j=g,this.i=A,this.l=C,this.S=b||1,this.V=new gn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pi}function pi(){this.i=null,this.g="",this.h=!1}var Pt={},Qt={};function Li(g,A,C){g.M=1,g.A=Zr(Ut(A)),g.u=C,g.R=!0,Ko(g,null)}function Ko(g,A){g.F=Date.now(),Oi(g),g.B=Ut(g.A);var C=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),Qo(C.i,"t",b),g.C=0,C=g.j.L,g.h=new pi,g.g=Ac(g.j,C?A:null,!g.u),g.P>0&&(g.O=new $t(h(g.Y,g,g.g),g.P)),A=g.V,C=g.g,b=g.ba;var H="readystatechange";Array.isArray(H)||(H&&(Mn[0]=H.toString()),H=Mn);for(let J=0;J<H.length;J++){const ae=Qe(C,H[J],b||A.handleEvent,!1,A.h||A);if(!ae)break;A.g[ae.key]=ae}A=g.J?q(g.J):{},g.u?(g.v||(g.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,A)):(g.v="GET",g.g.ea(g.B,g.v,null,A)),ki(),oh(g.i,g.v,g.B,g.l,g.S,g.u)}hi.prototype.ba=function(g){g=g.target;const A=this.O;A&&yi(g)==3?A.j():this.Y(g)},hi.prototype.Y=function(g){try{if(g==this.g)e:{const Me=yi(this.g),bt=this.g.ya(),et=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||Me!=4||bt==7||(bt==8||et<=0?ki(3):ki(2)),Fi(this);var A=this.g.ca();this.X=A;var C=lh(this);if(this.o=A==200,oc(this.i,this.v,this.B,this.l,this.S,Me,A),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(b)){var J=b;break t}}J=null}if(g=J)Ui(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Bi(this,g);else{this.o=!1,this.m=3,kt(12),kn(this),Yn(this);break e}}if(this.R){g=!0;let Et;for(;!this.K&&this.C<C.length;)if(Et=uc(this,C),Et==Qt){Me==4&&(this.m=4,kt(14),g=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Pt){this.m=4,kt(15),Ui(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ui(this.i,this.l,Et,null),Bi(this,Et);if(lc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||C.length!=0||this.h.h||(this.m=1,kt(16),g=!1),this.o=this.o&&g,!g)Ui(this.i,this.l,C,"[Invalid Chunked Response]"),kn(this),Yn(this);else if(C.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),bl(ae),ae.P=!0,kt(11))}}else Ui(this.i,this.l,C,null),Bi(this,C);Me==4&&kn(this),this.o&&!this.K&&(Me==4?_c(this.j,this):(this.o=!1,Oi(this)))}else hs(this.g),A==400&&C.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),kn(this),Yn(this)}}}catch{}finally{}};function lh(g){if(!lc(g))return g.g.la();const A=tn(g.g);if(A==="")return"";let C="";const b=A.length,H=yi(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return kn(g),Yn(g),"";g.h.i=new u.TextDecoder}for(let J=0;J<b;J++)g.h.h=!0,C+=g.h.i.decode(A[J],{stream:!(H&&J==b-1)});return A.length=0,g.h.g+=C,g.C=0,g.h.g}function lc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function uc(g,A){var C=g.C,b=A.indexOf(`
`,C);return b==-1?Qt:(C=Number(A.substring(C,b)),isNaN(C)?Pt:(b+=1,b+C>A.length?Qt:(A=A.slice(b,b+C),g.C=b+C,A)))}hi.prototype.cancel=function(){this.K=!0,kn(this)};function Oi(g){g.T=Date.now()+g.H,$o(g,g.H)}function $o(g,A){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Vi(h(g.aa,g),A)}function Fi(g){g.D&&(u.clearTimeout(g.D),g.D=null)}hi.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Xr(this.i,this.B),this.M!=2&&(ki(),kt(17)),kn(this),this.m=2,Yn(this)):$o(this,this.T-g)};function Yn(g){g.j.I==0||g.K||_c(g.j,g)}function kn(g){Fi(g);var A=g.O;A&&typeof A.dispose=="function"&&A.dispose(),g.O=null,$s(g.V),g.g&&(A=g.g,g.g=null,A.abort(),A.dispose())}function Bi(g,A){try{var C=g.j;if(C.I!=0&&(C.g==g||Gi(C.h,g))){if(!g.L&&Gi(C.h,g)&&C.I==3){try{var b=C.Ba.g.parse(A)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)ea(C),er(C);else break e;oo(C),kt(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Vi(h(C.Va,C),6e3));qi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ji(C,11)}else if((g.L||C.g==g)&&ea(C),!N(A))for(H=C.Ba.g.parse(A),A=0;A<H.length;A++){let et=H[A];const Et=et[0];if(!(Et<=C.K))if(C.K=Et,et=et[1],C.I==2)if(et[0]=="c"){C.M=et[1],C.ba=et[2];const Xn=et[3];Xn!=null&&(C.ka=Xn,C.j.info("VER="+C.ka));const Qi=et[4];Qi!=null&&(C.za=Qi,C.j.info("SVER="+C.za));const _i=et[5];_i!=null&&typeof _i=="number"&&_i>0&&(b=1.5*_i,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const vi=g.g;if(vi){const ao=vi.g?vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ao){var J=b.h;J.g||ao.indexOf("spdy")==-1&&ao.indexOf("quic")==-1&&ao.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(gl(J,J.h),J.h=null))}if(b.G){const ta=vi.g?vi.g.getResponseHeader("X-HTTP-Session-Id"):null;ta&&(b.wa=ta,rt(b.J,b.G,ta))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var ae=g;if(b.na=Tc(b,b.L?b.ba:null,b.W),ae.L){yl(b.h,ae);var Me=ae,bt=b.O;bt&&(Me.H=bt),Me.D&&(Fi(Me),Oi(Me)),b.g=ae}else gc(b);C.i.length>0&&Yi(C)}else et[0]!="stop"&&et[0]!="close"||Ji(C,7);else C.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Ji(C,7):Il(C):et[0]!="noop"&&C.l&&C.l.qa(et),C.A=0)}}ki(4)}catch{}}var Vt=class{constructor(g,A){this.g=g,this.map=A}};function pl(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ml(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function qi(g){return g.h?1:g.g?g.g.size:0}function Gi(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function gl(g,A){g.g?g.g.add(A):g.h=A}function yl(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}pl.prototype.cancel=function(){if(this.i=_l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function _l(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const C of g.g.values())A=A.concat(C.G);return A}return I(g.i)}var cc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yo(g,A){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const b=g[C].indexOf("=");let H,J=null;b>=0?(H=g[C].substring(0,b),J=g[C].substring(b+1)):H=g[C],A(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Pn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;g instanceof Pn?(this.l=g.l,Xt(this,g.j),this.o=g.o,this.g=g.g,Ys(this,g.u),this.h=g.h,vl(this,pc(g.i)),this.m=g.m):g&&(A=String(g).match(cc))?(this.l=!1,Xt(this,A[1]||"",!0),this.o=Hi(A[2]||""),this.g=Hi(A[3]||"",!0),Ys(this,A[4]),this.h=Hi(A[5]||"",!0),vl(this,A[6]||"",!0),this.m=Hi(A[7]||"")):(this.l=!1,this.i=new Qs(null,this.l))}Pn.prototype.toString=function(){const g=[];var A=this.j;A&&g.push(eo(A,Jo,!0),":");var C=this.g;return(C||A=="file")&&(g.push("//"),(A=this.o)&&g.push(eo(A,Jo,!0),"@"),g.push(ds(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(eo(C,C.charAt(0)=="/"?El:dc,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",eo(C,fc)),g.join("")},Pn.prototype.resolve=function(g){const A=Ut(this);let C=!!g.j;C?Xt(A,g.j):C=!!g.o,C?A.o=g.o:C=!!g.g,C?A.g=g.g:C=g.u!=null;var b=g.h;if(C)Ys(A,g.u);else if(C=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=A.h.lastIndexOf("/");H!=-1&&(b=A.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let ae=0;ae<H.length;){const Me=H[ae++];Me=="."?b&&ae==H.length&&J.push(""):Me==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),b&&ae==H.length&&J.push("")):(J.push(Me),b=!0)}b=J.join("/")}else b=H}return C?A.h=b:C=g.i.toString()!=="",C?vl(A,pc(g.i)):C=!!g.m,C&&(A.m=g.m),A};function Ut(g){return new Pn(g)}function Xt(g,A,C){g.j=C?Hi(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function Ys(g,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);g.u=A}else g.u=null}function vl(g,A,C){A instanceof Qs?(g.i=A,Xo(g.i,g.l)):(C||(A=eo(A,Js)),g.i=new Qs(A,g.l))}function rt(g,A,C){g.i.set(A,C)}function Zr(g){return rt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Hi(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function eo(g,A,C){return typeof g=="string"?(g=encodeURI(g).replace(A,Sn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Sn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Jo=/[#\/\?@]/g,dc=/[#\?:]/g,El=/[#\?]/g,Js=/[#\?@]/g,fc=/#/g;function Qs(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function Cn(g){g.g||(g.g=new Map,g.h=0,g.i&&Yo(g.i,function(A,C){g.add(decodeURIComponent(A.replace(/\+/g," ")),C)}))}n=Qs.prototype,n.add=function(g,A){Cn(this),this.i=null,g=Xs(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(A),this.h+=1,this};function hc(g,A){Cn(g),A=Xs(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function Tl(g,A){return Cn(g),A=Xs(g,A),g.g.has(A)}n.forEach=function(g,A){Cn(this),this.g.forEach(function(C,b){C.forEach(function(H){g.call(A,H,b,this)},this)},this)};function Al(g,A){Cn(g);let C=[];if(typeof A=="string")Tl(g,A)&&(C=C.concat(g.g.get(Xs(g,A))));else for(g=Array.from(g.g.values()),A=0;A<g.length;A++)C=C.concat(g[A]);return C}n.set=function(g,A){return Cn(this),this.i=null,g=Xs(this,g),Tl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},n.get=function(g,A){return g?(g=Al(this,g),g.length>0?String(g[0]):A):A};function Qo(g,A,C){hc(g,A),C.length>0&&(g.i=null,g.g.set(Xs(g,A),I(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(let b=0;b<A.length;b++){var C=A[b];const H=ds(C);C=Al(this,C);for(let J=0;J<C.length;J++){let ae=H;C[J]!==""&&(ae+="="+ds(C[J])),g.push(ae)}}return this.i=g.join("&")};function pc(g){const A=new Qs;return A.i=g.i,g.g&&(A.g=new Map(g.g),A.h=g.h),A}function Xs(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Xo(g,A){A&&!g.j&&(Cn(g),g.i=null,g.g.forEach(function(C,b){const H=b.toLowerCase();b!=H&&(hc(this,b),Qo(this,H,C))},g)),g.j=A}function mi(g,A){const C=new fi;if(u.Image){const b=new Image;b.onload=_(Jn,C,"TestLoadImage: loaded",!0,A,b),b.onerror=_(Jn,C,"TestLoadImage: error",!1,A,b),b.onabort=_(Jn,C,"TestLoadImage: abort",!1,A,b),b.ontimeout=_(Jn,C,"TestLoadImage: timeout",!1,A,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else A(!1)}function Sl(g,A){const C=new fi,b=new AbortController,H=setTimeout(()=>{b.abort(),Jn(C,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:b.signal}).then(J=>{clearTimeout(H),J.ok?Jn(C,"TestPingServer: ok",!0,A):Jn(C,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(H),Jn(C,"TestPingServer: error",!1,A)})}function Jn(g,A,C,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(C)}catch{}}function Ws(){this.g=new tc}function zi(g){this.i=g.Sb||null,this.h=g.ab||!1}E(zi,nc),zi.prototype.g=function(){return new to(this.i,this.h)};function to(g,A){gt.call(this),this.H=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(to,gt),n=to.prototype,n.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=A,this.readyState=1,gi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(A.body=g),(this.H||u).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,js(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,gi(this)),this.g&&(this.readyState=3,gi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?js(this):gi(this),this.readyState==3&&Wo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,js(this))},n.Na=function(g){this.g&&(this.response=g,js(this))},n.ga=function(){this.g&&js(this)};function js(g){g.readyState=4,g.l=null,g.j=null,g.B=null,gi(g)}n.setRequestHeader=function(g,A){this.A.append(g,A)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var C=A.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=A.next();return g.join(`\r
`)};function gi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(to.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Qn(g){let A="";return Le(g,function(C,b){A+=b,A+=":",A+=C,A+=`\r
`}),A}function no(g,A,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=Qn(C),typeof g=="string"?C!=null&&ds(C):rt(g,A,C))}function ut(g){gt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ut,gt);var Ki=/^https?$/i,Cl=["POST","PUT"];n=ut.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,A,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hl.g(),this.g.onreadystatechange=T(h(this.Ca,this));try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(J){io(this,J);return}if(g=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)C.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const J of b.keys())C.set(J,b.get(J));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(J=>J.toLowerCase()=="content-type"),H=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Cl,A,void 0)>=0)||b||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ae]of C)this.g.setRequestHeader(J,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(J){io(this,J)}};function io(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.o=5,wl(g),fs(g)}function wl(g){g.A||(g.A=!0,nt(g,"complete"),nt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,nt(this,"complete"),nt(this,"abort"),fs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fs(this,!0)),ut.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?so(this):this.Xa())},n.Xa=function(){so(this)};function so(g){if(g.h&&typeof a<"u"){if(g.v&&yi(g)==4)setTimeout(g.Ca.bind(g),0);else if(nt(g,"readystatechange"),yi(g)==4){g.h=!1;try{const J=g.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var C;if(!(C=A)){var b;if(b=J===0){let ae=String(g.D).match(cc)[1]||null;!ae&&u.self&&u.self.location&&(ae=u.self.location.protocol.slice(0,-1)),b=!Ki.test(ae?ae.toLowerCase():"")}C=b}if(C)nt(g,"complete"),nt(g,"success");else{g.o=6;try{var H=yi(g)>2?g.g.statusText:""}catch{H=""}g.l=H+" ["+g.ca()+"]",wl(g)}}finally{fs(g)}}}}function fs(g,A){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,A||nt(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function yi(g){return g.g?g.g.readyState:0}n.ca=function(){try{return yi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Ho(A)}};function tn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function hs(g){const A={};g=(g.g&&yi(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(N(g[b]))continue;var C=ac(g[b]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const J=A[H]||[];A[H]=J,J.push(C)}Je(A,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $i(g,A,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||A}function Zs(g){this.za=0,this.i=[],this.j=new fi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$i("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$i("baseRetryDelayMs",5e3,g),this.Za=$i("retryDelaySeedMs",1e4,g),this.Ta=$i("forwardChannelMaxRetries",2,g),this.va=$i("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new pl(g&&g.concurrentRequestLimit),this.Ba=new Ws,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Zs.prototype,n.ka=8,n.I=1,n.connect=function(g,A,C,b){kt(0),this.W=g,this.H=A||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=Tc(this,null,this.W),Yi(this)};function Il(g){if(jo(g),g.I==3){var A=g.V++,C=Ut(g.J);if(rt(C,"SID",g.M),rt(C,"RID",A),rt(C,"TYPE","terminate"),ro(g,C),A=new hi(g,g.j,A),A.M=2,A.A=Zr(Ut(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(A.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=A.A,C=!0),C||(A.g=Ac(A.j,null),A.g.ea(A.A)),A.F=Date.now(),Oi(A)}Ec(g)}function er(g){g.g&&(bl(g),g.g.cancel(),g.g=null)}function jo(g){er(g),g.v&&(u.clearTimeout(g.v),g.v=null),ea(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Yi(g){if(!ml(g.h)&&!g.m){g.m=!0;var A=g.Ea;ce||M(),le||(ce(),le=!0),x.add(A,g),g.D=0}}function Zo(g,A){return qi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=A.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Vi(h(g.Ea,g,A),vc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const H=new hi(this,this.j,g);let J=this.o;if(this.U&&(J?(J=q(J),ue(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var A=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(A+=b,A>4096){A=C;break e}if(A===4096||C===this.i.length-1){A=C+1;break e}}A=1e3}else A=1e3;A=mc(this,H,A),C=Ut(this.J),rt(C,"RID",g),rt(C,"CVER",22),this.G&&rt(C,"X-HTTP-Session-Id",this.G),ro(this,C),J&&(this.R?A="headers="+ds(Qn(J))+"&"+A:this.u&&no(C,this.u,J)),gl(this.h,H),this.Ra&&rt(C,"TYPE","init"),this.S?(rt(C,"$req",A),rt(C,"SID","null"),H.U=!0,Li(H,C,null)):Li(H,C,A),this.I=2}}else this.I==3&&(g?Rl(this,g):this.i.length==0||ml(this.h)||Rl(this))};function Rl(g,A){var C;A?C=A.l:C=g.V++;const b=Ut(g.J);rt(b,"SID",g.M),rt(b,"RID",C),rt(b,"AID",g.K),ro(g,b),g.u&&g.o&&no(b,g.u,g.o),C=new hi(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),A&&(g.i=A.G.concat(g.i)),A=mc(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),gl(g.h,C),Li(C,b,A)}function ro(g,A){g.H&&Le(g.H,function(C,b){rt(A,b,C)}),g.l&&Le({},function(C,b){rt(A,b,C)})}function mc(g,A,C){C=Math.min(g.i.length,C);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var H=g.i;let Me=-1;for(;;){const bt=["count="+C];Me==-1?C>0?(Me=H[0].g,bt.push("ofs="+Me)):Me=0:bt.push("ofs="+Me);let et=!0;for(let Et=0;Et<C;Et++){var J=H[Et].g;const Xn=H[Et].map;if(J-=Me,J<0)Me=Math.max(0,H[Et].g-100),et=!1;else try{J="req"+J+"_"||"";try{var ae=Xn instanceof Map?Xn:Object.entries(Xn);for(const[Qi,_i]of ae){let vi=_i;d(_i)&&(vi=cs(_i)),bt.push(J+Qi+"="+encodeURIComponent(vi))}}catch(Qi){throw bt.push(J+"type="+encodeURIComponent("_badmap")),Qi}}catch{b&&b(Xn)}}if(et){ae=bt.join("&");break e}}ae=void 0}return g=g.i.splice(0,C),A.G=g,ae}function gc(g){if(!g.g&&!g.v){g.Y=1;var A=g.Da;ce||M(),le||(ce(),le=!0),x.add(A,g),g.A=0}}function oo(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Vi(h(g.Da,g),vc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Vi(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),er(this),yc(this))};function bl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function yc(g){g.g=new hi(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var A=Ut(g.na);rt(A,"RID","rpc"),rt(A,"SID",g.M),rt(A,"AID",g.K),rt(A,"CI",g.F?"0":"1"),!g.F&&g.ia&&rt(A,"TO",g.ia),rt(A,"TYPE","xmlhttp"),ro(g,A),g.u&&g.o&&no(A,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=Zr(Ut(A)),C.u=null,C.R=!0,Ko(C,g)}n.Va=function(){this.C!=null&&(this.C=null,er(this),oo(this),kt(19))};function ea(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function _c(g,A){var C=null;if(g.g==A){ea(g),bl(g),g.g=null;var b=2}else if(Gi(g.h,A))C=A.G,yl(g.h,A),b=1;else return;if(g.I!=0){if(A.o)if(b==1){C=A.u?A.u.length:0,A=Date.now()-A.F;var H=g.D;b=zo(),nt(b,new Pi(b,C)),Yi(g)}else gc(g);else if(H=A.m,H==3||H==0&&A.X>0||!(b==1&&Zo(g,A)||b==2&&oo(g)))switch(C&&C.length>0&&(A=g.h,A.i=A.i.concat(C)),H){case 1:Ji(g,5);break;case 4:Ji(g,10);break;case 3:Ji(g,6);break;default:Ji(g,2)}}}function vc(g,A){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*A}function Ji(g,A){if(g.j.info("Error code "+A),A==2){var C=h(g.bb,g),b=g.Ua;const H=!b;b=new Pn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Xt(b,"https"),Zr(b),H?mi(b.toString(),C):Sl(b.toString(),C)}else kt(2);g.I=0,g.l&&g.l.pa(A),Ec(g),jo(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Ec(g){if(g.I=0,g.ja=[],g.l){const A=_l(g.h);(A.length!=0||g.i.length!=0)&&(k(g.ja,A),k(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function Tc(g,A,C){var b=C instanceof Pn?Ut(C):new Pn(C);if(b.g!="")A&&(b.g=A+"."+b.g),Ys(b,b.u);else{var H=u.location;b=H.protocol,A=A?A+"."+H.hostname:H.hostname,H=+H.port;const J=new Pn(null);b&&Xt(J,b),A&&(J.g=A),H&&Ys(J,H),C&&(J.h=C),b=J}return C=g.G,A=g.wa,C&&A&&rt(b,C,A),rt(b,"VER",g.ka),ro(g,b),b}function Ac(g,A,C){if(A&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Aa&&!g.ma?new ut(new zi({ab:C})):new ut(g.ma),A.Fa(g.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sc(){}n=Sc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function tr(){}tr.prototype.g=function(g,A){return new yn(g,A)};function yn(g,A){gt.call(this),this.g=new Zs(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(g?g["X-WebChannel-Client-Profile"]=A.sa:g={"X-WebChannel-Client-Profile":A.sa}),this.g.U=g,(g=A&&A.Qb)&&!N(g)&&(this.g.u=g),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!N(A)&&(this.g.G=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new ps(this)}E(yn,gt),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Il(this.g)},yn.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=cs(g),g=C);A.i.push(new Vt(A.Ya++,g)),A.I==3&&Yi(A)},yn.prototype.N=function(){this.g.l=null,delete this.j,Il(this.g),delete this.g,yn.Z.N.call(this)};function Cc(g){en.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const C in A){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}E(Cc,en);function wc(){$n.call(this),this.status=1}E(wc,$n);function ps(g){this.g=g}E(ps,Sc),ps.prototype.ra=function(){nt(this.g,"a")},ps.prototype.qa=function(g){nt(this.g,new Cc(g))},ps.prototype.pa=function(g){nt(this.g,new wc)},ps.prototype.oa=function(){nt(this.g,"b")},tr.prototype.createWebChannel=tr.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,dC=function(){return new tr},cC=function(){return zo()},uC=Rt,Mm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wr.NO_ERROR=0,Wr.TIMEOUT=8,Wr.HTTP_ERROR=6,zd=Wr,fl.COMPLETE="complete",lC=fl,ic.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",gt.prototype.listen=gt.prototype.J,yu=ic,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,aC=ut}).apply(typeof Nd<"u"?Nd:typeof self<"u"?self:typeof window<"u"?window:{});const NE="@firebase/firestore",DE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let il="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Df("@firebase/firestore");function Da(){return xo.logLevel}function me(n,...e){if(xo.logLevel<=He.DEBUG){const t=e.map(Tg);xo.debug(`Firestore (${il}): ${n}`,...t)}}function Ps(n,...e){if(xo.logLevel<=He.ERROR){const t=e.map(Tg);xo.error(`Firestore (${il}): ${n}`,...t)}}function Ja(n,...e){if(xo.logLevel<=He.WARN){const t=e.map(Tg);xo.warn(`Firestore (${il}): ${n}`,...t)}}function Tg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,fC(n,i,t)}function fC(n,e,t){let i=`FIRESTORE (${il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ps(i),new Error(i)}function it(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||fC(e,o,i)}function Ne(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends xi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class R2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class b2{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Pr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Pr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it(typeof i.accessToken=="string",31837,{l:i}),new hC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class x2{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class N2{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new x2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ME{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const i=a=>{a.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ME(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ME(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=M2(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function ze(n,e){return n<e?-1:n>e?1:0}function km(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return hm(o)===hm(a)?ze(o,a):hm(o)?1:-1}return ze(n.length,e.length)}const k2=55296,P2=57343;function hm(n){const e=n.charCodeAt(0);return e>=k2&&e<=P2}function Qa(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="__name__";class es{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return es.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=es.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return ze(e.length,t.length)}static compareSegments(e,t){const i=es.isNumericId(e),o=es.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?es.extractNumericId(e).compare(es.extractNumericId(t)):km(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kr.fromString(e.substring(4,e.length-2))}}class pt extends es{construct(e,t,i){return new pt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const V2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends es{construct(e,t,i){return new ln(e,t,i)}static isValidIdentifier(e){return V2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kE}static keyField(){return new ln([kE])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(pt.fromString(e))}static fromName(e){return new Te(pt.fromString(e).popFirst(5))}static empty(){return new Te(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(n,e,t){if(!t)throw new he(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function U2(n,e,t,i){if(e===!0&&i===!0)throw new he(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PE(n){if(!Te.isDocumentKey(n))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VE(n){if(Te.isDocumentKey(n))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Mf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function ls(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Mf(n);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n,e){const t={typeString:n};return e&&(t.value=e),t}function Fu(n,e){if(!mC(n))throw new he(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new he(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=-62135596800,LE=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*LE);return new vt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<UE)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LE}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fu(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-UE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:Ht("string",vt._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new vt(0,0))}static max(){return new be(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=-1;function L2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new Lr(o,Te.empty(),e)}function O2(n){return new Lr(n.readTime,n.key,bu)}class Lr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Lr(be.min(),Te.empty(),bu)}static max(){return new Lr(be.max(),Te.empty(),bu)}}function F2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==B2)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const h=p;t(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function G2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function rl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=-1;function Pf(n){return n==null}function af(n){return n===0&&1/n==-1/0}function H2(n){return typeof n=="number"&&Number.isInteger(n)&&!af(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="";function z2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OE(e)),e=K2(n.get(t),e);return OE(e)}function K2(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case gC:t+="";break;default:t+=a}}return t}function OE(n){return n+gC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t){this.comparator=e,this.root=t||an.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dd(this.root,e,this.comparator,!0)}}class Dd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??an.RED,this.left=o??an.EMPTY,this.right=a??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new an(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return an.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new an(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new BE(this.data.getIterator())}getIteratorFrom(e){return new BE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jt(this.comparator);return t.data=e,t}}class BE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Jt(ln.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new _C("Invalid base64 string: "+a):a}})(e);return new un(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const $2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(n){if(it(!!n,39018),typeof n=="string"){let e=0;const t=$2.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fr(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="server_timestamp",EC="__type__",TC="__previous_value__",AC="__local_write_time__";function Cg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[EC])==null?void 0:i.stringValue)===vC}function Vf(n){const e=n.mapValue.fields[TC];return Cg(e)?Vf(e):e}function xu(n){const e=Or(n.mapValue.fields[AC].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,t,i,o,a,u,d,p,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=_}}const lf="(default)";class Nu{constructor(e,t){this.projectId=e,this.database=t||lf}static empty(){return new Nu("","")}get isDefaultDatabase(){return this.database===lf}isEqual(e){return e instanceof Nu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="__type__",J2="__max__",Md={mapValue:{}},CC="__vector__",uf="value";function Br(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cg(n)?4:X2(n)?9007199254740991:Q2(n)?10:11:we(28295,{value:n})}function us(n,e){if(n===e)return!0;const t=Br(n);if(t!==Br(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xu(n).isEqual(xu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Or(o.timestampValue),d=Or(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Fr(o.bytesValue).isEqual(Fr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return Mt(o.geoPointValue.latitude)===Mt(a.geoPointValue.latitude)&&Mt(o.geoPointValue.longitude)===Mt(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return Mt(o.integerValue)===Mt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=Mt(o.doubleValue),d=Mt(a.doubleValue);return u===d?af(u)===af(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Qa(n.arrayValue.values||[],e.arrayValue.values||[],us);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(FE(u)!==FE(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!us(u[p],d[p])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function Du(n,e){return(n.values||[]).find((t=>us(t,e)))!==void 0}function Xa(n,e){if(n===e)return 0;const t=Br(n),i=Br(e);if(t!==i)return ze(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Mt(a.integerValue||a.doubleValue),p=Mt(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return qE(n.timestampValue,e.timestampValue);case 4:return qE(xu(n),xu(e));case 5:return km(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Fr(a),p=Fr(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let h=0;h<d.length&&h<p.length;h++){const _=ze(d[h],p[h]);if(_!==0)return _}return ze(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=ze(Mt(a.latitude),Mt(u.latitude));return d!==0?d:ze(Mt(a.longitude),Mt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return GE(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var T,I,k,F;const d=a.fields||{},p=u.fields||{},h=(T=d[uf])==null?void 0:T.arrayValue,_=(I=p[uf])==null?void 0:I.arrayValue,E=ze(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((F=_==null?void 0:_.values)==null?void 0:F.length)||0);return E!==0?E:GE(h,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Md.mapValue&&u===Md.mapValue)return 0;if(a===Md.mapValue)return 1;if(u===Md.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),h=u.fields||{},_=Object.keys(h);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const T=km(p[E],_[E]);if(T!==0)return T;const I=Xa(d[p[E]],h[_[E]]);if(I!==0)return I}return ze(p.length,_.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function qE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=Or(n),i=Or(e),o=ze(t.seconds,i.seconds);return o!==0?o:ze(t.nanos,i.nanos)}function GE(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Xa(t[o],i[o]);if(a)return a}return ze(t.length,i.length)}function Wa(n){return Pm(n)}function Pm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Or(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Fr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Pm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Pm(t.fields[u])}`;return o+"}"})(n.mapValue):we(61005,{value:n})}function Kd(n){switch(Br(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vf(n);return e?16+Kd(e):16;case 5:return 2*n.stringValue.length;case 6:return Fr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Kd(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return zr(i.fields,((a,u)=>{o+=a.length+Kd(u)})),o})(n.mapValue);default:throw we(13486,{value:n})}}function HE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vm(n){return!!n&&"integerValue"in n}function wg(n){return!!n&&"arrayValue"in n}function zE(n){return!!n&&"nullValue"in n}function KE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $d(n){return!!n&&"mapValue"in n}function Q2(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[SC])==null?void 0:i.stringValue)===CC}function Au(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return zr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Au(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Au(n.arrayValue.values[t]);return e}return{...n}}function X2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===J2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!$d(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(t)}setAll(e){let t=ln.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=Au(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());$d(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return us(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];$d(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){zr(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Dn(Au(this.value))}}function wC(n){const e=[];return zr(n.fields,((t,i)=>{const o=new ln([t]);if($d(i)){const a=wC(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new hn(e,0,be.min(),be.min(),be.min(),Dn.empty(),0)}static newFoundDocument(e,t,i,o){return new hn(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new hn(e,2,t,be.min(),be.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,be.min(),be.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t){this.position=e,this.inclusive=t}}function $E(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Te.comparator(Te.fromName(u.referenceValue),t.key):i=Xa(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function YE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!us(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t="asc"){this.field=e,this.dir=t}}function W2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{}class Gt extends IC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Z2(e,t,i):t==="array-contains"?new nD(e,i):t==="in"?new iD(e,i):t==="not-in"?new sD(e,i):t==="array-contains-any"?new rD(e,i):new Gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new eD(e,i):new tD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xa(t,this.value)):t!==null&&Br(this.value)===Br(t)&&this.matchesComparison(Xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ri extends IC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ri(e,t)}matches(e){return RC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function RC(n){return n.op==="and"}function bC(n){return j2(n)&&RC(n)}function j2(n){for(const e of n.filters)if(e instanceof Ri)return!1;return!0}function Um(n){if(n instanceof Gt)return n.field.canonicalString()+n.op.toString()+Wa(n.value);if(bC(n))return n.filters.map((e=>Um(e))).join(",");{const e=n.filters.map((t=>Um(t))).join(",");return`${n.op}(${e})`}}function xC(n,e){return n instanceof Gt?(function(i,o){return o instanceof Gt&&i.op===o.op&&i.field.isEqual(o.field)&&us(i.value,o.value)})(n,e):n instanceof Ri?(function(i,o){return o instanceof Ri&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&xC(u,o.filters[d])),!0):!1})(n,e):void we(19439)}function NC(n){return n instanceof Gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wa(t.value)}`})(n):n instanceof Ri?(function(t){return t.op.toString()+" {"+t.getFilters().map(NC).join(" ,")+"}"})(n):"Filter"}class Z2 extends Gt{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class eD extends Gt{constructor(e,t){super(e,"in",t),this.keys=DC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tD extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=DC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function DC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class nD extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wg(t)&&Du(t.arrayValue,this.value)}}class iD extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Du(this.value.arrayValue,t)}}class sD extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Du(this.value.arrayValue,t)}}class rD extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Du(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function JE(n,e=null,t=[],i=[],o=null,a=null,u=null){return new oD(n,e,t,i,o,a,u)}function Ig(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Um(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Pf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Wa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Wa(i))).join(",")),e.Te=t}return e.Te}function Rg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!W2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!YE(n.startAt,e.startAt)&&YE(n.endAt,e.endAt)}function Lm(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aD(n,e,t,i,o,a,u,d){return new ol(n,e,t,i,o,a,u,d)}function MC(n){return new ol(n)}function QE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kC(n){return n.collectionGroup!==null}function Su(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Jt(ln.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Mu(a,i))})),t.has(ln.keyField().canonicalString())||e.Ie.push(new Mu(ln.keyField(),i))}return e.Ie}function ts(n){const e=Ne(n);return e.Ee||(e.Ee=lD(e,Su(n))),e.Ee}function lD(n,e){if(n.limitType==="F")return JE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Mu(o.field,a)}));const t=n.endAt?new cf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new cf(n.startAt.position,n.startAt.inclusive):null;return JE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Om(n,e){const t=n.filters.concat([e]);return new ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fm(n,e,t){return new ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uf(n,e){return Rg(ts(n),ts(e))&&n.limitType===e.limitType}function PC(n){return`${Ig(ts(n))}|lt:${n.limitType}`}function Ma(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>NC(o))).join(", ")}]`),Pf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Wa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Wa(o))).join(",")),`Target(${i})`})(ts(n))}; limitType=${n.limitType})`}function Lf(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Te.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of Su(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const h=$E(u,d,p);return u.inclusive?h<=0:h<0})(i.startAt,Su(i),o)||i.endAt&&!(function(u,d,p){const h=$E(u,d,p);return u.inclusive?h>=0:h>0})(i.endAt,Su(i),o))})(n,e)}function uD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VC(n){return(e,t)=>{let i=!1;for(const o of Su(n)){const a=cD(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function cD(n,e,t){const i=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),h=d.data.field(a);return p!==null&&h!==null?Xa(p,h):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return yC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new St(Te.comparator);function Vs(){return dD}const UC=new St(Te.comparator);function _u(...n){let e=UC;for(const t of n)e=e.insert(t.key,t);return e}function LC(n){let e=UC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Io(){return Cu()}function OC(){return Cu()}function Cu(){return new Lo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const fD=new St(Te.comparator),hD=new Jt(Te.comparator);function Ke(...n){let e=hD;for(const t of n)e=e.add(t);return e}const pD=new Jt(ze);function mD(){return pD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function FC(n){return{integerValue:""+n}}function BC(n,e){return H2(e)?FC(e):bg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function gD(n,e,t){return n instanceof df?(function(o,a){const u={fields:{[EC]:{stringValue:vC},[AC]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Cg(a)&&(a=Vf(a)),a&&(u.fields[TC]=a),{mapValue:u}})(t,e):n instanceof ku?GC(n,e):n instanceof Pu?HC(n,e):(function(o,a){const u=qC(o,a),d=XE(u)+XE(o.Ae);return Vm(u)&&Vm(o.Ae)?FC(d):bg(o.serializer,d)})(n,e)}function yD(n,e,t){return n instanceof ku?GC(n,e):n instanceof Pu?HC(n,e):t}function qC(n,e){return n instanceof Vu?(function(i){return Vm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class df extends Of{}class ku extends Of{constructor(e){super(),this.elements=e}}function GC(n,e){const t=zC(e);for(const i of n.elements)t.some((o=>us(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Pu extends Of{constructor(e){super(),this.elements=e}}function HC(n,e){let t=zC(e);for(const i of n.elements)t=t.filter((o=>!us(o,i)));return{arrayValue:{values:t}}}class Vu extends Of{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function XE(n){return Mt(n.integerValue||n.doubleValue)}function zC(n){return wg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,t){this.field=e,this.transform=t}}function vD(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof ku&&o instanceof ku||i instanceof Pu&&o instanceof Pu?Qa(i.elements,o.elements,us):i instanceof Vu&&o instanceof Vu?us(i.Ae,o.Ae):i instanceof df&&o instanceof df})(n.transform,e.transform)}class ED{constructor(e,t){this.version=e,this.transformResults=t}}class En{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ff{}function KC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bf(n.key,En.none()):new Bu(n.key,n.data,En.none());{const t=n.data,i=Dn.empty();let o=new Jt(ln.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Kr(n.key,i,new Gn(o.toArray()),En.none())}}function TD(n,e,t){n instanceof Bu?(function(o,a,u){const d=o.value.clone(),p=jE(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Kr?(function(o,a,u){if(!Yd(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=jE(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll($C(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function wu(n,e,t,i){return n instanceof Bu?(function(a,u,d,p){if(!Yd(a.precondition,u))return d;const h=a.value.clone(),_=ZE(a.fieldTransforms,p,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Kr?(function(a,u,d,p){if(!Yd(a.precondition,u))return d;const h=ZE(a.fieldTransforms,p,u),_=u.data;return _.setAll($C(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Yd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function AD(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=qC(i.transform,o||null);a!=null&&(t===null&&(t=Dn.empty()),t.set(i.field,a))}return t||null}function WE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Qa(i,o,((a,u)=>vD(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Bu extends Ff{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Kr extends Ff{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $C(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function jE(n,e,t){const i=new Map;it(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,yD(u,d,t[o]))}return i}function ZE(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,gD(a,u,e))}return i}class Bf extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SD extends Ff{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&TD(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=wu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=wu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=OC();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=KC(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,((t,i)=>WE(t,i)))&&Qa(this.baseMutations,e.baseMutations,((t,i)=>WE(t,i)))}}class xg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){it(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return fD})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new xg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Ye;function RD(n){switch(n){case ee.OK:return we(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function YC(n){if(n===void 0)return Ps("GRPC error has no .code"),ee.UNKNOWN;switch(n){case qt.OK:return ee.OK;case qt.CANCELLED:return ee.CANCELLED;case qt.UNKNOWN:return ee.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ee.INTERNAL;case qt.UNAVAILABLE:return ee.UNAVAILABLE;case qt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case qt.NOT_FOUND:return ee.NOT_FOUND;case qt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case qt.ABORTED:return ee.ABORTED;case qt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case qt.DATA_LOSS:return ee.DATA_LOSS;default:return we(39323,{code:n})}}(Ye=qt||(qt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new kr([4294967295,4294967295],0);function eT(n){const e=bD().encode(n),t=new oC;return t.update(e),new Uint8Array(t.digest())}function tT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new kr([t,i],0),new kr([o,a],0)]}class Ng{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new vu(`Invalid padding: ${t}`);if(i<0)throw new vu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new vu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new vu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=kr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(kr.fromNumber(i)));return o.compare(xD)===1&&(o=new kr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eT(e),[i,o]=tT(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Ng(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=eT(e),[i,o]=tT(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,qu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new qf(be.min(),o,new St(ze),Vs(),Ke())}}class qu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new qu(i,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class JC{constructor(e,t){this.targetId=e,this.Ce=t}}class QC{constructor(e,t,i=un.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class nT{constructor(){this.ve=0,this.Fe=iT(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),t=Ke(),i=Ke();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:a})}})),new qu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=iT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ND{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vs(),this.Je=kd(),this.He=kd(),this.Ye=new St(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(Lm(a))if(i===0){const u=new Te(a.path);this.et(t,u,hn.newNoDocument(u,be.min()))}else it(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),p=d?this.ct(d,e,u):1;if(p!==0){this.it(t);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Fr(i).toUint8Array()}catch(p){if(p instanceof _C)return Ja("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Ng(u,o,a)}catch(p){return Ja(p instanceof vu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&Lm(d.target)){const p=new Te(d.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,hn.newNoDocument(p,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=Ke();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new qf(e,t,this.Ye,this.je,i);return this.je=Vs(),this.Je=kd(),this.He=kd(),this.Ye=new St(ze),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Jt(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Jt(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function kd(){return new St(Te.comparator)}function iT(){return new St(Te.comparator)}const DD={asc:"ASCENDING",desc:"DESCENDING"},MD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kD={and:"AND",or:"OR"};class PD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bm(n,e){return n.useProto3Json||Pf(e)?e:{value:e}}function ff(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function VD(n,e){return ff(n,e.toTimestamp())}function ns(n){return it(!!n,49232),be.fromTimestamp((function(t){const i=Or(t);return new vt(i.seconds,i.nanos)})(n))}function Dg(n,e){return qm(n,e).canonicalString()}function qm(n,e){const t=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function WC(n){const e=pt.fromString(n);return it(nw(e),10190,{key:e.toString()}),e}function Gm(n,e){return Dg(n.databaseId,e.path)}function pm(n,e){const t=WC(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(ZC(t))}function jC(n,e){return Dg(n.databaseId,e)}function UD(n){const e=WC(n);return e.length===4?pt.emptyPath():ZC(e)}function Hm(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZC(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sT(n,e,t){return{name:Gm(n,e),fields:t.value.mapValue.fields}}function LD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:we(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(it(_===void 0||typeof _=="string",58123),un.fromBase64String(_||"")):(it(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),un.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?ee.UNKNOWN:YC(h.code);return new he(_,h.message||"")})(u);t=new QC(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=pm(n,i.document.name),a=ns(i.document.updateTime),u=i.document.createTime?ns(i.document.createTime):be.min(),d=new Dn({mapValue:{fields:i.document.fields}}),p=hn.newFoundDocument(o,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];t=new Jd(h,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=pm(n,i.document),a=i.readTime?ns(i.readTime):be.min(),u=hn.newNoDocument(o,a),d=i.removedTargetIds||[];t=new Jd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=pm(n,i.document),a=i.removedTargetIds||[];t=new Jd([],a,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new ID(o,a),d=i.targetId;t=new JC(d,u)}}return t}function OD(n,e){let t;if(e instanceof Bu)t={update:sT(n,e.key,e.value)};else if(e instanceof Bf)t={delete:Gm(n,e.key)};else if(e instanceof Kr)t={update:sT(n,e.key,e.data),updateMask:YD(e.fieldMask)};else{if(!(e instanceof SD))return we(16599,{Vt:e.type});t={verify:Gm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof df)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ku)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Pu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Vu)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw we(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:VD(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:we(27497)})(n,e.precondition)),t}function FD(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?ns(o.updateTime):ns(a);return u.isEqual(be.min())&&(u=ns(a)),new ED(u,o.transformResults||[])})(t,e)))):[]}function BD(n,e){return{documents:[jC(n,e.path)]}}function qD(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=jC(n,o);const a=(function(h){if(h.length!==0)return tw(Ri.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(T){return{field:ka(T.field),direction:zD(T.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Bm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function GD(n){let e=UD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){it(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const T=ew(E);return T instanceof Ri&&bC(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((T=>(function(k){return new Mu(Pa(k.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let T;return T=typeof E=="object"?E.value:E,Pf(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(E){const T=!!E.before,I=E.values||[];return new cf(I,T)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const T=!E.before,I=E.values||[];return new cf(I,T)})(t.endAt)),aD(e,o,u,a,d,"F",p,h)}function HD(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ew(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Pa(t.unaryFilter.field);return Gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Pa(t.unaryFilter.field);return Gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Pa(t.unaryFilter.field);return Gt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Pa(t.unaryFilter.field);return Gt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Gt.create(Pa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ri.create(t.compositeFilter.filters.map((i=>ew(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function zD(n){return DD[n]}function KD(n){return MD[n]}function $D(n){return kD[n]}function ka(n){return{fieldPath:n.canonicalString()}}function Pa(n){return ln.fromServerFormat(n.fieldPath)}function tw(n){return n instanceof Gt?(function(t){if(t.op==="=="){if(KE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NAN"}};if(zE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(KE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NAN"}};if(zE(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(t.field),op:KD(t.op),value:t.value}}})(n):n instanceof Ri?(function(t){const i=t.getFilters().map((o=>tw(o)));return i.length===1?i[0]:{compositeFilter:{op:$D(t.op),filters:i}}})(n):we(54877,{filter:n})}function YD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function nw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,t,i,o,a=be.min(),u=be.min(),d=un.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.yt=e}}function QD(n){const e=GD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.Cn=new WD}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Lr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class WD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Jt(pt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Jt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iw=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(iw,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ja(0)}static cr(){return new ja(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="LruGarbageCollector",jD=1048576;function aT([n,e],[t,i]){const o=ze(n,t);return o===0?ze(e,i):o}class ZD{constructor(e){this.Ir=e,this.buffer=new Jt(aT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();aT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(oT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){rl(t)?me(oT,"Ignoring IndexedDB error during garbage collection: ",t):await sl(t)}await this.Vr(3e5)}))}}class tM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(kf.ce);const i=new ZD(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(rT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,d,p,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),Da()<=He.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(h-p)+`ms
Total Duration: ${h-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function nM(n,e){return new tM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(){this.changes=new Lo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&wu(i.mutation,o,Gn.empty(),vt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ke()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ke()){const o=Io();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=_u();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Io();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ke())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Vs();const u=Cu(),d=(function(){return Cu()})();return t.forEach(((p,h)=>{const _=i.get(h.key);o.has(h.key)&&(_===void 0||_.mutation instanceof Kr)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),wu(_.mutation,h,_.mutation.getFieldMask(),vt.now())):u.set(h.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>d.set(h,new sM(_,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Cu();let o=new St(((u,d)=>u-d)),a=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const h=t.get(p);if(h===null)return;let _=i.get(p)||Gn.empty();_=d.applyToLocalView(h,_),i.set(p,_);const E=(o.get(d.batchId)||Ke()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),h=p.key,_=p.value,E=OC();_.forEach((T=>{if(!a.has(T)){const I=KC(t.get(T),i.get(T));I!==null&&E.set(T,I),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(Io());let d=bu,p=a;return u.next((h=>se.forEach(h,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{p=p.insert(_,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,p,h,Ke()))).next((_=>({batchId:d,changes:LC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((i=>{let o=_u();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=_u();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(p=>{const h=(function(E,T){return new ol(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((_=>{_.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,hn.newInvalidDocument(_)))}));let d=_u();return u.forEach(((p,h)=>{const _=a.get(p);_!==void 0&&wu(_.mutation,h,Gn.empty(),vt.now()),Lf(t,h)&&(d=d.insert(p,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ns(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:QD(o.bundledQuery),readTime:ns(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.overlays=new St(Te.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Io();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=Io(),a=t.length+1,u=new Te(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,h=p.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new St(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=Io(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=Io(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=o)););return se.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new wD(t,i));let a=this.qr.get(t);a===void 0&&(a=Ke(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.Qr=new Jt(jt.$r),this.Ur=new Jt(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new jt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new jt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Te(new pt([])),i=new jt(t,e),o=new jt(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new pt([])),i=new jt(t,e),o=new jt(t,e+1);let a=Ke();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new jt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class jt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(jt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new CD(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new jt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Sg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new jt(t,0),o=new jt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const d=this.Xr(u.Yr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Jt(ze);return t.forEach((o=>{const a=new jt(o,0),u=new jt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Te.isDocumentKey(a)||(a=a.child(""));const u=new jt(new Te(a),0);let d=new Jt(ze);return this.Zr.forEachWhile((p=>{const h=p.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(p.Yr)),!0)}),u),se.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){it(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(o=>{const a=new jt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new jt(t,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.ri=e,this.docs=(function(){return new St(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let i=Vs();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():hn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Vs();const u=t.path,d=new Te(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:h,value:{document:_}}=p.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||F2(O2(_),i)<=0||(o.has(_.key)||Lf(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new dM(this)}getSize(e){return se.resolve(this.size)}}class dM extends iM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.persistence=e,this.si=new Lo((t=>Ig(t)),Rg),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new Mg,this.targetCount=0,this.ai=ja.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ja(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.ui={},this.overlays={},this.ci=new kf(0),this.li=!1,this.li=!0,this.hi=new lM,this.referenceDelegate=e(this),this.Pi=new fM(this),this.indexManager=new XD,this.remoteDocumentCache=(function(o){return new cM(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new JD(t),this.Ii=new oM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new uM(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const o=new hM(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class hM extends q2{constructor(e){super(),this.currentSequenceNumber=e}}class kg{constructor(e){this.persistence=e,this.Ri=new Mg,this.Vi=null}static mi(e){return new kg(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=Te.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class hf{constructor(e,t){this.persistence=e,this.pi=new Lo((i=>z2(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=nM(this,t)}static mi(e,t){return new hf(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,a.removeEntry(u,be.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kd(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ke(),o=Ke();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Pg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sN()?8:G2(mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new pM;return this.Ss(e,t,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Da()<=He.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Ma(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Da()<=He.DEBUG&&me("QueryEngine","Query:",Ma(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Da()<=He.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Ma(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ts(t))):se.resolve())}ys(e,t){if(QE(t))return se.resolve(null);let i=ts(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Fm(t,null,"F"),i=ts(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ke(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const h=this.Ds(t,d);return this.Cs(t,h,u,p.readTime)?this.ys(e,Fm(t,null,"F")):this.vs(e,h,t,p)}))))})))))}ws(e,t,i,o){return QE(t)||o.isEqual(be.min())?se.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?se.resolve(null):(Da()<=He.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ma(t)),this.vs(e,u,t,L2(o,bu)).next((d=>d)))}))}Ds(e,t){let i=new Jt(VC(e));return t.forEach(((o,a)=>{Lf(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return Da()<=He.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Ma(t)),this.ps.getDocumentsMatchingQuery(e,t,Lr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="LocalStore",gM=3e8;class yM{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new St(ze),this.xs=new Lo((a=>Ig(a)),Rg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function _M(n,e,t,i){return new yM(n,e,t,i)}async function rw(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=Ke();for(const h of o){u.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function vM(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,h,_){const E=h.batch,T=E.keys();let I=se.resolve();return T.forEach((k=>{I=I.next((()=>_.getEntry(p,k))).next((F=>{const U=h.docVersions.get(k);it(U!==null,48541),F.version.compareTo(U)<0&&(E.applyToRemoteDocument(F,h),F.isValidDocument()&&(F.setReadTime(h.commitVersion),_.addEntry(F)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Ke();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(p=p.add(d.batch.mutations[h].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function ow(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function EM(n,e){const t=Ne(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;d.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,E))));let I=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(un.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,i)),o=o.insert(E,I),(function(F,U,Y){return F.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=gM?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(T,I,_)&&d.push(t.Pi.updateTargetData(a,I))}));let p=Vs(),h=Ke();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(TM(a,u,e.documentUpdates).next((_=>{p=_.ks,h=_.qs}))),!i.isEqual(be.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,h))).next((()=>p))})).then((a=>(t.Ms=o,a)))}function TM(n,e,t){let i=Ke(),o=Ke();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Vs();return t.forEach(((d,p)=>{const h=a.get(d);p.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(be.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):me(Vg,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",p.version)})),{ks:u,qs:o}}))}function AM(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Sg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function SM(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new Nr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function zm(n,e,t){const i=Ne(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!rl(u))throw u;me(Vg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function lT(n,e,t){const i=Ne(n);let o=be.min(),a=Ke();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,h,_){const E=Ne(p),T=E.xs.get(_);return T!==void 0?se.resolve(E.Ms.get(T)):E.Pi.getTargetData(h,_)})(i,u,ts(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:be.min(),t?a:Ke()))).next((d=>(CM(i,uD(e),d),{documents:d,Qs:a})))))}function CM(n,e,t){let i=n.Os.get(e)||be.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class uT{constructor(){this.activeTargetIds=mD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wM{constructor(){this.Mo=new uT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="ConnectivityMonitor";class dT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(cT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(cT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd=null;function Km(){return Pd===null?Pd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pd++,"0x"+Pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="RestConnection",RM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===lf?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=Km(),d=this.zo(e,t.toUriEncodedString());me(mm,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,a);const{host:h}=new URL(d),_=tl(h);return this.Jo(e,d,p,i,_).then((E=>(me(mm,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Ja(mm,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+il})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=RM[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class NM extends bM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=Km();return new Promise(((d,p)=>{const h=new aC;h.setWithCredentials(!0),h.listenOnce(lC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case zd.NO_ERROR:const E=h.getResponseJson();me(dn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case zd.TIMEOUT:me(dn,`RPC '${e}' ${u} timed out`),p(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case zd.HTTP_ERROR:const T=h.getStatus();if(me(dn,`RPC '${e}' ${u} failed with status:`,T,"response text:",h.getResponseText()),T>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const F=(function(Y){const te=Y.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(te)>=0?te:ee.UNKNOWN})(k.status);p(new he(F,k.message))}else p(new he(ee.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new he(ee.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{me(dn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);me(dn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Km(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=dC(),d=cC(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(p.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=a.join("");me(dn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=u.createWebChannel(_,p);this.I_(E);let T=!1,I=!1;const k=new xM({Yo:U=>{I?me(dn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(T||(me(dn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),me(dn,`RPC '${e}' stream ${o} sending:`,U),E.send(U))},Zo:()=>E.close()}),F=(U,Y,te)=>{U.listen(Y,(W=>{try{te(W)}catch(re){setTimeout((()=>{throw re}),0)}}))};return F(E,yu.EventType.OPEN,(()=>{I||(me(dn,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),F(E,yu.EventType.CLOSE,(()=>{I||(I=!0,me(dn,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(E))})),F(E,yu.EventType.ERROR,(U=>{I||(I=!0,Ja(dn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),k.a_(new he(ee.UNAVAILABLE,"The operation could not be completed")))})),F(E,yu.EventType.MESSAGE,(U=>{var Y;if(!I){const te=U.data[0];it(!!te,16349);const W=te,re=(W==null?void 0:W.error)||((Y=W[0])==null?void 0:Y.error);if(re){me(dn,`RPC '${e}' stream ${o} received error:`,re);const ce=re.status;let le=(function(D){const L=qt[D];if(L!==void 0)return YC(L)})(ce),x=re.message;le===void 0&&(le=ee.INTERNAL,x="Unknown error status: "+ce+" with message "+re.message),I=!0,k.a_(new he(le,x)),E.close()}else me(dn,`RPC '${e}' stream ${o} received:`,te),k.u_(te)}})),F(d,uC.STAT_EVENT,(U=>{U.stat===Mm.PROXY?me(dn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Mm.NOPROXY&&me(dn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(n){return new PD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="PersistentStream";class lw{constructor(e,t,i,o,a,u,d,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new aw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Ps(t.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new he(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(fT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(fT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DM extends lw{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=LD(this.serializer,e),i=(function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?ns(u.readTime):be.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Hm(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=Lm(p)?{documents:BD(a,p)}:{query:qD(a,p).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=XC(a,u.resumeToken);const h=Bm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(be.min())>0){d.readTime=ff(a,u.snapshotVersion.toTimestamp());const h=Bm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=HD(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Hm(this.serializer),t.removeTarget=e,this.q_(t)}}class MM extends lw{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=FD(e.writeResults,e.commitTime),i=ns(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Hm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>OD(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{}class PM extends kM{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,qm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(ee.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,qm(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(ee.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class VM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ps(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="RemoteStore";class UM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Oo(this)&&(me(No,"Restarting streams for network reachability change."),await(async function(p){const h=Ne(p);h.Ea.add(4),await Gu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Hf(h)})(this))}))})),this.Ra=new VM(i,o)}}async function Hf(n){if(Oo(n))for(const e of n.da)await e(!0)}async function Gu(n){for(const e of n.da)await e(!1)}function uw(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fg(t)?Og(t):al(t).O_()&&Lg(t,e))}function Ug(n,e){const t=Ne(n),i=al(t);t.Ia.delete(e),i.O_()&&cw(t,e),t.Ia.size===0&&(i.O_()?i.L_():Oo(t)&&t.Ra.set("Unknown"))}function Lg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}al(n).Y_(e)}function cw(n,e){n.Va.Ue(e),al(n).Z_(e)}function Og(n){n.Va=new ND({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),al(n).start(),n.Ra.ua()}function Fg(n){return Oo(n)&&!al(n).x_()&&n.Ia.size>0}function Oo(n){return Ne(n).Ea.size===0}function dw(n){n.Va=void 0}async function LM(n){n.Ra.set("Online")}async function OM(n){n.Ia.forEach(((e,t)=>{Lg(n,e)}))}async function FM(n,e){dw(n),Fg(n)?(n.Ra.ha(e),Og(n)):n.Ra.set("Unknown")}async function BM(n,e,t){if(n.Ra.set("Online"),e instanceof QC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){me(No,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await pf(n,i)}else if(e instanceof Jd?n.Va.Ze(e):e instanceof JC?n.Va.st(e):n.Va.tt(e),!t.isEqual(be.min()))try{const i=await ow(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,h)=>{const _=a.Ia.get(p);if(!_)return;a.Ia.set(p,_.withResumeToken(un.EMPTY_BYTE_STRING,_.snapshotVersion)),cw(a,p);const E=new Nr(_.target,p,h,_.sequenceNumber);Lg(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){me(No,"Failed to raise snapshot:",i),await pf(n,i)}}async function pf(n,e,t){if(!rl(e))throw e;n.Ea.add(1),await Gu(n),n.Ra.set("Offline"),t||(t=()=>ow(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(No,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Hf(n)}))}function fw(n,e){return e().catch((t=>pf(n,t,e)))}async function zf(n){const e=Ne(n),t=qr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sg;for(;qM(e);)try{const o=await AM(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,GM(e,o)}catch(o){await pf(e,o)}hw(e)&&pw(e)}function qM(n){return Oo(n)&&n.Ta.length<10}function GM(n,e){n.Ta.push(e);const t=qr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function hw(n){return Oo(n)&&!qr(n).x_()&&n.Ta.length>0}function pw(n){qr(n).start()}async function HM(n){qr(n).ra()}async function zM(n){const e=qr(n);for(const t of n.Ta)e.ea(t.mutations)}async function KM(n,e,t){const i=n.Ta.shift(),o=xg.from(i,e,t);await fw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await zf(n)}async function $M(n,e){e&&qr(n).X_&&await(async function(i,o){if((function(u){return RD(u)&&u!==ee.ABORTED})(o.code)){const a=i.Ta.shift();qr(i).B_(),await fw(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await zf(i)}})(n,e),hw(n)&&pw(n)}async function hT(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),me(No,"RemoteStore received new credentials");const i=Oo(t);t.Ea.add(3),await Gu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Hf(t)}async function YM(n,e){const t=Ne(n);e?(t.Ea.delete(2),await Hf(t)):e||(t.Ea.add(2),await Gu(t),t.Ra.set("Unknown"))}function al(n){return n.ma||(n.ma=(function(t,i,o){const a=Ne(t);return a.sa(),new DM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:LM.bind(null,n),t_:OM.bind(null,n),r_:FM.bind(null,n),H_:BM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Fg(n)?Og(n):n.Ra.set("Unknown")):(await n.ma.stop(),dw(n))}))),n.ma}function qr(n){return n.fa||(n.fa=(function(t,i,o){const a=Ne(t);return a.sa(),new MM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:HM.bind(null,n),r_:$M.bind(null,n),ta:zM.bind(null,n),na:KM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await zf(n)):(await n.fa.stop(),n.Ta.length>0&&(me(No,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Bg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qg(n,e){if(Ps("AsyncQueue",`${e}: ${n}`),rl(n))return new he(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{static emptySet(e){return new Fa(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=_u(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Fa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.ga=new St(Te.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Za{constructor(e,t,i,o,a,u,d,p,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Za(e,t,Fa.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class QM{constructor(){this.queries=mT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ne(t),a=o.queries;o.queries=mT(),a.forEach(((u,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function mT(){return new Lo((n=>PC(n)),Uf)}async function XM(n,e){const t=Ne(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new JM,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=qg(u,`Initialization of query '${Ma(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Gg(t)}async function WM(n,e){const t=Ne(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function jM(n,e){const t=Ne(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.Sa)d.Fa(o)&&(i=!0);u.wa=o}}i&&Gg(t)}function ZM(n,e,t){const i=Ne(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function Gg(n){n.Ca.forEach((e=>{e.next()}))}var $m,gT;(gT=$m||($m={})).Ma="default",gT.Cache="cache";class ek{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Za(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$m.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.key=e}}class gw{constructor(e){this.key=e}}class tk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=VC(e),this.tu=new Fa(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new pT,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),I=Lf(this.query,E)?E:null,k=!!T&&this.mutatedKeys.has(T.key),F=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let U=!1;T&&I?T.data.isEqual(I.data)?k!==F&&(i.track({type:3,doc:I}),U=!0):this.su(T,I)||(i.track({type:2,doc:I}),U=!0,(p&&this.eu(I,p)>0||h&&this.eu(I,h)<0)&&(d=!0)):!T&&I?(i.track({type:0,doc:I}),U=!0):T&&!I&&(i.track({type:1,doc:T}),U=!0,(p||h)&&(d=!0)),U&&(I?(u=u.add(I),a=F?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,E)=>(function(I,k){const F=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:U})}};return F(I)-F(k)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,h=p!==this.Za;return this.Za=p,u.length!==0||h?{snapshot:new Za(this.query,e.tu,a,u,e.mutatedKeys,p===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new gw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new mw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hg="SyncEngine";class nk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ik{constructor(e){this.key=e,this.hu=!1}}class sk{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Lo((d=>PC(d)),Uf),this.Iu=new Map,this.Eu=new Set,this.du=new St(Te.comparator),this.Au=new Map,this.Ru=new Mg,this.Vu={},this.mu=new Map,this.fu=ja.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rk(n,e,t=!0){const i=Aw(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await yw(i,e,t,!0),o}async function ok(n,e){const t=Aw(n);await yw(t,e,!0,!1)}async function yw(n,e,t,i){const o=await SM(n.localStore,ts(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await ak(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&uw(n.remoteStore,o),d}async function ak(n,e,t,i,o){n.pu=(E,T,I)=>(async function(F,U,Y,te){let W=U.view.ru(Y);W.Cs&&(W=await lT(F.localStore,U.query,!1).then((({documents:x})=>U.view.ru(x,W))));const re=te&&te.targetChanges.get(U.targetId),ce=te&&te.targetMismatches.get(U.targetId)!=null,le=U.view.applyChanges(W,F.isPrimaryClient,re,ce);return _T(F,U.targetId,le.au),le.snapshot})(n,E,T,I);const a=await lT(n.localStore,e,!0),u=new tk(e,a.Qs),d=u.ru(a.documents),p=qu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(d,n.isPrimaryClient,p);_T(n,t,h.au);const _=new nk(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function lk(n,e,t){const i=Ne(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!Uf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await zm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Ug(i.remoteStore,o.targetId),Ym(i,o.targetId)})).catch(sl)):(Ym(i,o.targetId),await zm(i.localStore,o.targetId,!0))}async function uk(n,e){const t=Ne(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ug(t.remoteStore,i.targetId))}async function ck(n,e,t){const i=yk(n);try{const o=await(function(u,d){const p=Ne(u),h=vt.now(),_=d.reduce(((I,k)=>I.add(k.key)),Ke());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let k=Vs(),F=Ke();return p.Ns.getEntries(I,_).next((U=>{k=U,k.forEach(((Y,te)=>{te.isValidDocument()||(F=F.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,k))).next((U=>{E=U;const Y=[];for(const te of d){const W=AD(te,E.get(te.key).overlayedDocument);W!=null&&Y.push(new Kr(te.key,W,wC(W.value.mapValue),En.exists(!0)))}return p.mutationQueue.addMutationBatch(I,h,Y,d)})).next((U=>{T=U;const Y=U.applyToLocalDocumentSet(E,F);return p.documentOverlayCache.saveOverlays(I,U.batchId,Y)}))})).then((()=>({batchId:T.batchId,changes:LC(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let h=u.Vu[u.currentUser.toKey()];h||(h=new St(ze)),h=h.insert(d,p),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await Hu(i,o.changes),await zf(i.remoteStore)}catch(o){const a=qg(o,"Failed to persist write");t.reject(a)}}async function _w(n,e){const t=Ne(n);try{const i=await EM(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(it(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?it(u.hu,14607):o.removedDocuments.size>0&&(it(u.hu,42227),u.hu=!1))})),await Hu(t,i,e)}catch(i){await sl(i)}}function yT(n,e,t){const i=Ne(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=Ne(u);p.onlineState=d;let h=!1;p.queries.forEach(((_,E)=>{for(const T of E.Sa)T.va(d)&&(h=!0)})),h&&Gg(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dk(n,e,t){const i=Ne(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new St(Te.comparator);u=u.insert(a,hn.newNoDocument(a,be.min()));const d=Ke().add(a),p=new qf(be.min(),new Map,new St(ze),u,d);await _w(i,p),i.du=i.du.remove(a),i.Au.delete(e),zg(i)}else await zm(i.localStore,e,!1).then((()=>Ym(i,e,t))).catch(sl)}async function fk(n,e){const t=Ne(n),i=e.batch.batchId;try{const o=await vM(t.localStore,e);Ew(t,i,null),vw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Hu(t,o)}catch(o){await sl(o)}}async function hk(n,e,t){const i=Ne(n);try{const o=await(function(u,d){const p=Ne(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return p.mutationQueue.lookupMutationBatch(h,d).next((E=>(it(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(h,E)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>p.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);Ew(i,e,t),vw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Hu(i,o)}catch(o){await sl(o)}}function vw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Ew(n,e,t){const i=Ne(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Ym(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Tw(n,i)}))}function Tw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ug(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),zg(n))}function _T(n,e,t){for(const i of t)i instanceof mw?(n.Ru.addReference(i.key,e),pk(n,i)):i instanceof gw?(me(Hg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Tw(n,i.key)):we(19791,{wu:i})}function pk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(me(Hg,"New document in limbo: "+t),n.Eu.add(i),zg(n))}function zg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(pt.fromString(e)),i=n.fu.next();n.Au.set(i,new ik(t)),n.du=n.du.insert(t,i),uw(n.remoteStore,new Nr(ts(MC(t.path)),i,"TargetPurposeLimboResolution",kf.ce))}}async function Hu(n,e,t){const i=Ne(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{u.push(i.pu(p,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const E=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(h){o.push(h);const E=Pg.As(p.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(p,h){const _=Ne(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(h,(T=>se.forEach(T.Es,(I=>_.persistence.referenceDelegate.addReference(E,T.targetId,I))).next((()=>se.forEach(T.ds,(I=>_.persistence.referenceDelegate.removeReference(E,T.targetId,I)))))))))}catch(E){if(!rl(E))throw E;me(Vg,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const I=_.Ms.get(T),k=I.snapshotVersion,F=I.withLastLimboFreeSnapshotVersion(k);_.Ms=_.Ms.insert(T,F)}}})(i.localStore,a))}async function mk(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){me(Hg,"User change. New user:",e.toKey());const i=await rw(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((p=>{p.reject(new he(ee.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hu(t,i.Ls)}}function gk(n,e){const t=Ne(n),i=t.Au.get(e);if(i&&i.hu)return Ke().add(i.key);{let o=Ke();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function Aw(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_w.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dk.bind(null,e),e.Pu.H_=jM.bind(null,e.eventManager),e.Pu.yu=ZM.bind(null,e.eventManager),e}function yk(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hk.bind(null,e),e}class mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _M(this.persistence,new mM,e.initialUser,this.serializer)}Cu(e){return new sw(kg.mi,this.serializer)}Du(e){return new wM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mf.provider={build:()=>new mf};class _k extends mf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){it(this.persistence.referenceDelegate instanceof hf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new eM(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new sw((i=>hf.mi(i,t)),this.serializer)}}class Jm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,this.syncEngine),await YM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new QM})()}createDatastore(e){const t=Gf(e.databaseInfo.databaseId),i=(function(a){return new NM(a)})(e.databaseInfo);return(function(a,u,d,p){return new PM(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new UM(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>yT(this.syncEngine,t,0)),(function(){return dT.v()?new dT:new IM})())}createSyncEngine(e,t){return(function(o,a,u,d,p,h,_){const E=new sk(o,a,u,d,p,h);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Ne(o);me(No,"RemoteStore shutting down."),a.Ea.add(5),await Gu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="FirestoreClient";class Ek{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=fn.UNAUTHENTICATED,this.clientId=Ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{me(Gr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(me(Gr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=qg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ym(n,e){n.asyncQueue.verifyOperationInProgress(),me(Gr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await rw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function vT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Tk(n);me(Gr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>hT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>hT(e.remoteStore,o))),n._onlineComponents=e}async function Tk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Gr,"Using user provided OfflineComponentProvider");try{await ym(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ja("Error using user provided cache. Falling back to memory cache: "+t),await ym(n,new mf)}}else me(Gr,"Using default OfflineComponentProvider"),await ym(n,new _k(void 0));return n._offlineComponents}async function Sw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Gr,"Using user provided OnlineComponentProvider"),await vT(n,n._uninitializedComponentsProvider._online)):(me(Gr,"Using default OnlineComponentProvider"),await vT(n,new Jm))),n._onlineComponents}function Ak(n){return Sw(n).then((e=>e.syncEngine))}async function Sk(n){const e=await Sw(n),t=e.eventManager;return t.onListen=rk.bind(null,e.syncEngine),t.onUnlisten=lk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ok.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uk.bind(null,e.syncEngine),t}function Ck(n,e,t={}){const i=new Pr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,h){const _=new vk({next:T=>{_.Nu(),u.enqueueAndForget((()=>WM(a,E))),T.fromCache&&p.source==="server"?h.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(T)},error:T=>h.reject(T)}),E=new ek(d,_,{includeMetadataChanges:!0,qa:!0});return XM(a,E)})(await Sk(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="firestore.googleapis.com",TT=!0;class AT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ww,this.ssl=TT}else this.host=e.host,this.ssl=e.ssl??TT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jD)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kf{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new I2;switch(i.type){case"firstParty":return new N2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ET.get(t);i&&(me("ComponentProvider","Removing Datastore"),ET.delete(t),i.terminate())})(this),Promise.resolve()}}function wk(n,e,t,i={}){var h;n=ls(n,Kf);const o=tl(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(QS(`https://${d}`),XS("Firestore",!0)),a.host!==ww&&a.host!==d&&Ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:d,ssl:o,emulatorOptions:i};if(!Ur(p,u)&&(n._setSettings(p),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=fn.MOCK_USER;else{_=Xx(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new fn(T)}n._authCredentials=new R2(new hC(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fo(this.firestore,e,this._query)}}class zt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Fu(t,zt._jsonSchema))return new zt(e,i||null,new Te(pt.fromString(t.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Ht("string",zt._jsonSchemaVersion),referencePath:Ht("string")};class Vr extends Fo{constructor(e,t,i){super(e,t,MC(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new Te(e))}withConverter(e){return new Vr(this.firestore,e,this._path)}}function zu(n,e,...t){if(n=At(n),pC("collection","path",e),n instanceof Kf){const i=pt.fromString(e,...t);return VE(i),new Vr(n,null,i)}{if(!(n instanceof zt||n instanceof Vr))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return VE(i),new Vr(n.firestore,null,i)}}function $r(n,e,...t){if(n=At(n),arguments.length===1&&(e=Ag.newId()),pC("doc","path",e),n instanceof Kf){const i=pt.fromString(e,...t);return PE(i),new zt(n,null,new Te(i))}{if(!(n instanceof zt||n instanceof Vr))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return PE(i),new zt(n.firestore,n instanceof Vr?n.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="AsyncQueue";class CT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new aw(this,"async_queue_retry"),this._c=()=>{const i=gm();i&&me(ST,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=gm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rl(e))throw e;me(ST,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ps("INTERNAL UNHANDLED ERROR: ",wT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Bg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:wT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function wT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Bo extends Kf{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new CT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CT(e),this._firestoreClient=void 0,await e}}}function Ik(n,e){const t=typeof n=="object"?n:Eg(),i=typeof n=="string"?n:lf,o=Uo(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=Jx("firestore");a&&wk(o,...a)}return o}function Kg(n){if(n._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Rk(n),n._firestoreClient}function Rk(n){var i,o,a;const e=n._freezeSettings(),t=(function(d,p,h,_){return new Y2(d,p,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Cw(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Ek(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(un.fromBase64String(e))}catch(t){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oi(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fu(e,oi._jsonSchema))return oi.fromBase64String(e.bytes)}}oi._jsonSchemaVersion="firestore/bytes/1.0",oi._jsonSchema={type:Ht("string",oi._jsonSchemaVersion),bytes:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:is._jsonSchemaVersion}}static fromJSON(e){if(Fu(e,is._jsonSchema))return new is(e.latitude,e.longitude)}}is._jsonSchemaVersion="firestore/geoPoint/1.0",is._jsonSchema={type:Ht("string",is._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fu(e,ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ss(e.vectorValues);throw new he(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ss._jsonSchemaVersion="firestore/vectorValue/1.0",ss._jsonSchema={type:Ht("string",ss._jsonSchemaVersion),vectorValues:Ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=/^__.*__$/;class xk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Kr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bu(e,this.data,t,this.fieldTransforms)}}class Iw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Kr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class $g{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rw(this.Ac)&&bk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Nk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Gf(e)}Cc(e,t,i,o=!1){return new $g({Ac:e,methodName:t,Dc:i,path:ln.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $u(n){const e=n._freezeSettings(),t=Gf(n._databaseId);return new Nk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yg(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);Qg("Data must be an object, but it was:",u,i);const d=Nw(i,u);let p,h;if(a.merge)p=new Gn(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const T=Qm(e,E,t);if(!u.contains(T))throw new he(ee.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Mw(_,T)||_.push(T)}p=new Gn(_),h=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,h=u.fieldTransforms;return new xk(new Dn(d),p,h)}class Yf extends $f{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}class Jg extends $f{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Vu(e.serializer,BC(e.serializer,this.Fc));return new _D(e.path,t)}isEqual(e){return e instanceof Jg&&this.Fc===e.Fc}}function bw(n,e,t,i){const o=n.Cc(1,e,t);Qg("Data must be an object, but it was:",o,i);const a=[],u=Dn.empty();zr(i,((p,h)=>{const _=Xg(e,p,t);h=At(h);const E=o.yc(_);if(h instanceof Yf)a.push(_);else{const T=Yu(h,E);T!=null&&(a.push(_),u.set(_,T))}}));const d=new Gn(a);return new Iw(u,d,o.fieldTransforms)}function xw(n,e,t,i,o,a){const u=n.Cc(1,e,t),d=[Qm(e,i,t)],p=[o];if(a.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(Qm(e,a[T])),p.push(a[T+1]);const h=[],_=Dn.empty();for(let T=d.length-1;T>=0;--T)if(!Mw(h,d[T])){const I=d[T];let k=p[T];k=At(k);const F=u.yc(I);if(k instanceof Yf)h.push(I);else{const U=Yu(k,F);U!=null&&(h.push(I),_.set(I,U))}}const E=new Gn(h);return new Iw(_,E,u.fieldTransforms)}function Dk(n,e,t,i=!1){return Yu(t,n.Cc(i?4:3,e))}function Yu(n,e){if(Dw(n=At(n)))return Qg("Unsupported field value:",e,n),Nw(n,e);if(n instanceof $f)return(function(i,o){if(!Rw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=Yu(d,o.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=vt.fromDate(i);return{timestampValue:ff(o.serializer,a)}}if(i instanceof vt){const a=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ff(o.serializer,a)}}if(i instanceof is)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof oi)return{bytesValue:XC(o.serializer,i._byteString)};if(i instanceof zt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Dg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ss)return(function(u,d){return{mapValue:{fields:{[SC]:{stringValue:CC},[uf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return bg(d.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Mf(i)}`)})(n,e)}function Nw(n,e){const t={};return yC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(n,((i,o)=>{const a=Yu(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function Dw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof is||n instanceof oi||n instanceof zt||n instanceof $f||n instanceof ss)}function Qg(n,e,t){if(!Dw(t)||!mC(t)){const i=Mf(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Qm(n,e,t){if((e=At(e))instanceof Ku)return e._internalPath;if(typeof e=="string")return Xg(n,e);throw gf("Field path arguments must be of type string or ",n,!1,void 0,t)}const Mk=new RegExp("[~\\*/\\[\\]]");function Xg(n,e,t){if(e.search(Mk)>=0)throw gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ku(...e.split("."))._internalPath}catch{throw gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gf(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new he(ee.INVALID_ARGUMENT,d+n+p)}function Mw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class kk extends kw{data(){return super.data()}}function Wg(n,e){return typeof e=="string"?Xg(n,e):e instanceof Ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jg{}class Pw extends jg{}function Zg(n,e,...t){let i=[];e instanceof jg&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof ty)).length,d=a.filter((p=>p instanceof ey)).length;if(u>1||u>0&&d>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class ey extends Pw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ey(e,t,i)}_apply(e){const t=this._parse(e);return Vw(e._query,t),new Fo(e.firestore,e.converter,Om(e._query,t))}_parse(e){const t=$u(e.firestore);return(function(a,u,d,p,h,_,E){let T;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){RT(E,_);const k=[];for(const F of E)k.push(IT(p,a,F));T={arrayValue:{values:k}}}else T=IT(p,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||RT(E,_),T=Dk(d,u,E,_==="in"||_==="not-in");return Gt.create(h,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class ty extends jg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ty(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)Vw(u,p),u=Om(u,p)})(e._query,t),new Fo(e.firestore,e.converter,Om(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ny extends Pw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ny(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(a,u)})(e._query,this._field,this._direction);return new Fo(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new ol(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function iy(n,e="asc"){const t=e,i=Wg("orderBy",n);return ny._create(i,t)}function IT(n,e,t){if(typeof(t=At(t))=="string"){if(t==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kC(e)&&t.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(pt.fromString(t));if(!Te.isDocumentKey(i))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return HE(n,new Te(i))}if(t instanceof zt)return HE(n,t._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mf(t)}.`)}function RT(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vw(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Vk{convertValue(e,t="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return zr(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[uf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>Mt(u.doubleValue)));return new ss(t)}convertGeoPoint(e){return new is(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Vf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const t=Or(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pt.fromString(e);it(nw(i),9688,{name:e});const o=new Nu(i.get(1),i.get(3)),a=new Te(i.popFirst(5));return o.isEqual(t)||Ps(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Vd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ba extends kw{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Wg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ba._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ba._jsonSchema={type:Ht("string",Ba._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class Qd extends Ba{data(e={}){return super.data(e)}}class qa{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Vd(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Qd(this._firestore,this._userDataWriter,i.key,i,new Vd(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Qd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Vd(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Qd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Vd(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,_=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:Uk(d.type),doc:p,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ag.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Uk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}qa._jsonSchemaVersion="firestore/querySnapshot/1.0",qa._jsonSchema={type:Ht("string",qa._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class Lk extends Vk{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,t)}}function ry(n){n=ls(n,Fo);const e=ls(n.firestore,Bo),t=Kg(e),i=new Lk(e);return Pk(n._query),Ck(t,n._query).then((o=>new qa(e,i,n,o)))}function Ok(n,e,t){n=ls(n,zt);const i=ls(n.firestore,Bo),o=sy(n.converter,e,t);return Ju(i,[Yg($u(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,En.none())])}function Uw(n,e,t,...i){n=ls(n,zt);const o=ls(n.firestore,Bo),a=$u(o);let u;return u=typeof(e=At(e))=="string"||e instanceof Ku?xw(a,"updateDoc",n._key,e,t,i):bw(a,"updateDoc",n._key,e),Ju(o,[u.toMutation(n._key,En.exists(!0))])}function Lw(n){return Ju(ls(n.firestore,Bo),[new Bf(n._key,En.none())])}function Ow(n,e){const t=ls(n.firestore,Bo),i=$r(n),o=sy(n.converter,e);return Ju(t,[Yg($u(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,En.exists(!1))]).then((()=>i))}function Ju(n,e){return(function(i,o){const a=new Pr;return i.asyncQueue.enqueueAndForget((async()=>ck(await Ak(i),o,a))),a.promise})(Kg(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$u(e)}set(e,t,i){this._verifyNotCommitted();const o=_m(e,this._firestore),a=sy(o.converter,t,i),u=Yg(this._dataReader,"WriteBatch.set",o._key,a,o.converter!==null,i);return this._mutations.push(u.toMutation(o._key,En.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const a=_m(e,this._firestore);let u;return u=typeof(t=At(t))=="string"||t instanceof Ku?xw(this._dataReader,"WriteBatch.update",a._key,t,i,o):bw(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,En.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_m(e,this._firestore);return this._mutations=this._mutations.concat(new Bf(t._key,En.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _m(n,e){if((n=At(n)).firestore!==e)throw new he(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Bk(n){return new Jg("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(n){return Kg(n=ls(n,Bo)),new Fk(n,(e=>Ju(n,e)))}(function(e,t=!0){(function(o){il=o})(nl),as(new Ii("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Bo(new b2(i.getProvider("auth-internal")),new D2(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nu(h.options.projectId,_)})(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),ai(NE,DE,e),ai(NE,DE,"esm2020")})();function Bw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qk=Bw,qw=new Vo("auth","Firebase",Bw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=new Df("@firebase/auth");function Gk(n,...e){yf.logLevel<=He.WARN&&yf.warn(`Auth (${nl}): ${n}`,...e)}function Xd(n,...e){yf.logLevel<=He.ERROR&&yf.error(`Auth (${nl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(n,...e){throw oy(n,...e)}function rs(n,...e){return oy(n,...e)}function Gw(n,e,t){const i={...qk(),[e]:t};return new Vo("auth","Firebase",i).create(e,{appName:n.name})}function Ms(n){return Gw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return qw.create(n,...e)}function Ce(n,e,...t){if(!n)throw oy(e,...t)}function Ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xd(e),new Error(e)}function Us(n,e){n||Ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Hk(){return bT()==="http:"||bT()==="https:"}function bT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hk()||WS()||"connection"in navigator)?navigator.onLine:!0}function Kk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Us(t>e,"Short delay should be less than long delay!"),this.isMobile=Zx()||nN()}get(){return zk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(n,e){Us(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jk=new Qu(3e4,6e4);function Yr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Fs(n,e,t,i,o={}){return zw(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Ou({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:p,...a};return tN()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&tl(n.emulatorConfig.host)&&(h.credentials="include"),Hw.fetch()(await Kw(n,n.config.apiHost,t,d),h)})}async function zw(n,e,t){n._canInitEmulator=!1;const i={...$k,...e};try{const o=new Xk(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Ud(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,h]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ud(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Ud(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw Ud(n,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Gw(n,_,h);bi(n,_)}}catch(o){if(o instanceof xi)throw o;bi(n,"network-request-failed",{message:String(o)})}}async function Xu(n,e,t,i,o={}){const a=await Fs(n,e,t,i,o);return"mfaPendingCredential"in a&&bi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Kw(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?ay(n.config,o):`${n.config.apiScheme}://${o}`;return Yk.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function Qk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Xk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(rs(this.auth,"network-request-failed")),Jk.get())})}}function Ud(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=rs(n,e,i);return o.customData._tokenResponse=t,o}function xT(n){return n!==void 0&&n.enterprise!==void 0}class Wk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Qk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jk(n,e){return Fs(n,"GET","/v2/recaptchaConfig",Yr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(n,e){return Fs(n,"POST","/v1/accounts:delete",e)}async function _f(n,e){return Fs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eP(n,e=!1){const t=At(n),i=await t.getIdToken(e),o=ly(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:Iu(vm(o.auth_time)),issuedAtTime:Iu(vm(o.iat)),expirationTime:Iu(vm(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function vm(n){return Number(n)*1e3}function ly(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const o=KS(t);return o?JSON.parse(o):(Xd("Failed to decode base64 JWT payload"),null)}catch(o){return Xd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function NT(n){const e=ly(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof xi&&tP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function tP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vf(n){var E;const e=n.auth,t=await n.getIdToken(),i=await el(n,_f(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(E=o.providerUserInfo)!=null&&E.length?$w(o.providerUserInfo):[],u=sP(n.providerData,a),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=d?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Wm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function iP(n){const e=At(n);await vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sP(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function $w(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rP(n,e){const t=await zw(n,{},async()=>{const i=Ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await Kw(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&tl(n.emulatorConfig.host)&&(p.credentials="include"),Hw.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function oP(n,e){return Fs(n,"POST","/v2/accounts:revokeToken",Yr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=NT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await rP(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Ga;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ga,this.toJSON())}_performRefresh(){return Ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Si{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new nP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await el(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eP(this,e)}reload(){return iP(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await vf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ri(this.auth.app))return Promise.reject(Ms(this.auth));const e=await this.getIdToken();return await el(this,Zk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:I,providerData:k,stsTokenManager:F}=t;Ce(E&&F,e,"internal-error");const U=Ga.fromJSON(this.name,F);Ce(typeof E=="string",e,"internal-error"),Cr(i,e.name),Cr(o,e.name),Ce(typeof T=="boolean",e,"internal-error"),Ce(typeof I=="boolean",e,"internal-error"),Cr(a,e.name),Cr(u,e.name),Cr(d,e.name),Cr(p,e.name),Cr(h,e.name),Cr(_,e.name);const Y=new Si({uid:E,auth:e,email:o,emailVerified:T,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:U,createdAt:h,lastLoginAt:_});return k&&Array.isArray(k)&&(Y.providerData=k.map(te=>({...te}))),p&&(Y._redirectEventId=p),Y}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ga;o.updateFromServerResponse(t);const a=new Si({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await vf(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?$w(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Ga;d.updateFromIdToken(i);const p=new Si({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Wm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Map;function Ds(n){Us(n instanceof Function,"Expected a class definition");let e=DT.get(n);return e?(Us(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,DT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Yw.type="NONE";const MT=Yw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ha{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Wd(this.userKey,o.apiKey,a),this.fullPersistenceKey=Wd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _f(this.auth,{idToken:e}).catch(()=>{});return t?Si._fromGetAccountInfoResponse(this.auth,t,e):null}return Si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ha(Ds(MT),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||Ds(MT);const u=Wd(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const _=await h._get(u);if(_){let E;if(typeof _=="string"){const T=await _f(e,{idToken:_}).catch(()=>{});if(!T)break;E=await Si._fromGetAccountInfoResponse(e,T,_)}else E=Si._fromJSON(e,_);h!==a&&(d=E),a=h;break}}catch{}const p=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Ha(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new Ha(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ww(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zw(e))return"Blackberry";if(eI(e))return"Webos";if(Qw(e))return"Safari";if((e.includes("chrome/")||Xw(e))&&!e.includes("edge/"))return"Chrome";if(jw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Jw(n=mn()){return/firefox\//i.test(n)}function Qw(n=mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xw(n=mn()){return/crios\//i.test(n)}function Ww(n=mn()){return/iemobile/i.test(n)}function jw(n=mn()){return/android/i.test(n)}function Zw(n=mn()){return/blackberry/i.test(n)}function eI(n=mn()){return/webos/i.test(n)}function uy(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function aP(n=mn()){var e;return uy(n)&&!!((e=window.navigator)!=null&&e.standalone)}function lP(){return iN()&&document.documentMode===10}function tI(n=mn()){return uy(n)||jw(n)||eI(n)||Zw(n)||/windows phone/i.test(n)||Ww(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n,e=[]){let t;switch(n){case"Browser":t=kT(mn());break;case"Worker":t=`${kT(mn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${nl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n,e={}){return Fs(n,"GET","/v2/passwordPolicy",Yr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=6;class fP{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??dP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new PT(this),this.idTokenSubscription=new PT(this),this.beforeStateQueue=new uP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ds(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Ha.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _f(this,{idToken:e}),i=await Si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(ri(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Kk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ri(this.app))return Promise.reject(Ms(this));const t=e?At(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ri(this.app)?Promise.reject(Ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ri(this.app)?Promise.reject(Ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cP(this),t=new fP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vo("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await oP(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ds(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[Ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Gk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function qo(n){return At(n)}class PT{constructor(e){this.auth=e,this.observer=null,this.addObserver=cN(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pP(n){Jf=n}function iI(n){return Jf.loadJS(n)}function mP(){return Jf.recaptchaEnterpriseScript}function gP(){return Jf.gapiScript}function yP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class _P{constructor(){this.enterprise=new vP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class vP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const EP="recaptcha-enterprise",sI="NO_RECAPTCHA";class TP{constructor(e){this.type=EP,this.auth=qo(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{jk(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new Wk(p);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;xT(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(sI)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _P().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&xT(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=mP();p.length!==0&&(p+=d),iI(p).then(()=>{o(d,a,u)}).catch(h=>{u(h)})}}).catch(d=>{u(d)})})}}async function VT(n,e,t,i=!1,o=!1){const a=new TP(n);let u;if(o)u=sI;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function jm(n,e,t,i,o){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await VT(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await VT(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n,e){const t=Uo(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ur(a,e??{}))return o;bi(o,"already-initialized")}return t.initialize({options:e})}function SP(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ds);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function CP(n,e,t){const i=qo(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=rI(e),{host:u,port:d}=wP(e),p=d===null?"":`:${d}`,h={url:`${a}//${u}${p}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(Ur(h,i.config.emulator)&&Ur(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,tl(u)?(QS(`${a}//${u}${p}`),XS("Auth",!0)):IP()}function rI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wP(n){const e=rI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:UT(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:UT(u)}}}function UT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function IP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ns("not implemented")}_getIdTokenResponse(e){return Ns("not implemented")}_linkToIdToken(e,t){return Ns("not implemented")}_getReauthenticationResolver(e){return Ns("not implemented")}}async function RP(n,e){return Fs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bP(n,e){return Xu(n,"POST","/v1/accounts:signInWithPassword",Yr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(n,e){return Xu(n,"POST","/v1/accounts:signInWithEmailLink",Yr(n,e))}async function NP(n,e){return Xu(n,"POST","/v1/accounts:signInWithEmailLink",Yr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends cy{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Uu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Uu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jm(e,t,"signInWithPassword",bP);case"emailLink":return xP(e,{email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jm(e,i,"signUpPassword",RP);case"emailLink":return NP(e,{idToken:t,email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(n,e){return Xu(n,"POST","/v1/accounts:signInWithIdp",Yr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="http://localhost";class Do extends cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new Do(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return za(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,za(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,za(e,t)}buildRequest(){const e={requestUri:DP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ou(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kP(n){const e=mu(gu(n)).link,t=e?mu(gu(e)).deep_link_id:null,i=mu(gu(n)).deep_link_id;return(i?mu(gu(i)).link:null)||i||t||e||n}class dy{constructor(e){const t=mu(gu(e)),i=t.apiKey??null,o=t.oobCode??null,a=MP(t.mode??null);Ce(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=kP(e);try{return new dy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.providerId=ll.PROVIDER_ID}static credential(e,t){return Uu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=dy.parseLink(t);return Ce(i,"argument-error"),Uu._fromEmailAndCode(e,i.code,i.tenantId)}}ll.PROVIDER_ID="password";ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends oI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Wu{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Do._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ir.credential(t,i)}catch{return null}}}Ir.GOOGLE_SIGN_IN_METHOD="google.com";Ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Wu{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends Wu{constructor(){super("twitter.com")}static credential(e,t){return Do._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return br.credential(t,i)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(n,e){return Xu(n,"POST","/v1/accounts:signUp",Yr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Si._fromIdTokenResponse(e,i,o),u=LT(i);return new Mo({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=LT(i);return new Mo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function LT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends xi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Ef.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Ef(e,t,i,o)}}function aI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Ef._fromErrorAndOperation(n,a,e,i):a})}async function VP(n,e,t=!1){const i=await el(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(n,e,t=!1){const{auth:i}=n;if(ri(i.app))return Promise.reject(Ms(i));const o="reauthenticate";try{const a=await el(n,aI(i,o,e,n),t);Ce(a.idToken,i,"internal-error");const u=ly(a.idToken);Ce(u,i,"internal-error");const{sub:d}=u;return Ce(n.uid===d,i,"user-mismatch"),Mo._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&bi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(n,e,t=!1){if(ri(n.app))return Promise.reject(Ms(n));const i="signIn",o=await aI(n,i,e),a=await Mo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function LP(n,e){return lI(qo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(n){const e=qo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OP(n,e,t){if(ri(n.app))return Promise.reject(Ms(n));const i=qo(n),u=await jm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PP).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&uI(n),p}),d=await Mo._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function FP(n,e,t){return ri(n.app)?Promise.reject(Ms(n)):LP(At(n),ll.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&uI(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP(n,e){return Fs(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=At(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await el(i,BP(i.auth,a));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const d=i.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function GP(n,e,t,i){return At(n).onIdTokenChanged(e,t,i)}function HP(n,e,t){return At(n).beforeAuthStateChanged(e,t)}function cI(n,e,t,i){return At(n).onAuthStateChanged(e,t,i)}function zP(n){return At(n).signOut()}const Tf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=1e3,$P=10;class fI extends dI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);lP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,$P):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},KP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}fI.type="LOCAL";const YP=fI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI extends dI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}hI.type="SESSION";const pI=hI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Qf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(t.origin,a)),p=await JP(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const h=fy("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(){return window}function XP(n){os().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(){return typeof os().WorkerGlobalScope<"u"&&typeof os().importScripts=="function"}async function WP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function ZP(){return mI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI="firebaseLocalStorageDb",e4=1,Af="firebaseLocalStorage",yI="fbase_key";class ju{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xf(n,e){return n.transaction([Af],e?"readwrite":"readonly").objectStore(Af)}function t4(){const n=indexedDB.deleteDatabase(gI);return new ju(n).toPromise()}function Zm(){const n=indexedDB.open(gI,e4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Af,{keyPath:yI})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Af)?e(i):(i.close(),await t4(),e(await Zm()))})})}async function OT(n,e,t){const i=Xf(n,!0).put({[yI]:e,value:t});return new ju(i).toPromise()}async function n4(n,e){const t=Xf(n,!1).get(e),i=await new ju(t).toPromise();return i===void 0?null:i.value}function FT(n,e){const t=Xf(n,!0).delete(e);return new ju(t).toPromise()}const i4=800,s4=3;class _I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>s4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qf._getInstance(ZP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await WP(),!this.activeServiceWorker)return;this.sender=new QP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zm();return await OT(e,Tf,"1"),await FT(e,Tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>OT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>n4(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>FT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Xf(o,!1).getAll();return new ju(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_I.type="LOCAL";const r4=_I;new Qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(n,e){return e?Ds(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy extends cy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return za(e,this._buildIdpRequest())}_linkToIdToken(e,t){return za(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return za(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function a4(n){return lI(n.auth,new hy(n),n.bypassAuthState)}function l4(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),UP(t,new hy(n),n.bypassAuthState)}async function u4(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),VP(t,new hy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a4;case"linkViaPopup":case"linkViaRedirect":return u4;case"reauthViaPopup":case"reauthViaRedirect":return l4;default:bi(this.auth,"internal-error")}}resolve(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new Qu(2e3,1e4);class Ua extends vI{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Us(this.filter.length===1,"Popup operations only handle one event");const e=fy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(rs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(rs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,c4.get())};e()}}Ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="pendingRedirect",jd=new Map;class f4 extends vI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=jd.get(this.auth._key());if(!e){try{const i=await h4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}jd.set(this.auth._key(),e)}return this.bypassAuthState||jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h4(n,e){const t=g4(e),i=m4(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function p4(n,e){jd.set(n._key(),e)}function m4(n){return Ds(n._redirectPersistence)}function g4(n){return Wd(d4,n.config.apiKey,n.name)}async function y4(n,e,t=!1){if(ri(n.app))return Promise.reject(Ms(n));const i=qo(n),o=o4(i,e),u=await new f4(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=600*1e3;class v4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!EI(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(rs(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_4&&this.cachedEventUids.clear(),this.cachedEventUids.has(BT(e))}saveEventToCache(e){this.cachedEventUids.add(BT(e)),this.lastProcessedEventTime=Date.now()}}function BT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function EI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(n,e={}){return Fs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S4=/^https?/;async function C4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await T4(n);for(const t of e)try{if(w4(t))return}catch{}bi(n,"unauthorized-domain")}function w4(n){const e=Xm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!S4.test(t))return!1;if(A4.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new Qu(3e4,6e4);function qT(){const n=os().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function R4(n){return new Promise((e,t)=>{var o,a,u;function i(){qT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qT(),t(rs(n,"network-request-failed"))},timeout:I4.get()})}if((a=(o=os().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=os().gapi)!=null&&u.load)i();else{const d=yP("iframefcb");return os()[d]=()=>{gapi.load?i():t(rs(n,"network-request-failed"))},iI(`${gP()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Zd=null,e})}let Zd=null;function b4(n){return Zd=Zd||R4(n),Zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=new Qu(5e3,15e3),N4="__/auth/iframe",D4="emulator/auth/iframe",M4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P4(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ay(e,D4):`https://${n.config.authDomain}/${N4}`,i={apiKey:e.apiKey,appName:n.name,v:nl},o=k4.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Ou(i).slice(1)}`}async function V4(n){const e=await b4(n),t=os().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:P4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M4,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=rs(n,"network-request-failed"),d=os().setTimeout(()=>{a(u)},x4.get());function p(){os().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L4=500,O4=600,F4="_blank",B4="http://localhost";class GT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q4(n,e,t,i=L4,o=O4){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...U4,width:i.toString(),height:o.toString(),top:a,left:u},h=mn().toLowerCase();t&&(d=Xw(h)?F4:t),Jw(h)&&(e=e||B4,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[I,k])=>`${T}${I}=${k},`,"");if(aP(h)&&d!=="_self")return G4(e||"",d),new GT(null);const E=window.open(e||"",d,_);Ce(E,n,"popup-blocked");try{E.focus()}catch{}return new GT(E)}function G4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="__/auth/handler",z4="emulator/auth/handler",K4=encodeURIComponent("fac");async function HT(n,e,t,i,o,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:nl,eventId:o};if(e instanceof oI){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",uN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Wu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),h=p?`#${K4}=${encodeURIComponent(p)}`:"";return`${$4(n)}?${Ou(d).slice(1)}${h}`}function $4({config:n}){return n.emulator?ay(n,z4):`https://${n.authDomain}/${H4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="webStorageSupport";class Y4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pI,this._completeRedirectFn=y4,this._overrideRedirectResult=p4}async _openPopup(e,t,i,o){var u;Us((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await HT(e,t,i,Xm(),o);return q4(e,a,fy())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await HT(e,t,i,Xm(),o);return XP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Us(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await V4(e),i=new v4(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Em,{type:Em},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[Em];a!==void 0&&t(!!a),bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=C4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tI()||Qw()||uy()}}const J4=Y4;var zT="@firebase/auth",KT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W4(n){as(new Ii("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nI(n)},h=new hP(i,o,a,p);return SP(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),as(new Ii("auth-internal",e=>{const t=qo(e.getProvider("auth").getImmediate());return(i=>new Q4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ai(zT,KT,X4(n)),ai(zT,KT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=300,Z4=JS("authIdTokenMaxAge")||j4;let $T=null;const eV=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Z4)return;const o=t==null?void 0:t.token;$T!==o&&($T=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function tV(n=Eg()){const e=Uo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=AP(n,{popupRedirectResolver:J4,persistence:[r4,YP,pI]}),i=JS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=eV(a.toString());HP(t,u,()=>u(t.currentUser)),GP(t,d=>u(d))}}const o=$S("auth");return o&&CP(t,`http://${o}`),t}function nV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}pP({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=rs("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",nV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W4("Browser");const TI="@firebase/installations",py="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=1e4,SI=`w:${py}`,CI="FIS_v2",iV="https://firebaseinstallations.googleapis.com/v1",sV=3600*1e3,rV="installations",oV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ko=new Vo(rV,oV,aV);function wI(n){return n instanceof xi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II({projectId:n}){return`${iV}/projects/${n}/installations`}function RI(n){return{token:n.token,requestStatus:2,expiresIn:uV(n.expiresIn),creationTime:Date.now()}}async function bI(n,e){const i=(await e.json()).error;return ko.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function xI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function lV(n,{refreshToken:e}){const t=xI(n);return t.append("Authorization",cV(e)),t}async function NI(n){const e=await n();return e.status>=500&&e.status<600?n():e}function uV(n){return Number(n.replace("s","000"))}function cV(n){return`${CI} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=II(n),o=xI(n),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const u={fid:t,authVersion:CI,appId:n.appId,sdkVersion:SI},d={method:"POST",headers:o,body:JSON.stringify(u)},p=await NI(()=>fetch(i,d));if(p.ok){const h=await p.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:RI(h.authToken)}}else throw await bI("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=/^[cdef][\w-]{21}$/,eg="";function pV(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=mV(n);return hV.test(t)?t:eg}catch{return eg}}function mV(n){return fV(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=new Map;function kI(n,e){const t=Wf(n);PI(t,e),gV(t,e)}function PI(n,e){const t=MI.get(n);if(t)for(const i of t)i(e)}function gV(n,e){const t=yV();t&&t.postMessage({key:n,fid:e}),_V()}let Ro=null;function yV(){return!Ro&&"BroadcastChannel"in self&&(Ro=new BroadcastChannel("[Firebase] FID Change"),Ro.onmessage=n=>{PI(n.data.key,n.data.fid)}),Ro}function _V(){MI.size===0&&Ro&&(Ro.close(),Ro=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV="firebase-installations-database",EV=1,Po="firebase-installations-store";let Tm=null;function my(){return Tm||(Tm=nC(vV,EV,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Po)}}})),Tm}async function Sf(n,e){const t=Wf(n),o=(await my()).transaction(Po,"readwrite"),a=o.objectStore(Po),u=await a.get(t);return await a.put(e,t),await o.done,(!u||u.fid!==e.fid)&&kI(n,e.fid),e}async function VI(n){const e=Wf(n),i=(await my()).transaction(Po,"readwrite");await i.objectStore(Po).delete(e),await i.done}async function jf(n,e){const t=Wf(n),o=(await my()).transaction(Po,"readwrite"),a=o.objectStore(Po),u=await a.get(t),d=e(u);return d===void 0?await a.delete(t):await a.put(d,t),await o.done,d&&(!u||u.fid!==d.fid)&&kI(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gy(n){let e;const t=await jf(n.appConfig,i=>{const o=TV(i),a=AV(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===eg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function TV(n){const e=n||{fid:pV(),registrationStatus:0};return UI(e)}function AV(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ko.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=SV(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:CV(n)}:{installationEntry:e}}async function SV(n,e){try{const t=await dV(n,e);return Sf(n.appConfig,t)}catch(t){throw wI(t)&&t.customData.serverCode===409?await VI(n.appConfig):await Sf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function CV(n){let e=await YT(n.appConfig);for(;e.registrationStatus===1;)await DI(100),e=await YT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await gy(n);return i||t}return e}function YT(n){return jf(n,e=>{if(!e)throw ko.create("installation-not-found");return UI(e)})}function UI(n){return wV(n)?{fid:n.fid,registrationStatus:0}:n}function wV(n){return n.registrationStatus===1&&n.registrationTime+AI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV({appConfig:n,heartbeatServiceProvider:e},t){const i=RV(n,t),o=lV(n,t),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const u={installation:{sdkVersion:SI,appId:n.appId}},d={method:"POST",headers:o,body:JSON.stringify(u)},p=await NI(()=>fetch(i,d));if(p.ok){const h=await p.json();return RI(h)}else throw await bI("Generate Auth Token",p)}function RV(n,{fid:e}){return`${II(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yy(n,e=!1){let t;const i=await jf(n.appConfig,a=>{if(!LI(a))throw ko.create("not-registered");const u=a.authToken;if(!e&&NV(u))return a;if(u.requestStatus===1)return t=bV(n,e),a;{if(!navigator.onLine)throw ko.create("app-offline");const d=MV(a);return t=xV(n,d),d}});return t?await t:i.authToken}async function bV(n,e){let t=await JT(n.appConfig);for(;t.authToken.requestStatus===1;)await DI(100),t=await JT(n.appConfig);const i=t.authToken;return i.requestStatus===0?yy(n,e):i}function JT(n){return jf(n,e=>{if(!LI(e))throw ko.create("not-registered");const t=e.authToken;return kV(t)?{...e,authToken:{requestStatus:0}}:e})}async function xV(n,e){try{const t=await IV(n,e),i={...e,authToken:t};return await Sf(n.appConfig,i),t}catch(t){if(wI(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await VI(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Sf(n.appConfig,i)}throw t}}function LI(n){return n!==void 0&&n.registrationStatus===2}function NV(n){return n.requestStatus===2&&!DV(n)}function DV(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+sV}function MV(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function kV(n){return n.requestStatus===1&&n.requestTime+AI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(n){const e=n,{installationEntry:t,registrationPromise:i}=await gy(e);return i?i.catch(console.error):yy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VV(n,e=!1){const t=n;return await UV(t),(await yy(t,e)).token}async function UV(n){const{registrationPromise:e}=await gy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(n){if(!n||!n.options)throw Am("App Configuration");if(!n.name)throw Am("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Am(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Am(n){return ko.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="installations",OV="installations-internal",FV=n=>{const e=n.getProvider("app").getImmediate(),t=LV(e),i=Uo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},BV=n=>{const e=n.getProvider("app").getImmediate(),t=Uo(e,OI).getImmediate();return{getId:()=>PV(t),getToken:o=>VV(t,o)}};function qV(){as(new Ii(OI,FV,"PUBLIC")),as(new Ii(OV,BV,"PRIVATE"))}qV();ai(TI,py);ai(TI,py,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="analytics",GV="firebase_id",HV="origin",zV=60*1e3,KV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_y="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new Df("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Hn=new Vo("analytics","Analytics",$V);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(n){if(!n.startsWith(_y)){const e=Hn.create("invalid-gtag-resource",{gtagURL:n});return Tn.warn(e.message),""}return n}function FI(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function JV(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function QV(n,e){const t=JV("firebase-js-sdk-policy",{createScriptURL:YV}),i=document.createElement("script"),o=`${_y}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function XV(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function WV(n,e,t,i,o,a){const u=i[o];try{if(u)await e[u];else{const p=(await FI(t)).find(h=>h.measurementId===o);p&&await e[p.appId]}}catch(d){Tn.error(d)}n("config",o,a)}async function jV(n,e,t,i,o){try{let a=[];if(o&&o.send_to){let u=o.send_to;Array.isArray(u)||(u=[u]);const d=await FI(t);for(const p of u){const h=d.find(E=>E.measurementId===p),_=h&&e[h.appId];if(_)a.push(_);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",i,o||{})}catch(a){Tn.error(a)}}function ZV(n,e,t,i){async function o(a,...u){try{if(a==="event"){const[d,p]=u;await jV(n,e,t,d,p)}else if(a==="config"){const[d,p]=u;await WV(n,e,t,i,d,p)}else if(a==="consent"){const[d,p]=u;n("consent",d,p)}else if(a==="get"){const[d,p,h]=u;n("get",d,p,h)}else if(a==="set"){const[d]=u;n("set",d)}else n(a,...u)}catch(d){Tn.error(d)}}return o}function eU(n,e,t,i,o){let a=function(...u){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=ZV(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function tU(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(_y)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=30,iU=1e3;class sU{constructor(e={},t=iU){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const BI=new sU;function rU(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function oU(n){var u;const{appId:e,apiKey:t}=n,i={method:"GET",headers:rU(t)},o=KV.replace("{app-id}",e),a=await fetch(o,i);if(a.status!==200&&a.status!==304){let d="";try{const p=await a.json();(u=p.error)!=null&&u.message&&(d=p.error.message)}catch{}throw Hn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:d})}return a.json()}async function aU(n,e=BI,t){const{appId:i,apiKey:o,measurementId:a}=n.options;if(!i)throw Hn.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:i};throw Hn.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new cU;return setTimeout(async()=>{d.abort()},zV),qI({appId:i,apiKey:o,measurementId:a},u,d,e)}async function qI(n,{throttleEndTimeMillis:e,backoffCount:t},i,o=BI){var d;const{appId:a,measurementId:u}=n;try{await lU(i,e)}catch(p){if(u)return Tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:a,measurementId:u};throw p}try{const p=await oU(n);return o.deleteThrottleMetadata(a),p}catch(p){const h=p;if(!uU(h)){if(o.deleteThrottleMetadata(a),u)return Tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:u};throw p}const _=Number((d=h==null?void 0:h.customData)==null?void 0:d.httpStatus)===503?EE(t,o.intervalMillis,nU):EE(t,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return o.setThrottleMetadata(a,E),Tn.debug(`Calling attemptFetch again in ${_} millis`),qI(n,E,i,o)}}function lU(n,e){return new Promise((t,i)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),i(Hn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function uU(n){if(!(n instanceof xi)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class cU{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function dU(n,e,t,i,o){if(o&&o.global){n("event",t,i);return}else{const a=await e,u={...i,send_to:a};n("event",t,u)}}async function fU(n,e,t,i){if(i&&i.global){const o={};for(const a of Object.keys(t))o[`user_properties.${a}`]=t[a];return n("set",o),Promise.resolve()}else{const o=await e;n("config",o,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(){if(jS())try{await ZS()}catch(n){return Tn.warn(Hn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Tn.warn(Hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function pU(n,e,t,i,o,a,u){const d=aU(n);d.then(T=>{t[T.measurementId]=T.appId,n.options.measurementId&&T.measurementId!==n.options.measurementId&&Tn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>Tn.error(T)),e.push(d);const p=hU().then(T=>{if(T)return i.getId()}),[h,_]=await Promise.all([d,p]);tU(a)||QV(a,h.measurementId),o("js",new Date);const E=(u==null?void 0:u.config)??{};return E[HV]="firebase",E.update=!0,_!=null&&(E[GV]=_),o("config",h.measurementId,E),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e){this.app=e}_delete(){return delete Ka[this.app.options.appId],Promise.resolve()}}let Ka={},QT=[];const XT={};let Sm="dataLayer",gU="gtag",WT,vy,jT=!1;function yU(){const n=[];if(WS()&&n.push("This is a browser extension environment."),rN()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,o)=>`(${o+1}) ${i}`).join(" "),t=Hn.create("invalid-analytics-context",{errorInfo:e});Tn.warn(t.message)}}function _U(n,e,t){yU();const i=n.options.appId;if(!i)throw Hn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Hn.create("no-api-key");if(Ka[i]!=null)throw Hn.create("already-exists",{id:i});if(!jT){XV(Sm);const{wrappedGtag:a,gtagCore:u}=eU(Ka,QT,XT,Sm,gU);vy=a,WT=u,jT=!0}return Ka[i]=pU(n,QT,XT,e,WT,Sm,t),new mU(n)}function vU(n=Eg()){n=At(n);const e=Uo(n,Cf);return e.isInitialized()?e.getImmediate():EU(n)}function EU(n,e={}){const t=Uo(n,Cf);if(t.isInitialized()){const o=t.getImmediate();if(Ur(e,t.getOptions()))return o;throw Hn.create("already-initialized")}return t.initialize({options:e})}function TU(n,e,t){n=At(n),fU(vy,Ka[n.app.options.appId],e,t).catch(i=>Tn.error(i))}function AU(n,e,t,i){n=At(n),dU(vy,Ka[n.app.options.appId],e,t,i).catch(o=>Tn.error(o))}const ZT="@firebase/analytics",eA="0.10.19";function SU(){as(new Ii(Cf,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return _U(i,o,t)},"PUBLIC")),as(new Ii("analytics-internal",n,"PRIVATE")),ai(ZT,eA),ai(ZT,eA,"esm2020");function n(e){try{const t=e.getProvider(Cf).getImmediate();return{logEvent:(i,o,a)=>AU(t,i,o,a),setUserProperties:(i,o)=>TU(t,i,o)}}catch(t){throw Hn.create("interop-component-reg-failed",{reason:t})}}}SU();const CU={apiKey:"AIzaSyDAbQWI8JJJZxi4u2m3CpXoVXo_tfV9idQ",authDomain:"spanish-reading-7f2f6.firebaseapp.com",projectId:"spanish-reading-7f2f6",storageBucket:"spanish-reading-7f2f6.firebasestorage.app",messagingSenderId:"199552752380",appId:"1:199552752380:web:7f00e4d764d4cefcde5579",measurementId:"G-B41M23QF87"},Ey=iC(CU);if(typeof window<"u")try{vU(Ey)}catch(n){console.warn("Analytics initialization failed",n)}const Ni=Ik(Ey),bo=tV(Ey),wU=({currentView:n,onChangeView:e,children:t,theme:i,onToggleTheme:o,isGuest:a,onLogoutGuest:u})=>{var h,_,E;const d=async()=>{if(window.confirm("Mchten Sie sich wirklich abmelden?"))if(a)u==null||u();else try{await zP(bo)}catch(T){console.error("Logout failed:",T)}},p=a?"Gast":((h=bo.currentUser)==null?void 0:h.displayName)||((E=(_=bo.currentUser)==null?void 0:_.email)==null?void 0:E.split("@")[0]);return w.jsxs("div",{className:"min-h-screen flex flex-col bg-[#FDFBF7] dark:bg-[#12100E]",children:[w.jsx("header",{className:"bg-[#FDFBF7]/90 dark:bg-[#12100E]/90 backdrop-blur-xl border-b border-[#EAE2D6] dark:border-[#2C2420] sticky top-0 z-50 transition-colors",children:w.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-20 flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>e(lt.HOME),children:[w.jsx("div",{className:"bg-[#2C2420] dark:bg-[#D4A373] p-2 rounded-xl text-[#FDFBF7] dark:text-[#12100E] shadow-md group-hover:bg-[#B26B4A] dark:group-hover:bg-[#B26B4A] transition-colors duration-500",children:w.jsx(Im,{className:"w-4 h-4"})}),w.jsxs("div",{className:"hidden sm:block",children:[w.jsx("h1",{className:"text-lg font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] tracking-tight",children:"Leseassistent"}),w.jsx("p",{className:"text-[8px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-[0.2em] -mt-1 opacity-60",children:"Tu compaero"})]})]}),w.jsxs("nav",{className:"flex items-center bg-[#2C2420]/5 dark:bg-white/5 p-1.5 rounded-2xl border border-[#2C2420]/5 dark:border-white/5 mx-2",children:[w.jsxs("button",{onClick:()=>e(lt.HOME),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===lt.HOME?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[w.jsx(Im,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Lesen"})]}),w.jsxs("button",{onClick:()=>e(lt.ANALYZE),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===lt.ANALYZE?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[w.jsx(OS,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Scan"})]}),w.jsxs("button",{onClick:()=>e(lt.VOCAB),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===lt.VOCAB?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[w.jsx(LS,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Lernen"})]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("div",{className:"hidden lg:flex items-center gap-2 px-3 py-1.5 bg-[#FDFBF7] dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-xl mr-2",children:[w.jsx(GS,{className:"w-3.5 h-3.5 text-[#B26B4A] dark:text-[#D4A373]"}),w.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D]",children:p})]}),w.jsx("button",{onClick:o,className:"p-2.5 rounded-xl bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-[#B26B4A] dark:hover:text-[#D4A373] transition-all",title:"Design ndern",children:i==="dark"?w.jsx(Dx,{className:"w-4 h-4"}):w.jsx(gx,{className:"w-4 h-4"})}),w.jsx("button",{onClick:()=>e(lt.SETTINGS),className:`p-2.5 rounded-xl transition-colors shadow-sm ${n===lt.SETTINGS?"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E]":"bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-[#B26B4A] dark:hover:text-[#D4A373]"}`,title:"Einstellungen",children:w.jsx(FS,{className:"w-4 h-4"})}),w.jsx("button",{onClick:d,className:"p-2.5 rounded-xl bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-red-500 transition-all",title:"Abmelden",children:w.jsx(fx,{className:"w-4 h-4"})})]})]})}),w.jsx("main",{className:`flex-grow p-6 w-full mx-auto ${n===lt.ANALYZE?"max-w-6xl":"max-w-4xl"} transition-colors`,children:t})]})};var IU={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let RU,bU;function xU(){return{geminiUrl:RU,vertexUrl:bU}}function NU(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=xU();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bs{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let h=0;h<p.length;h++){const _=p[h];m(_,e.slice(a+1),t[h])}else for(const h of p)m(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];m(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function DU(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const h=a[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}tg(n,o,a,0,u)}}function tg(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])tg(p,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),p={};for(const h of d)p[h]=u[h];for(const[h,_]of Object.entries(p)){const E=[];for(const T of t.slice(i))T==="*"?E.push(h):E.push(T);m(u,E,_)}for(const h of d)delete u[h]}}else{const u=n;a in u&&tg(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ty(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MU(n){const e={},t=f(n,["operationName"]);t!=null&&m(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function kU(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],VU(u)),e}function PU(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],UU(u)),e}function VU(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>LU(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function UU(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>OU(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function LU(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],zU(t)),e}function OU(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],KU(t)),e}function FU(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function BU(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function qU(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],GU(u)),e}function GU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function GI(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],HU(u)),e}function HU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function zU(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Ty(i));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function KU(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Ty(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var tA;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(tA||(tA={}));var nA;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(nA||(nA={}));var iA;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(iA||(iA={}));var Dt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Dt||(Dt={}));var sA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(sA||(sA={}));var rA;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(rA||(rA={}));var oA;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(oA||(oA={}));var aA;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(aA||(aA={}));var lA;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(lA||(lA={}));var uA;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(uA||(uA={}));var cA;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(cA||(cA={}));var dA;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(dA||(dA={}));var fA;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(fA||(fA={}));var hA;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(hA||(hA={}));var pA;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(pA||(pA={}));var mA;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(mA||(mA={}));var gA;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gA||(gA={}));var yA;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(yA||(yA={}));var _A;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_A||(_A={}));var Lu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Lu||(Lu={}));var vA;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vA||(vA={}));var EA;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(EA||(EA={}));var TA;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(TA||(TA={}));var ng;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ng||(ng={}));var AA;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(AA||(AA={}));var SA;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(SA||(SA={}));var CA;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(CA||(CA={}));var wA;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(wA||(wA={}));var IA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(IA||(IA={}));var RA;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(RA||(RA={}));var bA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(bA||(bA={}));var xA;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(xA||(xA={}));var NA;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(NA||(NA={}));var DA;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(DA||(DA={}));var MA;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(MA||(MA={}));var kA;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kA||(kA={}));var PA;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(PA||(PA={}));var VA;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(VA||(VA={}));var UA;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(UA||(UA={}));var LA;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(LA||(LA={}));var OA;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(OA||(OA={}));var FA;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(FA||(FA={}));var BA;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(BA||(BA={}));var qA;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(qA||(qA={}));var GA;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(GA||(GA={}));var HA;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(HA||(HA={}));var zA;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zA||(zA={}));var KA;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(KA||(KA={}));var $A;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})($A||($A={}));var YA;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(YA||(YA={}));var JA;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(JA||(JA={}));var QA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(QA||(QA={}));var XA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(XA||(XA={}));var WA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(WA||(WA={}));var jA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(jA||(jA={}));var La;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(La||(La={}));class ig{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class hu{get text(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const E=[];for(const T of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[I,k]of Object.entries(T))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(k!==null||k!==void 0)&&E.push(I);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;_=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const E of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[T,I]of Object.entries(E))T!=="inlineData"&&(I!==null||I!==void 0)&&_.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,d,p,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,d,p,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class ZA{}class eS{}class $U{}class YU{}class JU{}class QU{}class tS{}class nS{}class iS{}class XU{}class wf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new wf;let o;const a=e;return t?o=PU(a):o=kU(a),Object.assign(i,o),i}}class sS{}class rS{}class oS{}class aS{}class WU{}class jU{}class ZU{}class Ay{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ay,a=qU(e);return Object.assign(i,a),i}}class eL{}class tL{}class nL{}class lS{}class iL{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class sL{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Sy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Sy,a=GI(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function je(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function HI(n,e){const t=je(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function zI(n){return Array.isArray(n)?n.map(e=>If(e)):[If(n)]}function If(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function KI(n){const e=If(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $I(n){const e=If(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function uS(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function YI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>uS(e)):[uS(n)]}function sg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function cS(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function dS(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function pn(n){if(n==null)throw new Error("ContentUnion is required");return sg(n)?n:{role:"user",parts:YI(n)}}function Cy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=pn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=pn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>pn(t)):[pn(e)]}function li(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(cS(n)||dS(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[pn(n)]}const e=[],t=[],i=sg(n[0]);for(const o of n){const a=sg(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(cS(o)||dS(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:YI(t)}),e}function rL(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Dt).includes(t[0].toUpperCase())?t[0].toUpperCase():Dt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Dt).includes(i.toUpperCase())?i.toUpperCase():Dt.TYPE_UNSPECIFIED})}}function $a(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&rL(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Dt).includes(d.toUpperCase())?d.toUpperCase():Dt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=$a(d);else if(i.includes(u)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push($a(h))}e[u]=p}else if(o.includes(u)){const p={};for(const[h,_]of Object.entries(d))p[h]=$a(_);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function wy(n){return $a(n)}function Iy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Ry(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ul(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=$a(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=$a(e.response));return n}function cl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function oL(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function qs(n,e){if(typeof e!="string")throw new Error("name must be a string");return oL(n,e,"cachedContents")}function JI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Jr(n){return Ty(n)}function aL(n){return n!=null&&typeof n=="object"&&"name"in n}function lL(n){return n!=null&&typeof n=="object"&&"video"in n}function uL(n){return n!=null&&typeof n=="object"&&"uri"in n}function QI(n){var e;let t;if(aL(n)&&(t=n.name),!(uL(n)&&(t=n.uri,t===void 0))&&!(lL(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function XI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function WI(n){for(const e of["models","tunedModels","publisherModels"])if(cL(n,e))return n[e];return[]}function cL(n,e){return n!==null&&typeof n=="object"&&e in n}function dL(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function fL(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=dL(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function jI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function hL(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ZI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function dl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function eR(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pL(n){const e={},t=f(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>JL(u))),m(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["inlinedEmbedContentResponses"],a)}return e}function mL(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function gL(n){const e={},t=f(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ef(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&m(e,["state"],eR(o));const a=f(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&m(e,["model"],p);const h=f(n,["metadata","output"]);return h!=null&&m(e,["dest"],pL(ZI(h))),e}function rg(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["state"]);o!=null&&m(e,["state"],eR(o));const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["createTime"]);u!=null&&m(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(e,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(e,["updateTime"],h);const _=f(n,["model"]);_!=null&&m(e,["model"],_);const E=f(n,["inputConfig"]);E!=null&&m(e,["src"],yL(E));const T=f(n,["outputConfig"]);T!=null&&m(e,["dest"],mL(ZI(T)));const I=f(n,["completionStats"]);return I!=null&&m(e,["completionStats"],I),e}function yL(n){const e={},t=f(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function _L(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&m(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>YL(n,u))),m(t,["requests","requests"],a)}return t}function vL(n){const e={},t=f(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function EL(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function TL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],dl(n,i)),t}function AL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],dl(n,i)),t}function SL(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],CL(i));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const h=f(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),m(e,["safetyRatings"],T)}const E=f(n,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function CL(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function tR(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>tO(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function wL(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function IL(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],gL(hL(o))),t}function fS(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],_L(n,jI(n,o)));const a=f(e,["config"]);return a!=null&&wL(a,t),t}function RL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],je(n,i));const o=f(e,["src"]);o!=null&&m(t,["inputConfig"],vL(jI(n,o)));const a=f(e,["config"]);return a!=null&&IL(a,t),t}function bL(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),t}function xL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],UL(n,o));const a=f(e,["config"]);return a!=null&&bL(a,t),t}function NL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],dl(n,i)),t}function DL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],dl(n,i)),t}function ML(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function kL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function PL(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Cy(n,i);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(m(t,["_self"],VL(o,t)),DU(t,{"requests[].*":"requests[].request.*"})),t}function VL(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function UL(n,e){const t={},i=f(e,["fileName"]);i!=null&&m(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&m(t,["requests"],PL(n,o)),t}function LL(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function OL(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FL(n){const e={},t=f(n,["mode"]);t!=null&&m(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function BL(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],tR(pn(o)));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=f(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=f(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=f(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const F=f(e,["seed"]);F!=null&&m(i,["seed"],F);const U=f(e,["responseMimeType"]);U!=null&&m(i,["responseMimeType"],U);const Y=f(e,["responseSchema"]);Y!=null&&m(i,["responseSchema"],wy(Y));const te=f(e,["responseJsonSchema"]);if(te!=null&&m(i,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let N=W;Array.isArray(N)&&(N=N.map(ye=>nO(ye))),m(t,["safetySettings"],N)}const re=f(e,["tools"]);if(t!==void 0&&re!=null){let N=cl(re);Array.isArray(N)&&(N=N.map(ye=>sO(ul(ye)))),m(t,["tools"],N)}const ce=f(e,["toolConfig"]);if(t!==void 0&&ce!=null&&m(t,["toolConfig"],iO(ce)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&m(t,["cachedContent"],qs(n,le));const x=f(e,["responseModalities"]);x!=null&&m(i,["responseModalities"],x);const M=f(e,["mediaResolution"]);M!=null&&m(i,["mediaResolution"],M);const D=f(e,["speechConfig"]);if(D!=null&&m(i,["speechConfig"],Iy(D)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&m(i,["thinkingConfig"],L);const P=f(e,["imageConfig"]);P!=null&&m(i,["imageConfig"],$L(P));const O=f(e,["enableEnhancedCivicAnswers"]);return O!=null&&m(i,["enableEnhancedCivicAnswers"],O),i}function qL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>SL(h))),m(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function GL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],dl(n,i)),t}function HL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],dl(n,i)),t}function zL(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function KL(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function $L(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function YL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["request","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let d=li(o);Array.isArray(d)&&(d=d.map(p=>tR(p))),m(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&m(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&m(t,["request","generationConfig"],BL(n,u,f(t,["request"],{}))),t}function JL(n){const e={},t=f(n,["response"]);t!=null&&m(e,["response"],qL(t));const i=f(n,["error"]);return i!=null&&m(e,["error"],i),e}function QL(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function XL(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function WL(n){const e={},t=f(n,["config"]);return t!=null&&QL(t,e),e}function jL(n){const e={},t=f(n,["config"]);return t!=null&&XL(t,e),e}function ZL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>ef(u))),m(e,["batchJobs"],a)}return e}function eO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>rg(u))),m(e,["batchJobs"],a)}return e}function tO(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],LL(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],OL(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],EL(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function nO(n){const e={},t=f(n,["category"]);if(t!=null&&m(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function iO(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],FL(t));const i=f(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function sO(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],zL(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],KL(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ls;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ls||(Ls={}));class Go{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rO extends Bs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Go(Ls.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=fS(this.apiClient,e),i=t._url,o=fe("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,p=d.requests,h=[];for(const _ of p){const E=Object.assign({},_);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=T,E.request=I}h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=RL(this.apiClient,e);return d=fe("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>rg(_))}else{const h=fS(this.apiClient,e);return d=fe("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>ef(_))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xL(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>ef(p))}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=HL(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>rg(_))}else{const h=GL(this.apiClient,e);return d=fe("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>ef(_))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=AL(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=TL(this.apiClient,e);u=fe("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=jL(e);return d=fe("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=eO(_),T=new lS;return Object.assign(T,E),T})}else{const h=WL(e);return d=fe("batches",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=ZL(_),T=new lS;return Object.assign(T,E),T})}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=DL(this.apiClient,e);return d=fe("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>kL(_))}else{const h=NL(this.apiClient,e);return d=fe("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>ML(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oO(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function hS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>xO(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function aO(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=li(u);Array.isArray(_)&&(_=_.map(E=>hS(E))),m(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],hS(pn(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(E=>DO(E))),m(e,["tools"],_)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],NO(h)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function lO(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=li(u);Array.isArray(E)&&(E=E.map(T=>T)),m(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],pn(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(T=>MO(T))),m(e,["tools"],E)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),t}function uO(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],HI(n,i));const o=f(e,["config"]);return o!=null&&aO(o,t),t}function cO(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],HI(n,i));const o=f(e,["config"]);return o!=null&&lO(o,t),t}function dO(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],qs(n,i)),t}function fO(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],qs(n,i)),t}function hO(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function pO(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function mO(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function gO(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yO(n){const e={},t=f(n,["mode"]);t!=null&&m(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _O(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function vO(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],qs(n,i)),t}function EO(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],qs(n,i)),t}function TO(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function AO(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function SO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function CO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function wO(n){const e={},t=f(n,["config"]);return t!=null&&SO(t,e),e}function IO(n){const e={},t=f(n,["config"]);return t!=null&&CO(t,e),e}function RO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function bO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function xO(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],mO(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],gO(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],oO(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function NO(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],yO(t));const i=f(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function DO(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],TO(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],AO(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function MO(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>_O(T))),m(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function kO(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function PO(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function VO(n,e){const t={},i=f(e,["name"]);i!=null&&m(t,["_url","name"],qs(n,i));const o=f(e,["config"]);return o!=null&&kO(o,t),t}function UO(n,e){const t={},i=f(e,["name"]);i!=null&&m(t,["_url","name"],qs(n,i));const o=f(e,["config"]);return o!=null&&PO(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LO extends Bs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Go(Ls.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=cO(this.apiClient,e);return d=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=uO(this.apiClient,e);return d=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=EO(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=vO(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=fO(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=pO(_),T=new oS;return Object.assign(T,E),T})}else{const h=dO(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=hO(_),T=new oS;return Object.assign(T,E),T})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=UO(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=VO(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=IO(e);return d=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=bO(_),T=new aS;return Object.assign(T,E),T})}else{const h=wO(e);return d=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=RO(_),T=new aS;return Object.assign(T,E),T})}}}function Rf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function pS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Re(n){return this instanceof Re?(this.v=n,this):new Re(n)}function Ci(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(I){return function(k){return Promise.resolve(k).then(I,E)}}function d(I,k){i[I]&&(o[I]=function(F){return new Promise(function(U,Y){a.push([I,F,U,Y])>1||p(I,F)})},k&&(o[I]=k(o[I])))}function p(I,k){try{h(i[I](k))}catch(F){T(a[0][3],F)}}function h(I){I.value instanceof Re?Promise.resolve(I.value.v).then(_,E):T(a[0][2],I)}function _(I){p("next",I)}function E(I){p("throw",I)}function T(I,k){I(k),a.shift(),a.length&&p(a[0][0],a[0][1])}}function wi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pS=="function"?pS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,p){u=n[a](u),o(d,p,u.done,u.value)})}}function o(a,u,d,p){Promise.resolve(p).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OO(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:nR(t)}function nR(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function FO(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function mS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!nR(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class BO{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new qO(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class qO{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),FO(a)}async sendMessage(e){var t;await this.sendPromise;const i=pn(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await o,h=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];_!=null&&(T=(d=_.slice(E))!==null&&d!==void 0?d:[]);const I=h?[h]:[];this.recordHistory(i,I,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=pn(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?mS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Ci(this,arguments,function*(){var o,a,u,d,p,h;const _=[];try{for(var E=!0,T=wi(e),I;I=yield Re(T.next()),o=I.done,!o;E=!0){d=I.value,E=!1;const k=d;if(OO(k)){const F=(h=(p=k.candidates)===null||p===void 0?void 0:p[0])===null||h===void 0?void 0:h.content;F!==void 0&&_.push(F)}yield yield Re(k)}}catch(k){a={error:k}}finally{try{!E&&!o&&(u=T.return)&&(yield Re(u.call(T)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...mS(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Zf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GO(n){const e={},t=f(n,["file"]);return t!=null&&m(e,["file"],t),e}function HO(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function zO(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],QI(t)),e}function KO(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function $O(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],QI(t)),e}function YO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function JO(n){const e={},t=f(n,["config"]);return t!=null&&YO(t,e),e}function QO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XO extends Bs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Go(Ls.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=JO(e);return a=fe("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=QO(p),_=new eL;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=GO(e);return a=fe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=HO(p),_=new tL;return Object.assign(_,h),_})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$O(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zO(e);return a=fe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=KO(p),_=new nL;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tf(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function WO(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>h6(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function jO(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function ZO(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function e6(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function t6(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const E=f(n,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const T=f(n,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const I=f(n,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const k=f(n,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const F=f(n,["responseSchema"]);F!=null&&m(e,["responseSchema"],F);const U=f(n,["routingConfig"]);U!=null&&m(e,["routingConfig"],U);const Y=f(n,["seed"]);Y!=null&&m(e,["seed"],Y);const te=f(n,["speechConfig"]);te!=null&&m(e,["speechConfig"],te);const W=f(n,["stopSequences"]);W!=null&&m(e,["stopSequences"],W);const re=f(n,["temperature"]);re!=null&&m(e,["temperature"],re);const ce=f(n,["thinkingConfig"]);ce!=null&&m(e,["thinkingConfig"],ce);const le=f(n,["topK"]);le!=null&&m(e,["topK"],le);const x=f(n,["topP"]);if(x!=null&&m(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function n6(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function i6(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function s6(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Ry(E));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],WO(pn(k)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let le=cl(F);Array.isArray(le)&&(le=le.map(x=>m6(ul(x)))),m(e,["setup","tools"],le)}const U=f(n,["sessionResumption"]);e!==void 0&&U!=null&&m(e,["setup","sessionResumption"],p6(U));const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&m(e,["setup","inputAudioTranscription"],Y);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&m(e,["setup","outputAudioTranscription"],te);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&m(e,["setup","realtimeInputConfig"],W);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&m(e,["setup","contextWindowCompression"],re);const ce=f(n,["proactivity"]);if(e!==void 0&&ce!=null&&m(e,["setup","proactivity"],ce),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function r6(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],t6(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Ry(E));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],pn(k));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let x=cl(F);Array.isArray(x)&&(x=x.map(M=>g6(ul(M)))),m(e,["setup","tools"],x)}const U=f(n,["sessionResumption"]);e!==void 0&&U!=null&&m(e,["setup","sessionResumption"],U);const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&m(e,["setup","inputAudioTranscription"],Y);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&m(e,["setup","outputAudioTranscription"],te);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&m(e,["setup","realtimeInputConfig"],W);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&m(e,["setup","contextWindowCompression"],re);const ce=f(n,["proactivity"]);e!==void 0&&ce!=null&&m(e,["setup","proactivity"],ce);const le=f(n,["explicitVadSignal"]);return e!==void 0&&le!=null&&m(e,["setup","explicitVadSignal"],le),t}function o6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],je(n,i));const o=f(e,["config"]);return o!=null&&m(t,["config"],s6(o,t)),t}function a6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],je(n,i));const o=f(e,["config"]);return o!=null&&m(t,["config"],r6(o,t)),t}function l6(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function u6(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["weightedPrompts"],i)}return e}function c6(n){const e={},t=f(n,["media"]);if(t!=null){let h=zI(t);Array.isArray(h)&&(h=h.map(_=>tf(_))),m(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&m(e,["audio"],tf($I(i)));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&m(e,["video"],tf(KI(a)));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function d6(n){const e={},t=f(n,["media"]);if(t!=null){let h=zI(t);Array.isArray(h)&&(h=h.map(_=>_)),m(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&m(e,["audio"],$I(i));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&m(e,["video"],KI(a));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function f6(n){const e={},t=f(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&m(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&m(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],y6(u));const d=f(n,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);p!=null&&m(e,["sessionResumptionUpdate"],p);const h=f(n,["voiceActivityDetectionSignal"]);return h!=null&&m(e,["voiceActivityDetectionSignal"],h),e}function h6(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],jO(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],ZO(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],tf(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function p6(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function m6(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],n6(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],i6(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function g6(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>e6(T))),m(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function y6(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["promptTokensDetails"],I)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["cacheTokensDetails"],I)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["responseTokensDetails"],I)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["toolUsePromptTokensDetails"],I)}const T=f(n,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _6(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function v6(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],E6(i));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const h=f(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),m(e,["safetyRatings"],T)}const E=f(n,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function E6(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function T6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let a=li(o);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["contents"],a)}return t}function A6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["tokensInfo"],o)}return e}function S6(n){const e={},t=f(n,["values"]);t!=null&&m(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&m(e,["statistics"],C6(i)),e}function C6(n){const e={},t=f(n,["truncated"]);t!=null&&m(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&m(e,["tokenCount"],i),e}function eh(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>k3(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function w6(n){const e={},t=f(n,["controlType"]);t!=null&&m(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&m(e,["computeControl"],i),e}function I6(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function R6(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&m(e,["systemInstruction"],pn(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>oR(d))),m(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&m(e,["generationConfig"],_3(a)),t}function b6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let u=li(o);Array.isArray(u)&&(u=u.map(d=>eh(d))),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&I6(a),t}function x6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let u=li(o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&R6(a,t),t}function N6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&m(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function D6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&m(e,["totalTokens"],i),e}function M6(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],je(n,i)),t}function k6(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],je(n,i)),t}function P6(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function V6(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function U6(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const T=f(n,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const I=f(n,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&m(e,["parameters","outputOptions","compressionQuality"],F);const U=f(n,["addWatermark"]);e!==void 0&&U!=null&&m(e,["parameters","addWatermark"],U);const Y=f(n,["labels"]);e!==void 0&&Y!=null&&m(e,["labels"],Y);const te=f(n,["editMode"]);e!==void 0&&te!=null&&m(e,["parameters","editMode"],te);const W=f(n,["baseSteps"]);return e!==void 0&&W!=null&&m(e,["parameters","editConfig","baseSteps"],W),t}function L6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>F3(p))),m(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&U6(u,t),t}function O6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>th(a))),m(e,["generatedImages"],o)}return e}function F6(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function B6(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&m(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),t}function q6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let d=Cy(n,o);Array.isArray(d)&&(d=d.map(p=>p)),m(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&F6(a,t);const u=f(e,["model"]);return u!==void 0&&m(t,["requests[]","model"],je(n,u)),t}function G6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let u=Cy(n,o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&B6(a,t),t}function H6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function z6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>S6(u))),m(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function K6(n){const e={},t=f(n,["endpoint"]);t!=null&&m(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&m(e,["deployedModelId"],i),e}function $6(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Y6(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function J6(n){const e={},t=f(n,["mode"]);t!=null&&m(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Q6(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function X6(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],eh(pn(o)));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=f(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=f(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=f(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const F=f(e,["seed"]);F!=null&&m(i,["seed"],F);const U=f(e,["responseMimeType"]);U!=null&&m(i,["responseMimeType"],U);const Y=f(e,["responseSchema"]);Y!=null&&m(i,["responseSchema"],wy(Y));const te=f(e,["responseJsonSchema"]);if(te!=null&&m(i,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let N=W;Array.isArray(N)&&(N=N.map(ye=>B3(ye))),m(t,["safetySettings"],N)}const re=f(e,["tools"]);if(t!==void 0&&re!=null){let N=cl(re);Array.isArray(N)&&(N=N.map(ye=>Y3(ul(ye)))),m(t,["tools"],N)}const ce=f(e,["toolConfig"]);if(t!==void 0&&ce!=null&&m(t,["toolConfig"],$3(ce)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&m(t,["cachedContent"],qs(n,le));const x=f(e,["responseModalities"]);x!=null&&m(i,["responseModalities"],x);const M=f(e,["mediaResolution"]);M!=null&&m(i,["mediaResolution"],M);const D=f(e,["speechConfig"]);if(D!=null&&m(i,["speechConfig"],Iy(D)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&m(i,["thinkingConfig"],L);const P=f(e,["imageConfig"]);P!=null&&m(i,["imageConfig"],S3(P));const O=f(e,["enableEnhancedCivicAnswers"]);return O!=null&&m(i,["enableEnhancedCivicAnswers"],O),i}function W6(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],pn(o));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=f(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=f(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=f(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const F=f(e,["seed"]);F!=null&&m(i,["seed"],F);const U=f(e,["responseMimeType"]);U!=null&&m(i,["responseMimeType"],U);const Y=f(e,["responseSchema"]);Y!=null&&m(i,["responseSchema"],wy(Y));const te=f(e,["responseJsonSchema"]);te!=null&&m(i,["responseJsonSchema"],te);const W=f(e,["routingConfig"]);W!=null&&m(i,["routingConfig"],W);const re=f(e,["modelSelectionConfig"]);re!=null&&m(i,["modelConfig"],re);const ce=f(e,["safetySettings"]);if(t!==void 0&&ce!=null){let X=ce;Array.isArray(X)&&(X=X.map(oe=>oe)),m(t,["safetySettings"],X)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let X=cl(le);Array.isArray(X)&&(X=X.map(oe=>oR(ul(oe)))),m(t,["tools"],X)}const x=f(e,["toolConfig"]);t!==void 0&&x!=null&&m(t,["toolConfig"],x);const M=f(e,["labels"]);t!==void 0&&M!=null&&m(t,["labels"],M);const D=f(e,["cachedContent"]);t!==void 0&&D!=null&&m(t,["cachedContent"],qs(n,D));const L=f(e,["responseModalities"]);L!=null&&m(i,["responseModalities"],L);const P=f(e,["mediaResolution"]);P!=null&&m(i,["mediaResolution"],P);const O=f(e,["speechConfig"]);O!=null&&m(i,["speechConfig"],Iy(O));const N=f(e,["audioTimestamp"]);N!=null&&m(i,["audioTimestamp"],N);const ye=f(e,["thinkingConfig"]);ye!=null&&m(i,["thinkingConfig"],ye);const Ze=f(e,["imageConfig"]);if(Ze!=null&&m(i,["imageConfig"],C3(Ze)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function gS(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let u=li(o);Array.isArray(u)&&(u=u.map(d=>eh(d))),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&m(t,["generationConfig"],X6(n,a,t)),t}function yS(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["contents"]);if(o!=null){let u=li(o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&m(t,["generationConfig"],W6(n,a,t)),t}function _S(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>v6(h))),m(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function vS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["candidates"],h)}const o=f(n,["createTime"]);o!=null&&m(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&m(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&m(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function j6(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=f(n,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const _=f(n,["language"]);e!==void 0&&_!=null&&m(e,["parameters","language"],_);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const T=f(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(e!==void 0&&I!=null&&m(e,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Z6(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const T=f(n,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const I=f(n,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&m(e,["parameters","outputOptions","compressionQuality"],F);const U=f(n,["addWatermark"]);e!==void 0&&U!=null&&m(e,["parameters","addWatermark"],U);const Y=f(n,["labels"]);e!==void 0&&Y!=null&&m(e,["labels"],Y);const te=f(n,["imageSize"]);e!==void 0&&te!=null&&m(e,["parameters","sampleImageSize"],te);const W=f(n,["enhancePrompt"]);return e!==void 0&&W!=null&&m(e,["parameters","enhancePrompt"],W),t}function e3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&j6(a,t),t}function t3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&Z6(a,t),t}function n3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>p3(u))),m(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],sR(o)),e}function i3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>th(u))),m(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],rR(o)),e}function s3(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=f(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(n,["lastFrame"]);e!==void 0&&_!=null&&m(e,["instances[0]","lastFrame"],nh(_));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(I=>o5(I))),m(e,["instances[0]","referenceImages"],T)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function r3(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&m(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=f(n,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&m(e,["parameters","pubsubTopic"],E);const T=f(n,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const I=f(n,["enhancePrompt"]);e!==void 0&&I!=null&&m(e,["parameters","enhancePrompt"],I);const k=f(n,["generateAudio"]);e!==void 0&&k!=null&&m(e,["parameters","generateAudio"],k);const F=f(n,["lastFrame"]);e!==void 0&&F!=null&&m(e,["instances[0]","lastFrame"],Di(F));const U=f(n,["referenceImages"]);if(e!==void 0&&U!=null){let W=U;Array.isArray(W)&&(W=W.map(re=>a5(re))),m(e,["instances[0]","referenceImages"],W)}const Y=f(n,["mask"]);e!==void 0&&Y!=null&&m(e,["instances[0]","mask"],r5(Y));const te=f(n,["compressionQuality"]);return e!==void 0&&te!=null&&m(e,["parameters","compressionQuality"],te),t}function o3(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],c3(u)),e}function a3(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],d3(u)),e}function l3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&m(t,["instances[0]","image"],nh(a));const u=f(e,["video"]);u!=null&&m(t,["instances[0]","video"],aR(u));const d=f(e,["source"]);d!=null&&f3(d,t);const p=f(e,["config"]);return p!=null&&s3(p,t),t}function u3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&m(t,["instances[0]","image"],Di(a));const u=f(e,["video"]);u!=null&&m(t,["instances[0]","video"],lR(u));const d=f(e,["source"]);d!=null&&h3(d,t);const p=f(e,["config"]);return p!=null&&r3(p,t),t}function c3(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>g3(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function d3(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>y3(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function f3(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],nh(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],aR(a)),t}function h3(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Di(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],lR(a)),t}function p3(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],w3(t));const i=f(n,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&m(e,["safetyAttributes"],sR(o)),e}function th(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],iR(t));const i=f(n,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&m(e,["safetyAttributes"],rR(o));const a=f(n,["prompt"]);return a!=null&&m(e,["enhancedPrompt"],a),e}function m3(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["mask"],iR(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["labels"],o)}return e}function g3(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],i5(t)),e}function y3(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],s5(t)),e}function _3(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const E=f(n,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const T=f(n,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const I=f(n,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const k=f(n,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const F=f(n,["responseSchema"]);F!=null&&m(e,["responseSchema"],F);const U=f(n,["routingConfig"]);U!=null&&m(e,["routingConfig"],U);const Y=f(n,["seed"]);Y!=null&&m(e,["seed"],Y);const te=f(n,["speechConfig"]);te!=null&&m(e,["speechConfig"],te);const W=f(n,["stopSequences"]);W!=null&&m(e,["stopSequences"],W);const re=f(n,["temperature"]);re!=null&&m(e,["temperature"],re);const ce=f(n,["thinkingConfig"]);ce!=null&&m(e,["thinkingConfig"],ce);const le=f(n,["topK"]);le!=null&&m(e,["topK"],le);const x=f(n,["topP"]);if(x!=null&&m(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function v3(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],je(n,i)),t}function E3(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],je(n,i)),t}function T3(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function A3(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function S3(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function C3(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);i!=null&&m(e,["imageSize"],i);const o=f(n,["outputMimeType"]);o!=null&&m(e,["imageOutputOptions","mimeType"],o);const a=f(n,["outputCompressionQuality"]);return a!=null&&m(e,["imageOutputOptions","compressionQuality"],a),e}function w3(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&m(e,["imageBytes"],Jr(t));const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function iR(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Jr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function nh(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&m(e,["bytesBase64Encoded"],Jr(t));const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Di(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Jr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function I3(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&m(t,["_url","models_url"],XI(n,d)),i}function R3(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&m(t,["_url","models_url"],XI(n,d)),i}function b3(n,e){const t={},i=f(e,["config"]);return i!=null&&I3(n,i,t),t}function x3(n,e){const t={},i=f(e,["config"]);return i!=null&&R3(n,i,t),t}function N3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=WI(o);Array.isArray(a)&&(a=a.map(u=>og(u))),m(e,["models"],a)}return e}function D3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=WI(o);Array.isArray(a)&&(a=a.map(u=>ag(u))),m(e,["models"],a)}return e}function M3(n){const e={},t=f(n,["maskMode"]);t!=null&&m(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&m(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function og(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["version"]);a!=null&&m(e,["version"],a);const u=f(n,["_self"]);u!=null&&m(e,["tunedModelInfo"],J3(u));const d=f(n,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=f(n,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const _=f(n,["temperature"]);_!=null&&m(e,["temperature"],_);const E=f(n,["maxTemperature"]);E!=null&&m(e,["maxTemperature"],E);const T=f(n,["topP"]);T!=null&&m(e,["topP"],T);const I=f(n,["topK"]);I!=null&&m(e,["topK"],I);const k=f(n,["thinking"]);return k!=null&&m(e,["thinking"],k),e}function ag(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["versionId"]);a!=null&&m(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>K6(T))),m(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&m(e,["labels"],d);const p=f(n,["_self"]);p!=null&&m(e,["tunedModelInfo"],Q3(p));const h=f(n,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const _=f(n,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(T=>T)),m(e,["checkpoints"],E)}return e}function k3(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],$6(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],Y6(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],_6(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function P3(n){const e={},t=f(n,["productImage"]);return t!=null&&m(e,["image"],Di(t)),e}function V3(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=f(n,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","compressionQuality"],E);const T=f(n,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const I=f(n,["labels"]);return e!==void 0&&I!=null&&m(e,["labels"],I),t}function U3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["source"]);o!=null&&O3(o,t);const a=f(e,["config"]);return a!=null&&V3(a,t),t}function L3(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>th(o))),m(e,["generatedImages"],i)}return e}function O3(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],Di(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>P3(d))),m(e,["instances[0]","productImages"],u)}return t}function F3(n){const e={},t=f(n,["referenceImage"]);t!=null&&m(e,["referenceImage"],Di(t));const i=f(n,["referenceId"]);i!=null&&m(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&m(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&m(e,["maskImageConfig"],M3(a));const u=f(n,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],w6(u));const d=f(n,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function sR(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function rR(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function B3(n){const e={},t=f(n,["category"]);if(t!=null&&m(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function q3(n){const e={},t=f(n,["image"]);return t!=null&&m(e,["image"],Di(t)),e}function G3(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&m(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),t}function H3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["source"]);o!=null&&K3(o,t);const a=f(e,["config"]);return a!=null&&G3(a,t),t}function z3(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>m3(o))),m(e,["generatedMasks"],i)}return e}function K3(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Di(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&m(e,["instances[0]","scribble"],q3(a)),t}function $3(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],J6(t));const i=f(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function Y3(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],T3(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],A3(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function oR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>Q6(T))),m(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function J3(n){const e={},t=f(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function Q3(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&m(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function X3(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function W3(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function j3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","name"],je(n,i));const o=f(e,["config"]);return o!=null&&X3(o,t),t}function Z3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["config"]);return o!=null&&W3(o,t),t}function e5(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=f(n,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=f(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=f(n,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const T=f(n,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const I=f(n,["mode"]);return e!==void 0&&I!=null&&m(e,["parameters","mode"],I),t}function t5(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],je(n,i));const o=f(e,["image"]);o!=null&&m(t,["instances[0]","image"],Di(o));const a=f(e,["upscaleFactor"]);a!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&e5(u,t),t}function n5(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>th(a))),m(e,["generatedImages"],o)}return e}function i5(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Jr(i));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function s5(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Jr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function r5(n){const e={},t=f(n,["image"]);t!=null&&m(e,["_self"],Di(t));const i=f(n,["maskMode"]);return i!=null&&m(e,["maskMode"],i),e}function o5(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],nh(t));const i=f(n,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function a5(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],Di(t));const i=f(n,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function aR(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&m(e,["encodedVideo"],Jr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function lR(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Jr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l5(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),t}function u5(n){const e={},t=f(n,["config"]);return t!=null&&l5(t,e),e}function c5(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function d5(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&c5(i,e),e}function f5(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function h5(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),t}function p5(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],g5(u)),e}function m5(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&m(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&h5(o,e),e}function g5(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function y5(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function _5(n){const e={},t=f(n,["config"]);return t!=null&&y5(t,e),e}function v5(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["fileSearchStores"],a)}return e}function uR(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),t}function E5(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&uR(i,e),e}function T5(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const A5="Content-Type",S5="X-Server-Timeout",C5="User-Agent",lg="x-goog-api-client",w5="1.34.0",I5=`google-genai-sdk/${w5}`,R5="v1beta1",b5="v1beta";class x5{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:R5,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:b5,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&N5(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await ES(o),new ig(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await ES(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return Ci(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const d="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Re(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(_,{stream:!0});try{const k=JSON.parse(E);if("error"in k){const F=JSON.parse(JSON.stringify(k.error)),U=F.status,Y=F.code,te=`got status: ${U}. ${JSON.stringify(k)}`;if(Y>=400&&Y<600)throw new Zf({message:te,status:Y})}}catch(k){if(k.name==="ApiError")throw k}u+=E;let T=-1,I=0;for(;;){T=-1,I=0;for(const U of p){const Y=u.indexOf(U);Y!==-1&&(T===-1||Y<T)&&(T=Y,I=U.length)}if(T===-1)break;const k=u.substring(0,T);u=u.substring(T+I);const F=k.trim();if(F.startsWith(d)){const U=F.substring(d.length).trim();try{const Y=new Response(U,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Re(new ig(Y))}catch(Y){throw new Error(`exception parsing stream chunk ${U}. ${Y}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=I5+" "+this.clientOptions.userAgentExtra;return e[C5]=t,e[lg]=t,e[A5]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(S5,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p={file:o},h=this.getFileName(e),_=fe("upload/v1beta/files",p._url),E=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,p,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),E={};i!=null&&uR(i,E);const T=await this.fetchUploadUrl(h,d,p,_,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function ES(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Zf({message:o,status:t}):new Error(o)}}function N5(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=u[p],_=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[p]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const D5="mcp_used/unknown";let M5=!1;function cR(n){for(const e of n)if(k5(e)||typeof e=="object"&&"inputSchema"in e)return!0;return M5}function dR(n){var e;const t=(e=n[lg])!==null&&e!==void 0?e:"";n[lg]=(t+` ${D5}`).trimStart()}function k5(n){return n!==null&&typeof n=="object"&&n instanceof by}function P5(n){return Ci(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield Re(t.listTools({cursor:o}));for(const d of u.tools)yield yield Re(d),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class by{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new by(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,p=(t=void 0,wi(P5(_))),h;h=await p.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const E=o;u.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=_}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),fL(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function V5(n,e,t){const i=new sL;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class U5{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=F5(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(W=>{h=W}),E=e.callbacks,T=function(){h({})},I=this.apiClient,k={onopen:T,onmessage:W=>{V5(I,E.onmessage,W)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(W){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(W){}},F=this.webSocketFactory.create(p,O5(u),k);F.connect(),await _;const te={setup:{model:je(this.apiClient,e.model)}};return F.send(JSON.stringify(te)),new L5(F,this.apiClient)}}class L5{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=u6(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=l6(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(La.PLAY)}pause(){this.sendPlaybackControl(La.PAUSE)}stop(){this.sendPlaybackControl(La.STOP)}resetContext(){this.sendPlaybackControl(La.RESET_CONTEXT)}close(){this.conn.close()}}function O5(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function F5(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const B5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function q5(n,e,t){const i=new iL;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=f6(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class G5{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new U5(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&cR(e.config.tools)&&dR(E);const T=$5(E);if(this.apiClient.isVertexAI())_=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,_);else{const D=this.apiClient.getApiKey();let L="BidiGenerateContent",P="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",P="access_token"),_=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${P}=${D}`}let I=()=>{};const k=new Promise(D=>{I=D}),F=e.callbacks,U=function(){var D;(D=F==null?void 0:F.onopen)===null||D===void 0||D.call(F),I({})},Y=this.apiClient,te={onopen:U,onmessage:D=>{q5(Y,F.onmessage,D)},onerror:(t=F==null?void 0:F.onerror)!==null&&t!==void 0?t:function(D){},onclose:(i=F==null?void 0:F.onclose)!==null&&i!==void 0?i:function(D){}},W=this.webSocketFactory.create(_,K5(T),te);W.connect(),await k;let re=je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const D=this.apiClient.getProject(),L=this.apiClient.getLocation();re=`projects/${D}/locations/${L}/`+re}let ce={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Lu.AUDIO]}:e.config.responseModalities=[Lu.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],x=[];for(const D of le)if(this.isCallableTool(D)){const L=D;x.push(await L.tool())}else x.push(D);x.length>0&&(e.config.tools=x);const M={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ce=a6(this.apiClient,M):ce=o6(this.apiClient,M),delete ce.config,W.send(JSON.stringify(ce)),new z5(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const H5={turnComplete:!0};class z5{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=li(t.turns),e.isVertexAI()||(i=i.map(o=>eh(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(B5)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},H5),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:d6(e)}:t={realtimeInput:c6(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function K5(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function $5(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TS=10;function AS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ya(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ya(n){return"callTool"in n&&typeof n.callTool=="function"}function Y5(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ya(o)))!==null&&i!==void 0?i:!1}function SS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Ya(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function CS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J5 extends Bs{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Y5(t)||AS(t.config))return await this.generateContentInternal(p);const h=SS(t);if(h.length>0){const F=h.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${F}.`)}let _,E;const T=li(p.contents),I=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:TS;let k=0;for(;k<I&&(_=await this.generateContentInternal(p),!(!_.functionCalls||_.functionCalls.length===0));){const F=_.candidates[0].content,U=[];for(const Y of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Ya(Y)){const W=await Y.callTool(_.functionCalls);U.push(...W)}k++,E={role:"user",parts:U},p.contents=li(p.contents),p.contents.push(F),p.contents.push(E),CS(p.config)&&(T.push(F),T.push(E))}return CS(p.config)&&(_.automaticFunctionCallingHistory=T),_},this.generateContentStream=async t=>{var i,o,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),AS(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const p=SS(t);if(p.length>0){const E=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Go(Ls.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Ya(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&cR(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),dR(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ya(u)){const d=u,p=await d.tool();for(const h of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:TS;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,_,E){return Ci(this,arguments,function*(){for(var T,I,k,F,U,Y;d<a;){u&&(d++,u=!1);const ce=yield Re(h.processParamsMaybeAddMcpUsage(E)),le=yield Re(h.generateContentStreamInternal(ce)),x=[],M=[];try{for(var te=!0,W=(I=void 0,wi(le)),re;re=yield Re(W.next()),T=re.done,!T;te=!0){F=re.value,te=!1;const D=F;if(yield yield Re(D),D.candidates&&(!((U=D.candidates[0])===null||U===void 0)&&U.content)){M.push(D.candidates[0].content);for(const L of(Y=D.candidates[0].content.parts)!==null&&Y!==void 0?Y:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(L.functionCall.name)){const P=yield Re(_.get(L.functionCall.name).callTool([L.functionCall]));x.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(D){I={error:D}}finally{try{!te&&!T&&(k=W.return)&&(yield Re(k.call(W)))}finally{if(I)throw I.error}}if(x.length>0){u=!0;const D=new hu;D.candidates=[{content:{role:"user",parts:x}}],yield yield Re(D);const L=[];L.push(...M),L.push({role:"user",parts:x});const P=li(E.contents).concat(L);E.contents=P}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=yS(this.apiClient,e);return d=fe("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=vS(_),T=new hu;return Object.assign(T,E),T})}else{const h=gS(this.apiClient,e);return d=fe("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=_S(_),T=new hu;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=yS(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return Ci(this,arguments,function*(){var T,I,k,F;try{for(var U=!0,Y=wi(E),te;te=yield Re(Y.next()),T=te.done,!T;U=!0){F=te.value,U=!1;const W=F,re=vS(yield Re(W.json()));re.sdkHttpResponse={headers:W.headers};const ce=new hu;Object.assign(ce,re),yield yield Re(ce)}}catch(W){I={error:W}}finally{try{!U&&!T&&(k=Y.return)&&(yield Re(k.call(Y)))}finally{if(I)throw I.error}}})})}else{const h=gS(this.apiClient,e);return d=fe("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return Ci(this,arguments,function*(){var T,I,k,F;try{for(var U=!0,Y=wi(E),te;te=yield Re(Y.next()),T=te.done,!T;U=!0){F=te.value,U=!1;const W=F,re=_S(yield Re(W.json()));re.sdkHttpResponse={headers:W.headers};const ce=new hu;Object.assign(ce,re),yield yield Re(ce)}}catch(W){I={error:W}}finally{try{!U&&!T&&(k=Y.return)&&(yield Re(k.call(Y)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=G6(this.apiClient,e);return d=fe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=z6(_),T=new ZA;return Object.assign(T,E),T})}else{const h=q6(this.apiClient,e);return d=fe("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=H6(_),T=new ZA;return Object.assign(T,E),T})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=t3(this.apiClient,e);return d=fe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=i3(_),T=new eS;return Object.assign(T,E),T})}else{const h=e3(this.apiClient,e);return d=fe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=n3(_),T=new eS;return Object.assign(T,E),T})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=L6(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=O6(p),_=new $U;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=t5(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=n5(p),_=new YU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=U3(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=L3(p),_=new JU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=H3(this.apiClient,e);return a=fe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=z3(p),_=new QU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=E3(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>ag(_))}else{const h=v3(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>og(_))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=x3(this.apiClient,e);return d=fe("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=D3(_),T=new tS;return Object.assign(T,E),T})}else{const h=b3(this.apiClient,e);return d=fe("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=N3(_),T=new tS;return Object.assign(T,E),T})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=Z3(this.apiClient,e);return d=fe("{model}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>ag(_))}else{const h=j3(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>og(_))}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=k6(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=V6(_),T=new nS;return Object.assign(T,E),T})}else{const h=M6(this.apiClient,e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=P6(_),T=new nS;return Object.assign(T,E),T})}}async countTokens(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=x6(this.apiClient,e);return d=fe("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=D6(_),T=new iS;return Object.assign(T,E),T})}else{const h=b6(this.apiClient,e);return d=fe("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=N6(_),T=new iS;return Object.assign(T,E),T})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=T6(this.apiClient,e);return a=fe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=A6(p),_=new XU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=u3(this.apiClient,e);return d=fe("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const E=a3(_),T=new wf;return Object.assign(T,E),T})}else{const h=l3(this.apiClient,e);return d=fe("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const E=o3(_),T=new wf;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q5 extends Bs{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=BU(e);return d=fe("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=FU(e);return d=fe("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=MU(e);return a=fe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X5(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function W5(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>oF(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function j5(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&m(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&m(t,["bidiGenerateContentSetup"],rF(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&m(t,["fieldMask"],p),i}function Z5(n,e){const t={},i=f(e,["config"]);return i!=null&&m(t,["config"],j5(n,i,t)),t}function eF(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function tF(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nF(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function iF(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function sF(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Ry(E));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],W5(pn(k)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let le=cl(F);Array.isArray(le)&&(le=le.map(x=>lF(ul(x)))),m(e,["setup","tools"],le)}const U=f(n,["sessionResumption"]);e!==void 0&&U!=null&&m(e,["setup","sessionResumption"],aF(U));const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&m(e,["setup","inputAudioTranscription"],Y);const te=f(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&m(e,["setup","outputAudioTranscription"],te);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&m(e,["setup","realtimeInputConfig"],W);const re=f(n,["contextWindowCompression"]);e!==void 0&&re!=null&&m(e,["setup","contextWindowCompression"],re);const ce=f(n,["proactivity"]);if(e!==void 0&&ce!=null&&m(e,["setup","proactivity"],ce),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function rF(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],je(n,i));const o=f(e,["config"]);return o!=null&&m(t,["config"],sF(o,t)),t}function oF(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],eF(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],tF(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],X5(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function aF(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lF(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],nF(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],iF(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uF(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function cF(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=uF(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class dF extends Bs{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=Z5(this.apiClient,e);a=fe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=cF(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fF(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function hF(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&fF(i,e),e}function pF(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function mF(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function gF(n){const e={},t=f(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&mF(i,e),e}function yF(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _F extends Bs{constructor(e){super(),this.apiClient=e,this.list=async t=>new Go(Ls.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pF(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hF(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gF(e);return a=fe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=yF(p),_=new WU;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vF extends Bs{constructor(e,t=new _F(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Go(Ls.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=u5(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=f5(e);return a=fe("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=d5(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_5(e);return a=fe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=v5(p),_=new jU;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=E5(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=T5(p),_=new ZU;return Object.assign(_,h),_})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=m5(e);return a=fe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=p5(p),_=new Ay;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fR=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return fR=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const EF=()=>fR();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ug(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const cg=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ui extends Error{}class An extends ui{constructor(e,t,i,o){super(`${An.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new ih({message:i,cause:cg(t)});const a=t;return e===400?new pR(e,a,i,o):e===401?new mR(e,a,i,o):e===403?new gR(e,a,i,o):e===404?new yR(e,a,i,o):e===409?new _R(e,a,i,o):e===422?new vR(e,a,i,o):e===429?new ER(e,a,i,o):e>=500?new TR(e,a,i,o):new An(e,a,i,o)}}class dg extends An{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ih extends An{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class hR extends ih{constructor({message:e}={}){super({message:e??"Request timed out."})}}class pR extends An{}class mR extends An{}class gR extends An{}class yR extends An{}class _R extends An{}class vR extends An{}class ER extends An{}class TR extends An{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TF=/^[a-z][a-z0-9+.-]*:/i,AF=n=>TF.test(n);let fg=n=>(fg=Array.isArray,fg(n));const SF=fg;let CF=SF;const wS=CF;function wF(n){if(!n)return!0;for(const e in n)return!1;return!0}function IF(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const RF=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ui(`${n} must be an integer`);if(e<0)throw new ui(`${n} must be a positive integer`);return e},bF=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xF=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Va="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NF(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const DF=()=>{var n,e,t,i,o;const a=NF();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":RS(Deno.build.os),"X-Stainless-Arch":IS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":RS((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":IS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=MF();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function MF(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const IS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",RS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Ld;const kF=()=>Ld??(Ld=DF());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function AR(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function VF(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return AR({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function SR(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function UF(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LF=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CR=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Cm(n,e,t){return CR(),new File(n,e??"unknown_file",t)}function OF(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const FF=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wR=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",BF=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&wR(n),qF=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function GF(n,e,t){if(CR(),n=await n,BF(n))return n instanceof File?n:Cm([await n.arrayBuffer()],n.name);if(qF(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Cm(await hg(o),e,t)}const i=await hg(n);if(e||(e=OF(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return Cm(i,e,t)}async function hg(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(wR(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(FF(n))try{for(var d=!0,p=wi(n),h;h=await p.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const _=o;u.push(...await hg(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${HF(n)}`)}return u}function HF(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IR{constructor(e){this._client=e}}IR._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RR(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const bS=Object.freeze(Object.create(null)),zF=(n=RR)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((_,E,T)=>{var I,k,F;/[?#]/.test(E)&&(o=!0);const U=i[T];let Y=(o?encodeURIComponent:n)(""+U);return T!==i.length&&(U==null||typeof U=="object"&&U.toString===((F=Object.getPrototypeOf((k=Object.getPrototypeOf((I=U.hasOwnProperty)!==null&&I!==void 0?I:bS))!==null&&k!==void 0?k:bS))===null||F===void 0?void 0:F.toString))&&(Y=U+"",a.push({start:_.length+E.length,length:Y.length,error:`Value of type ${Object.prototype.toString.call(U).slice(8,-1)} is not a valid path parameter`})),_+E+(T===i.length?"":Y)},""),d=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,E)=>_.start-E.start),a.length>0){let _=0;const E=a.reduce((T,I)=>{const k=" ".repeat(I.start-_),F="^".repeat(I.length);return _=I.start+I.length,T+k+F},"");throw new ui(`Path parameters result in path with invalid segments:
${a.map(T=>T.error).join(`
`)}
${u}
${E}`)}return u}),Od=zF(RR);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bR extends IR{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=Rf(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new ui("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ui("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Od`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(Od`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(Od`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=Rf(a,["api_version"]);return this._client.get(Od`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}bR._key=Object.freeze(["interactions"]);class xR extends bR{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KF(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let Fd;function xy(n){let e;return(Fd??(e=new globalThis.TextEncoder,Fd=e.encode.bind(e)))(n)}let Bd;function xS(n){let e;return(Bd??(e=new globalThis.TextDecoder,Bd=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xy(e):e;this.buffer=KF([this.buffer,t]);const i=[];let o;for(;(o=$F(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(xS(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=xS(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}sh.NEWLINE_CHARS=new Set([`
`,"\r"]);sh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function $F(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function YF(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bf={off:0,error:200,warn:300,info:400,debug:500},NS=(n,e,t)=>{if(n){if(IF(bf,n))return n;vn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(bf))}`)}};function Eu(){}function qd(n,e,t){return!e||bf[n]>bf[t]?Eu:e[n].bind(e)}const JF={error:Eu,warn:Eu,info:Eu,debug:Eu};let DS=new WeakMap;function vn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return JF;const o=DS.get(t);if(o&&o[0]===i)return o[1];const a={error:qd("error",t,i),warn:qd("warn",t,i),info:qd("info",t,i),debug:qd("debug",t,i)};return DS.set(t,[i,a]),a}const wo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oa{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?vn(i):console;function u(){return Ci(this,arguments,function*(){var p,h,_,E;if(o)throw new ui("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let T=!1;try{try{for(var I=!0,k=wi(QF(e,t)),F;F=yield Re(k.next()),p=F.done,!p;I=!0){E=F.value,I=!1;const U=E;if(!T)if(U.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Re(JSON.parse(U.data))}catch(Y){throw a.error("Could not parse message into JSON:",U.data),a.error("From chunk:",U.raw),Y}}}catch(U){h={error:U}}finally{try{!I&&!p&&(_=k.return)&&(yield Re(_.call(k)))}finally{if(h)throw h.error}}T=!0}catch(U){if(ug(U))return yield Re(void 0);throw U}finally{T||t.abort()}})}return new Oa(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return Ci(this,arguments,function*(){var p,h,_,E;const T=new sh,I=SR(e);try{for(var k=!0,F=wi(I),U;U=yield Re(F.next()),p=U.done,!p;k=!0){E=U.value,k=!1;const Y=E;for(const te of T.decode(Y))yield yield Re(te)}}catch(Y){h={error:Y}}finally{try{!k&&!p&&(_=F.return)&&(yield Re(_.call(F)))}finally{if(h)throw h.error}}for(const Y of T.flush())yield yield Re(Y)})}function u(){return Ci(this,arguments,function*(){var p,h,_,E;if(o)throw new ui("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let T=!1;try{try{for(var I=!0,k=wi(a()),F;F=yield Re(k.next()),p=F.done,!p;I=!0){E=F.value,I=!1;const U=E;T||U&&(yield yield Re(JSON.parse(U)))}}catch(U){h={error:U}}finally{try{!I&&!p&&(_=k.return)&&(yield Re(_.call(k)))}finally{if(h)throw h.error}}T=!0}catch(U){if(ug(U))return yield Re(void 0);throw U}finally{T||t.abort()}})}return new Oa(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Oa(()=>o(e),this.controller,this.client),new Oa(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return AR({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=xy(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function QF(n,e){return Ci(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ui("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ui("Attempted to iterate over a response with no body");const d=new WF,p=new sh,h=SR(n.body);try{for(var _=!0,E=wi(XF(h)),T;T=yield Re(E.next()),i=T.done,!i;_=!0){u=T.value,_=!1;const I=u;for(const k of p.decode(I)){const F=d.decode(k);F&&(yield yield Re(F))}}}catch(I){o={error:I}}finally{try{!_&&!i&&(a=E.return)&&(yield Re(a.call(E)))}finally{if(o)throw o.error}}for(const I of p.flush()){const k=d.decode(I);k&&(yield yield Re(k))}})}function XF(n){return Ci(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var d=!0,p=wi(n),h;h=yield Re(p.next()),t=h.done,!t;d=!0){a=h.value,d=!1;const _=a;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?xy(_):_;let T=new Uint8Array(u.length+E.length);T.set(u),T.set(E,u.length),u=T;let I;for(;(I=YF(u))!==-1;)yield yield Re(u.slice(0,I)),u=u.slice(I)}}catch(_){i={error:_}}finally{try{!d&&!t&&(o=p.return)&&(yield Re(o.call(p)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Re(u))})}class WF{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=jF(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function jF(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ZF(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return vn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Oa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),h=(d=p==null?void 0:p.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return vn(n).debug(`[${i}] response parsed`,wo({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ny extends Promise{constructor(e,t,i=ZF){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Ny(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NR=Symbol("brand.privateNullableHeaders");function*eB(n){if(!n)return;if(NR in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():wS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=wS(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,d])}}const pu=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of eB(i)){const d=a.toLowerCase();o.has(d)||(e.delete(a),o.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[NR]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wm=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=IU)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var DR;class rh{constructor(e){var t,i,o,a,u,d,p,{baseURL:h=wm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=wm("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,T=Rf(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:_,apiVersion:E},T),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(i=I.timeout)!==null&&i!==void 0?i:rh.DEFAULT_TIMEOUT,this.logger=(o=I.logger)!==null&&o!==void 0?o:console;const k="warn";this.logLevel=k,this.logLevel=(u=(a=NS(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:NS(wm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:k,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(p=I.fetch)!==null&&p!==void 0?p:PF(),this.encoder=LF,this._options=I,this.apiKey=_,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=pu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return pu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return pu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new ui(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Va}`}defaultIdempotencyKey(){return`stainless-node-retry-${EF()}`}makeStatusError(e,t,i,o){return An.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=AF(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return wF(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new Ny(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const d=await e,p=(o=d.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=p),await this.prepareOptions(d);const{req:h,url:_,timeout:E}=await this.buildRequest(d,{retryCount:p-t});await this.prepareRequest(h,{url:_,options:d});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=i===void 0?"":`, retryOf: ${i}`,k=Date.now();if(vn(this).debug(`[${T}] sending request`,wo({retryOfRequestLogID:i,method:d.method,url:_,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new dg;const F=new AbortController,U=await this.fetchWithTimeout(_,h,E,F).catch(cg),Y=Date.now();if(U instanceof globalThis.Error){const W=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new dg;const re=ug(U)||/timed? ?out/i.test(String(U)+("cause"in U?String(U.cause):""));if(t)return vn(this).info(`[${T}] connection ${re?"timed out":"failed"} - ${W}`),vn(this).debug(`[${T}] connection ${re?"timed out":"failed"} (${W})`,wo({retryOfRequestLogID:i,url:_,durationMs:Y-k,message:U.message})),this.retryRequest(d,t,i??T);throw vn(this).info(`[${T}] connection ${re?"timed out":"failed"} - error; no more retries left`),vn(this).debug(`[${T}] connection ${re?"timed out":"failed"} (error; no more retries left)`,wo({retryOfRequestLogID:i,url:_,durationMs:Y-k,message:U.message})),re?new hR:new ih({cause:U})}const te=`[${T}${I}] ${h.method} ${_} ${U.ok?"succeeded":"failed"} with status ${U.status} in ${Y-k}ms`;if(!U.ok){const W=await this.shouldRetry(U);if(t&&W){const D=`retrying, ${t} attempts remaining`;return await UF(U.body),vn(this).info(`${te} - ${D}`),vn(this).debug(`[${T}] response error (${D})`,wo({retryOfRequestLogID:i,url:U.url,status:U.status,headers:U.headers,durationMs:Y-k})),this.retryRequest(d,t,i??T,U.headers)}const re=W?"error; no more retries left":"error; not retryable";vn(this).info(`${te} - ${re}`);const ce=await U.text().catch(D=>cg(D).message),le=bF(ce),x=le?void 0:ce;throw vn(this).debug(`[${T}] response error (${re})`,wo({retryOfRequestLogID:i,url:U.url,status:U.status,headers:U.headers,message:x,durationMs:Date.now()-k})),this.makeStatusError(U.status,le,x,U.headers)}return vn(this).info(te),vn(this).debug(`[${T}] response start`,wo({retryOfRequestLogID:i,url:U.url,status:U.status,headers:U.headers,durationMs:Y-k})),{response:U,options:d,controller:F,requestLogID:T,retryOfRequestLogID:i,startTime:k}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:d}=a,p=Rf(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),_=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,E=Object.assign(Object.assign(Object.assign({signal:o.signal},_?{duplex:"half"}:{}),{method:"GET"}),p);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const d=o==null?void 0:o.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const p=o==null?void 0:o.get("retry-after");if(p&&!u){const h=parseFloat(p);Number.isNaN(h)?u=Date.parse(p)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await xF(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:d,path:p,query:h,defaultBaseURL:_}=u,E=this.buildURL(p,h,_);"timeout"in u&&RF("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:T,body:I}=this.buildBody({options:u}),k=await this.buildHeaders({options:e,method:d,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:k},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=pu([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),kF()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=pu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:VF(e)}:this.encoder({body:e,headers:i})}}rh.DEFAULT_TIMEOUT=6e4;class Zt extends rh{constructor(){super(...arguments),this.interactions=new xR(this)}}DR=Zt;Zt.GeminiNextGenAPIClient=DR;Zt.GeminiNextGenAPIClientError=ui;Zt.APIError=An;Zt.APIConnectionError=ih;Zt.APIConnectionTimeoutError=hR;Zt.APIUserAbortError=dg;Zt.NotFoundError=yR;Zt.ConflictError=_R;Zt.RateLimitError=ER;Zt.BadRequestError=pR;Zt.AuthenticationError=mR;Zt.InternalServerError=TR;Zt.PermissionDeniedError=gR;Zt.UnprocessableEntityError=vR;Zt.toFile=GF;Zt.Interactions=xR;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tB(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function nB(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function iB(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function sB(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function rB(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function oB(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec"],MS(I))}else if(o==="PREFERENCE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec"],MS(I))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(p==="PREFERENCE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(h==="PREFERENCE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(_==="PREFERENCE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const T=f(n,["beta"]);return e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function aB(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&_B(a);const u=f(n,["config"]);return u!=null&&rB(u,t),t}function lB(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&vB(a,t,e);const u=f(n,["config"]);return u!=null&&oB(u,t,e),t}function uB(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function cB(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function dB(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function fB(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function hB(n,e){const t={},i=f(n,["config"]);return i!=null&&dB(i,t),t}function pB(n,e){const t={},i=f(n,["config"]);return i!=null&&fB(i,t),t}function mB(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>MR(d))),m(t,["tuningJobs"],u)}return t}function gB(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>pg(d))),m(t,["tuningJobs"],u)}return t}function yB(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["model"],i);const o=f(n,["name"]);return o!=null&&m(t,["endpoint"],o),t}function _B(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(t,["examples","examples"],o)}return t}function vB(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function MR(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const a=f(n,["state"]);a!=null&&m(t,["state"],JI(a));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&m(t,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=f(n,["description"]);_!=null&&m(t,["description"],_);const E=f(n,["baseModel"]);E!=null&&m(t,["baseModel"],E);const T=f(n,["_self"]);return T!=null&&m(t,["tunedModel"],yB(T)),t}function pg(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const a=f(n,["state"]);a!=null&&m(t,["state"],JI(a));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(t,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=f(n,["error"]);_!=null&&m(t,["error"],_);const E=f(n,["description"]);E!=null&&m(t,["description"],E);const T=f(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const I=f(n,["tunedModel"]);I!=null&&m(t,["tunedModel"],I);const k=f(n,["preTunedModel"]);k!=null&&m(t,["preTunedModel"],k);const F=f(n,["supervisedTuningSpec"]);F!=null&&m(t,["supervisedTuningSpec"],F);const U=f(n,["preferenceOptimizationSpec"]);U!=null&&m(t,["preferenceOptimizationSpec"],U);const Y=f(n,["tuningDataStats"]);Y!=null&&m(t,["tuningDataStats"],Y);const te=f(n,["encryptionSpec"]);te!=null&&m(t,["encryptionSpec"],te);const W=f(n,["partnerModelTuningSpec"]);W!=null&&m(t,["partnerModelTuningSpec"],W);const re=f(n,["customBaseModel"]);re!=null&&m(t,["customBaseModel"],re);const ce=f(n,["experiment"]);ce!=null&&m(t,["experiment"],ce);const le=f(n,["labels"]);le!=null&&m(t,["labels"],le);const x=f(n,["outputUri"]);x!=null&&m(t,["outputUri"],x);const M=f(n,["pipelineJob"]);M!=null&&m(t,["pipelineJob"],M);const D=f(n,["serviceAccount"]);D!=null&&m(t,["serviceAccount"],D);const L=f(n,["tunedModelDisplayName"]);L!=null&&m(t,["tunedModelDisplayName"],L);const P=f(n,["veoTuningSpec"]);return P!=null&&m(t,["veoTuningSpec"],P),t}function EB(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const a=f(n,["metadata"]);a!=null&&m(t,["metadata"],a);const u=f(n,["done"]);u!=null&&m(t,["done"],u);const d=f(n,["error"]);return d!=null&&m(t,["error"],d),t}function MS(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&m(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TB extends Bs{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Go(Ls.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:ng.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=cB(e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>pg(_))}else{const h=uB(e);return d=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>MR(_))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=pB(e);return d=fe("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=gB(_),T=new sS;return Object.assign(T,E),T})}else{const h=hB(e);return d=fe("tunedModels",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=mB(_),T=new sS;return Object.assign(T,E),T})}}async cancel(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=nB(e);return d=fe("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=sB(_),T=new rS;return Object.assign(T,E),T})}else{const h=tB(e);return d=fe("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=iB(_),T=new rS;return Object.assign(T,E),T})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=lB(e,e);return a=fe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>pg(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=aB(e);return a=fe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>EB(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AB{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const SB=1024*1024*8,CB=3,wB=1e3,IB=2,xf="x-goog-upload-status";async function RB(n,e,t){var i;const o=await kR(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[xf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function bB(n,e,t){var i;const o=await kR(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[xf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=GI(a),d=new Sy;return Object.assign(d,u),d}async function kR(n,e,t){var i,o;let a=0,u=0,d=new ig(new Response),p="upload";for(a=n.size;u<a;){const h=Math.min(SB,a-u),_=n.slice(u,u+h);u+h>=a&&(p+=", finalize");let E=0,T=wB;for(;E<CB&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[xf]));)E++,await NB(T),T=T*IB;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[xf])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function xB(n){return{size:n.size,type:n.type}}function NB(n){return new Promise(e=>setTimeout(e,n))}class DB{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await RB(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bB(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MB{create(e,t,i){return new kB(e,t,i)}}class kB{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kS="x-goog-api-key";class PB{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(kS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(kS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VB="gl-node/";class UB{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Zt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=NU(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new PB(this.apiKey);this.apiClient=new x5({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:VB+"web",uploader:new DB,downloader:new AB}),this.models=new J5(this.apiClient),this.live=new G5(this.apiClient,o,new MB),this.batches=new rO(this.apiClient),this.chats=new BO(this.models,this.apiClient),this.caches=new LO(this.apiClient),this.files=new XO(this.apiClient),this.operations=new Q5(this.apiClient),this.authTokens=new dF(this.apiClient),this.tunings=new TB(this.apiClient),this.fileSearchStores=new vF(this.apiClient)}}const Zu="spanish_assistant_vocab",PR="spanish_assistant_last_analysis",VR="spanish_assistant_theme",Dy="spanish_assistant_session_key",Os="spanish_assistant_books";let zn=null;cI(bo,n=>{zn=n});const My=n=>{const e={};return Object.keys(n).forEach(t=>{n[t]!==void 0&&(e[t]=n[t])}),e},UR=n=>{sessionStorage.setItem(Dy,n)},ky=()=>sessionStorage.getItem(Dy),LB=()=>{sessionStorage.removeItem(Dy)},Py=()=>{const n=zn;return n?zu(Ni,"users",n.uid,"vocabulary"):null},Hr=async()=>{if(zn)try{const e=Py();if(!e)return[];const t=Zg(e,iy("addedAt","desc"));return(await ry(t)).docs.map(o=>o.data())}catch(e){return console.error("Failed to load vocab from Firestore",e),[]}try{const e=localStorage.getItem(Zu);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load vocab from LocalStorage",e),[]}},OB=async n=>{const e=zn,t=Date.now();let i=0;const o=await Hr(),a=new Set(o.map(d=>d.word.trim().toLowerCase()));if(e)try{const d=Fw(Ni),p=Py();if(!p)return 0;let h=0;for(const _ of n){const E=_.word.trim().toLowerCase();if(!a.has(E)&&E.length>0){const T=crypto.randomUUID(),I={..._,word:_.word.trim(),id:T,addedAt:t,mastered:!1},k=$r(p,T);d.set(k,My(I)),i++,a.add(E),h++}}return h>0&&await d.commit(),i}catch(d){return console.error("Batch add failed in Firestore",d),0}const u=[...o];return n.forEach(d=>{const p=d.word.trim().toLowerCase();!a.has(p)&&p.length>0&&(u.unshift({...d,word:d.word.trim(),id:crypto.randomUUID(),addedAt:t,mastered:!1}),i++,a.add(p))}),i>0&&localStorage.setItem(Zu,JSON.stringify(u)),i},FB=async n=>{const e=zn;let t=0;if(e)try{const u=Fw(Ni),d=Py();if(!d)return 0;const p=await Hr(),h=new Set(p.map(_=>_.word.trim().toLowerCase()));for(const _ of n)if(!h.has(_.word.trim().toLowerCase())){const E=_.id||crypto.randomUUID(),T=$r(d,E),I={..._,id:E};u.set(T,My(I)),t++,h.add(_.word.trim().toLowerCase())}return await u.commit(),t}catch(u){return console.error("Import failed in Firestore",u),0}const i=await Hr(),o=[...i],a=new Set(i.map(u=>u.word.trim().toLowerCase()));return n.forEach(u=>{a.has(u.word.trim().toLowerCase())||(o.unshift({...u,id:u.id||crypto.randomUUID()}),t++,a.add(u.word.trim().toLowerCase()))}),t>0&&localStorage.setItem(Zu,JSON.stringify(o)),t},BB=async n=>{const e=zn;if(e)try{const o=$r(Ni,"users",e.uid,"vocabulary",n);await Lw(o);return}catch(o){console.error("Failed to delete from Firestore",o)}const i=(await Hr()).filter(o=>o.id!==n);localStorage.setItem(Zu,JSON.stringify(i))},qB=async n=>{const e=zn,t=await Hr(),i=t.find(u=>u.id===n);if(!i)return;const o={...i,mastered:!i.mastered};if(e)try{const u=$r(Ni,"users",e.uid,"vocabulary",n);await Ok(u,My(o),{merge:!0});return}catch(u){console.error("Failed to update Firestore",u)}const a=t.map(u=>u.id===n?o:u);localStorage.setItem(Zu,JSON.stringify(a))},GB=async n=>(await Hr()).some(t=>t.word.trim().toLowerCase()===n.trim().toLowerCase()),HB=()=>{const n=localStorage.getItem(PR);return n?JSON.parse(n):null},PS=()=>{localStorage.removeItem(PR)},zB=()=>localStorage.getItem(VR)||"light",KB=n=>{localStorage.setItem(VR,n)},ec=async()=>{const n=zn;if(n)try{const t=zu(Ni,"users",n.uid,"books"),i=Zg(t,iy("createdAt","desc"));return(await ry(i)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){return console.error("Failed to load books",t),[]}const e=localStorage.getItem(Os);return e?JSON.parse(e):[]},LR=async(n,e)=>{const t=zn,i={title:n,author:e,createdAt:Date.now(),pageCount:0,coverStyle:["bg-emerald-800","bg-amber-900","bg-slate-800","bg-indigo-900"][Math.floor(Math.random()*4)]};if(t)try{const d=zu(Ni,"users",t.uid,"books");return(await Ow(d,i)).id}catch(d){throw console.error("Failed to create book",d),d}const o=await ec(),a=crypto.randomUUID(),u={...i,id:a};return localStorage.setItem(Os,JSON.stringify([u,...o])),a},$B=async n=>{const e=zn;if(e)try{await Lw($r(Ni,"users",e.uid,"books",n));return}catch(o){console.error(o)}const i=(await ec()).filter(o=>o.id!==n);localStorage.setItem(Os,JSON.stringify(i)),localStorage.removeItem(`${Os}_pages_${n}`)},mg=async n=>{const e=zn;if(e)try{const i=zu(Ni,"users",e.uid,"books",n,"pages"),o=Zg(i,iy("pageNumber","asc"));return(await ry(o)).docs.map(u=>({id:u.id,...u.data()}))}catch(i){return console.error("Failed to load pages",i),[]}const t=localStorage.getItem(`${Os}_pages_${n}`);return t?JSON.parse(t):[]},YB=async(n,e,t)=>{const i=zn,a=(await mg(n)).length+1,u={bookId:n,pageNumber:a,image:e,analysis:t,createdAt:Date.now(),lastSentenceIndex:0};if(i)try{const T=$r(Ni,"users",i.uid,"books",n),I=zu(T,"pages"),k=await Ow(I,u);return await Uw(T,{pageCount:Bk(1)}),k.id}catch(T){throw console.error("Failed to add page",T),T}const d=crypto.randomUUID(),p={...u,id:d},h=await mg(n);h.push(p),localStorage.setItem(`${Os}_pages_${n}`,JSON.stringify(h));const _=await ec(),E=_.findIndex(T=>T.id===n);return E>=0&&(_[E].pageCount=(_[E].pageCount||0)+1,localStorage.setItem(Os,JSON.stringify(_))),d},JB=async(n,e,t)=>{const i=zn;if(i)try{const o=$r(Ni,"users",i.uid,"books",n,"pages",e);await Uw(o,{lastSentenceIndex:t})}catch(o){console.error("Failed to save progress",o)}else{const o=localStorage.getItem(`${Os}_pages_${n}`);if(o){const a=JSON.parse(o),u=a.findIndex(d=>d.id===e);u!==-1&&(a[u].lastSentenceIndex=t,localStorage.setItem(`${Os}_pages_${n}`,JSON.stringify(a)))}}};function QB(n){const e=atob(n),t=e.length,i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=e.charCodeAt(o);return i}async function XB(n,e,t,i){const o=new Int16Array(n.buffer),a=o.length/i,u=e.createBuffer(i,a,t);for(let d=0;d<i;d++){const p=u.getChannelData(d);for(let h=0;h<a;h++)p[h]=o[h*i+d]/32768}return u}const WB={type:Dt.OBJECT,properties:{sentences:{type:Dt.ARRAY,items:{type:Dt.OBJECT,properties:{original:{type:Dt.STRING,description:"The EXACT verbatim sentence from the image. No omissions."},translation:{type:Dt.STRING,description:"Natural German translation of the full sentence."},words:{type:Dt.ARRAY,items:{type:Dt.OBJECT,properties:{word:{type:Dt.STRING,description:"The word, phrase, punctuation, or space."},type:{type:Dt.STRING,enum:["word","punctuation"],description:"Use 'word' for lexical units/phrases, 'punctuation' for symbols/spaces."},translation:{type:Dt.STRING,description:"German translation (required if type='word')."},explanation:{type:Dt.STRING,description:"German Grammar/context explanation (required if type='word')."},category:{type:Dt.STRING,enum:["noun","verb","adjective","function"],description:"Grammatical category."},baseForm:{type:Dt.STRING,description:"Lemma/Infinitiv."}},required:["word","type"]}}},required:["original","translation","words"]}}},required:["sentences"]},OR=()=>{const t=ky()||void 0;if(!t)throw new Error("Kein API Key gefunden. Bitte geben Sie einen in den Einstellungen ein.");return new UB({apiKey:t})},jB=async n=>{const e=OR(),t=`
    Analyze the attached Spanish book page. You are an expert Spanish teacher.
    
    CRITICAL INSTRUCTIONS:
    1. COMPLETE TRANSCRIPTION: You MUST process EVERY SINGLE SENTENCE visible on the page. Do not skip any sentences.
    2. PHRASE BINDING: Combine words that belong together (reflexive verbs like "se levant", idioms like "tener que") into a SINGLE 'word' object.
    3. FULL CHARACTER COVERAGE: Reconstruct the 'original' string perfectly including spaces.
    4. Provide the result in German.
  `;try{const o=(await e.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:n}},{text:t}]},config:{responseMimeType:"application/json",responseSchema:WB,systemInstruction:"You are a professional Spanish-to-German translator. Extract all text and provide linguistic analysis for learners."}})).text;if(!o)throw new Error("No response text from Gemini.");return JSON.parse(o)}catch(i){throw console.error("Analysis failed:",i),i}},FR=async n=>{var t,i,o,a,u,d;const e=OR();try{const h=(d=(u=(a=(o=(i=(t=(await e.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:n}]}],config:{responseModalities:[Lu.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Puck"}}}}})).candidates)==null?void 0:t[0])==null?void 0:i.content)==null?void 0:o.parts)==null?void 0:a[0])==null?void 0:u.inlineData)==null?void 0:d.data;if(!h)throw new Error("No audio data returned");const _=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),E=_.createGain();E.connect(_.destination);const T=await XB(QB(h),_,24e3,1),I=_.createBufferSource();I.buffer=T,I.connect(E),I.start()}catch(p){throw console.error("TTS failed:",p),p}},ZB=({onChangeView:n,initialData:e,targetBookId:t,onSaveComplete:i})=>{const[o,a]=de.useState(null),[u,d]=de.useState(!1),[p,h]=de.useState(null),[_,E]=de.useState(0),[T,I]=de.useState("sentence"),[k,F]=de.useState(0),[U,Y]=de.useState(null),[te,W]=de.useState(!1),[re,ce]=de.useState(0),[le,x]=de.useState(new Set),[M,D]=de.useState(null),[L,P]=de.useState(null),[O,N]=de.useState(!1),[ye,Ze]=de.useState([]),[X,oe]=de.useState(!1),[_e,Le]=de.useState(""),Je=de.useRef(null);de.useEffect(()=>{e?(a(e.image),h(e.analysis),D(e.id),P(e.bookId),e.lastSentenceIndex!==void 0&&e.lastSentenceIndex>0&&E(e.lastSentenceIndex)):t&&P(t)},[e,t]);const q=de.useCallback(async()=>{if(!p)return;const Ae=new Set;for(const st of p.sentences)for(const It of st.words)It.type==="word"&&await GB(It.word)&&Ae.add(It.word.toLowerCase());x(Ae)},[p]);de.useEffect(()=>{q()},[p,q]),de.useEffect(()=>{L&&M&&p&&JB(L,M,_)},[_,L,M,p]);const ne=async Ae=>{d(!0),h(null),W(!1),E(0),I("sentence"),ce(0),D(null);try{const st=await jB(Ae);if(h(st),L)await ue(L,Ae,st);else{const It=await ec();Ze(It),N(!0)}}catch(st){console.error(st),a(null),alert("Analyse fehlgeschlagen. Bitte versuchen Sie es erneut.")}finally{d(!1)}},ue=async(Ae,st,It)=>{try{const Kn=await YB(Ae,st,It);D(Kn),P(Ae);const gt=It.sentences.flatMap(nt=>nt.words.filter(Kt=>Kt.type==="word").map(Kt=>({word:Kt.word,translation:Kt.translation||"",explanation:Kt.explanation||"",category:Kt.category,baseForm:Kt.baseForm,contextSentence:nt.original})));if(gt.length>0){const nt=await OB(gt);ce(nt),await q()}}catch(Kn){console.error("Save failed",Kn),alert("Fehler beim Speichern in die Datenbank.")}},pe=async Ae=>{!p||!o||(N(!1),await ue(Ae,o,p))},Ie=async Ae=>{if(Ae.preventDefault(),!(!_e.trim()||!p||!o))try{const st=await LR(_e,"Unbekannt");await pe(st),Le("")}catch{alert("Fehler beim Erstellen des Buches.")}},De=Ae=>{var It;const st=(It=Ae.target.files)==null?void 0:It[0];if(st){const Kn=new FileReader;Kn.onload=gt=>{var Kt;const nt=new Image;nt.onload=()=>{const zs=document.createElement("canvas"),Ks=1200,$t=1200;let gn=nt.width,Mn=nt.height;gn>Mn?gn>Ks&&(Mn*=Ks/gn,gn=Ks):Mn>$t&&(gn*=$t/Mn,Mn=$t),zs.width=gn,zs.height=Mn;const $s=zs.getContext("2d");if($s){$s.drawImage(nt,0,0,gn,Mn);const Ho=zs.toDataURL("image/jpeg",.8).split(",")[1];a(Ho),ne(Ho)}},nt.src=(Kt=gt.target)==null?void 0:Kt.result},Kn.readAsDataURL(st)}},Oe=async(Ae,st)=>{if(!U){Y(st);try{await FR(Ae)}catch(It){console.error(It)}finally{Y(null)}}},Ue=p==null?void 0:p.sentences[_],Qe=(Ue==null?void 0:Ue.words.filter(Ae=>Ae.type==="word"))||[],ci=de.useCallback(()=>{!p||!Ue||(T==="sentence"?Qe.length>0?(I("words"),F(0)):I("translation"):T==="words"?k<Qe.length-1?F(Ae=>Ae+1):I("translation"):T==="translation"&&(_<p.sentences.length-1?(E(Ae=>Ae+1),I("sentence"),F(0)):(W(!0),PS())))},[p,T,k,_,Qe,Ue]),Gs=de.useCallback(()=>{!p||!Ue||(_<p.sentences.length-1?(E(Ae=>Ae+1),I("sentence"),F(0)):(W(!0),PS()))},[p,Ue,_]),Hs=()=>{T==="translation"?Qe.length>0?(I("words"),F(Qe.length-1)):I("sentence"):T==="words"?k>0?F(Ae=>Ae-1):I("sentence"):T==="sentence"&&_>0&&(E(Ae=>Ae-1),I("translation"))},Mi=()=>{i?i():n==null||n(lt.HOME)};if(de.useEffect(()=>{const Ae=st=>{st.code==="Space"&&p&&!te&&!O&&(st.preventDefault(),ci())};return window.addEventListener("keydown",Ae),()=>window.removeEventListener("keydown",Ae)},[p,te,ci,O]),u)return w.jsxs("div",{className:"fixed inset-0 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col items-center justify-center text-center p-6 z-50",children:[w.jsx(xr,{className:"w-12 h-12 animate-spin text-[#6B705C] dark:text-[#D4A373] mb-4"}),w.jsx("h2",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Analysiere Seite..."}),w.jsx("p",{className:"text-sm text-[#6B705C] dark:text-[#A5A58D] font-serif italic mt-2",children:"Texte werden erkannt und Vokabeln gespeichert."})]});if(O)return w.jsx("div",{className:"fixed inset-0 bg-[#FDFBF7] dark:bg-[#12100E] z-50 flex flex-col items-center justify-center p-6 animate-fade-in",children:w.jsxs("div",{className:"w-full max-w-md",children:[w.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2 text-center",children:"In welches Buch?"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] text-center mb-8 font-serif italic",children:"Jede Seite muss zu einem Buch gehren. Whle eines aus oder erstelle ein neues."}),w.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto mb-6 pr-2",children:ye.map(Ae=>w.jsxs("button",{onClick:()=>pe(Ae.id),className:"w-full text-left p-4 bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl flex items-center gap-4 hover:border-[#B26B4A] dark:hover:border-[#D4A373] transition-colors group",children:[w.jsx("div",{className:`w-10 h-10 rounded-lg ${Ae.coverStyle||"bg-[#2C2420]"} flex items-center justify-center text-white`,children:w.jsx(yg,{className:"w-5 h-5"})}),w.jsxs("div",{children:[w.jsx("h3",{className:"font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:Ae.title}),w.jsxs("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D]",children:[Ae.pageCount," Seiten"]})]}),w.jsx(fE,{className:"w-4 h-4 ml-auto text-[#EAE2D6] group-hover:text-[#B26B4A]"})]},Ae.id))}),w.jsxs("div",{className:"relative flex items-center gap-4 mb-6",children:[w.jsx("div",{className:"h-px bg-[#EAE2D6] dark:bg-[#2C2420] flex-grow"}),w.jsx("span",{className:"text-[10px] font-bold uppercase text-[#A5A58D]",children:"Oder neu"}),w.jsx("div",{className:"h-px bg-[#EAE2D6] dark:bg-[#2C2420] flex-grow"})]}),w.jsxs("form",{onSubmit:Ie,className:"flex gap-2",children:[w.jsx("input",{type:"text",placeholder:"Neuer Buchtitel...",value:_e,onChange:Ae=>Le(Ae.target.value),className:"flex-grow bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-[#B26B4A]/20"}),w.jsx("button",{type:"submit",disabled:!_e.trim(),className:"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] p-3 rounded-xl disabled:opacity-50",children:w.jsx(Hd,{className:"w-6 h-6"})})]})]})});if(!p&&!o)return w.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-6 animate-fade-in text-center px-6",children:[w.jsx("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] p-4 rounded-full mb-2",children:w.jsx(xd,{className:"w-8 h-8 text-[#FDFBF7] dark:text-[#D4A373]"})}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:t?"Nchste Seite hinzufgen":"Bereit zum Lesen?"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic max-w-xs mx-auto",children:"Scanne eine Buchseite. Wir speichern sie automatisch in deiner Bibliothek."})]}),w.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:Je,className:"hidden",onChange:De}),w.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[w.jsx("button",{onClick:()=>{var Ae;return(Ae=Je.current)==null?void 0:Ae.click()},className:"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 px-10 rounded-2xl shadow-xl font-bold uppercase text-[10px] tracking-widest active:scale-95 transition-transform",children:"Seite scannen"}),w.jsx("button",{onClick:Mi,className:"text-[#6B705C] dark:text-[#A5A58D] font-bold uppercase text-[10px] tracking-widest p-2 hover:text-[#2C2420] dark:hover:text-[#FDFBF7]",children:"Zurck"})]})]});if(te)return w.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-center px-6 animate-fade-in bg-[#FDFBF7] dark:bg-[#12100E]",children:[w.jsx("div",{className:"w-16 h-16 bg-[#E9EDC9] dark:bg-[#2C2420] rounded-2xl flex items-center justify-center text-[#6B705C] dark:text-[#D4A373] mb-6",children:w.jsx(nf,{className:"w-8 h-8"})}),w.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"Seite beendet!"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic mb-8",children:re>0?`${re} neue Vokabeln wurden deiner Sammlung hinzugefgt.`:"Alle Vokabeln dieser Seite wurden gespeichert."}),w.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[w.jsx("button",{onClick:Mi,className:"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] px-8 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest shadow-md",children:"Zurck zum Buch"}),w.jsx("button",{onClick:()=>n==null?void 0:n(lt.VOCAB),className:"text-[#6B705C] dark:text-[#A5A58D] px-8 py-2 font-bold uppercase text-[10px] tracking-widest hover:text-[#2C2420] dark:hover:text-[#FDFBF7]",children:"Vokabeln lernen"})]})]});const mt=Qe[k];return w.jsxs("div",{className:"fixed inset-0 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col z-50 transition-colors",children:[w.jsxs("div",{className:"px-6 pt-4 pb-2 flex justify-between items-center bg-[#FDFBF7] dark:bg-[#12100E] shrink-0 border-b border-[#EAE2D6] dark:border-[#2C2420] z-20",children:[w.jsxs("div",{className:"flex flex-col gap-1 w-full max-w-[150px]",children:[w.jsxs("span",{className:"text-[9px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-widest",children:["Satz ",_+1," / ",p==null?void 0:p.sentences.length]}),w.jsx("div",{className:"h-1 bg-[#EAE2D6] dark:bg-[#2C2420] rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-[#B26B4A] dark:bg-[#D4A373] transition-all duration-500",style:{width:`${(_+1)/((p==null?void 0:p.sentences.length)||1)*100}%`}})})]}),w.jsx("button",{onClick:Mi,className:"p-2 text-[#A5A58D] dark:text-[#2C2420] hover:text-[#B26B4A] dark:hover:text-[#D4A373]",title:"Schlieen & Speichern",children:w.jsx(W1,{className:"w-5 h-5"})})]}),w.jsx("div",{className:"flex-grow overflow-y-auto px-6 py-6 pb-32",children:w.jsxs("div",{className:"max-w-2xl mx-auto flex flex-col justify-center min-h-[50vh]",children:[T==="sentence"&&w.jsxs("div",{className:"animate-fade-in flex flex-col items-center gap-6",children:[w.jsx("p",{className:"text-2xl sm:text-3xl font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed text-center italic",children:Ue==null?void 0:Ue.original}),w.jsx("button",{onClick:()=>Oe((Ue==null?void 0:Ue.original)||"",`s-${_}`),className:"w-12 h-12 bg-[#FDFBF7] dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-full flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] shadow-sm hover:scale-105 transition-transform",children:U===`s-${_}`?w.jsx(xr,{className:"w-5 h-5 animate-spin"}):w.jsx(xd,{className:"w-5 h-5"})})]}),T==="words"&&Ue&&w.jsxs("div",{className:"animate-fade-in flex flex-col gap-8",children:[w.jsx("div",{className:"bg-white dark:bg-[#1C1917] p-6 rounded-3xl border border-[#EAE2D6] dark:border-[#2C2420] shadow-sm",children:w.jsx("p",{className:"text-xl font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed",children:Ue.words.map((Ae,st)=>{const It=mt&&Ae.word===mt.word;return w.jsx("span",{className:`transition-colors duration-300 ${It?"bg-[#FEFAE0] dark:bg-[#B26B4A]/20 text-[#B26B4A] dark:text-[#D4A373] font-bold px-1 rounded mx-0.5":"opacity-40"}`,children:Ae.word},st)})})}),mt&&w.jsxs("div",{className:"relative w-full bg-[#2C2420] dark:bg-[#1C1917] text-[#FDFBF7] p-8 rounded-[2.5rem] shadow-xl border border-transparent dark:border-[#2C2420] flex flex-col animate-fade-in",children:[w.jsx("button",{onClick:()=>Oe(mt.word,`w-${_}-${k}`),className:"absolute top-6 right-6 w-10 h-10 bg-[#B26B4A] dark:bg-[#D4A373] rounded-full flex items-center justify-center shadow-lg hover:scale-105 transition-transform z-10",children:U===`w-${_}-${k}`?w.jsx(xr,{className:"w-4 h-4 animate-spin text-white dark:text-[#12100E]"}):w.jsx(xd,{className:"w-4 h-4 text-white dark:text-[#12100E]"})}),w.jsxs("div",{className:"mb-6",children:[w.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[w.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-[#B26B4A] dark:text-[#D4A373]",children:mt.category||"Vokabel"}),le.has(mt.word.toLowerCase())&&w.jsxs("div",{className:"flex items-center gap-1.5 bg-[#E9EDC9]/20 px-2 py-1 rounded-full",children:[w.jsx(nf,{className:"w-3 h-3 text-[#E9EDC9]"}),w.jsx("span",{className:"text-[7px] font-bold uppercase tracking-widest text-[#E9EDC9]",children:"In Sammlung"})]})]}),w.jsx("h3",{className:"text-4xl font-serif font-bold text-[#FEFAE0] dark:text-[#D4A373] mb-2",children:mt.word}),w.jsx("p",{className:"text-2xl font-serif italic text-[#FDFBF7]/90",children:mt.translation})]}),mt.explanation&&w.jsx("div",{className:"bg-white/5 dark:bg-black/20 p-5 rounded-2xl border border-white/10 dark:border-white/5",children:w.jsx("p",{className:"text-base font-serif leading-relaxed text-[#FDFBF7]/80",children:mt.explanation})}),mt.baseForm&&mt.baseForm!==mt.word&&w.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10",children:[w.jsx("p",{className:"text-[10px] uppercase tracking-widest opacity-50 mb-1",children:"Grundform"}),w.jsx("p",{className:"font-serif italic text-lg",children:mt.baseForm})]})]})]}),T==="translation"&&Ue&&w.jsxs("div",{className:"animate-fade-in flex flex-col gap-10 text-center pb-8",children:[w.jsxs("div",{className:"space-y-4",children:[w.jsx("span",{className:"text-[9px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-widest block",children:"Original"}),w.jsx("p",{className:"text-2xl font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed italic",children:Ue.original}),w.jsx("button",{onClick:()=>Oe(Ue.original,`s-${_}-trans`),className:"mx-auto w-10 h-10 mt-2 bg-[#FDFBF7] dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-full flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] hover:bg-[#FEFAE0] dark:hover:bg-[#2C2420] transition-colors",children:U===`s-${_}-trans`?w.jsx(xr,{className:"w-4 h-4 animate-spin"}):w.jsx(xd,{className:"w-4 h-4 fill-current"})})]}),w.jsx("div",{className:"w-16 h-[1px] bg-[#EAE2D6] dark:bg-[#2C2420] mx-auto"}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("span",{className:"text-[9px] font-bold text-[#B26B4A] dark:text-[#D4A373] uppercase tracking-widest block",children:"bersetzung"}),w.jsx("p",{className:"text-xl font-serif text-[#6B705C] dark:text-[#A5A58D] leading-relaxed",children:Ue.translation})]})]})]})}),w.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-6 py-6 bg-[#FDFBF7] dark:bg-[#12100E] border-t border-[#EAE2D6] dark:border-[#2C2420] z-30 transition-colors",children:w.jsxs("div",{className:"flex gap-3 max-w-lg mx-auto",children:[w.jsx("button",{onClick:Hs,disabled:T==="sentence"&&_===0,className:"w-14 h-14 flex items-center justify-center bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl text-[#6B705C] dark:text-[#A5A58D] disabled:opacity-20 active:scale-95 transition-all shadow-sm",children:w.jsx(H1,{className:"w-6 h-6"})}),w.jsxs("button",{onClick:ci,className:`flex-grow h-14 rounded-2xl flex items-center justify-center gap-3 font-bold text-[10px] uppercase tracking-[0.2em] shadow-lg active:scale-95 transition-all ${T==="translation"?"bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E]":"bg-[#2C2420] dark:bg-white text-white dark:text-[#12100E]"}`,children:[T==="sentence"?"Wrter analysieren":T==="words"&&k<Qe.length-1?"Nchstes Wort":T==="words"?"Zur bersetzung":"Nchster Satz",w.jsx(fE,{className:"w-4 h-4"})]}),T==="sentence"&&w.jsx("button",{onClick:Gs,className:"w-14 h-14 flex items-center justify-center bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl text-[#6B705C] dark:text-[#A5A58D] active:scale-95 transition-all shadow-sm",title:"Satz berspringen",children:w.jsx(bx,{className:"w-6 h-6"})})]})})]})},e9=()=>{const[n,e]=de.useState([]),[t,i]=de.useState(!0),[o,a]=de.useState("list"),[u,d]=de.useState("all"),[p,h]=de.useState([]),[_,E]=de.useState(0),[T,I]=de.useState(!1),[k,F]=de.useState(!1),U=de.useRef(null);de.useEffect(()=>{Y()},[]);const Y=async()=>{i(!0);const O=await Hr();e(O.sort((N,ye)=>ye.addedAt-N.addedAt)),i(!1)},te=()=>u==="all"?n:n.filter(O=>(O.category||"function")===u),W=async O=>{window.confirm("Dieses Wort aus deiner Sammlung lschen?")&&(await BB(O),Y())},re=()=>{const O=JSON.stringify(n,null,2),N="data:application/json;charset=utf-8,"+encodeURIComponent(O),ye=`spanish-vocab-${new Date().toISOString().split("T")[0]}.json`,Ze=document.createElement("a");Ze.setAttribute("href",N),Ze.setAttribute("download",ye),Ze.click()},ce=()=>{var O;(O=U.current)==null||O.click()},le=async O=>{var Ze;const N=(Ze=O.target.files)==null?void 0:Ze[0];if(!N)return;F(!0);const ye=new FileReader;ye.onload=async X=>{var oe;try{const _e=JSON.parse((oe=X.target)==null?void 0:oe.result);if(Array.isArray(_e)){const Le=await FB(_e);alert(`${Le} neue Vokabeln importiert!`),await Y()}else alert("Ungltiges JSON-Format. Erwartet wird ein Array von Vokabeln.")}catch(_e){console.error("Import failed:",_e),alert("Import fehlgeschlagen. Bitte berprfen Sie die Datei.")}finally{F(!1),U.current&&(U.current.value="")}},ye.readAsText(N)},x=()=>{const O=te().filter(ye=>!ye.mastered);if(O.length===0){alert("Keine offenen Vokabeln in dieser Kategorie!");return}const N=[...O].sort(()=>Math.random()-.5);h(N),E(0),I(!1),a("train")},M=async O=>{const N=p[_];O==="good"?await qB(N.id):h(ye=>[...ye,N]),I(!1),_<p.length-1?E(ye=>ye+1):(alert("Sitzung abgeschlossen! Gut gemacht."),a("list"),Y())},D=async()=>{if(o==="train"&&p[_])try{await FR(p[_].word)}catch(O){console.error(O)}},L=()=>w.jsx("div",{className:"flex overflow-x-auto gap-3 pb-3 mb-6 scrollbar-hide px-1",children:["all","noun","verb","adjective","function"].map(O=>w.jsx("button",{onClick:()=>d(O),className:`px-5 py-2.5 rounded-2xl whitespace-nowrap text-xs font-bold uppercase tracking-widest transition-all duration-300 ${u===O?"bg-[#B26B4A] dark:bg-[#D4A373] text-[#FDFBF7] dark:text-[#12100E] shadow-lg":"bg-white dark:bg-[#1C1917] text-[#6B705C] dark:text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420]"}`,children:O==="all"?"Alle":O==="noun"?"Nomen":O==="verb"?"Verben":O==="adjective"?"Adjektive":"Andere"},O))});if(t)return w.jsx("div",{className:"flex flex-col items-center justify-center h-[50vh] animate-fade-in",children:w.jsx(xr,{className:"w-10 h-10 animate-spin text-[#B26B4A] dark:text-[#D4A373]"})});if(n.length===0&&!k)return w.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] text-center p-8 animate-fade-in",children:[w.jsx("div",{className:"w-20 h-20 bg-white dark:bg-[#1C1917] rounded-full flex items-center justify-center mb-6 text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420]",children:w.jsx(tx,{className:"w-10 h-10"})}),w.jsx("h3",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Deine Sammlung ist leer"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] mt-3 font-serif italic mb-6",children:"Scanne ein Buch, um neue Vokabeln automatisch hierher zu speichern."}),w.jsx("input",{type:"file",accept:".json",ref:U,className:"hidden",onChange:le}),w.jsxs("button",{onClick:ce,className:"bg-white dark:bg-[#1C1917] text-[#6B705C] dark:text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420] px-6 py-3 rounded-2xl flex items-center gap-2 font-bold uppercase text-[10px] tracking-widest shadow-sm hover:bg-[#FDFBF7] transition-all",children:[w.jsx(gE,{className:"w-4 h-4"}),"JSON Importieren"]})]});if(o==="list"){const O=te(),N=O.filter(ye=>!ye.mastered).length;return w.jsxs("div",{className:"space-y-6 pb-24 animate-fade-in",children:[w.jsxs("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] rounded-[2.5rem] p-8 text-[#FDFBF7] shadow-2xl mb-8 relative overflow-hidden border border-transparent dark:border-[#2C2420]",children:[w.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#B26B4A]/10 dark:bg-[#D4A373]/5 rounded-full -mr-16 -mt-16"}),w.jsxs("div",{className:"relative z-10",children:[w.jsxs("div",{className:"flex justify-between items-start mb-4",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-4xl font-serif font-bold",children:N}),w.jsx("p",{className:"text-[#FDFBF7]/60 text-sm font-serif italic tracking-wide",children:"offene Fundstcke"})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"file",accept:".json",ref:U,className:"hidden",onChange:le}),w.jsx("button",{onClick:ce,disabled:k,className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl text-[#FDFBF7] transition-all border border-white/10",title:"Vokabeln importieren",children:k?w.jsx(xr,{className:"w-5 h-5 animate-spin"}):w.jsx(gE,{className:"w-5 h-5"})}),w.jsx("button",{onClick:re,className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl text-[#FDFBF7] transition-all border border-white/10",title:"Vokabeln exportieren",children:w.jsx(Z1,{className:"w-5 h-5"})}),w.jsx(sx,{className:"w-8 h-8 text-[#B26B4A] dark:text-[#D4A373] ml-2"})]})]}),w.jsx("button",{onClick:x,disabled:N===0,className:"w-full bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] font-bold py-4 rounded-2xl shadow-xl hover:bg-[#9E5A3B] transition-all disabled:opacity-30 mt-4 uppercase text-xs tracking-[0.2em]",children:"Sitzung starten"})]})]}),L(),w.jsx("div",{className:"grid gap-4",children:O.length===0?w.jsx("p",{className:"text-center text-[#A5A58D] py-12 font-serif italic",children:"In dieser Kategorie hast du noch keine Wrter gesammelt."}):O.map(ye=>w.jsxs("div",{className:"bg-white dark:bg-[#1C1917] p-5 rounded-3xl border border-[#EAE2D6] dark:border-[#2C2420] shadow-sm flex justify-between items-center group transition-all hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30",children:[w.jsxs("div",{className:"flex-grow",children:[w.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[w.jsx("p",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] text-xl",children:ye.word}),ye.mastered&&w.jsx(nf,{className:"w-4 h-4 text-[#6B705C] dark:text-[#D4A373]"}),ye.category&&w.jsx("span",{className:"text-[7px] font-bold uppercase tracking-widest text-[#B26B4A] dark:text-[#D4A373] bg-[#B26B4A]/10 px-1.5 py-0.5 rounded",children:ye.category})]}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] text-sm italic font-serif",children:ye.translation})]}),w.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:w.jsx("button",{onClick:()=>W(ye.id),className:"p-3 text-[#A5A58D] hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-2xl transition-all",children:w.jsx(_g,{className:"w-5 h-5"})})})]},ye.id))})]})}const P=p[_];return w.jsxs("div",{className:"h-full flex flex-col items-center max-w-md mx-auto animate-fade-in",children:[w.jsxs("div",{className:"w-full flex justify-between items-center mb-8",children:[w.jsx("button",{onClick:()=>a("list"),className:"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7] text-xs font-bold uppercase tracking-widest bg-white dark:bg-[#1C1917] px-4 py-2 rounded-xl border border-[#EAE2D6] dark:border-[#2C2420]",children:"Abbrechen"}),w.jsxs("span",{className:"text-[#A5A58D] text-xs font-bold tracking-[0.3em]",children:[_+1," / ",p.length]})]}),w.jsx("div",{className:"w-full aspect-[4/5] perspective-1000 cursor-pointer mb-10",onClick:()=>!T&&I(!0),children:w.jsxs("div",{className:"relative w-full h-full bg-white dark:bg-[#1C1917] rounded-[3rem] shadow-2xl border border-[#EAE2D6] dark:border-[#2C2420] overflow-hidden flex flex-col transition-all duration-500",children:[w.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center p-10 text-center ${T?"border-b border-[#FDFBF7] dark:border-[#12100E]":""}`,children:[w.jsx("span",{className:"text-[10px] font-bold text-[#B26B4A] dark:text-[#D4A373] uppercase tracking-[0.3em] mb-6",children:P.category||"Wort"}),w.jsx("h2",{className:"text-5xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-8",children:P.word}),!T&&w.jsxs("div",{className:"flex flex-col items-center gap-4",children:[w.jsx("p",{className:"text-[#A5A58D] text-sm font-serif italic animate-pulse",children:"Karte aufdecken"}),w.jsx("button",{onClick:O=>{O.stopPropagation(),D()},className:"p-4 bg-[#FEFAE0] dark:bg-[#2C2420] text-[#B26B4A] dark:text-[#D4A373] rounded-2xl hover:bg-[#FAEDCD] dark:hover:bg-black/20",children:w.jsx(mE,{className:"w-6 h-6 fill-current"})})]})]}),T&&w.jsxs("div",{className:"flex-1 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col items-center justify-center p-10 text-center animate-in fade-in slide-in-from-bottom-6 duration-500 overflow-y-auto",children:[w.jsx("h2",{className:"text-3xl font-serif font-bold text-[#B26B4A] dark:text-[#D4A373] mb-3",children:P.translation}),P.baseForm&&P.baseForm.toLowerCase()!==P.word.toLowerCase()&&w.jsxs("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] mb-4 font-bold uppercase tracking-widest opacity-60",children:["Grundform: ",P.baseForm]}),w.jsxs("p",{className:"text-[#6B705C] dark:text-[#A5A58D] italic font-serif text-lg leading-relaxed mb-6",children:['"',P.explanation,'"']}),P.contextSentence&&w.jsxs("div",{className:"mb-6 p-4 bg-white/50 dark:bg-white/5 rounded-2xl border border-[#EAE2D6] dark:border-white/10 relative",children:[w.jsx(Ex,{className:"w-3 h-3 text-[#B26B4A] dark:text-[#D4A373] absolute top-2 left-2 opacity-30"}),w.jsx("p",{className:"text-[11px] font-serif italic text-[#6B705C] dark:text-[#A5A58D] px-2",children:P.contextSentence})]}),w.jsx("button",{onClick:O=>{O.stopPropagation(),D()},className:"p-3 bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] rounded-xl hover:bg-[#E9EDC9] dark:hover:bg-[#2C2420]",children:w.jsx(mE,{className:"w-5 h-5 fill-current"})})]})]})}),T?w.jsxs("div",{className:"grid grid-cols-2 gap-6 w-full px-4",children:[w.jsxs("button",{onClick:()=>M("again"),className:"flex flex-col items-center justify-center p-5 bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#B26B4A] dark:text-[#D4A373] rounded-3xl hover:bg-[#FEFAE0] dark:hover:bg-[#2C2420] active:scale-95 transition-all shadow-sm",children:[w.jsx(Ax,{className:"w-6 h-6 mb-2"}),w.jsx("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Nochmal"})]}),w.jsxs("button",{onClick:()=>M("good"),className:"flex flex-col items-center justify-center p-5 bg-[#6B705C] dark:bg-[#D4A373] text-white dark:text-[#12100E] rounded-3xl hover:bg-[#585E4A] dark:hover:bg-[#B26B4A] active:scale-95 transition-all shadow-xl",children:[w.jsx(nf,{className:"w-6 h-6 mb-2"}),w.jsx("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Gelernt"})]})]}):w.jsx("div",{className:"w-full px-4",children:w.jsx("button",{onClick:()=>I(!0),className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-[#FDFBF7] dark:text-[#12100E] font-bold py-5 rounded-3xl shadow-2xl hover:bg-[#3D332D] dark:hover:bg-[#B26B4A] active:scale-95 transition-all uppercase text-xs tracking-[0.3em]",children:"Antwort zeigen"})})]})},t9=()=>{const[n,e]=de.useState(""),[t,i]=de.useState(!1),[o,a]=de.useState(!1);de.useEffect(()=>{const p=ky();p&&(i(!0),e(p))},[]);const u=()=>{n.trim()&&(UR(n.trim()),i(!0),a(!0),setTimeout(()=>a(!1),3e3))},d=()=>{LB(),e(""),i(!1)};return w.jsxs("div",{className:"max-w-2xl mx-auto py-8 animate-fade-in",children:[w.jsxs("div",{className:"mb-10",children:[w.jsx("h2",{className:"text-3xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"Einstellungen"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Verwalte deinen Zugang zur KI und deine lokalen Daten."})]}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("section",{className:"bg-white dark:bg-[#1C1917] rounded-[2.5rem] border border-[#EAE2D6] dark:border-[#2C2420] p-8 shadow-sm",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[w.jsx("div",{className:"w-12 h-12 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] shadow-sm",children:w.jsx(sf,{className:"w-6 h-6"})}),w.jsxs("div",{children:[w.jsx("h3",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] text-xl",children:"API Konfiguration"}),w.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Dein persnlicher Schlssel fr Google Gemini."})]})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"password",value:n,onChange:p=>e(p.target.value),placeholder:"Geben Sie Ihren API Key ein...",className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-4 pr-12 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm font-mono"}),w.jsx(sf,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D] opacity-40"})]}),w.jsxs("div",{className:"flex flex-wrap gap-3",children:[w.jsxs("button",{onClick:u,disabled:!n.trim(),className:"flex-1 bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2 disabled:opacity-30",children:[o?w.jsx(hE,{className:"w-4 h-4"}):w.jsx(Cx,{className:"w-4 h-4"}),o?"Gespeichert":"Key Speichern"]}),t&&w.jsxs("button",{onClick:d,className:"bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900/30 px-6 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] active:scale-95 transition-all flex items-center justify-center gap-2",children:[w.jsx(_g,{className:"w-4 h-4"}),"Lschen"]})]}),w.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-2xl border transition-colors ${t?"bg-[#E9EDC9]/30 border-[#CCD5AE]/30":"bg-[#FEFAE0]/50 border-[#FAEDCD]"}`,children:[t?w.jsx(hE,{className:"w-5 h-5 text-[#6B705C] shrink-0 mt-0.5"}):w.jsx(K1,{className:"w-5 h-5 text-[#B26B4A] shrink-0 mt-0.5"}),w.jsxs("div",{children:[w.jsxs("p",{className:"text-xs font-bold uppercase tracking-widest text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:["Status: ",t?"Persnlicher Key aktiv":"Kein Key konfiguriert"]}),w.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:t?"Dieser Key wird ausschlielich in deiner aktuellen Browser-Session verwendet und nicht permanent gespeichert.":"Bitte hinterlege einen Key, um die bersetzungs- und Audio-Funktionen nutzen zu knnen."})]})]})]})]}),w.jsxs("section",{className:"bg-[#FEFAE0]/30 dark:bg-[#1C1917]/50 rounded-[2.5rem] border border-[#FAEDCD] dark:border-[#2C2420] p-8",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[w.jsx("div",{className:"w-10 h-10 bg-white dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#6B705C] dark:text-[#A5A58D] shadow-sm",children:w.jsx(BS,{className:"w-5 h-5"})}),w.jsx("h3",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Sicherheit & Lokalitt"})]}),w.jsxs("p",{className:"text-sm text-[#6B705C] dark:text-[#A5A58D] font-serif italic leading-relaxed",children:["Dein Lernfortschritt wird bei Gsten ausschlielich in deinem Browser (Local Storage) gespeichert. API Keys werden aus Sicherheitsgrnden nur im ",w.jsx("strong",{children:"Session Storage"})," gehalten  sie verschwinden, sobald du den Tab schliet."]})]})]})]})},n9=({onGuestLogin:n})=>{const[e,t]=de.useState(!0),[i,o]=de.useState(""),[a,u]=de.useState(""),[d,p]=de.useState(""),[h,_]=de.useState(!1),[E,T]=de.useState(null),I=async k=>{k.preventDefault(),_(!0),T(null);try{if(e)await FP(bo,i,a);else{const F=await OP(bo,i,a);await qP(F.user,{displayName:d})}}catch(F){console.error("Auth error:",F),T(F.message||"Authentifizierung fehlgeschlagen.")}finally{_(!1)}};return w.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#FDFBF7] dark:bg-[#12100E]",children:w.jsxs("div",{className:"w-full max-w-md animate-fade-in",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#2C2420] dark:bg-[#D4A373] rounded-2xl text-[#FDFBF7] dark:text-[#12100E] shadow-xl mb-6",children:w.jsx(yg,{className:"w-8 h-8"})}),w.jsx("h1",{className:"text-3xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2 tracking-tight",children:"Spanish Reading Assistant"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Melde dich an, um deine Lesereise zu beginnen."})]}),w.jsxs("div",{className:"bg-white dark:bg-[#1C1917] p-8 rounded-[2.5rem] border border-[#EAE2D6] dark:border-[#2C2420] shadow-2xl",children:[w.jsxs("div",{className:"flex bg-[#FDFBF7] dark:bg-[#12100E] p-1 rounded-2xl border border-[#EAE2D6] dark:border-[#2C2420] mb-8",children:[w.jsx("button",{onClick:()=>t(!0),className:`flex-1 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all ${e?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D]"}`,children:"Anmelden"}),w.jsx("button",{onClick:()=>t(!1),className:`flex-1 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all ${e?"text-[#6B705C] dark:text-[#A5A58D]":"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm"}`,children:"Registrieren"})]}),w.jsxs("form",{onSubmit:I,className:"space-y-5",children:[!e&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Name"}),w.jsxs("div",{className:"relative",children:[w.jsx(GS,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),w.jsx("input",{type:"text",required:!0,value:d,onChange:k=>p(k.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:"Dein Name"})]})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Email"}),w.jsxs("div",{className:"relative",children:[w.jsx(px,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),w.jsx("input",{type:"email",required:!0,value:i,onChange:k=>o(k.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:"name@beispiel.de"})]})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Passwort"}),w.jsxs("div",{className:"relative",children:[w.jsx(lx,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),w.jsx("input",{type:"password",required:!0,value:a,onChange:k=>u(k.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:""})]})]}),E&&w.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 rounded-2xl text-red-600 dark:text-red-400 text-xs font-serif italic",children:E}),w.jsx("button",{type:"submit",disabled:h,className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-50",children:h?w.jsx(xr,{className:"w-4 h-4 animate-spin"}):e?w.jsxs(w.Fragment,{children:[w.jsx(cx,{className:"w-4 h-4"}),"Anmelden"]}):w.jsxs(w.Fragment,{children:[w.jsx(Vx,{className:"w-4 h-4"}),"Konto erstellen"]})})]}),w.jsxs("div",{className:"relative my-8",children:[w.jsx("div",{className:"absolute inset-0 flex items-center",children:w.jsx("div",{className:"w-full border-t border-[#EAE2D6] dark:border-[#2C2420]"})}),w.jsx("div",{className:"relative flex justify-center text-[8px] font-bold uppercase tracking-[0.3em]",children:w.jsx("span",{className:"bg-white dark:bg-[#1C1917] px-4 text-[#A5A58D]",children:"Oder"})})]}),w.jsxs("button",{onClick:n,disabled:h,className:"w-full bg-white dark:bg-transparent border border-[#EAE2D6] dark:border-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-sm active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-50 hover:bg-[#FDFBF7] dark:hover:bg-[#2C2420]/30",children:[w.jsx(Q1,{className:"w-4 h-4"}),"Als Gast fortfahren"]}),w.jsxs("div",{className:"mt-8 pt-8 border-t border-[#EAE2D6] dark:border-[#2C2420] flex items-center justify-center gap-2 text-[#6B705C] dark:text-[#A5A58D]",children:[w.jsx(qS,{className:"w-4 h-4 opacity-50"}),w.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50",children:"App by Spanish Learners"})]})]})]})})},i9=({onChangeView:n,onOpenPage:e,onAddPage:t})=>{const[i,o]=de.useState([]),[a,u]=de.useState(!0),[d,p]=de.useState(!1),[h,_]=de.useState(""),[E,T]=de.useState(""),[I,k]=de.useState(!1),[F,U]=de.useState(null),[Y,te]=de.useState([]);de.useEffect(()=>{W()},[]),de.useEffect(()=>{F&&re(F.id)},[F]);const W=async()=>{u(!0);try{const x=await ec();o(x)}catch(x){console.error("Failed to load books:",x),alert("Fehler beim Laden der Bcher. Fehlende Berechtigungen. Prfe die Browser-Konsole und die Firestore-Regeln."),o([])}finally{u(!1)}},re=async x=>{const M=await mg(x);te(M)},ce=async x=>{if(x.preventDefault(),!(!h.trim()||I)){k(!0);try{await LR(h,E),p(!1),_(""),T(""),W()}catch(M){console.error("Failed to create book:",M),alert("Fehler beim Erstellen des Buches. Prfe die Browser-Konsole fr Details.")}finally{k(!1)}}},le=async(x,M)=>{x.stopPropagation(),window.confirm("Buch wirklich lschen? Alle gespeicherten Seiten gehen verloren.")&&(await $B(M),(F==null?void 0:F.id)===M&&U(null),W())};return F?w.jsxs("div",{className:"animate-fade-in pb-24",children:[w.jsxs("button",{onClick:()=>U(null),className:"flex items-center gap-2 text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7] mb-6 font-bold uppercase text-[10px] tracking-widest transition-colors",children:[w.jsx(V1,{className:"w-4 h-4"}),"Zurck zur Bibliothek"]}),w.jsx("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] p-8 rounded-[2.5rem] shadow-xl text-[#FDFBF7] mb-8 border border-transparent dark:border-[#2C2420] relative overflow-hidden",children:w.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em] opacity-60 block mb-2",children:"Buch"}),w.jsx("h2",{className:"text-4xl font-serif font-bold mb-1",children:F.title}),w.jsx("p",{className:"font-serif italic text-lg opacity-80",children:F.author||"Unbekannter Autor"}),w.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[w.jsxs("span",{className:"bg-white/10 px-3 py-1 rounded-lg text-xs font-mono",children:[Y.length," Seiten"]}),w.jsxs("span",{className:"text-xs opacity-50 font-serif italic",children:["Erstellt am ",new Date(F.createdAt).toLocaleDateString()]})]})]}),w.jsx(Im,{className:"w-24 h-24 text-white/5 absolute -right-4 -bottom-4 rotate-12"})]})}),w.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[w.jsx("h3",{className:"font-serif font-bold text-xl text-[#2C2420] dark:text-[#FDFBF7]",children:"Seiten"}),w.jsxs("button",{onClick:()=>t(F.id),className:"flex items-center gap-2 bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] px-5 py-2.5 rounded-xl font-bold uppercase text-[10px] tracking-widest shadow-md hover:scale-105 transition-transform",children:[w.jsx(Hd,{className:"w-4 h-4"}),"Seite scannen"]})]}),Y.length===0?w.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-[#EAE2D6] dark:border-[#2C2420] rounded-3xl bg-white/50 dark:bg-[#1C1917]/50",children:[w.jsx(yg,{className:"w-12 h-12 mx-auto text-[#A5A58D] mb-3"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Dieses Buch hat noch keine Seiten."})]}):w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Y.map((x,M)=>{var D;return w.jsxs("div",{onClick:()=>e(x),className:"group bg-white dark:bg-[#1C1917] rounded-2xl overflow-hidden border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer hover:shadow-lg transition-all hover:border-[#B26B4A]/50 relative aspect-[3/4]",children:[w.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-90 group-hover:opacity-100 transition-opacity",style:{backgroundImage:`url(data:image/jpeg;base64,${x.image})`}}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-60 group-hover:opacity-80"}),w.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[w.jsxs("span",{className:"text-white text-xs font-bold uppercase tracking-widest block mb-1",children:["Seite ",x.pageNumber]}),w.jsxs("p",{className:"text-white/80 text-[10px] line-clamp-2 font-serif italic",children:[(D=x.analysis.sentences[0])==null?void 0:D.original.substring(0,50),"..."]})]})]},x.id)})})]}):w.jsxs("div",{className:"animate-fade-in pb-24",children:[w.jsxs("div",{className:"flex justify-between items-end mb-8",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-3xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Bibliothek"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic mt-1",children:"Deine Sammlung spanischer Lektre."})]}),w.jsx("button",{onClick:()=>p(!0),className:"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] p-4 rounded-2xl shadow-lg hover:scale-105 transition-transform",children:w.jsx(Hd,{className:"w-6 h-6"})})]}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.map(x=>w.jsxs("div",{onClick:()=>U(x),className:`relative aspect-[3/4] rounded-r-[1.5rem] rounded-l-md shadow-xl cursor-pointer hover:-translate-y-2 transition-transform duration-300 group overflow-hidden ${x.coverStyle||"bg-[#2C2420]"}`,children:[w.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-4 bg-black/20 z-20 border-r border-white/10"}),w.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-between text-[#FDFBF7] z-10 bg-gradient-to-br from-white/10 to-black/20",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"font-serif font-bold text-2xl leading-tight mb-2 line-clamp-3 drop-shadow-md",children:x.title}),w.jsx("p",{className:"font-serif italic text-sm opacity-80",children:x.author})]}),w.jsxs("div",{className:"flex justify-between items-end",children:[w.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest bg-black/30 px-2 py-1 rounded backdrop-blur-sm",children:[x.pageCount," Seiten"]}),w.jsx("button",{onClick:M=>le(M,x.id),className:"p-2 bg-black/30 rounded-full hover:bg-red-500/80 transition-colors opacity-0 group-hover:opacity-100",children:w.jsx(_g,{className:"w-4 h-4"})})]})]})]},x.id)),i.length===0&&!a&&w.jsxs("div",{onClick:()=>p(!0),className:"aspect-[3/4] rounded-[1.5rem] border-2 border-dashed border-[#EAE2D6] dark:border-[#2C2420] flex flex-col items-center justify-center text-[#A5A58D] cursor-pointer hover:bg-[#EAE2D6]/20 dark:hover:bg-[#2C2420]/20 transition-colors",children:[w.jsx(Hd,{className:"w-12 h-12 mb-4 opacity-50"}),w.jsx("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Erstes Buch erstellen"})]})]}),d&&w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-[#12100E]/80 backdrop-blur-sm animate-fade-in",children:w.jsxs("div",{className:"bg-[#FDFBF7] dark:bg-[#1C1917] w-full max-w-md p-8 rounded-[2.5rem] shadow-2xl",children:[w.jsx("h3",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-6",children:"Neues Buch"}),w.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-2 mb-1 block",children:"Titel"}),w.jsx("input",{autoFocus:!0,disabled:I,className:"w-full bg-white dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 px-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 disabled:opacity-50",placeholder:"z.B. Harry Potter y la piedra filosofal",value:h,onChange:x=>_(x.target.value)})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-2 mb-1 block",children:"Autor (Optional)"}),w.jsx("input",{disabled:I,className:"w-full bg-white dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 px-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 disabled:opacity-50",placeholder:"z.B. J.K. Rowling",value:E,onChange:x=>T(x.target.value)})]}),w.jsxs("div",{className:"flex gap-3 pt-4",children:[w.jsx("button",{type:"button",disabled:I,onClick:()=>p(!1),className:"flex-1 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest border border-[#EAE2D6] dark:border-[#2C2420] hover:bg-[#EAE2D6]/20 disabled:opacity-50",children:"Abbrechen"}),w.jsx("button",{type:"submit",disabled:!h.trim()||I,className:"flex-1 bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:I?"Wird erstellt...":"Erstellen"})]})]})]})})]})},s9=({onClose:n})=>{const[e,t]=de.useState(""),i=()=>{e.trim()&&(UR(e.trim()),n())};return w.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-[#12100E]/80 backdrop-blur-sm animate-fade-in",children:w.jsxs("div",{className:"w-full max-w-md bg-[#FDFBF7] dark:bg-[#1C1917] rounded-[2.5rem] shadow-2xl border border-[#EAE2D6] dark:border-[#2C2420] p-8 relative",children:[w.jsx("button",{onClick:n,className:"absolute top-6 right-6 p-2 text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7] transition-colors",children:w.jsx(Fx,{className:"w-5 h-5"})}),w.jsxs("div",{className:"mb-6",children:[w.jsx("div",{className:"w-14 h-14 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-2xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] mb-4",children:w.jsx(sf,{className:"w-7 h-7"})}),w.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"API Key bentigt"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] text-sm font-serif italic",children:"Um die KI-Funktionen nutzen zu knnen, geben Sie bitte Ihren Gemini API Key ein. Dieser wird nur fr diese Sitzung gespeichert."})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx(sf,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),w.jsx("input",{type:"password",value:e,onChange:o=>t(o.target.value),placeholder:"Geben Sie Ihren Key ein...",className:"w-full bg-white dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm font-mono"})]}),w.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[#E9EDC9]/30 dark:bg-[#2C2420]/30 rounded-xl border border-[#CCD5AE]/30 dark:border-[#2C2420]/50",children:[w.jsx(BS,{className:"w-4 h-4 text-[#6B705C] dark:text-[#A5A58D]"}),w.jsx("p",{className:"text-[10px] text-[#6B705C] dark:text-[#A5A58D] font-serif",children:"Sicher: Der Key wird beim Schlieen des Tabs gelscht."})]}),w.jsxs("button",{onClick:i,disabled:!e.trim(),className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-30",children:["Sitzung starten",w.jsx(Gd,{className:"w-4 h-4"})]}),w.jsx("button",{onClick:n,className:"w-full text-[#A5A58D] text-[10px] font-bold uppercase tracking-widest mt-2 hover:text-[#6B705C] transition-colors",children:"Spter eingeben"})]})]})})};function r9(){const[n,e]=de.useState(lt.HOME),[t,i]=de.useState(null),[o,a]=de.useState(0),[u,d]=de.useState(zB()),[p,h]=de.useState(null),[_,E]=de.useState(localStorage.getItem("spanish_assistant_is_guest")==="true"),[T,I]=de.useState(!0),[k,F]=de.useState(!1),[U,Y]=de.useState(null),[te,W]=de.useState(null);de.useEffect(()=>{const N=cI(bo,ye=>{h(ye),ye&&(E(!1),localStorage.removeItem("spanish_assistant_is_guest"),re()),I(!1)});return()=>N()},[]),de.useEffect(()=>{i(HB()),Hr().then(N=>a(N.length))},[n,p,_]),de.useEffect(()=>{u==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),KB(u)},[u]);const re=()=>{ky()||F(!0)},ce=()=>d(N=>N==="light"?"dark":"light"),le=()=>{E(!0),localStorage.setItem("spanish_assistant_is_guest","true"),re()},x=()=>{E(!1),localStorage.removeItem("spanish_assistant_is_guest")},M=N=>{W(N),Y(N.bookId),e(lt.ANALYZE)},D=N=>{Y(N),W(null),e(lt.ANALYZE)},L=()=>{e(U?lt.LIBRARY:lt.HOME),W(null)},P=N=>{N!==lt.ANALYZE&&(Y(null),W(null)),e(N)};if(T)return w.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#FDFBF7] dark:bg-[#12100E]",children:[w.jsx(xr,{className:"w-12 h-12 animate-spin text-[#B26B4A] dark:text-[#D4A373] mb-4"}),w.jsx("p",{className:"font-serif italic text-[#6B705C] dark:text-[#A5A58D]",children:"Wird geladen..."})]});if(!p&&!_)return w.jsx(n9,{onGuestLogin:le});const O=()=>{switch(n){case lt.ANALYZE:return w.jsx(ZB,{onChangeView:P,initialData:te,targetBookId:U,onSaveComplete:L});case lt.VOCAB:return w.jsx(e9,{});case lt.LIBRARY:return w.jsx(i9,{onChangeView:P,onOpenPage:M,onAddPage:D});case lt.SETTINGS:return w.jsx(t9,{});case lt.HOME:default:return w.jsxs("div",{className:"flex flex-col gap-6 py-4 animate-fade-in",children:[w.jsxs("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] rounded-[2.5rem] p-8 text-[#FDFBF7] shadow-xl relative overflow-hidden border border-transparent dark:border-[#2C2420]",children:[w.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#B26B4A]/20 dark:bg-[#D4A373]/10 rounded-full -mr-12 -mt-12 blur-2xl"}),w.jsxs("div",{className:"relative z-10",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(qS,{className:"text-[#FEFAE0] dark:text-[#D4A373] w-5 h-5"}),w.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest text-[#FEFAE0]/80 dark:text-[#D4A373]/80",children:_?"Bienvenido, Invitado":`Bienvenido, ${(p==null?void 0:p.displayName)||"Amigo"}`})]}),w.jsx("h2",{className:"text-4xl font-serif font-bold mb-4 tracking-tight",children:"Hola amigo."}),w.jsx("p",{className:"text-[#FDFBF7]/70 text-md font-serif italic leading-relaxed mb-6 max-w-sm",children:_?"Deine Bcher werden lokal gespeichert. Melde dich an, um sie berall zu nutzen.":"Organisiere deine Lektre in der neuen Bibliothek."}),w.jsxs("div",{className:"flex flex-wrap gap-3",children:[w.jsxs("button",{onClick:()=>{Y(null),W(null),e(lt.ANALYZE)},className:"bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] font-bold py-3.5 px-6 rounded-xl shadow-lg hover:bg-[#9E5A3B] transition-all inline-flex items-center gap-3 uppercase text-[10px] tracking-widest",children:[w.jsx(OS,{className:"w-4 h-4"}),"Schnellscan"]}),w.jsxs("button",{onClick:()=>e(lt.LIBRARY),className:"bg-white/10 text-white border border-white/20 font-bold py-3.5 px-6 rounded-xl shadow-lg hover:bg-white/20 transition-all inline-flex items-center gap-3 uppercase text-[10px] tracking-widest",children:[w.jsx(pE,{className:"w-4 h-4"}),"Bibliothek ffnen"]})]})]})]}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[w.jsxs("div",{onClick:()=>e(lt.LIBRARY),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] shadow-sm border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30 hover:shadow-md transition-all group",children:[w.jsx("div",{className:"w-12 h-12 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] mb-4 group-hover:scale-105 transition-transform",children:w.jsx(pE,{className:"w-6 h-6"})}),w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:"Bibliothek"}),w.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Erstelle Bcher und speichere Seiten dauerhaft."})]}),w.jsx(Gd,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420] group-hover:text-[#B26B4A] dark:group-hover:text-[#D4A373] transition-colors"})]})]}),w.jsxs("div",{onClick:()=>e(lt.VOCAB),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] shadow-sm border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30 hover:shadow-md transition-all group",children:[w.jsx("div",{className:"w-12 h-12 bg-[#E9EDC9] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#6B705C] dark:text-[#A5A58D] mb-4 group-hover:scale-105 transition-transform",children:w.jsx(LS,{className:"w-6 h-6"})}),w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:"Wortschatz"}),w.jsxs("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:[o," Fundstcke in deiner Sammlung."]})]}),w.jsx(Gd,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420] group-hover:text-[#6B705C] dark:group-hover:text-[#D4A373] transition-colors"})]})]})]}),w.jsxs("div",{onClick:()=>e(lt.SETTINGS),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer flex items-center justify-between hover:bg-[#FDFBF7] dark:hover:bg-[#12100E] transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"bg-[#2C2420]/5 dark:bg-white/5 p-3 rounded-xl",children:w.jsx(FS,{className:"w-5 h-5 text-[#6B705C] dark:text-[#A5A58D]"})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Einstellungen"}),w.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] italic",children:"Verwalte deinen Zugang und lerne mehr."})]})]}),w.jsx(Gd,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420]"})]})]})}};return w.jsxs(wU,{currentView:n,onChangeView:P,theme:u,onToggleTheme:ce,isGuest:_,onLogoutGuest:x,children:[O(),k&&w.jsx(s9,{onClose:()=>F(!1)})]})}const BR=document.getElementById("root");if(!BR)throw new Error("Could not find root element to mount to");const o9=b1.createRoot(BR);o9.render(w.jsx(E1.StrictMode,{children:w.jsx(r9,{})}));
