(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function ES(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qp={exports:{}},su={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function eb(){if(HE)return su;HE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var f in o)f!=="key"&&(a[f]=o[f])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return su.Fragment=e,su.jsx=t,su.jsxs=t,su}var zE;function tb(){return zE||(zE=1,Qp.exports=eb()),Qp.exports}var R=tb(),Xp={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KE;function nb(){if(KE)return Ne;KE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function I(q){return q===null||typeof q!="object"?null:(q=T&&q[T]||q["@@iterator"],typeof q=="function"?q:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,L={};function J(q,ne,ce){this.props=q,this.context=ne,this.refs=L,this.updater=ce||P}J.prototype.isReactComponent={},J.prototype.setState=function(q,ne){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ne,"setState")},J.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function ie(){}ie.prototype=J.prototype;function Z(q,ne,ce){this.props=q,this.context=ne,this.refs=L,this.updater=ce||P}var oe=Z.prototype=new ie;oe.constructor=Z,B(oe,J.prototype),oe.isPureReactComponent=!0;var le=Array.isArray;function ue(){}var M={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function N(q,ne,ce){var me=ce.ref;return{$$typeof:n,type:q,key:ne,ref:me!==void 0?me:null,props:ce}}function V(q,ne){return N(q.type,ne,q.props)}function k(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function O(q){var ne={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ce){return ne[ce]})}var x=/\/+/g;function he(q,ne){return typeof q=="object"&&q!==null&&q.key!=null?O(""+q.key):ne.toString(36)}function _e(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ue,ue):(q.status="pending",q.then(function(ne){q.status==="pending"&&(q.status="fulfilled",q.value=ne)},function(ne){q.status==="pending"&&(q.status="rejected",q.reason=ne)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Y(q,ne,ce,me,we){var ke=typeof q;(ke==="undefined"||ke==="boolean")&&(q=null);var Ke=!1;if(q===null)Ke=!0;else switch(ke){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(q.$$typeof){case n:case e:Ke=!0;break;case _:return Ke=q._init,Y(Ke(q._payload),ne,ce,me,we)}}if(Ke)return we=we(q),Ke=me===""?"."+he(q,0):me,le(we)?(ce="",Ke!=null&&(ce=Ke.replace(x,"$&/")+"/"),Y(we,ne,ce,"",function(xr){return xr})):we!=null&&(k(we)&&(we=V(we,ce+(we.key==null||q&&q.key===we.key?"":(""+we.key).replace(x,"$&/")+"/")+Ke)),ne.push(we)),1;Ke=0;var Ot=me===""?".":me+":";if(le(q))for(var dt=0;dt<q.length;dt++)me=q[dt],ke=Ot+he(me,dt),Ke+=Y(me,ne,ce,ke,we);else if(dt=I(q),typeof dt=="function")for(q=dt.call(q),dt=0;!(me=q.next()).done;)me=me.value,ke=Ot+he(me,dt++),Ke+=Y(me,ne,ce,ke,we);else if(ke==="object"){if(typeof q.then=="function")return Y(_e(q),ne,ce,me,we);throw ne=String(q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function re(q,ne,ce){if(q==null)return q;var me=[],we=0;return Y(q,me,"","",function(ke){return ne.call(ce,ke,we++)}),me}function ge(q){if(q._status===-1){var ne=q._result;ne=ne(),ne.then(function(ce){(q._status===0||q._status===-1)&&(q._status=1,q._result=ce)},function(ce){(q._status===0||q._status===-1)&&(q._status=2,q._result=ce)}),q._status===-1&&(q._status=0,q._result=ne)}if(q._status===1)return q._result.default;throw q._result}var Ve=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},$e={map:re,forEach:function(q,ne,ce){re(q,function(){ne.apply(this,arguments)},ce)},count:function(q){var ne=0;return re(q,function(){ne++}),ne},toArray:function(q){return re(q,function(ne){return ne})||[]},only:function(q){if(!k(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Ne.Activity=E,Ne.Children=$e,Ne.Component=J,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=Z,Ne.StrictMode=i,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(q){return M.H.useMemoCache(q)}},Ne.cache=function(q){return function(){return q.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(q,ne,ce){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=B({},q.props),we=q.key;if(ne!=null)for(ke in ne.key!==void 0&&(we=""+ne.key),ne)!D.call(ne,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ne.ref===void 0||(me[ke]=ne[ke]);var ke=arguments.length-2;if(ke===1)me.children=ce;else if(1<ke){for(var Ke=Array(ke),Ot=0;Ot<ke;Ot++)Ke[Ot]=arguments[Ot+2];me.children=Ke}return N(q.type,we,me)},Ne.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Ne.createElement=function(q,ne,ce){var me,we={},ke=null;if(ne!=null)for(me in ne.key!==void 0&&(ke=""+ne.key),ne)D.call(ne,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(we[me]=ne[me]);var Ke=arguments.length-2;if(Ke===1)we.children=ce;else if(1<Ke){for(var Ot=Array(Ke),dt=0;dt<Ke;dt++)Ot[dt]=arguments[dt+2];we.children=Ot}if(q&&q.defaultProps)for(me in Ke=q.defaultProps,Ke)we[me]===void 0&&(we[me]=Ke[me]);return N(q,ke,we)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(q){return{$$typeof:f,render:q}},Ne.isValidElement=k,Ne.lazy=function(q){return{$$typeof:_,_payload:{_status:-1,_result:q},_init:ge}},Ne.memo=function(q,ne){return{$$typeof:h,type:q,compare:ne===void 0?null:ne}},Ne.startTransition=function(q){var ne=M.T,ce={};M.T=ce;try{var me=q(),we=M.S;we!==null&&we(ce,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ue,Ve)}catch(ke){Ve(ke)}finally{ne!==null&&ce.types!==null&&(ne.types=ce.types),M.T=ne}},Ne.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ne.use=function(q){return M.H.use(q)},Ne.useActionState=function(q,ne,ce){return M.H.useActionState(q,ne,ce)},Ne.useCallback=function(q,ne){return M.H.useCallback(q,ne)},Ne.useContext=function(q){return M.H.useContext(q)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(q,ne){return M.H.useDeferredValue(q,ne)},Ne.useEffect=function(q,ne){return M.H.useEffect(q,ne)},Ne.useEffectEvent=function(q){return M.H.useEffectEvent(q)},Ne.useId=function(){return M.H.useId()},Ne.useImperativeHandle=function(q,ne,ce){return M.H.useImperativeHandle(q,ne,ce)},Ne.useInsertionEffect=function(q,ne){return M.H.useInsertionEffect(q,ne)},Ne.useLayoutEffect=function(q,ne){return M.H.useLayoutEffect(q,ne)},Ne.useMemo=function(q,ne){return M.H.useMemo(q,ne)},Ne.useOptimistic=function(q,ne){return M.H.useOptimistic(q,ne)},Ne.useReducer=function(q,ne,ce){return M.H.useReducer(q,ne,ce)},Ne.useRef=function(q){return M.H.useRef(q)},Ne.useState=function(q){return M.H.useState(q)},Ne.useSyncExternalStore=function(q,ne,ce){return M.H.useSyncExternalStore(q,ne,ce)},Ne.useTransition=function(){return M.H.useTransition()},Ne.version="19.2.3",Ne}var YE;function lg(){return YE||(YE=1,Xp.exports=nb()),Xp.exports}var Ae=lg();const ib=ES(Ae);var Wp={exports:{}},ru={},Zp={exports:{}},jp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function sb(){return $E||($E=1,(function(n){function e(Y,re){var ge=Y.length;Y.push(re);e:for(;0<ge;){var Ve=ge-1>>>1,$e=Y[Ve];if(0<o($e,re))Y[Ve]=re,Y[ge]=$e,ge=Ve;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var re=Y[0],ge=Y.pop();if(ge!==re){Y[0]=ge;e:for(var Ve=0,$e=Y.length,q=$e>>>1;Ve<q;){var ne=2*(Ve+1)-1,ce=Y[ne],me=ne+1,we=Y[me];if(0>o(ce,ge))me<$e&&0>o(we,ce)?(Y[Ve]=we,Y[me]=ge,Ve=me):(Y[Ve]=ce,Y[ne]=ge,Ve=ne);else if(me<$e&&0>o(we,ge))Y[Ve]=we,Y[me]=ge,Ve=me;else break e}}return re}function o(Y,re){var ge=Y.sortIndex-re.sortIndex;return ge!==0?ge:Y.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var p=[],h=[],_=1,E=null,T=3,I=!1,P=!1,B=!1,L=!1,J=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function oe(Y){for(var re=t(h);re!==null;){if(re.callback===null)i(h);else if(re.startTime<=Y)i(h),re.sortIndex=re.expirationTime,e(p,re);else break;re=t(h)}}function le(Y){if(B=!1,oe(Y),!P)if(t(p)!==null)P=!0,ue||(ue=!0,O());else{var re=t(h);re!==null&&_e(le,re.startTime-Y)}}var ue=!1,M=-1,D=5,N=-1;function V(){return L?!0:!(n.unstable_now()-N<D)}function k(){if(L=!1,ue){var Y=n.unstable_now();N=Y;var re=!0;try{e:{P=!1,B&&(B=!1,ie(M),M=-1),I=!0;var ge=T;try{t:{for(oe(Y),E=t(p);E!==null&&!(E.expirationTime>Y&&V());){var Ve=E.callback;if(typeof Ve=="function"){E.callback=null,T=E.priorityLevel;var $e=Ve(E.expirationTime<=Y);if(Y=n.unstable_now(),typeof $e=="function"){E.callback=$e,oe(Y),re=!0;break t}E===t(p)&&i(p),oe(Y)}else i(p);E=t(p)}if(E!==null)re=!0;else{var q=t(h);q!==null&&_e(le,q.startTime-Y),re=!1}}break e}finally{E=null,T=ge,I=!1}re=void 0}}finally{re?O():ue=!1}}}var O;if(typeof Z=="function")O=function(){Z(k)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,he=x.port2;x.port1.onmessage=k,O=function(){he.postMessage(null)}}else O=function(){J(k,0)};function _e(Y,re){M=J(function(){Y(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Y){switch(T){case 1:case 2:case 3:var re=3;break;default:re=T}var ge=T;T=re;try{return Y()}finally{T=ge}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ge=T;T=Y;try{return re()}finally{T=ge}},n.unstable_scheduleCallback=function(Y,re,ge){var Ve=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ve+ge:Ve):ge=Ve,Y){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ge+$e,Y={id:_++,callback:re,priorityLevel:Y,startTime:ge,expirationTime:$e,sortIndex:-1},ge>Ve?(Y.sortIndex=ge,e(h,Y),t(p)===null&&Y===t(h)&&(B?(ie(M),M=-1):B=!0,_e(le,ge-Ve))):(Y.sortIndex=$e,e(p,Y),P||I||(P=!0,ue||(ue=!0,O()))),Y},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(Y){var re=T;return function(){var ge=T;T=re;try{return Y.apply(this,arguments)}finally{T=ge}}}})(jp)),jp}var JE;function rb(){return JE||(JE=1,Zp.exports=sb()),Zp.exports}var em={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE;function ob(){if(QE)return sn;QE=1;var n=lg();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,sn.createPortal=function(p,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(p,h,null,_)},sn.flushSync=function(p){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=_,i.d.f()}},sn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},sn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},sn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var _=h.as,E=f(_,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:I}):_==="script"&&i.d.X(p,{crossOrigin:E,integrity:T,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},sn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=f(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},sn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,E=f(_,h.crossOrigin);i.d.L(p,_,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},sn.preloadModule=function(p,h){if(typeof p=="string")if(h){var _=f(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},sn.requestFormReset=function(p){i.d.r(p)},sn.unstable_batchedUpdates=function(p,h){return p(h)},sn.useFormState=function(p,h,_){return u.H.useFormState(p,h,_)},sn.useFormStatus=function(){return u.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var XE;function ab(){if(XE)return em.exports;XE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),em.exports=ob(),em.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function lb(){if(WE)return ru;WE=1;var n=rb(),e=lg(),t=ab();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return p(y),s;if(v===c)return p(y),r;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var S=!1,w=y.child;w;){if(w===l){S=!0,l=y,c=v;break}if(w===c){S=!0,c=y,l=v;break}w=w.sibling}if(!S){for(w=v.child;w;){if(w===l){S=!0,l=v,c=y;break}if(w===c){S=!0,c=v,l=y;break}w=w.sibling}if(!S)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function _(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=_(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var x=Symbol.for("react.client.reference");function he(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===x?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case B:return"Fragment";case J:return"Profiler";case L:return"StrictMode";case le:return"Suspense";case ue:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case P:return"Portal";case Z:return s.displayName||"Context";case ie:return(s._context.displayName||"Context")+".Consumer";case oe:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:he(s.type)||"Memo";case D:r=s._payload,s=s._init;try{return he(s(r))}catch{}}return null}var _e=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Ve=[],$e=-1;function q(s){return{current:s}}function ne(s){0>$e||(s.current=Ve[$e],Ve[$e]=null,$e--)}function ce(s,r){$e++,Ve[$e]=s.current,s.current=r}var me=q(null),we=q(null),ke=q(null),Ke=q(null);function Ot(s,r){switch(ce(ke,r),ce(we,s),ce(me,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?dE(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=dE(r),s=hE(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(me),ce(me,s)}function dt(){ne(me),ne(we),ne(ke)}function xr(s){s.memoizedState!==null&&ce(Ke,s);var r=me.current,l=hE(r,s.type);r!==l&&(ce(we,s),ce(me,l))}function No(s){we.current===s&&(ne(me),ne(we)),Ke.current===s&&(ne(Ke),eu._currentValue=ge)}var xo,Do;function Ti(s){if(xo===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);xo=r&&r[1]||"",Do=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xo+s+Do}var el=!1;function Dr(s,r){if(!s||el)return"";el=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(X){var $=X}Reflect.construct(s,[],te)}else{try{te.call()}catch(X){$=X}s.call(te.prototype)}}else{try{throw Error()}catch(X){$=X}(te=s())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),S=v[0],w=v[1];if(S&&w){var U=S.split(`
`),K=w.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===K.length)for(c=U.length-1,y=K.length-1;1<=c&&0<=y&&U[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==K[y]){var W=`
`+U[c].replace(" at new "," at ");return s.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",s.displayName)),W}while(1<=c&&0<=y);break}}}finally{el=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Ti(l):""}function tl(s,r){switch(s.tag){case 26:case 27:case 5:return Ti(s.type);case 16:return Ti("Lazy");case 13:return s.child!==r&&r!==null?Ti("Suspense Fallback"):Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return Dr(s.type,!1);case 11:return Dr(s.type.render,!1);case 1:return Dr(s.type,!0);case 31:return Ti("Activity");default:return""}}function nl(s){try{var r="",l=null;do r+=tl(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var wt=Object.prototype.hasOwnProperty,Ft=n.unstable_scheduleCallback,bs=n.unstable_cancelCallback,Wd=n.unstable_shouldYield,zu=n.unstable_requestPaint,cn=n.unstable_now,Mr=n.unstable_getCurrentPriorityLevel,il=n.unstable_ImmediatePriority,sl=n.unstable_UserBlockingPriority,Ns=n.unstable_NormalPriority,Zd=n.unstable_LowPriority,Ku=n.unstable_IdlePriority,Yu=n.log,$u=n.unstable_setDisableYieldValue,ti=null,Jt=null;function Ln(s){if(typeof Yu=="function"&&$u(s),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(ti,s)}catch{}}var Et=Math.clz32?Math.clz32:Qu,Ju=Math.log,Mo=Math.LN2;function Qu(s){return s>>>=0,s===0?32:31-(Ju(s)/Mo|0)|0}var Ai=256,kr=262144,Rt=4194304;function Si(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ci(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var w=c&134217727;return w!==0?(c=w&~v,c!==0?y=Si(c):(S&=w,S!==0?y=Si(S):l||(l=w&~s,l!==0&&(y=Si(l))))):(w=c&~v,w!==0?y=Si(w):S!==0?y=Si(S):l||(l=c&~s,l!==0&&(y=Si(l)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:y}function ni(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function jd(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xu(){var s=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),s}function Ii(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Pr(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function eh(s,r,l,c,y,v){var S=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var w=s.entanglements,U=s.expirationTimes,K=s.hiddenUpdates;for(l=S&~l;0<l;){var W=31-Et(l),te=1<<W;w[W]=0,U[W]=-1;var $=K[W];if($!==null)for(K[W]=null,W=0;W<$.length;W++){var X=$[W];X!==null&&(X.lane&=-536870913)}l&=~te}c!==0&&Vr(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(S&~r))}function Vr(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-Et(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function rl(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-Et(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function ol(s,r){var l=r&-r;return l=(l&42)!==0?1:Ur(l),(l&(s.suspendedLanes|r))!==0?0:l}function Ur(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Zi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Wu(){var s=re.p;return s!==0?s:(s=window.event,s===void 0?32:UE(s.type))}function ii(s,r){var l=re.p;try{return re.p=s,r()}finally{re.p=l}}var si=Math.random().toString(36).slice(2),bt="__reactFiber$"+si,Ht="__reactProps$"+si,wi="__reactContainer$"+si,ko="__reactEvents$"+si,th="__reactListeners$"+si,Zu="__reactHandles$"+si,ju="__reactResources$"+si,Ri="__reactMarker$"+si;function Po(s){delete s[bt],delete s[Ht],delete s[ko],delete s[th],delete s[Zu]}function bi(s){var r=s[bt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[wi]||l[bt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=EE(s);s!==null;){if(l=s[bt])return l;s=EE(s)}return r}s=l,l=s.parentNode}return null}function On(s){if(s=s[bt]||s[wi]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function In(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Ni(s){var r=s[ju];return r||(r=s[ju]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Nt(s){s[Ri]=!0}var al=new Set,ll={};function xi(s,r){Di(s,r),Di(s+"Capture",r)}function Di(s,r){for(ll[s]=r,s=0;s<r.length;s++)al.add(r[s])}var ul=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cl={},fl={};function ec(s){return wt.call(fl,s)?!0:wt.call(cl,s)?!1:ul.test(s)?fl[s]=!0:(cl[s]=!0,!1)}function Vo(s,r,l){if(ec(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function wn(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function xt(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function zt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function xs(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function dl(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(S){l=""+S,v.call(this,S)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function et(s){if(!s._valueTracker){var r=xs(s)?"checked":"value";s._valueTracker=dl(s,r,""+s[r])}}function Lr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=xs(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Mi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Or=/[\n"\\]/g;function gn(s){return s.replace(Or,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Uo(s,r,l,c,y,v,S,w){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),r!=null?S==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+zt(r)):s.value!==""+zt(r)&&(s.value=""+zt(r)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),r!=null?hl(s,S,zt(r)):l!=null?hl(s,S,zt(l)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+zt(w):s.removeAttribute("name")}function tc(s,r,l,c,y,v,S,w){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){et(s);return}l=l!=null?""+zt(l):"",r=r!=null?""+zt(r):l,w||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=w?s.checked:!!c,s.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S),et(s)}function hl(s,r,l){r==="number"&&Mi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Ds(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+zt(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function nc(s,r,l){if(r!=null&&(r=""+zt(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+zt(l):""}function Ms(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(_e(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=zt(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),et(s)}function yn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var ic=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||ic.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function ml(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&pl(s,y,c)}else for(var v in r)r.hasOwnProperty(v)&&pl(s,v,r[v])}function Lo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(s){return ks.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ri(){}var gl=null;function Fn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ps=null,ki=null;function Fr(s){var r=On(s);if(r&&(s=r.stateNode)){var l=s[Ht]||null;e:switch(s=r.stateNode,r.type){case"input":if(Uo(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+gn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Ht]||null;if(!y)throw Error(i(90));Uo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&Lr(c)}break e;case"textarea":nc(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Ds(s,!!l.multiple,r,!1)}}}var Fo=!1;function Vs(s,r,l){if(Fo)return s(r,l);Fo=!0;try{var c=s(r);return c}finally{if(Fo=!1,(Ps!==null||ki!==null)&&(Wc(),Ps&&(r=Ps,s=ki,ki=Ps=null,Fr(r),s)))for(r=0;r<s.length;r++)Fr(s[r])}}function oi(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Ht]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(Bn)try{var it={};Object.defineProperty(it,"passive",{get:function(){Br=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Br=!1}var Pi=null,yl=null,qr=null;function _l(){if(qr)return qr;var s,r=yl,l=r.length,c,y="value"in Pi?Pi.value:Pi.textContent,v=y.length;for(s=0;s<l&&r[s]===y[s];s++);var S=l-s;for(c=1;c<=S&&r[l-c]===y[v-c];c++);return qr=y.slice(s,1<c?1-c:void 0)}function Gr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function ji(){return!0}function ai(){return!1}function Qt(s){function r(l,c,y,v,S){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(l=s[w],this[w]=l?l(v):v[w]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ji:ai,this.isPropagationStopped=ai,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),r}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Qt(es),Us=E({},es,{view:0,detail:0}),vl=Qt(Us),Ls,Bo,Ui,qo=E({},Us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Os,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ui&&(Ui&&s.type==="mousemove"?(Ls=s.screenX-Ui.screenX,Bo=s.screenY-Ui.screenY):Bo=Ls=0,Ui=s),Ls)},movementY:function(s){return"movementY"in s?s.movementY:Bo}}),El=Qt(qo),Hr=E({},qo,{dataTransfer:0}),rc=Qt(Hr),oc=E({},Us,{relatedTarget:0}),zr=Qt(oc),Tl=E({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),ac=Qt(Tl),Go=E({},es,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),lc=Qt(Go),uc=E({},es,{data:0}),Li=Qt(uc),cc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=dc[s])?!!r[s]:!1}function Os(){return hc}var fn=E({},Us,{key:function(s){if(s.key){var r=cc[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Gr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?fc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Os,charCode:function(s){return s.type==="keypress"?Gr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Gr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),pc=Qt(fn),mc=E({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ts=Qt(mc),g=E({},Us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Os}),A=Qt(g),C=E({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Qt(C),H=E({},qo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Qt(H),ae=E({},es,{newState:0,oldState:0}),De=Qt(ae),Tt=[9,13,27,32],We=Bn&&"CompositionEvent"in window,ht=null;Bn&&"documentMode"in document&&(ht=document.documentMode);var qn=Bn&&"TextEvent"in window&&!ht,Oi=Bn&&(!We||ht&&8<ht&&11>=ht),li=" ",ui=!1;function Kr(s,r){switch(s){case"keyup":return Tt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ho(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var zo=!1;function CR(s,r){switch(s){case"compositionend":return Ho(r);case"keypress":return r.which!==32?null:(ui=!0,li);case"textInput":return s=r.data,s===li&&ui?null:s;default:return null}}function IR(s,r){if(zo)return s==="compositionend"||!We&&Kr(s,r)?(s=_l(),qr=yl=Pi=null,zo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Oi&&r.locale!=="ko"?null:r.data;default:return null}}var wR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!wR[s.type]:r==="textarea"}function Cy(s,r,l,c){Ps?ki?ki.push(c):ki=[c]:Ps=c,r=rf(r,"onChange"),0<r.length&&(l=new Vi("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var Al=null,Sl=null;function RR(s){oE(s,0)}function gc(s){var r=In(s);if(Lr(r))return s}function Iy(s,r){if(s==="change")return r}var wy=!1;if(Bn){var nh;if(Bn){var ih="oninput"in document;if(!ih){var Ry=document.createElement("div");Ry.setAttribute("oninput","return;"),ih=typeof Ry.oninput=="function"}nh=ih}else nh=!1;wy=nh&&(!document.documentMode||9<document.documentMode)}function by(){Al&&(Al.detachEvent("onpropertychange",Ny),Sl=Al=null)}function Ny(s){if(s.propertyName==="value"&&gc(Sl)){var r=[];Cy(r,Sl,s,Fn(s)),Vs(RR,r)}}function bR(s,r,l){s==="focusin"?(by(),Al=r,Sl=l,Al.attachEvent("onpropertychange",Ny)):s==="focusout"&&by()}function NR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return gc(Sl)}function xR(s,r){if(s==="click")return gc(r)}function DR(s,r){if(s==="input"||s==="change")return gc(r)}function MR(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Rn=typeof Object.is=="function"?Object.is:MR;function Cl(s,r){if(Rn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!wt.call(r,y)||!Rn(s[y],r[y]))return!1}return!0}function xy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Dy(s,r){var l=xy(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=xy(l)}}function My(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?My(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function ky(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Mi(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Mi(s.document)}return r}function sh(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var kR=Bn&&"documentMode"in document&&11>=document.documentMode,Ko=null,rh=null,Il=null,oh=!1;function Py(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;oh||Ko==null||Ko!==Mi(c)||(c=Ko,"selectionStart"in c&&sh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Il&&Cl(Il,c)||(Il=c,c=rf(rh,"onSelect"),0<c.length&&(r=new Vi("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Ko)))}function Yr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Yo={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},ah={},Vy={};Bn&&(Vy=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function $r(s){if(ah[s])return ah[s];if(!Yo[s])return s;var r=Yo[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Vy)return ah[s]=r[l];return s}var Uy=$r("animationend"),Ly=$r("animationiteration"),Oy=$r("animationstart"),PR=$r("transitionrun"),VR=$r("transitionstart"),UR=$r("transitioncancel"),Fy=$r("transitionend"),By=new Map,lh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lh.push("scrollEnd");function ci(s,r){By.set(s,r),xi(r,[s])}var yc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Gn=[],$o=0,uh=0;function _c(){for(var s=$o,r=uh=$o=0;r<s;){var l=Gn[r];Gn[r++]=null;var c=Gn[r];Gn[r++]=null;var y=Gn[r];Gn[r++]=null;var v=Gn[r];if(Gn[r++]=null,c!==null&&y!==null){var S=c.pending;S===null?y.next=y:(y.next=S.next,S.next=y),c.pending=y}v!==0&&qy(l,y,v)}}function vc(s,r,l,c){Gn[$o++]=s,Gn[$o++]=r,Gn[$o++]=l,Gn[$o++]=c,uh|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function ch(s,r,l,c){return vc(s,r,l,c),Ec(s)}function Jr(s,r){return vc(s,null,null,r),Ec(s)}function qy(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=s.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&r!==null&&(y=31-Et(l),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),v):null}function Ec(s){if(50<$l)throw $l=0,vp=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Jo={};function LR(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(s,r,l,c){return new LR(s,r,l,c)}function fh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ns(s,r){var l=s.alternate;return l===null?(l=bn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Gy(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Tc(s,r,l,c,y,v){var S=0;if(c=s,typeof s=="function")fh(s)&&(S=1);else if(typeof s=="string")S=G1(s,l,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=bn(31,l,r,y),s.elementType=N,s.lanes=v,s;case B:return Qr(l.children,y,v,r);case L:S=8,y|=24;break;case J:return s=bn(12,l,r,y|2),s.elementType=J,s.lanes=v,s;case le:return s=bn(13,l,r,y),s.elementType=le,s.lanes=v,s;case ue:return s=bn(19,l,r,y),s.elementType=ue,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Z:S=10;break e;case ie:S=9;break e;case oe:S=11;break e;case M:S=14;break e;case D:S=16,c=null;break e}S=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=bn(S,l,r,y),r.elementType=s,r.type=c,r.lanes=v,r}function Qr(s,r,l,c){return s=bn(7,s,c,r),s.lanes=l,s}function dh(s,r,l){return s=bn(6,s,null,r),s.lanes=l,s}function Hy(s){var r=bn(18,null,null,0);return r.stateNode=s,r}function hh(s,r,l){return r=bn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var zy=new WeakMap;function Hn(s,r){if(typeof s=="object"&&s!==null){var l=zy.get(s);return l!==void 0?l:(r={value:s,source:r,stack:nl(r)},zy.set(s,r),r)}return{value:s,source:r,stack:nl(r)}}var Qo=[],Xo=0,Ac=null,wl=0,zn=[],Kn=0,Fs=null,Fi=1,Bi="";function is(s,r){Qo[Xo++]=wl,Qo[Xo++]=Ac,Ac=s,wl=r}function Ky(s,r,l){zn[Kn++]=Fi,zn[Kn++]=Bi,zn[Kn++]=Fs,Fs=s;var c=Fi;s=Bi;var y=32-Et(c)-1;c&=~(1<<y),l+=1;var v=32-Et(r)+y;if(30<v){var S=y-y%5;v=(c&(1<<S)-1).toString(32),c>>=S,y-=S,Fi=1<<32-Et(r)+y|l<<y|c,Bi=v+s}else Fi=1<<v|l<<y|c,Bi=s}function ph(s){s.return!==null&&(is(s,1),Ky(s,1,0))}function mh(s){for(;s===Ac;)Ac=Qo[--Xo],Qo[Xo]=null,wl=Qo[--Xo],Qo[Xo]=null;for(;s===Fs;)Fs=zn[--Kn],zn[Kn]=null,Bi=zn[--Kn],zn[Kn]=null,Fi=zn[--Kn],zn[Kn]=null}function Yy(s,r){zn[Kn++]=Fi,zn[Kn++]=Bi,zn[Kn++]=Fs,Fi=r.id,Bi=r.overflow,Fs=s}var Xt=null,ut=null,ze=!1,Bs=null,Yn=!1,gh=Error(i(519));function qs(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rl(Hn(r,s)),gh}function $y(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[bt]=s,r[Ht]=c,l){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(l=0;l<Ql.length;l++)Le(Ql[l],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),tc(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Ms(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||cE(r.textContent,l)?(c.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),c.onScroll!=null&&Le("scroll",r),c.onScrollEnd!=null&&Le("scrollend",r),c.onClick!=null&&(r.onclick=ri),r=!0):r=!1,r||qs(s,!0)}function Jy(s){for(Xt=s.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:Xt=Xt.return}}function Wo(s){if(s!==Xt)return!1;if(!ze)return Jy(s),ze=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Pp(s.type,s.memoizedProps)),l=!l),l&&ut&&qs(s),Jy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ut=vE(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ut=vE(s)}else r===27?(r=ut,tr(s.type)?(s=Fp,Fp=null,ut=s):ut=r):ut=Xt?Jn(s.stateNode.nextSibling):null;return!0}function Xr(){ut=Xt=null,ze=!1}function yh(){var s=Bs;return s!==null&&(Tn===null?Tn=s:Tn.push.apply(Tn,s),Bs=null),s}function Rl(s){Bs===null?Bs=[s]:Bs.push(s)}var _h=q(null),Wr=null,ss=null;function Gs(s,r,l){ce(_h,r._currentValue),r._currentValue=l}function rs(s){s._currentValue=_h.current,ne(_h)}function vh(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Eh(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var S=y.child;v=v.firstContext;e:for(;v!==null;){var w=v;v=y;for(var U=0;U<r.length;U++)if(w.context===r[U]){v.lanes|=l,w=v.alternate,w!==null&&(w.lanes|=l),vh(v.return,l,s),c||(S=null);break e}v=w.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(i(341));S.lanes|=l,v=S.alternate,v!==null&&(v.lanes|=l),vh(S,l,s),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===s){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function Zo(s,r,l,c){s=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var w=y.type;Rn(y.pendingProps.value,S.value)||(s!==null?s.push(w):s=[w])}}else if(y===Ke.current){if(S=y.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(eu):s=[eu])}y=y.return}s!==null&&Eh(r,s,l,c),r.flags|=262144}function Sc(s){for(s=s.firstContext;s!==null;){if(!Rn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Zr(s){Wr=s,ss=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wt(s){return Qy(Wr,s)}function Cc(s,r){return Wr===null&&Zr(s),Qy(s,r)}function Qy(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ss===null){if(s===null)throw Error(i(308));ss=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ss=ss.next=r;return l}var OR=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},FR=n.unstable_scheduleCallback,BR=n.unstable_NormalPriority,Dt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Th(){return{controller:new OR,data:new Map,refCount:0}}function bl(s){s.refCount--,s.refCount===0&&FR(BR,function(){s.controller.abort()})}var Nl=null,Ah=0,jo=0,ea=null;function qR(s,r){if(Nl===null){var l=Nl=[];Ah=0,jo=Ip(),ea={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Ah++,r.then(Xy,Xy),r}function Xy(){if(--Ah===0&&Nl!==null){ea!==null&&(ea.status="fulfilled");var s=Nl;Nl=null,jo=0,ea=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function GR(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Wy=Y.S;Y.S=function(s,r){Pv=cn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&qR(s,r),Wy!==null&&Wy(s,r)};var jr=q(null);function Sh(){var s=jr.current;return s!==null?s:at.pooledCache}function Ic(s,r){r===null?ce(jr,jr.current):ce(jr,r.pool)}function Zy(){var s=Sh();return s===null?null:{parent:Dt._currentValue,pool:s}}var ta=Error(i(460)),Ch=Error(i(474)),wc=Error(i(542)),Rc={then:function(){}};function jy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function e_(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(ri,ri),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,n_(s),s;default:if(typeof r.status=="string")r.then(ri,ri);else{if(s=at,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,n_(s),s}throw to=r,ta}}function eo(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(to=l,ta):l}}var to=null;function t_(){if(to===null)throw Error(i(459));var s=to;return to=null,s}function n_(s){if(s===ta||s===wc)throw Error(i(483))}var na=null,xl=0;function bc(s){var r=xl;return xl+=1,na===null&&(na=[]),e_(na,s,r)}function Dl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Nc(s,r){throw r.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function i_(s){function r(G,F){if(s){var z=G.deletions;z===null?(G.deletions=[F],G.flags|=16):z.push(F)}}function l(G,F){if(!s)return null;for(;F!==null;)r(G,F),F=F.sibling;return null}function c(G){for(var F=new Map;G!==null;)G.key!==null?F.set(G.key,G):F.set(G.index,G),G=G.sibling;return F}function y(G,F){return G=ns(G,F),G.index=0,G.sibling=null,G}function v(G,F,z){return G.index=z,s?(z=G.alternate,z!==null?(z=z.index,z<F?(G.flags|=67108866,F):z):(G.flags|=67108866,F)):(G.flags|=1048576,F)}function S(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function w(G,F,z,j){return F===null||F.tag!==6?(F=dh(z,G.mode,j),F.return=G,F):(F=y(F,z),F.return=G,F)}function U(G,F,z,j){var Ee=z.type;return Ee===B?W(G,F,z.props.children,j,z.key):F!==null&&(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&eo(Ee)===F.type)?(F=y(F,z.props),Dl(F,z),F.return=G,F):(F=Tc(z.type,z.key,z.props,null,G.mode,j),Dl(F,z),F.return=G,F)}function K(G,F,z,j){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=hh(z,G.mode,j),F.return=G,F):(F=y(F,z.children||[]),F.return=G,F)}function W(G,F,z,j,Ee){return F===null||F.tag!==7?(F=Qr(z,G.mode,j,Ee),F.return=G,F):(F=y(F,z),F.return=G,F)}function te(G,F,z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=dh(""+F,G.mode,z),F.return=G,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case I:return z=Tc(F.type,F.key,F.props,null,G.mode,z),Dl(z,F),z.return=G,z;case P:return F=hh(F,G.mode,z),F.return=G,F;case D:return F=eo(F),te(G,F,z)}if(_e(F)||O(F))return F=Qr(F,G.mode,z,null),F.return=G,F;if(typeof F.then=="function")return te(G,bc(F),z);if(F.$$typeof===Z)return te(G,Cc(G,F),z);Nc(G,F)}return null}function $(G,F,z,j){var Ee=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Ee!==null?null:w(G,F,""+z,j);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===Ee?U(G,F,z,j):null;case P:return z.key===Ee?K(G,F,z,j):null;case D:return z=eo(z),$(G,F,z,j)}if(_e(z)||O(z))return Ee!==null?null:W(G,F,z,j,null);if(typeof z.then=="function")return $(G,F,bc(z),j);if(z.$$typeof===Z)return $(G,F,Cc(G,z),j);Nc(G,z)}return null}function X(G,F,z,j,Ee){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return G=G.get(z)||null,w(F,G,""+j,Ee);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return G=G.get(j.key===null?z:j.key)||null,U(F,G,j,Ee);case P:return G=G.get(j.key===null?z:j.key)||null,K(F,G,j,Ee);case D:return j=eo(j),X(G,F,z,j,Ee)}if(_e(j)||O(j))return G=G.get(z)||null,W(F,G,j,Ee,null);if(typeof j.then=="function")return X(G,F,z,bc(j),Ee);if(j.$$typeof===Z)return X(G,F,z,Cc(F,j),Ee);Nc(F,j)}return null}function ye(G,F,z,j){for(var Ee=null,Je=null,ve=F,Pe=F=0,Fe=null;ve!==null&&Pe<z.length;Pe++){ve.index>Pe?(Fe=ve,ve=null):Fe=ve.sibling;var Qe=$(G,ve,z[Pe],j);if(Qe===null){ve===null&&(ve=Fe);break}s&&ve&&Qe.alternate===null&&r(G,ve),F=v(Qe,F,Pe),Je===null?Ee=Qe:Je.sibling=Qe,Je=Qe,ve=Fe}if(Pe===z.length)return l(G,ve),ze&&is(G,Pe),Ee;if(ve===null){for(;Pe<z.length;Pe++)ve=te(G,z[Pe],j),ve!==null&&(F=v(ve,F,Pe),Je===null?Ee=ve:Je.sibling=ve,Je=ve);return ze&&is(G,Pe),Ee}for(ve=c(ve);Pe<z.length;Pe++)Fe=X(ve,G,Pe,z[Pe],j),Fe!==null&&(s&&Fe.alternate!==null&&ve.delete(Fe.key===null?Pe:Fe.key),F=v(Fe,F,Pe),Je===null?Ee=Fe:Je.sibling=Fe,Je=Fe);return s&&ve.forEach(function(or){return r(G,or)}),ze&&is(G,Pe),Ee}function Se(G,F,z,j){if(z==null)throw Error(i(151));for(var Ee=null,Je=null,ve=F,Pe=F=0,Fe=null,Qe=z.next();ve!==null&&!Qe.done;Pe++,Qe=z.next()){ve.index>Pe?(Fe=ve,ve=null):Fe=ve.sibling;var or=$(G,ve,Qe.value,j);if(or===null){ve===null&&(ve=Fe);break}s&&ve&&or.alternate===null&&r(G,ve),F=v(or,F,Pe),Je===null?Ee=or:Je.sibling=or,Je=or,ve=Fe}if(Qe.done)return l(G,ve),ze&&is(G,Pe),Ee;if(ve===null){for(;!Qe.done;Pe++,Qe=z.next())Qe=te(G,Qe.value,j),Qe!==null&&(F=v(Qe,F,Pe),Je===null?Ee=Qe:Je.sibling=Qe,Je=Qe);return ze&&is(G,Pe),Ee}for(ve=c(ve);!Qe.done;Pe++,Qe=z.next())Qe=X(ve,G,Pe,Qe.value,j),Qe!==null&&(s&&Qe.alternate!==null&&ve.delete(Qe.key===null?Pe:Qe.key),F=v(Qe,F,Pe),Je===null?Ee=Qe:Je.sibling=Qe,Je=Qe);return s&&ve.forEach(function(j1){return r(G,j1)}),ze&&is(G,Pe),Ee}function ot(G,F,z,j){if(typeof z=="object"&&z!==null&&z.type===B&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var Ee=z.key;F!==null;){if(F.key===Ee){if(Ee=z.type,Ee===B){if(F.tag===7){l(G,F.sibling),j=y(F,z.props.children),j.return=G,G=j;break e}}else if(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&eo(Ee)===F.type){l(G,F.sibling),j=y(F,z.props),Dl(j,z),j.return=G,G=j;break e}l(G,F);break}else r(G,F);F=F.sibling}z.type===B?(j=Qr(z.props.children,G.mode,j,z.key),j.return=G,G=j):(j=Tc(z.type,z.key,z.props,null,G.mode,j),Dl(j,z),j.return=G,G=j)}return S(G);case P:e:{for(Ee=z.key;F!==null;){if(F.key===Ee)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){l(G,F.sibling),j=y(F,z.children||[]),j.return=G,G=j;break e}else{l(G,F);break}else r(G,F);F=F.sibling}j=hh(z,G.mode,j),j.return=G,G=j}return S(G);case D:return z=eo(z),ot(G,F,z,j)}if(_e(z))return ye(G,F,z,j);if(O(z)){if(Ee=O(z),typeof Ee!="function")throw Error(i(150));return z=Ee.call(z),Se(G,F,z,j)}if(typeof z.then=="function")return ot(G,F,bc(z),j);if(z.$$typeof===Z)return ot(G,F,Cc(G,z),j);Nc(G,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,F!==null&&F.tag===6?(l(G,F.sibling),j=y(F,z),j.return=G,G=j):(l(G,F),j=dh(z,G.mode,j),j.return=G,G=j),S(G)):l(G,F)}return function(G,F,z,j){try{xl=0;var Ee=ot(G,F,z,j);return na=null,Ee}catch(ve){if(ve===ta||ve===wc)throw ve;var Je=bn(29,ve,null,G.mode);return Je.lanes=j,Je.return=G,Je}finally{}}}var no=i_(!0),s_=i_(!1),Hs=!1;function Ih(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function zs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ks(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Ze&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Ec(s),qy(s,null,l),r}return vc(s,c,r,l),Ec(s)}function Ml(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,rl(s,l)}}function Rh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?y=v=r:v=v.next=r}else y=v=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var bh=!1;function kl(){if(bh){var s=ea;if(s!==null)throw s}}function Pl(s,r,l,c){bh=!1;var y=s.updateQueue;Hs=!1;var v=y.firstBaseUpdate,S=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var U=w,K=U.next;U.next=null,S===null?v=K:S.next=K,S=U;var W=s.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==S&&(w===null?W.firstBaseUpdate=K:w.next=K,W.lastBaseUpdate=U))}if(v!==null){var te=y.baseState;S=0,W=K=U=null,w=v;do{var $=w.lane&-536870913,X=$!==w.lane;if(X?(Oe&$)===$:(c&$)===$){$!==0&&$===jo&&(bh=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var ye=s,Se=w;$=r;var ot=l;switch(Se.tag){case 1:if(ye=Se.payload,typeof ye=="function"){te=ye.call(ot,te,$);break e}te=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Se.payload,$=typeof ye=="function"?ye.call(ot,te,$):ye,$==null)break e;te=E({},te,$);break e;case 2:Hs=!0}}$=w.callback,$!==null&&(s.flags|=64,X&&(s.flags|=8192),X=y.callbacks,X===null?y.callbacks=[$]:X.push($))}else X={lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(K=W=X,U=te):W=W.next=X,S|=$;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;X=w,w=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);W===null&&(U=te),y.baseState=U,y.firstBaseUpdate=K,y.lastBaseUpdate=W,v===null&&(y.shared.lanes=0),Xs|=S,s.lanes=S,s.memoizedState=te}}function r_(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function o_(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)r_(l[s],r)}var ia=q(null),xc=q(0);function a_(s,r){s=ps,ce(xc,s),ce(ia,r),ps=s|r.baseLanes}function Nh(){ce(xc,ps),ce(ia,ia.current)}function xh(){ps=xc.current,ne(ia),ne(xc)}var Nn=q(null),$n=null;function Ys(s){var r=s.alternate;ce(At,At.current&1),ce(Nn,s),$n===null&&(r===null||ia.current!==null||r.memoizedState!==null)&&($n=s)}function Dh(s){ce(At,At.current),ce(Nn,s),$n===null&&($n=s)}function l_(s){s.tag===22?(ce(At,At.current),ce(Nn,s),$n===null&&($n=s)):$s()}function $s(){ce(At,At.current),ce(Nn,Nn.current)}function xn(s){ne(Nn),$n===s&&($n=null),ne(At)}var At=q(0);function Dc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Lp(l)||Op(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var os=0,Me=null,st=null,Mt=null,Mc=!1,sa=!1,io=!1,kc=0,Vl=0,ra=null,HR=0;function yt(){throw Error(i(321))}function Mh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Rn(s[l],r[l]))return!1;return!0}function kh(s,r,l,c,y,v){return os=v,Me=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=s===null||s.memoizedState===null?K_:Jh,io=!1,v=l(c,y),io=!1,sa&&(v=c_(r,l,c,y)),u_(s),v}function u_(s){Y.H=Ol;var r=st!==null&&st.next!==null;if(os=0,Mt=st=Me=null,Mc=!1,Vl=0,ra=null,r)throw Error(i(300));s===null||kt||(s=s.dependencies,s!==null&&Sc(s)&&(kt=!0))}function c_(s,r,l,c){Me=s;var y=0;do{if(sa&&(ra=null),Vl=0,sa=!1,25<=y)throw Error(i(301));if(y+=1,Mt=st=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=Y_,v=r(l,c)}while(sa);return v}function zR(){var s=Y.H,r=s.useState()[0];return r=typeof r.then=="function"?Ul(r):r,s=s.useState()[0],(st!==null?st.memoizedState:null)!==s&&(Me.flags|=1024),r}function Ph(){var s=kc!==0;return kc=0,s}function Vh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Uh(s){if(Mc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Mc=!1}os=0,Mt=st=Me=null,sa=!1,Vl=kc=0,ra=null}function dn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Me.memoizedState=Mt=s:Mt=Mt.next=s,Mt}function St(){if(st===null){var s=Me.alternate;s=s!==null?s.memoizedState:null}else s=st.next;var r=Mt===null?Me.memoizedState:Mt.next;if(r!==null)Mt=r,st=s;else{if(s===null)throw Me.alternate===null?Error(i(467)):Error(i(310));st=s,s={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Mt===null?Me.memoizedState=Mt=s:Mt=Mt.next=s}return Mt}function Pc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(s){var r=Vl;return Vl+=1,ra===null&&(ra=[]),s=e_(ra,s,r),r=Me,(Mt===null?r.memoizedState:Mt.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?K_:Jh),s}function Vc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ul(s);if(s.$$typeof===Z)return Wt(s)}throw Error(i(438,String(s)))}function Lh(s){var r=null,l=Me.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Me.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Pc(),Me.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=V;return r.index++,l}function as(s,r){return typeof r=="function"?r(s):r}function Uc(s){var r=St();return Oh(r,st,s)}function Oh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var S=y.next;y.next=v.next,v.next=S}r.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{r=y.next;var w=S=null,U=null,K=r,W=!1;do{var te=K.lane&-536870913;if(te!==K.lane?(Oe&te)===te:(os&te)===te){var $=K.revertLane;if($===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),te===jo&&(W=!0);else if((os&$)===$){K=K.next,$===jo&&(W=!0);continue}else te={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},U===null?(w=U=te,S=v):U=U.next=te,Me.lanes|=$,Xs|=$;te=K.action,io&&l(v,te),v=K.hasEagerState?K.eagerState:l(v,te)}else $={lane:te,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},U===null?(w=U=$,S=v):U=U.next=$,Me.lanes|=te,Xs|=te;K=K.next}while(K!==null&&K!==r);if(U===null?S=v:U.next=w,!Rn(v,s.memoizedState)&&(kt=!0,W&&(l=ea,l!==null)))throw l;s.memoizedState=v,s.baseState=S,s.baseQueue=U,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Fh(s){var r=St(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,v=r.memoizedState;if(y!==null){l.pending=null;var S=y=y.next;do v=s(v,S.action),S=S.next;while(S!==y);Rn(v,r.memoizedState)||(kt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,c]}function f_(s,r,l){var c=Me,y=St(),v=ze;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=r();var S=!Rn((st||y).memoizedState,l);if(S&&(y.memoizedState=l,kt=!0),y=y.queue,Gh(p_.bind(null,c,y,s),[s]),y.getSnapshot!==r||S||Mt!==null&&Mt.memoizedState.tag&1){if(c.flags|=2048,oa(9,{destroy:void 0},h_.bind(null,c,y,l,r),null),at===null)throw Error(i(349));v||(os&127)!==0||d_(c,r,l)}return l}function d_(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Me.updateQueue,r===null?(r=Pc(),Me.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function h_(s,r,l,c){r.value=l,r.getSnapshot=c,m_(r)&&g_(s)}function p_(s,r,l){return l(function(){m_(r)&&g_(s)})}function m_(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Rn(s,l)}catch{return!0}}function g_(s){var r=Jr(s,2);r!==null&&An(r,s,2)}function Bh(s){var r=dn();if(typeof s=="function"){var l=s;if(s=l(),io){Ln(!0);try{l()}finally{Ln(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:s},r}function y_(s,r,l,c){return s.baseState=l,Oh(s,st,typeof c=="function"?c:as)}function KR(s,r,l,c,y){if(Fc(s))throw Error(i(485));if(s=r.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};Y.T!==null?l(!0):v.isTransition=!1,c(v),l=r.pending,l===null?(v.next=r.pending=v,__(r,v)):(v.next=l.next,r.pending=l.next=v)}}function __(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var v=Y.T,S={};Y.T=S;try{var w=l(y,c),U=Y.S;U!==null&&U(S,w),v_(s,r,w)}catch(K){qh(s,r,K)}finally{v!==null&&S.types!==null&&(v.types=S.types),Y.T=v}}else try{v=l(y,c),v_(s,r,v)}catch(K){qh(s,r,K)}}function v_(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){E_(s,r,c)},function(c){return qh(s,r,c)}):E_(s,r,l)}function E_(s,r,l){r.status="fulfilled",r.value=l,T_(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,__(s,l)))}function qh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,T_(r),r=r.next;while(r!==c)}s.action=null}function T_(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function A_(s,r){return r}function S_(s,r){if(ze){var l=at.formState;if(l!==null){e:{var c=Me;if(ze){if(ut){t:{for(var y=ut,v=Yn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Jn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ut=Jn(y.nextSibling),c=y.data==="F!";break e}}qs(c)}c=!1}c&&(r=l[0])}}return l=dn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A_,lastRenderedState:r},l.queue=c,l=G_.bind(null,Me,c),c.dispatch=l,c=Bh(!1),v=$h.bind(null,Me,!1,c.queue),c=dn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=KR.bind(null,Me,y,v,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function C_(s){var r=St();return I_(r,st,s)}function I_(s,r,l){if(r=Oh(s,r,A_)[0],s=Uc(as)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Ul(r)}catch(S){throw S===ta?wc:S}else c=r;r=St();var y=r.queue,v=y.dispatch;return l!==r.memoizedState&&(Me.flags|=2048,oa(9,{destroy:void 0},YR.bind(null,y,l),null)),[c,v,s]}function YR(s,r){s.action=r}function w_(s){var r=St(),l=st;if(l!==null)return I_(r,l,s);St(),r=r.memoizedState,l=St();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function oa(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Me.updateQueue,r===null&&(r=Pc(),Me.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function R_(){return St().memoizedState}function Lc(s,r,l,c){var y=dn();Me.flags|=s,y.memoizedState=oa(1|r,{destroy:void 0},l,c===void 0?null:c)}function Oc(s,r,l,c){var y=St();c=c===void 0?null:c;var v=y.memoizedState.inst;st!==null&&c!==null&&Mh(c,st.memoizedState.deps)?y.memoizedState=oa(r,v,l,c):(Me.flags|=s,y.memoizedState=oa(1|r,v,l,c))}function b_(s,r){Lc(8390656,8,s,r)}function Gh(s,r){Oc(2048,8,s,r)}function $R(s){Me.flags|=4;var r=Me.updateQueue;if(r===null)r=Pc(),Me.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function N_(s){var r=St().memoizedState;return $R({ref:r,nextImpl:s}),function(){if((Ze&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function x_(s,r){return Oc(4,2,s,r)}function D_(s,r){return Oc(4,4,s,r)}function M_(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function k_(s,r,l){l=l!=null?l.concat([s]):null,Oc(4,4,M_.bind(null,r,s),l)}function Hh(){}function P_(s,r){var l=St();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&Mh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function V_(s,r){var l=St();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&Mh(r,c[1]))return c[0];if(c=s(),io){Ln(!0);try{s()}finally{Ln(!1)}}return l.memoizedState=[c,r],c}function zh(s,r,l){return l===void 0||(os&1073741824)!==0&&(Oe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=Uv(),Me.lanes|=s,Xs|=s,l)}function U_(s,r,l,c){return Rn(l,r)?l:ia.current!==null?(s=zh(s,l,c),Rn(s,r)||(kt=!0),s):(os&42)===0||(os&1073741824)!==0&&(Oe&261930)===0?(kt=!0,s.memoizedState=l):(s=Uv(),Me.lanes|=s,Xs|=s,r)}function L_(s,r,l,c,y){var v=re.p;re.p=v!==0&&8>v?v:8;var S=Y.T,w={};Y.T=w,$h(s,!1,r,l);try{var U=y(),K=Y.S;if(K!==null&&K(w,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var W=GR(U,c);Ll(s,r,W,kn(s))}else Ll(s,r,c,kn(s))}catch(te){Ll(s,r,{then:function(){},status:"rejected",reason:te},kn())}finally{re.p=v,S!==null&&w.types!==null&&(S.types=w.types),Y.T=S}}function JR(){}function Kh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=O_(s).queue;L_(s,y,r,ge,l===null?JR:function(){return F_(s),l(c)})}function O_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:ge},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function F_(s){var r=O_(s);r.next===null&&(r=s.alternate.memoizedState),Ll(s,r.next.queue,{},kn())}function Yh(){return Wt(eu)}function B_(){return St().memoizedState}function q_(){return St().memoizedState}function QR(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=kn();s=zs(l);var c=Ks(r,s,l);c!==null&&(An(c,r,l),Ml(c,r,l)),r={cache:Th()},s.payload=r;return}r=r.return}}function XR(s,r,l){var c=kn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Fc(s)?H_(r,l):(l=ch(s,r,l,c),l!==null&&(An(l,s,c),z_(l,r,c)))}function G_(s,r,l){var c=kn();Ll(s,r,l,c)}function Ll(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Fc(s))H_(r,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var S=r.lastRenderedState,w=v(S,l);if(y.hasEagerState=!0,y.eagerState=w,Rn(w,S))return vc(s,r,y,0),at===null&&_c(),!1}catch{}finally{}if(l=ch(s,r,y,c),l!==null)return An(l,s,c),z_(l,r,c),!0}return!1}function $h(s,r,l,c){if(c={lane:2,revertLane:Ip(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Fc(s)){if(r)throw Error(i(479))}else r=ch(s,l,c,2),r!==null&&An(r,s,2)}function Fc(s){var r=s.alternate;return s===Me||r!==null&&r===Me}function H_(s,r){sa=Mc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function z_(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,rl(s,l)}}var Ol={readContext:Wt,use:Vc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};Ol.useEffectEvent=yt;var K_={readContext:Wt,use:Vc,useCallback:function(s,r){return dn().memoizedState=[s,r===void 0?null:r],s},useContext:Wt,useEffect:b_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Lc(4194308,4,M_.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Lc(4194308,4,s,r)},useInsertionEffect:function(s,r){Lc(4,2,s,r)},useMemo:function(s,r){var l=dn();r=r===void 0?null:r;var c=s();if(io){Ln(!0);try{s()}finally{Ln(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=dn();if(l!==void 0){var y=l(r);if(io){Ln(!0);try{l(r)}finally{Ln(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=XR.bind(null,Me,s),[c.memoizedState,s]},useRef:function(s){var r=dn();return s={current:s},r.memoizedState=s},useState:function(s){s=Bh(s);var r=s.queue,l=G_.bind(null,Me,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Hh,useDeferredValue:function(s,r){var l=dn();return zh(l,s,r)},useTransition:function(){var s=Bh(!1);return s=L_.bind(null,Me,s.queue,!0,!1),dn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Me,y=dn();if(ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),at===null)throw Error(i(349));(Oe&127)!==0||d_(c,r,l)}y.memoizedState=l;var v={value:l,getSnapshot:r};return y.queue=v,b_(p_.bind(null,c,v,s),[s]),c.flags|=2048,oa(9,{destroy:void 0},h_.bind(null,c,v,l,r),null),l},useId:function(){var s=dn(),r=at.identifierPrefix;if(ze){var l=Bi,c=Fi;l=(c&~(1<<32-Et(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=kc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=HR++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Yh,useFormState:S_,useActionState:S_,useOptimistic:function(s){var r=dn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=$h.bind(null,Me,!0,l),l.dispatch=r,[s,r]},useMemoCache:Lh,useCacheRefresh:function(){return dn().memoizedState=QR.bind(null,Me)},useEffectEvent:function(s){var r=dn(),l={impl:s};return r.memoizedState=l,function(){if((Ze&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Jh={readContext:Wt,use:Vc,useCallback:P_,useContext:Wt,useEffect:Gh,useImperativeHandle:k_,useInsertionEffect:x_,useLayoutEffect:D_,useMemo:V_,useReducer:Uc,useRef:R_,useState:function(){return Uc(as)},useDebugValue:Hh,useDeferredValue:function(s,r){var l=St();return U_(l,st.memoizedState,s,r)},useTransition:function(){var s=Uc(as)[0],r=St().memoizedState;return[typeof s=="boolean"?s:Ul(s),r]},useSyncExternalStore:f_,useId:B_,useHostTransitionStatus:Yh,useFormState:C_,useActionState:C_,useOptimistic:function(s,r){var l=St();return y_(l,st,s,r)},useMemoCache:Lh,useCacheRefresh:q_};Jh.useEffectEvent=N_;var Y_={readContext:Wt,use:Vc,useCallback:P_,useContext:Wt,useEffect:Gh,useImperativeHandle:k_,useInsertionEffect:x_,useLayoutEffect:D_,useMemo:V_,useReducer:Fh,useRef:R_,useState:function(){return Fh(as)},useDebugValue:Hh,useDeferredValue:function(s,r){var l=St();return st===null?zh(l,s,r):U_(l,st.memoizedState,s,r)},useTransition:function(){var s=Fh(as)[0],r=St().memoizedState;return[typeof s=="boolean"?s:Ul(s),r]},useSyncExternalStore:f_,useId:B_,useHostTransitionStatus:Yh,useFormState:w_,useActionState:w_,useOptimistic:function(s,r){var l=St();return st!==null?y_(l,st,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Lh,useCacheRefresh:q_};Y_.useEffectEvent=N_;function Qh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:E({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Xh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=kn(),y=zs(c);y.payload=r,l!=null&&(y.callback=l),r=Ks(s,y,c),r!==null&&(An(r,s,c),Ml(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=kn(),y=zs(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=Ks(s,y,c),r!==null&&(An(r,s,c),Ml(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=kn(),c=zs(l);c.tag=2,r!=null&&(c.callback=r),r=Ks(s,c,l),r!==null&&(An(r,s,l),Ml(r,s,l))}};function $_(s,r,l,c,y,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,S):r.prototype&&r.prototype.isPureReactComponent?!Cl(l,c)||!Cl(y,v):!0}function J_(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Xh.enqueueReplaceState(r,r.state,null)}function so(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=E({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function Q_(s){yc(s)}function X_(s){console.error(s)}function W_(s){yc(s)}function Bc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Z_(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Wh(s,r,l){return l=zs(l),l.tag=3,l.payload={element:null},l.callback=function(){Bc(s,r)},l}function j_(s){return s=zs(s),s.tag=3,s}function ev(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){Z_(r,l,c)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){Z_(r,l,c),typeof y!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function WR(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Zo(r,l,y,!0),l=Nn.current,l!==null){switch(l.tag){case 31:case 13:return $n===null?Zc():l.alternate===null&&_t===0&&(_t=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Rc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),Ap(s,c,y)),!1;case 22:return l.flags|=65536,c===Rc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),Ap(s,c,y)),!1}throw Error(i(435,l.tag))}return Ap(s,c,y),Zc(),!1}if(ze)return r=Nn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==gh&&(s=Error(i(422),{cause:c}),Rl(Hn(s,l)))):(c!==gh&&(r=Error(i(423),{cause:c}),Rl(Hn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Hn(c,l),y=Wh(s.stateNode,c,y),Rh(s,y),_t!==4&&(_t=2)),!1;var v=Error(i(520),{cause:c});if(v=Hn(v,l),Yl===null?Yl=[v]:Yl.push(v),_t!==4&&(_t=2),r===null)return!0;c=Hn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Wh(l.stateNode,c,s),Rh(l,s),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ws===null||!Ws.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=j_(y),ev(y,s,l,c),Rh(l,y),!1}l=l.return}while(l!==null);return!1}var Zh=Error(i(461)),kt=!1;function Zt(s,r,l,c){r.child=s===null?s_(r,null,l,c):no(r,s.child,l,c)}function tv(s,r,l,c,y){l=l.render;var v=r.ref;if("ref"in c){var S={};for(var w in c)w!=="ref"&&(S[w]=c[w])}else S=c;return Zr(r),c=kh(s,r,l,S,v,y),w=Ph(),s!==null&&!kt?(Vh(s,r,y),ls(s,r,y)):(ze&&w&&ph(r),r.flags|=1,Zt(s,r,c,y),r.child)}function nv(s,r,l,c,y){if(s===null){var v=l.type;return typeof v=="function"&&!fh(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,iv(s,r,v,c,y)):(s=Tc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(v=s.child,!op(s,y)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:Cl,l(S,c)&&s.ref===r.ref)return ls(s,r,y)}return r.flags|=1,s=ns(v,c),s.ref=r.ref,s.return=r,r.child=s}function iv(s,r,l,c,y){if(s!==null){var v=s.memoizedProps;if(Cl(v,c)&&s.ref===r.ref)if(kt=!1,r.pendingProps=c=v,op(s,y))(s.flags&131072)!==0&&(kt=!0);else return r.lanes=s.lanes,ls(s,r,y)}return jh(s,r,l,c,y)}function sv(s,r,l,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,r.child=null;return rv(s,r,v,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ic(r,v!==null?v.cachePool:null),v!==null?a_(r,v):Nh(),l_(r);else return c=r.lanes=536870912,rv(s,r,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Ic(r,v.cachePool),a_(r,v),$s(),r.memoizedState=null):(s!==null&&Ic(r,null),Nh(),$s());return Zt(s,r,y,l),r.child}function Fl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function rv(s,r,l,c,y){var v=Sh();return v=v===null?null:{parent:Dt._currentValue,pool:v},r.memoizedState={baseLanes:l,cachePool:v},s!==null&&Ic(r,null),Nh(),l_(r),s!==null&&Zo(s,r,c,!0),r.childLanes=y,null}function qc(s,r){return r=Hc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function ov(s,r,l){return no(r,s.child,null,l),s=qc(r,r.pendingProps),s.flags|=2,xn(r),r.memoizedState=null,s}function ZR(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(ze){if(c.mode==="hidden")return s=qc(r,c),r.lanes=536870912,Fl(null,s);if(Dh(r),(s=ut)?(s=_E(s,Yn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Fs!==null?{id:Fi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},l=Hy(s),l.return=r,r.child=l,Xt=r,ut=null)):s=null,s===null)throw qs(r);return r.lanes=536870912,null}return qc(r,c)}var v=s.memoizedState;if(v!==null){var S=v.dehydrated;if(Dh(r),y)if(r.flags&256)r.flags&=-257,r=ov(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(kt||Zo(s,r,l,!1),y=(l&s.childLanes)!==0,kt||y){if(c=at,c!==null&&(S=ol(c,l),S!==0&&S!==v.retryLane))throw v.retryLane=S,Jr(s,S),An(c,s,S),Zh;Zc(),r=ov(s,r,l)}else s=v.treeContext,ut=Jn(S.nextSibling),Xt=r,ze=!0,Bs=null,Yn=!1,s!==null&&Yy(r,s),r=qc(r,c),r.flags|=4096;return r}return s=ns(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Gc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function jh(s,r,l,c,y){return Zr(r),l=kh(s,r,l,c,void 0,y),c=Ph(),s!==null&&!kt?(Vh(s,r,y),ls(s,r,y)):(ze&&c&&ph(r),r.flags|=1,Zt(s,r,l,y),r.child)}function av(s,r,l,c,y,v){return Zr(r),r.updateQueue=null,l=c_(r,c,l,y),u_(s),c=Ph(),s!==null&&!kt?(Vh(s,r,v),ls(s,r,v)):(ze&&c&&ph(r),r.flags|=1,Zt(s,r,l,v),r.child)}function lv(s,r,l,c,y){if(Zr(r),r.stateNode===null){var v=Jo,S=l.contextType;typeof S=="object"&&S!==null&&(v=Wt(S)),v=new l(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Xh,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},Ih(r),S=l.contextType,v.context=typeof S=="object"&&S!==null?Wt(S):Jo,v.state=r.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Qh(r,l,S,c),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&Xh.enqueueReplaceState(v,v.state,null),Pl(r,c,v,y),kl(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){v=r.stateNode;var w=r.memoizedProps,U=so(l,w);v.props=U;var K=v.context,W=l.contextType;S=Jo,typeof W=="object"&&W!==null&&(S=Wt(W));var te=l.getDerivedStateFromProps;W=typeof te=="function"||typeof v.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,W||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w||K!==S)&&J_(r,v,c,S),Hs=!1;var $=r.memoizedState;v.state=$,Pl(r,c,v,y),kl(),K=r.memoizedState,w||$!==K||Hs?(typeof te=="function"&&(Qh(r,l,te,c),K=r.memoizedState),(U=Hs||$_(r,l,U,c,$,K,S))?(W||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),v.props=c,v.state=K,v.context=S,c=U):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,wh(s,r),S=r.memoizedProps,W=so(l,S),v.props=W,te=r.pendingProps,$=v.context,K=l.contextType,U=Jo,typeof K=="object"&&K!==null&&(U=Wt(K)),w=l.getDerivedStateFromProps,(K=typeof w=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==te||$!==U)&&J_(r,v,c,U),Hs=!1,$=r.memoizedState,v.state=$,Pl(r,c,v,y),kl();var X=r.memoizedState;S!==te||$!==X||Hs||s!==null&&s.dependencies!==null&&Sc(s.dependencies)?(typeof w=="function"&&(Qh(r,l,w,c),X=r.memoizedState),(W=Hs||$_(r,l,W,c,$,X,U)||s!==null&&s.dependencies!==null&&Sc(s.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,X,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,X,U)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=X),v.props=c,v.state=X,v.context=U,c=W):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),c=!1)}return v=c,Gc(s,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,s!==null&&c?(r.child=no(r,s.child,null,y),r.child=no(r,null,l,y)):Zt(s,r,l,y),r.memoizedState=v.state,s=r.child):s=ls(s,r,y),s}function uv(s,r,l,c){return Xr(),r.flags|=256,Zt(s,r,l,c),r.child}var ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tp(s){return{baseLanes:s,cachePool:Zy()}}function np(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Mn),s}function cv(s,r,l){var c=r.pendingProps,y=!1,v=(r.flags&128)!==0,S;if((S=v)||(S=s!==null&&s.memoizedState===null?!1:(At.current&2)!==0),S&&(y=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,s===null){if(ze){if(y?Ys(r):$s(),(s=ut)?(s=_E(s,Yn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Fs!==null?{id:Fi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},l=Hy(s),l.return=r,r.child=l,Xt=r,ut=null)):s=null,s===null)throw qs(r);return Op(s)?r.lanes=32:r.lanes=536870912,null}var w=c.children;return c=c.fallback,y?($s(),y=r.mode,w=Hc({mode:"hidden",children:w},y),c=Qr(c,y,l,null),w.return=r,c.return=r,w.sibling=c,r.child=w,c=r.child,c.memoizedState=tp(l),c.childLanes=np(s,S,l),r.memoizedState=ep,Fl(null,c)):(Ys(r),ip(r,w))}var U=s.memoizedState;if(U!==null&&(w=U.dehydrated,w!==null)){if(v)r.flags&256?(Ys(r),r.flags&=-257,r=sp(s,r,l)):r.memoizedState!==null?($s(),r.child=s.child,r.flags|=128,r=null):($s(),w=c.fallback,y=r.mode,c=Hc({mode:"visible",children:c.children},y),w=Qr(w,y,l,null),w.flags|=2,c.return=r,w.return=r,c.sibling=w,r.child=c,no(r,s.child,null,l),c=r.child,c.memoizedState=tp(l),c.childLanes=np(s,S,l),r.memoizedState=ep,r=Fl(null,c));else if(Ys(r),Op(w)){if(S=w.nextSibling&&w.nextSibling.dataset,S)var K=S.dgst;S=K,c=Error(i(419)),c.stack="",c.digest=S,Rl({value:c,source:null,stack:null}),r=sp(s,r,l)}else if(kt||Zo(s,r,l,!1),S=(l&s.childLanes)!==0,kt||S){if(S=at,S!==null&&(c=ol(S,l),c!==0&&c!==U.retryLane))throw U.retryLane=c,Jr(s,c),An(S,s,c),Zh;Lp(w)||Zc(),r=sp(s,r,l)}else Lp(w)?(r.flags|=192,r.child=s.child,r=null):(s=U.treeContext,ut=Jn(w.nextSibling),Xt=r,ze=!0,Bs=null,Yn=!1,s!==null&&Yy(r,s),r=ip(r,c.children),r.flags|=4096);return r}return y?($s(),w=c.fallback,y=r.mode,U=s.child,K=U.sibling,c=ns(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,K!==null?w=ns(K,w):(w=Qr(w,y,l,null),w.flags|=2),w.return=r,c.return=r,c.sibling=w,r.child=c,Fl(null,c),c=r.child,w=s.child.memoizedState,w===null?w=tp(l):(y=w.cachePool,y!==null?(U=Dt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=Zy(),w={baseLanes:w.baseLanes|l,cachePool:y}),c.memoizedState=w,c.childLanes=np(s,S,l),r.memoizedState=ep,Fl(s.child,c)):(Ys(r),l=s.child,s=l.sibling,l=ns(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(S=r.deletions,S===null?(r.deletions=[s],r.flags|=16):S.push(s)),r.child=l,r.memoizedState=null,l)}function ip(s,r){return r=Hc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Hc(s,r){return s=bn(22,s,null,r),s.lanes=0,s}function sp(s,r,l){return no(r,s.child,null,l),s=ip(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function fv(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),vh(s.return,r,l)}function rp(s,r,l,c,y,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=l,S.tailMode=y,S.treeForkCount=v)}function dv(s,r,l){var c=r.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var S=At.current,w=(S&2)!==0;if(w?(S=S&1|2,r.flags|=128):S&=1,ce(At,S),Zt(s,r,c,l),c=ze?wl:0,!w&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&fv(s,l,r);else if(s.tag===19)fv(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&Dc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),rp(r,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Dc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}rp(r,!0,l,null,v,c);break;case"together":rp(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ls(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),Xs|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Zo(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=ns(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=ns(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function op(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Sc(s)))}function jR(s,r,l){switch(r.tag){case 3:Ot(r,r.stateNode.containerInfo),Gs(r,Dt,s.memoizedState.cache),Xr();break;case 27:case 5:xr(r);break;case 4:Ot(r,r.stateNode.containerInfo);break;case 10:Gs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Dh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ys(r),r.flags|=128,null):(l&r.child.childLanes)!==0?cv(s,r,l):(Ys(r),s=ls(s,r,l),s!==null?s.sibling:null);Ys(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Zo(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return dv(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(At,At.current),c)break;return null;case 22:return r.lanes=0,sv(s,r,l,r.pendingProps);case 24:Gs(r,Dt,s.memoizedState.cache)}return ls(s,r,l)}function hv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)kt=!0;else{if(!op(s,l)&&(r.flags&128)===0)return kt=!1,jR(s,r,l);kt=(s.flags&131072)!==0}else kt=!1,ze&&(r.flags&1048576)!==0&&Ky(r,wl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=eo(r.elementType),r.type=s,typeof s=="function")fh(s)?(c=so(s,c),r.tag=1,r=lv(null,r,s,c,l)):(r.tag=0,r=jh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===oe){r.tag=11,r=tv(null,r,s,c,l);break e}else if(y===M){r.tag=14,r=nv(null,r,s,c,l);break e}}throw r=he(s)||s,Error(i(306,r,""))}}return r;case 0:return jh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=so(c,r.pendingProps),lv(s,r,c,y,l);case 3:e:{if(Ot(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var v=r.memoizedState;y=v.element,wh(s,r),Pl(r,c,null,l);var S=r.memoizedState;if(c=S.cache,Gs(r,Dt,c),c!==v.cache&&Eh(r,[Dt],l,!0),kl(),c=S.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=uv(s,r,c,l);break e}else if(c!==y){y=Hn(Error(i(424)),r),Rl(y),r=uv(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ut=Jn(s.firstChild),Xt=r,ze=!0,Bs=null,Yn=!0,l=s_(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Xr(),c===y){r=ls(s,r,l);break e}Zt(s,r,c,l)}r=r.child}return r;case 26:return Gc(s,r),s===null?(l=CE(r.type,null,r.pendingProps,null))?r.memoizedState=l:ze||(l=r.type,s=r.pendingProps,c=of(ke.current).createElement(l),c[bt]=r,c[Ht]=s,jt(c,l,s),Nt(c),r.stateNode=c):r.memoizedState=CE(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return xr(r),s===null&&ze&&(c=r.stateNode=TE(r.type,r.pendingProps,ke.current),Xt=r,Yn=!0,y=ut,tr(r.type)?(Fp=y,ut=Jn(c.firstChild)):ut=y),Zt(s,r,r.pendingProps.children,l),Gc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&ze&&((y=c=ut)&&(c=N1(c,r.type,r.pendingProps,Yn),c!==null?(r.stateNode=c,Xt=r,ut=Jn(c.firstChild),Yn=!1,y=!0):y=!1),y||qs(r)),xr(r),y=r.type,v=r.pendingProps,S=s!==null?s.memoizedProps:null,c=v.children,Pp(y,v)?c=null:S!==null&&Pp(y,S)&&(r.flags|=32),r.memoizedState!==null&&(y=kh(s,r,zR,null,null,l),eu._currentValue=y),Gc(s,r),Zt(s,r,c,l),r.child;case 6:return s===null&&ze&&((s=l=ut)&&(l=x1(l,r.pendingProps,Yn),l!==null?(r.stateNode=l,Xt=r,ut=null,s=!0):s=!1),s||qs(r)),null;case 13:return cv(s,r,l);case 4:return Ot(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=no(r,null,c,l):Zt(s,r,c,l),r.child;case 11:return tv(s,r,r.type,r.pendingProps,l);case 7:return Zt(s,r,r.pendingProps,l),r.child;case 8:return Zt(s,r,r.pendingProps.children,l),r.child;case 12:return Zt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Gs(r,r.type,c.value),Zt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Zr(r),y=Wt(y),c=c(y),r.flags|=1,Zt(s,r,c,l),r.child;case 14:return nv(s,r,r.type,r.pendingProps,l);case 15:return iv(s,r,r.type,r.pendingProps,l);case 19:return dv(s,r,l);case 31:return ZR(s,r,l);case 22:return sv(s,r,l,r.pendingProps);case 24:return Zr(r),c=Wt(Dt),s===null?(y=Sh(),y===null&&(y=at,v=Th(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),r.memoizedState={parent:c,cache:y},Ih(r),Gs(r,Dt,y)):((s.lanes&l)!==0&&(wh(s,r),Pl(r,null,null,l),kl()),y=s.memoizedState,v=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Gs(r,Dt,c)):(c=v.cache,Gs(r,Dt,c),c!==y.cache&&Eh(r,[Dt],l,!0))),Zt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function us(s){s.flags|=4}function ap(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(Bv())s.flags|=8192;else throw to=Rc,Ch}else s.flags&=-16777217}function pv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!NE(r))if(Bv())s.flags|=8192;else throw to=Rc,Ch}function zc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Xu():536870912,s.lanes|=r,ca|=r)}function Bl(s,r){if(!ze)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ct(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function e1(s,r,l){var c=r.pendingProps;switch(mh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),rs(Dt),dt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Wo(r)?us(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,yh())),ct(r),null;case 26:var y=r.type,v=r.memoizedState;return s===null?(us(r),v!==null?(ct(r),pv(r,v)):(ct(r),ap(r,y,null,c,l))):v?v!==s.memoizedState?(us(r),ct(r),pv(r,v)):(ct(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&us(r),ct(r),ap(r,y,s,c,l)),null;case 27:if(No(r),l=ke.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&us(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ct(r),null}s=me.current,Wo(r)?$y(r):(s=TE(y,c,l),r.stateNode=s,us(r))}return ct(r),null;case 5:if(No(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&us(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ct(r),null}if(v=me.current,Wo(r))$y(r);else{var S=of(ke.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?S.createElement(y,{is:c.is}):S.createElement(y)}}v[bt]=r,v[Ht]=c;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=v;e:switch(jt(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&us(r)}}return ct(r),ap(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&us(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=ke.current,Wo(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Xt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[bt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||cE(s.nodeValue,l)),s||qs(r,!0)}else s=of(s).createTextNode(c),s[bt]=r,r.stateNode=s}return ct(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Wo(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[bt]=r}else Xr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),s=!1}else l=yh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(xn(r),r):(xn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ct(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Wo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[bt]=r}else Xr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),y=!1}else y=yh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(xn(r),r):(xn(r),null)}return xn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),zc(r,r.updateQueue),ct(r),null);case 4:return dt(),s===null&&Np(r.stateNode.containerInfo),ct(r),null;case 10:return rs(r.type),ct(r),null;case 19:if(ne(At),c=r.memoizedState,c===null)return ct(r),null;if(y=(r.flags&128)!==0,v=c.rendering,v===null)if(y)Bl(c,!1);else{if(_t!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(v=Dc(s),v!==null){for(r.flags|=128,Bl(c,!1),s=v.updateQueue,r.updateQueue=s,zc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)Gy(l,s),l=l.sibling;return ce(At,At.current&1|2),ze&&is(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&cn()>Qc&&(r.flags|=128,y=!0,Bl(c,!1),r.lanes=4194304)}else{if(!y)if(s=Dc(v),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,zc(r,s),Bl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!ze)return ct(r),null}else 2*cn()-c.renderingStartTime>Qc&&l!==536870912&&(r.flags|=128,y=!0,Bl(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(s=c.last,s!==null?s.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=cn(),s.sibling=null,l=At.current,ce(At,y?l&1|2:l&1),ze&&is(r,c.treeForkCount),s):(ct(r),null);case 22:case 23:return xn(r),xh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),l=r.updateQueue,l!==null&&zc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&ne(jr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),rs(Dt),ct(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function t1(s,r){switch(mh(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return rs(Dt),dt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return No(r),null;case 31:if(r.memoizedState!==null){if(xn(r),r.alternate===null)throw Error(i(340));Xr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(xn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Xr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ne(At),null;case 4:return dt(),null;case 10:return rs(r.type),null;case 22:case 23:return xn(r),xh(),s!==null&&ne(jr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return rs(Dt),null;case 25:return null;default:return null}}function mv(s,r){switch(mh(r),r.tag){case 3:rs(Dt),dt();break;case 26:case 27:case 5:No(r);break;case 4:dt();break;case 31:r.memoizedState!==null&&xn(r);break;case 13:xn(r);break;case 19:ne(At);break;case 10:rs(r.type);break;case 22:case 23:xn(r),xh(),s!==null&&ne(jr);break;case 24:rs(Dt)}}function ql(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var v=l.create,S=l.inst;c=v(),S.destroy=c}l=l.next}while(l!==y)}}catch(w){nt(r,r.return,w)}}function Js(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var S=c.inst,w=S.destroy;if(w!==void 0){S.destroy=void 0,y=r;var U=l,K=w;try{K()}catch(W){nt(y,U,W)}}}c=c.next}while(c!==v)}}catch(W){nt(r,r.return,W)}}function gv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{o_(r,l)}catch(c){nt(s,s.return,c)}}}function yv(s,r,l){l.props=so(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){nt(s,r,c)}}function Gl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){nt(s,r,y)}}function qi(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(s,r,y)}else l.current=null}function _v(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(s,s.return,y)}}function lp(s,r,l){try{var c=s.stateNode;S1(c,s.type,l,r),c[Ht]=r}catch(y){nt(s,s.return,y)}}function vv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&tr(s.type)||s.tag===4}function up(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||vv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&tr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function cp(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ri));else if(c!==4&&(c===27&&tr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(cp(s,r,l),s=s.sibling;s!==null;)cp(s,r,l),s=s.sibling}function Kc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&tr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Kc(s,r,l),s=s.sibling;s!==null;)Kc(s,r,l),s=s.sibling}function Ev(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);jt(r,c,l),r[bt]=s,r[Ht]=l}catch(v){nt(s,s.return,v)}}var cs=!1,Pt=!1,fp=!1,Tv=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function n1(s,r){if(s=s.containerInfo,Mp=hf,s=ky(s),sh(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,w=-1,U=-1,K=0,W=0,te=s,$=null;t:for(;;){for(var X;te!==l||y!==0&&te.nodeType!==3||(w=S+y),te!==v||c!==0&&te.nodeType!==3||(U=S+c),te.nodeType===3&&(S+=te.nodeValue.length),(X=te.firstChild)!==null;)$=te,te=X;for(;;){if(te===s)break t;if($===l&&++K===y&&(w=S),$===v&&++W===c&&(U=S),(X=te.nextSibling)!==null)break;te=$,$=te.parentNode}te=X}l=w===-1||U===-1?null:{start:w,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(kp={focusedElem:s,selectionRange:l},hf=!1,Kt=r;Kt!==null;)if(r=Kt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Kt=s;else for(;Kt!==null;){switch(r=Kt,v=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=r,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ye=so(l.type,y);s=c.getSnapshotBeforeUpdate(ye,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){nt(l,l.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Up(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Up(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Kt=s;break}Kt=r.return}}function Av(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ds(s,l),c&4&&ql(5,l);break;case 1:if(ds(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(S){nt(l,l.return,S)}else{var y=so(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(S){nt(l,l.return,S)}}c&64&&gv(l),c&512&&Gl(l,l.return);break;case 3:if(ds(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{o_(s,r)}catch(S){nt(l,l.return,S)}}break;case 27:r===null&&c&4&&Ev(l);case 26:case 5:ds(s,l),r===null&&c&4&&_v(l),c&512&&Gl(l,l.return);break;case 12:ds(s,l);break;case 31:ds(s,l),c&4&&Iv(s,l);break;case 13:ds(s,l),c&4&&wv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=f1.bind(null,l),D1(s,l))));break;case 22:if(c=l.memoizedState!==null||cs,!c){r=r!==null&&r.memoizedState!==null||Pt,y=cs;var v=Pt;cs=c,(Pt=r)&&!v?hs(s,l,(l.subtreeFlags&8772)!==0):ds(s,l),cs=y,Pt=v}break;case 30:break;default:ds(s,l)}}function Sv(s){var r=s.alternate;r!==null&&(s.alternate=null,Sv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Po(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pt=null,_n=!1;function fs(s,r,l){for(l=l.child;l!==null;)Cv(s,r,l),l=l.sibling}function Cv(s,r,l){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(ti,l)}catch{}switch(l.tag){case 26:Pt||qi(l,r),fs(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Pt||qi(l,r);var c=pt,y=_n;tr(l.type)&&(pt=l.stateNode,_n=!1),fs(s,r,l),Wl(l.stateNode),pt=c,_n=y;break;case 5:Pt||qi(l,r);case 6:if(c=pt,y=_n,pt=null,fs(s,r,l),pt=c,_n=y,pt!==null)if(_n)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(v){nt(l,r,v)}else try{pt.removeChild(l.stateNode)}catch(v){nt(l,r,v)}break;case 18:pt!==null&&(_n?(s=pt,gE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),_a(s)):gE(pt,l.stateNode));break;case 4:c=pt,y=_n,pt=l.stateNode.containerInfo,_n=!0,fs(s,r,l),pt=c,_n=y;break;case 0:case 11:case 14:case 15:Js(2,l,r),Pt||Js(4,l,r),fs(s,r,l);break;case 1:Pt||(qi(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&yv(l,r,c)),fs(s,r,l);break;case 21:fs(s,r,l);break;case 22:Pt=(c=Pt)||l.memoizedState!==null,fs(s,r,l),Pt=c;break;default:fs(s,r,l)}}function Iv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{_a(s)}catch(l){nt(r,r.return,l)}}}function wv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{_a(s)}catch(l){nt(r,r.return,l)}}function i1(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Tv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Tv),r;default:throw Error(i(435,s.tag))}}function Yc(s,r){var l=i1(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=d1.bind(null,s,c);c.then(y,y)}})}function vn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=s,S=r,w=S;e:for(;w!==null;){switch(w.tag){case 27:if(tr(w.type)){pt=w.stateNode,_n=!1;break e}break;case 5:pt=w.stateNode,_n=!1;break e;case 3:case 4:pt=w.stateNode.containerInfo,_n=!0;break e}w=w.return}if(pt===null)throw Error(i(160));Cv(v,S,y),pt=null,_n=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Rv(r,s),r=r.sibling}var fi=null;function Rv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:vn(r,s),En(s),c&4&&(Js(3,s,s.return),ql(3,s),Js(5,s,s.return));break;case 1:vn(r,s),En(s),c&512&&(Pt||l===null||qi(l,l.return)),c&64&&cs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=fi;if(vn(r,s),En(s),c&512&&(Pt||l===null||qi(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ri]||v[bt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),jt(v,c,l),v[bt]=s,Nt(v),c=v;break e;case"link":var S=RE("link","href",y).get(c+(l.href||""));if(S){for(var w=0;w<S.length;w++)if(v=S[w],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(w,1);break t}}v=y.createElement(c),jt(v,c,l),y.head.appendChild(v);break;case"meta":if(S=RE("meta","content",y).get(c+(l.content||""))){for(w=0;w<S.length;w++)if(v=S[w],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(w,1);break t}}v=y.createElement(c),jt(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[bt]=s,Nt(v),c=v}s.stateNode=c}else bE(y,s.type,s.stateNode);else s.stateNode=wE(y,c,s.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?bE(y,s.type,s.stateNode):wE(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&lp(s,s.memoizedProps,l.memoizedProps)}break;case 27:vn(r,s),En(s),c&512&&(Pt||l===null||qi(l,l.return)),l!==null&&c&4&&lp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(vn(r,s),En(s),c&512&&(Pt||l===null||qi(l,l.return)),s.flags&32){y=s.stateNode;try{yn(y,"")}catch(ye){nt(s,s.return,ye)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,lp(s,y,l!==null?l.memoizedProps:y)),c&1024&&(fp=!0);break;case 6:if(vn(r,s),En(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ye){nt(s,s.return,ye)}}break;case 3:if(uf=null,y=fi,fi=af(r.containerInfo),vn(r,s),fi=y,En(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{_a(r.containerInfo)}catch(ye){nt(s,s.return,ye)}fp&&(fp=!1,bv(s));break;case 4:c=fi,fi=af(s.stateNode.containerInfo),vn(r,s),En(s),fi=c;break;case 12:vn(r,s),En(s);break;case 31:vn(r,s),En(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Yc(s,c)));break;case 13:vn(r,s),En(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Jc=cn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Yc(s,c)));break;case 22:y=s.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,K=cs,W=Pt;if(cs=K||y,Pt=W||U,vn(r,s),Pt=W,cs=K,En(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||U||cs||Pt||ro(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){U=l=r;try{if(v=U.stateNode,y)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{w=U.stateNode;var te=U.memoizedProps.style,$=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ye){nt(U,U.return,ye)}}}else if(r.tag===6){if(l===null){U=r;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(ye){nt(U,U.return,ye)}}}else if(r.tag===18){if(l===null){U=r;try{var X=U.stateNode;y?yE(X,!0):yE(U.stateNode,!1)}catch(ye){nt(U,U.return,ye)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Yc(s,l))));break;case 19:vn(r,s),En(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Yc(s,c)));break;case 30:break;case 21:break;default:vn(r,s),En(s)}}function En(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(vv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=up(s);Kc(s,v,y);break;case 5:var S=l.stateNode;l.flags&32&&(yn(S,""),l.flags&=-33);var w=up(s);Kc(s,w,S);break;case 3:case 4:var U=l.stateNode.containerInfo,K=up(s);cp(s,K,U);break;default:throw Error(i(161))}}catch(W){nt(s,s.return,W)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function bv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;bv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ds(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Av(s,r.alternate,r),r=r.sibling}function ro(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Js(4,r,r.return),ro(r);break;case 1:qi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&yv(r,r.return,l),ro(r);break;case 27:Wl(r.stateNode);case 26:case 5:qi(r,r.return),ro(r);break;case 22:r.memoizedState===null&&ro(r);break;case 30:ro(r);break;default:ro(r)}s=s.sibling}}function hs(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,v=r,S=v.flags;switch(v.tag){case 0:case 11:case 15:hs(y,v,l),ql(4,v);break;case 1:if(hs(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){nt(c,c.return,K)}if(c=v,y=c.updateQueue,y!==null){var w=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)r_(U[y],w)}catch(K){nt(c,c.return,K)}}l&&S&64&&gv(v),Gl(v,v.return);break;case 27:Ev(v);case 26:case 5:hs(y,v,l),l&&c===null&&S&4&&_v(v),Gl(v,v.return);break;case 12:hs(y,v,l);break;case 31:hs(y,v,l),l&&S&4&&Iv(y,v);break;case 13:hs(y,v,l),l&&S&4&&wv(y,v);break;case 22:v.memoizedState===null&&hs(y,v,l),Gl(v,v.return);break;case 30:break;default:hs(y,v,l)}r=r.sibling}}function dp(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&bl(l))}function hp(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&bl(s))}function di(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Nv(s,r,l,c),r=r.sibling}function Nv(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:di(s,r,l,c),y&2048&&ql(9,r);break;case 1:di(s,r,l,c);break;case 3:di(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&bl(s)));break;case 12:if(y&2048){di(s,r,l,c),s=r.stateNode;try{var v=r.memoizedProps,S=v.id,w=v.onPostCommit;typeof w=="function"&&w(S,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){nt(r,r.return,U)}}else di(s,r,l,c);break;case 31:di(s,r,l,c);break;case 13:di(s,r,l,c);break;case 23:break;case 22:v=r.stateNode,S=r.alternate,r.memoizedState!==null?v._visibility&2?di(s,r,l,c):Hl(s,r):v._visibility&2?di(s,r,l,c):(v._visibility|=2,aa(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&dp(S,r);break;case 24:di(s,r,l,c),y&2048&&hp(r.alternate,r);break;default:di(s,r,l,c)}}function aa(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=s,S=r,w=l,U=c,K=S.flags;switch(S.tag){case 0:case 11:case 15:aa(v,S,w,U,y),ql(8,S);break;case 23:break;case 22:var W=S.stateNode;S.memoizedState!==null?W._visibility&2?aa(v,S,w,U,y):Hl(v,S):(W._visibility|=2,aa(v,S,w,U,y)),y&&K&2048&&dp(S.alternate,S);break;case 24:aa(v,S,w,U,y),y&&K&2048&&hp(S.alternate,S);break;default:aa(v,S,w,U,y)}r=r.sibling}}function Hl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Hl(l,c),y&2048&&dp(c.alternate,c);break;case 24:Hl(l,c),y&2048&&hp(c.alternate,c);break;default:Hl(l,c)}r=r.sibling}}var zl=8192;function la(s,r,l){if(s.subtreeFlags&zl)for(s=s.child;s!==null;)xv(s,r,l),s=s.sibling}function xv(s,r,l){switch(s.tag){case 26:la(s,r,l),s.flags&zl&&s.memoizedState!==null&&H1(l,fi,s.memoizedState,s.memoizedProps);break;case 5:la(s,r,l);break;case 3:case 4:var c=fi;fi=af(s.stateNode.containerInfo),la(s,r,l),fi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=zl,zl=16777216,la(s,r,l),zl=c):la(s,r,l));break;default:la(s,r,l)}}function Dv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Kl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Kt=c,kv(c,s)}Dv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Mv(s),s=s.sibling}function Mv(s){switch(s.tag){case 0:case 11:case 15:Kl(s),s.flags&2048&&Js(9,s,s.return);break;case 3:Kl(s);break;case 12:Kl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,$c(s)):Kl(s);break;default:Kl(s)}}function $c(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Kt=c,kv(c,s)}Dv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Js(8,r,r.return),$c(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,$c(r));break;default:$c(r)}s=s.sibling}}function kv(s,r){for(;Kt!==null;){var l=Kt;switch(l.tag){case 0:case 11:case 15:Js(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:bl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Kt=c;else e:for(l=s;Kt!==null;){c=Kt;var y=c.sibling,v=c.return;if(Sv(c),c===l){Kt=null;break e}if(y!==null){y.return=v,Kt=y;break e}Kt=v}}}var s1={getCacheForType:function(s){var r=Wt(Dt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return Wt(Dt).controller.signal}},r1=typeof WeakMap=="function"?WeakMap:Map,Ze=0,at=null,Ue=null,Oe=0,tt=0,Dn=null,Qs=!1,ua=!1,pp=!1,ps=0,_t=0,Xs=0,oo=0,mp=0,Mn=0,ca=0,Yl=null,Tn=null,gp=!1,Jc=0,Pv=0,Qc=1/0,Xc=null,Ws=null,Bt=0,Zs=null,fa=null,ms=0,yp=0,_p=null,Vv=null,$l=0,vp=null;function kn(){return(Ze&2)!==0&&Oe!==0?Oe&-Oe:Y.T!==null?Ip():Wu()}function Uv(){if(Mn===0)if((Oe&536870912)===0||ze){var s=kr;kr<<=1,(kr&3932160)===0&&(kr=262144),Mn=s}else Mn=536870912;return s=Nn.current,s!==null&&(s.flags|=32),Mn}function An(s,r,l){(s===at&&(tt===2||tt===9)||s.cancelPendingCommit!==null)&&(da(s,0),js(s,Oe,Mn,!1)),Pr(s,l),((Ze&2)===0||s!==at)&&(s===at&&((Ze&2)===0&&(oo|=l),_t===4&&js(s,Oe,Mn,!1)),Gi(s))}function Lv(s,r,l){if((Ze&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||ni(s,r),y=c?l1(s,r):Tp(s,r,!0),v=c;do{if(y===0){ua&&!c&&js(s,r,0,!1);break}else{if(l=s.current.alternate,v&&!o1(l)){y=Tp(s,r,!1),v=!1;continue}if(y===2){if(v=r,s.errorRecoveryDisabledLanes&v)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var w=s;y=Yl;var U=w.current.memoizedState.isDehydrated;if(U&&(da(w,S).flags|=256),S=Tp(w,S,!1),S!==2){if(pp&&!U){w.errorRecoveryDisabledLanes|=v,oo|=v,y=4;break e}v=Tn,Tn=y,v!==null&&(Tn===null?Tn=v:Tn.push.apply(Tn,v))}y=S}if(v=!1,y!==2)continue}}if(y===1){da(s,0),js(s,r,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:js(c,r,Mn,!Qs);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Jc+300-cn(),10<y)){if(js(c,r,Mn,!Qs),Ci(c,0,!0)!==0)break e;ms=r,c.timeoutHandle=pE(Ov.bind(null,c,l,Tn,Xc,gp,r,Mn,oo,ca,Qs,v,"Throttled",-0,0),y);break e}Ov(c,l,Tn,Xc,gp,r,Mn,oo,ca,Qs,v,null,-0,0)}}break}while(!0);Gi(s)}function Ov(s,r,l,c,y,v,S,w,U,K,W,te,$,X){if(s.timeoutHandle=-1,te=r.subtreeFlags,te&8192||(te&16785408)===16785408){te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},xv(r,v,te);var ye=(v&62914560)===v?Jc-cn():(v&4194048)===v?Pv-cn():0;if(ye=z1(te,ye),ye!==null){ms=v,s.cancelPendingCommit=ye(Yv.bind(null,s,r,v,l,c,y,S,w,U,W,te,null,$,X)),js(s,v,S,!K);return}}Yv(s,r,v,l,c,y,S,w,U)}function o1(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!Rn(v(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function js(s,r,l,c){r&=~mp,r&=~oo,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var v=31-Et(y),S=1<<v;c[v]=-1,y&=~S}l!==0&&Vr(s,l,r)}function Wc(){return(Ze&6)===0?(Jl(0),!1):!0}function Ep(){if(Ue!==null){if(tt===0)var s=Ue.return;else s=Ue,ss=Wr=null,Uh(s),na=null,xl=0,s=Ue;for(;s!==null;)mv(s.alternate,s),s=s.return;Ue=null}}function da(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,w1(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),ms=0,Ep(),at=s,Ue=l=ns(s.current,null),Oe=r,tt=0,Dn=null,Qs=!1,ua=ni(s,r),pp=!1,ca=Mn=mp=oo=Xs=_t=0,Tn=Yl=null,gp=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-Et(c),v=1<<y;r|=s[y],c&=~v}return ps=r,_c(),l}function Fv(s,r){Me=null,Y.H=Ol,r===ta||r===wc?(r=t_(),tt=3):r===Ch?(r=t_(),tt=4):tt=r===Zh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Dn=r,Ue===null&&(_t=1,Bc(s,Hn(r,s.current)))}function Bv(){var s=Nn.current;return s===null?!0:(Oe&4194048)===Oe?$n===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?s===$n:!1}function qv(){var s=Y.H;return Y.H=Ol,s===null?Ol:s}function Gv(){var s=Y.A;return Y.A=s1,s}function Zc(){_t=4,Qs||(Oe&4194048)!==Oe&&Nn.current!==null||(ua=!0),(Xs&134217727)===0&&(oo&134217727)===0||at===null||js(at,Oe,Mn,!1)}function Tp(s,r,l){var c=Ze;Ze|=2;var y=qv(),v=Gv();(at!==s||Oe!==r)&&(Xc=null,da(s,r)),r=!1;var S=_t;e:do try{if(tt!==0&&Ue!==null){var w=Ue,U=Dn;switch(tt){case 8:Ep(),S=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(r=!0);var K=tt;if(tt=0,Dn=null,ha(s,w,U,K),l&&ua){S=0;break e}break;default:K=tt,tt=0,Dn=null,ha(s,w,U,K)}}a1(),S=_t;break}catch(W){Fv(s,W)}while(!0);return r&&s.shellSuspendCounter++,ss=Wr=null,Ze=c,Y.H=y,Y.A=v,Ue===null&&(at=null,Oe=0,_c()),S}function a1(){for(;Ue!==null;)Hv(Ue)}function l1(s,r){var l=Ze;Ze|=2;var c=qv(),y=Gv();at!==s||Oe!==r?(Xc=null,Qc=cn()+500,da(s,r)):ua=ni(s,r);e:do try{if(tt!==0&&Ue!==null){r=Ue;var v=Dn;t:switch(tt){case 1:tt=0,Dn=null,ha(s,r,v,1);break;case 2:case 9:if(jy(v)){tt=0,Dn=null,zv(r);break}r=function(){tt!==2&&tt!==9||at!==s||(tt=7),Gi(s)},v.then(r,r);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:jy(v)?(tt=0,Dn=null,zv(r)):(tt=0,Dn=null,ha(s,r,v,7));break;case 5:var S=null;switch(Ue.tag){case 26:S=Ue.memoizedState;case 5:case 27:var w=Ue;if(S?NE(S):w.stateNode.complete){tt=0,Dn=null;var U=w.sibling;if(U!==null)Ue=U;else{var K=w.return;K!==null?(Ue=K,jc(K)):Ue=null}break t}}tt=0,Dn=null,ha(s,r,v,5);break;case 6:tt=0,Dn=null,ha(s,r,v,6);break;case 8:Ep(),_t=6;break e;default:throw Error(i(462))}}u1();break}catch(W){Fv(s,W)}while(!0);return ss=Wr=null,Y.H=c,Y.A=y,Ze=l,Ue!==null?0:(at=null,Oe=0,_c(),_t)}function u1(){for(;Ue!==null&&!Wd();)Hv(Ue)}function Hv(s){var r=hv(s.alternate,s,ps);s.memoizedProps=s.pendingProps,r===null?jc(s):Ue=r}function zv(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=av(l,r,r.pendingProps,r.type,void 0,Oe);break;case 11:r=av(l,r,r.pendingProps,r.type.render,r.ref,Oe);break;case 5:Uh(r);default:mv(l,r),r=Ue=Gy(r,ps),r=hv(l,r,ps)}s.memoizedProps=s.pendingProps,r===null?jc(s):Ue=r}function ha(s,r,l,c){ss=Wr=null,Uh(r),na=null,xl=0;var y=r.return;try{if(WR(s,y,r,l,Oe)){_t=1,Bc(s,Hn(l,s.current)),Ue=null;return}}catch(v){if(y!==null)throw Ue=y,v;_t=1,Bc(s,Hn(l,s.current)),Ue=null;return}r.flags&32768?(ze||c===1?s=!0:ua||(Oe&536870912)!==0?s=!1:(Qs=s=!0,(c===2||c===9||c===3||c===6)&&(c=Nn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Kv(r,s)):jc(r)}function jc(s){var r=s;do{if((r.flags&32768)!==0){Kv(r,Qs);return}s=r.return;var l=e1(r.alternate,r,ps);if(l!==null){Ue=l;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=s}while(r!==null);_t===0&&(_t=5)}function Kv(s,r){do{var l=t1(s.alternate,s);if(l!==null){l.flags&=32767,Ue=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ue=s;return}Ue=s=l}while(s!==null);_t=6,Ue=null}function Yv(s,r,l,c,y,v,S,w,U){s.cancelPendingCommit=null;do ef();while(Bt!==0);if((Ze&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=uh,eh(s,l,v,S,w,U),s===at&&(Ue=at=null,Oe=0),fa=r,Zs=s,ms=l,yp=v,_p=y,Vv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,h1(Ns,function(){return Wv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,y=re.p,re.p=2,S=Ze,Ze|=4;try{n1(s,r,l)}finally{Ze=S,re.p=y,Y.T=c}}Bt=1,$v(),Jv(),Qv()}}function $v(){if(Bt===1){Bt=0;var s=Zs,r=fa,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var c=re.p;re.p=2;var y=Ze;Ze|=4;try{Rv(r,s);var v=kp,S=ky(s.containerInfo),w=v.focusedElem,U=v.selectionRange;if(S!==w&&w&&w.ownerDocument&&My(w.ownerDocument.documentElement,w)){if(U!==null&&sh(w)){var K=U.start,W=U.end;if(W===void 0&&(W=K),"selectionStart"in w)w.selectionStart=K,w.selectionEnd=Math.min(W,w.value.length);else{var te=w.ownerDocument||document,$=te&&te.defaultView||window;if($.getSelection){var X=$.getSelection(),ye=w.textContent.length,Se=Math.min(U.start,ye),ot=U.end===void 0?Se:Math.min(U.end,ye);!X.extend&&Se>ot&&(S=ot,ot=Se,Se=S);var G=Dy(w,Se),F=Dy(w,ot);if(G&&F&&(X.rangeCount!==1||X.anchorNode!==G.node||X.anchorOffset!==G.offset||X.focusNode!==F.node||X.focusOffset!==F.offset)){var z=te.createRange();z.setStart(G.node,G.offset),X.removeAllRanges(),Se>ot?(X.addRange(z),X.extend(F.node,F.offset)):(z.setEnd(F.node,F.offset),X.addRange(z))}}}}for(te=[],X=w;X=X.parentNode;)X.nodeType===1&&te.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var j=te[w];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}hf=!!Mp,kp=Mp=null}finally{Ze=y,re.p=c,Y.T=l}}s.current=r,Bt=2}}function Jv(){if(Bt===2){Bt=0;var s=Zs,r=fa,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var c=re.p;re.p=2;var y=Ze;Ze|=4;try{Av(s,r.alternate,r)}finally{Ze=y,re.p=c,Y.T=l}}Bt=3}}function Qv(){if(Bt===4||Bt===3){Bt=0,zu();var s=Zs,r=fa,l=ms,c=Vv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bt=5:(Bt=0,fa=Zs=null,Xv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Ws=null),Zi(l),r=r.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(ti,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,y=re.p,re.p=2,Y.T=null;try{for(var v=s.onRecoverableError,S=0;S<c.length;S++){var w=c[S];v(w.value,{componentStack:w.stack})}}finally{Y.T=r,re.p=y}}(ms&3)!==0&&ef(),Gi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===vp?$l++:($l=0,vp=s):$l=0,Jl(0)}}function Xv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,bl(r)))}function ef(){return $v(),Jv(),Qv(),Wv()}function Wv(){if(Bt!==5)return!1;var s=Zs,r=yp;yp=0;var l=Zi(ms),c=Y.T,y=re.p;try{re.p=32>l?32:l,Y.T=null,l=_p,_p=null;var v=Zs,S=ms;if(Bt=0,fa=Zs=null,ms=0,(Ze&6)!==0)throw Error(i(331));var w=Ze;if(Ze|=4,Mv(v.current),Nv(v,v.current,S,l),Ze=w,Jl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(ti,v)}catch{}return!0}finally{re.p=y,Y.T=c,Xv(s,r)}}function Zv(s,r,l){r=Hn(l,r),r=Wh(s.stateNode,r,2),s=Ks(s,r,2),s!==null&&(Pr(s,2),Gi(s))}function nt(s,r,l){if(s.tag===3)Zv(s,s,l);else for(;r!==null;){if(r.tag===3){Zv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ws===null||!Ws.has(c))){s=Hn(l,s),l=j_(2),c=Ks(r,l,2),c!==null&&(ev(l,c,r,s),Pr(c,2),Gi(c));break}}r=r.return}}function Ap(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new r1;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(pp=!0,y.add(l),s=c1.bind(null,s,r,l),r.then(s,s))}function c1(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,at===s&&(Oe&l)===l&&(_t===4||_t===3&&(Oe&62914560)===Oe&&300>cn()-Jc?(Ze&2)===0&&da(s,0):mp|=l,ca===Oe&&(ca=0)),Gi(s)}function jv(s,r){r===0&&(r=Xu()),s=Jr(s,r),s!==null&&(Pr(s,r),Gi(s))}function f1(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),jv(s,l)}function d1(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),jv(s,l)}function h1(s,r){return Ft(s,r)}var tf=null,pa=null,Sp=!1,nf=!1,Cp=!1,er=0;function Gi(s){s!==pa&&s.next===null&&(pa===null?tf=pa=s:pa=pa.next=s),nf=!0,Sp||(Sp=!0,m1())}function Jl(s,r){if(!Cp&&nf){Cp=!0;do for(var l=!1,c=tf;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var S=c.suspendedLanes,w=c.pingedLanes;v=(1<<31-Et(42|s)+1)-1,v&=y&~(S&~w),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,iE(c,v))}else v=Oe,v=Ci(c,c===at?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||ni(c,v)||(l=!0,iE(c,v));c=c.next}while(l);Cp=!1}}function p1(){eE()}function eE(){nf=Sp=!1;var s=0;er!==0&&I1()&&(s=er);for(var r=cn(),l=null,c=tf;c!==null;){var y=c.next,v=tE(c,r);v===0?(c.next=null,l===null?tf=y:l.next=y,y===null&&(pa=l)):(l=c,(s!==0||(v&3)!==0)&&(nf=!0)),c=y}Bt!==0&&Bt!==5||Jl(s),er!==0&&(er=0)}function tE(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var S=31-Et(v),w=1<<S,U=y[S];U===-1?((w&l)===0||(w&c)!==0)&&(y[S]=jd(w,r)):U<=r&&(s.expiredLanes|=w),v&=~w}if(r=at,l=Oe,l=Ci(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(tt===2||tt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&bs(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||ni(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&bs(c),Zi(l)){case 2:case 8:l=sl;break;case 32:l=Ns;break;case 268435456:l=Ku;break;default:l=Ns}return c=nE.bind(null,s),l=Ft(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&bs(c),s.callbackPriority=2,s.callbackNode=null,2}function nE(s,r){if(Bt!==0&&Bt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(ef()&&s.callbackNode!==l)return null;var c=Oe;return c=Ci(s,s===at?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Lv(s,c,r),tE(s,cn()),s.callbackNode!=null&&s.callbackNode===l?nE.bind(null,s):null)}function iE(s,r){if(ef())return null;Lv(s,r,!0)}function m1(){R1(function(){(Ze&6)!==0?Ft(il,p1):eE()})}function Ip(){if(er===0){var s=jo;s===0&&(s=Ai,Ai<<=1,(Ai&261888)===0&&(Ai=256)),er=s}return er}function sE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Oo(""+s)}function rE(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function g1(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var v=sE((y[Ht]||null).action),S=c.submitter;S&&(r=(r=S[Ht]||null)?sE(r.formAction):S.getAttribute("formAction"),r!==null&&(v=r,S=null));var w=new Vi("action","action",null,c,y);s.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(er!==0){var U=S?rE(y,S):new FormData(y);Kh(l,{pending:!0,data:U,method:y.method,action:v},null,U)}}else typeof v=="function"&&(w.preventDefault(),U=S?rE(y,S):new FormData(y),Kh(l,{pending:!0,data:U,method:y.method,action:v},v,U))},currentTarget:y}]})}}for(var wp=0;wp<lh.length;wp++){var Rp=lh[wp],y1=Rp.toLowerCase(),_1=Rp[0].toUpperCase()+Rp.slice(1);ci(y1,"on"+_1)}ci(Uy,"onAnimationEnd"),ci(Ly,"onAnimationIteration"),ci(Oy,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(PR,"onTransitionRun"),ci(VR,"onTransitionStart"),ci(UR,"onTransitionCancel"),ci(Fy,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function oE(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var S=c.length-1;0<=S;S--){var w=c[S],U=w.instance,K=w.currentTarget;if(w=w.listener,U!==v&&y.isPropagationStopped())break e;v=w,y.currentTarget=K;try{v(y)}catch(W){yc(W)}y.currentTarget=null,v=U}else for(S=0;S<c.length;S++){if(w=c[S],U=w.instance,K=w.currentTarget,w=w.listener,U!==v&&y.isPropagationStopped())break e;v=w,y.currentTarget=K;try{v(y)}catch(W){yc(W)}y.currentTarget=null,v=U}}}}function Le(s,r){var l=r[ko];l===void 0&&(l=r[ko]=new Set);var c=s+"__bubble";l.has(c)||(aE(r,s,2,!1),l.add(c))}function bp(s,r,l){var c=0;r&&(c|=4),aE(l,s,c,r)}var sf="_reactListening"+Math.random().toString(36).slice(2);function Np(s){if(!s[sf]){s[sf]=!0,al.forEach(function(l){l!=="selectionchange"&&(v1.has(l)||bp(l,!1,s),bp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[sf]||(r[sf]=!0,bp("selectionchange",!1,r))}}function aE(s,r,l,c){switch(UE(r)){case 2:var y=$1;break;case 8:y=J1;break;default:y=zp}l=y.bind(null,r,l,s),y=void 0,!Br||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function xp(s,r,l,c,y){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var w=c.stateNode.containerInfo;if(w===y)break;if(S===4)for(S=c.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;w!==null;){if(S=bi(w),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){c=v=S;continue e}w=w.parentNode}}c=c.return}Vs(function(){var K=v,W=Fn(l),te=[];e:{var $=By.get(s);if($!==void 0){var X=Vi,ye=s;switch(s){case"keypress":if(Gr(l)===0)break e;case"keydown":case"keyup":X=pc;break;case"focusin":ye="focus",X=zr;break;case"focusout":ye="blur",X=zr;break;case"beforeblur":case"afterblur":X=zr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=El;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=rc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=A;break;case Uy:case Ly:case Oy:X=ac;break;case Fy:X=b;break;case"scroll":case"scrollend":X=vl;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=lc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=ts;break;case"toggle":case"beforetoggle":X=De}var Se=(r&4)!==0,ot=!Se&&(s==="scroll"||s==="scrollend"),G=Se?$!==null?$+"Capture":null:$;Se=[];for(var F=K,z;F!==null;){var j=F;if(z=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||z===null||G===null||(j=oi(F,G),j!=null&&Se.push(Xl(F,j,z))),ot)break;F=F.return}0<Se.length&&($=new X($,ye,null,l,W),te.push({event:$,listeners:Se}))}}if((r&7)===0){e:{if($=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",$&&l!==gl&&(ye=l.relatedTarget||l.fromElement)&&(bi(ye)||ye[wi]))break e;if((X||$)&&($=W.window===W?W:($=W.ownerDocument)?$.defaultView||$.parentWindow:window,X?(ye=l.relatedTarget||l.toElement,X=K,ye=ye?bi(ye):null,ye!==null&&(ot=a(ye),Se=ye.tag,ye!==ot||Se!==5&&Se!==27&&Se!==6)&&(ye=null)):(X=null,ye=K),X!==ye)){if(Se=El,j="onMouseLeave",G="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Se=ts,j="onPointerLeave",G="onPointerEnter",F="pointer"),ot=X==null?$:In(X),z=ye==null?$:In(ye),$=new Se(j,F+"leave",X,l,W),$.target=ot,$.relatedTarget=z,j=null,bi(W)===K&&(Se=new Se(G,F+"enter",ye,l,W),Se.target=z,Se.relatedTarget=ot,j=Se),ot=j,X&&ye)t:{for(Se=E1,G=X,F=ye,z=0,j=G;j;j=Se(j))z++;j=0;for(var Ee=F;Ee;Ee=Se(Ee))j++;for(;0<z-j;)G=Se(G),z--;for(;0<j-z;)F=Se(F),j--;for(;z--;){if(G===F||F!==null&&G===F.alternate){Se=G;break t}G=Se(G),F=Se(F)}Se=null}else Se=null;X!==null&&lE(te,$,X,Se,!1),ye!==null&&ot!==null&&lE(te,ot,ye,Se,!0)}}e:{if($=K?In(K):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var Je=Iy;else if(Sy($))if(wy)Je=DR;else{Je=NR;var ve=bR}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&Lo(K.elementType)&&(Je=Iy):Je=xR;if(Je&&(Je=Je(s,K))){Cy(te,Je,l,W);break e}ve&&ve(s,$,K),s==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&hl($,"number",$.value)}switch(ve=K?In(K):window,s){case"focusin":(Sy(ve)||ve.contentEditable==="true")&&(Ko=ve,rh=K,Il=null);break;case"focusout":Il=rh=Ko=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Py(te,l,W);break;case"selectionchange":if(kR)break;case"keydown":case"keyup":Py(te,l,W)}var Pe;if(We)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else zo?Kr(s,l)&&(Fe="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(Oi&&l.locale!=="ko"&&(zo||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&zo&&(Pe=_l()):(Pi=W,yl="value"in Pi?Pi.value:Pi.textContent,zo=!0)),ve=rf(K,Fe),0<ve.length&&(Fe=new Li(Fe,s,null,l,W),te.push({event:Fe,listeners:ve}),Pe?Fe.data=Pe:(Pe=Ho(l),Pe!==null&&(Fe.data=Pe)))),(Pe=qn?CR(s,l):IR(s,l))&&(Fe=rf(K,"onBeforeInput"),0<Fe.length&&(ve=new Li("onBeforeInput","beforeinput",null,l,W),te.push({event:ve,listeners:Fe}),ve.data=Pe)),g1(te,s,K,l,W)}oE(te,r)})}function Xl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function rf(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=oi(s,l),y!=null&&c.unshift(Xl(s,y,v)),y=oi(s,r),y!=null&&c.push(Xl(s,y,v))),s.tag===3)return c;s=s.return}return[]}function E1(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function lE(s,r,l,c,y){for(var v=r._reactName,S=[];l!==null&&l!==c;){var w=l,U=w.alternate,K=w.stateNode;if(w=w.tag,U!==null&&U===c)break;w!==5&&w!==26&&w!==27||K===null||(U=K,y?(K=oi(l,v),K!=null&&S.unshift(Xl(l,K,U))):y||(K=oi(l,v),K!=null&&S.push(Xl(l,K,U)))),l=l.return}S.length!==0&&s.push({event:r,listeners:S})}var T1=/\r\n?/g,A1=/\u0000|\uFFFD/g;function uE(s){return(typeof s=="string"?s:""+s).replace(T1,`
`).replace(A1,"")}function cE(s,r){return r=uE(r),uE(s)===r}function rt(s,r,l,c,y,v){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||yn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&yn(s,""+c);break;case"className":wn(s,"class",c);break;case"tabIndex":wn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(s,l,c);break;case"style":ml(s,c,v);break;case"data":if(r!=="object"){wn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Oo(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&rt(s,r,"name",y.name,y,null),rt(s,r,"formEncType",y.formEncType,y,null),rt(s,r,"formMethod",y.formMethod,y,null),rt(s,r,"formTarget",y.formTarget,y,null)):(rt(s,r,"encType",y.encType,y,null),rt(s,r,"method",y.method,y,null),rt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Oo(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ri);break;case"onScroll":c!=null&&Le("scroll",s);break;case"onScrollEnd":c!=null&&Le("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Oo(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Le("beforetoggle",s),Le("toggle",s),Vo(s,"popover",c);break;case"xlinkActuate":xt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":xt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":xt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":xt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":xt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":xt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":xt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":xt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":xt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Vo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=sc.get(l)||l,Vo(s,l,c))}}function Dp(s,r,l,c,y,v){switch(l){case"style":ml(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?yn(s,c):(typeof c=="number"||typeof c=="bigint")&&yn(s,""+c);break;case"onScroll":c!=null&&Le("scroll",s);break;case"onScrollEnd":c!=null&&Le("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ll.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),v=s[Ht]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(r,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Vo(s,l,c)}}}function jt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",s),Le("load",s);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var S=l[v];if(S!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,v,S,l,null)}}y&&rt(s,r,"srcSet",l.srcSet,l,null),c&&rt(s,r,"src",l.src,l,null);return;case"input":Le("invalid",s);var w=v=S=y=null,U=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var W=l[c];if(W!=null)switch(c){case"name":y=W;break;case"type":S=W;break;case"checked":U=W;break;case"defaultChecked":K=W;break;case"value":v=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:rt(s,r,c,W,l,null)}}tc(s,v,w,U,K,S,y,!1);return;case"select":Le("invalid",s),c=S=v=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":v=w;break;case"defaultValue":S=w;break;case"multiple":c=w;default:rt(s,r,y,w,l,null)}r=v,l=S,s.multiple=!!c,r!=null?Ds(s,!!c,r,!1):l!=null&&Ds(s,!!c,l,!0);return;case"textarea":Le("invalid",s),v=y=c=null;for(S in l)if(l.hasOwnProperty(S)&&(w=l[S],w!=null))switch(S){case"value":c=w;break;case"defaultValue":y=w;break;case"children":v=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:rt(s,r,S,w,l,null)}Ms(s,c,y,v);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(c=l[U],c!=null))switch(U){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:rt(s,r,U,c,l,null)}return;case"dialog":Le("beforetoggle",s),Le("toggle",s),Le("cancel",s),Le("close",s);break;case"iframe":case"object":Le("load",s);break;case"video":case"audio":for(c=0;c<Ql.length;c++)Le(Ql[c],s);break;case"image":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"embed":case"source":case"link":Le("error",s),Le("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,K,c,l,null)}return;default:if(Lo(r)){for(W in l)l.hasOwnProperty(W)&&(c=l[W],c!==void 0&&Dp(s,r,W,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&rt(s,r,w,c,l,null))}function S1(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,S=null,w=null,U=null,K=null,W=null;for(X in l){var te=l[X];if(l.hasOwnProperty(X)&&te!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":U=te;default:c.hasOwnProperty(X)||rt(s,r,X,null,c,te)}}for(var $ in c){var X=c[$];if(te=l[$],c.hasOwnProperty($)&&(X!=null||te!=null))switch($){case"type":v=X;break;case"name":y=X;break;case"checked":K=X;break;case"defaultChecked":W=X;break;case"value":S=X;break;case"defaultValue":w=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:X!==te&&rt(s,r,$,X,c,te)}}Uo(s,S,w,U,K,W,v,y);return;case"select":X=S=w=$=null;for(v in l)if(U=l[v],l.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":X=U;default:c.hasOwnProperty(v)||rt(s,r,v,null,c,U)}for(y in c)if(v=c[y],U=l[y],c.hasOwnProperty(y)&&(v!=null||U!=null))switch(y){case"value":$=v;break;case"defaultValue":w=v;break;case"multiple":S=v;default:v!==U&&rt(s,r,y,v,c,U)}r=w,l=S,c=X,$!=null?Ds(s,!!l,$,!1):!!c!=!!l&&(r!=null?Ds(s,!!l,r,!0):Ds(s,!!l,l?[]:"",!1));return;case"textarea":X=$=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:rt(s,r,w,null,c,y)}for(S in c)if(y=c[S],v=l[S],c.hasOwnProperty(S)&&(y!=null||v!=null))switch(S){case"value":$=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&rt(s,r,S,y,c,v)}nc(s,$,X);return;case"option":for(var ye in l)if($=l[ye],l.hasOwnProperty(ye)&&$!=null&&!c.hasOwnProperty(ye))switch(ye){case"selected":s.selected=!1;break;default:rt(s,r,ye,null,c,$)}for(U in c)if($=c[U],X=l[U],c.hasOwnProperty(U)&&$!==X&&($!=null||X!=null))switch(U){case"selected":s.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:rt(s,r,U,$,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in l)$=l[Se],l.hasOwnProperty(Se)&&$!=null&&!c.hasOwnProperty(Se)&&rt(s,r,Se,null,c,$);for(K in c)if($=c[K],X=l[K],c.hasOwnProperty(K)&&$!==X&&($!=null||X!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:rt(s,r,K,$,c,X)}return;default:if(Lo(r)){for(var ot in l)$=l[ot],l.hasOwnProperty(ot)&&$!==void 0&&!c.hasOwnProperty(ot)&&Dp(s,r,ot,void 0,c,$);for(W in c)$=c[W],X=l[W],!c.hasOwnProperty(W)||$===X||$===void 0&&X===void 0||Dp(s,r,W,$,c,X);return}}for(var G in l)$=l[G],l.hasOwnProperty(G)&&$!=null&&!c.hasOwnProperty(G)&&rt(s,r,G,null,c,$);for(te in c)$=c[te],X=l[te],!c.hasOwnProperty(te)||$===X||$==null&&X==null||rt(s,r,te,$,c,X)}function fE(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function C1(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,S=y.initiatorType,w=y.duration;if(v&&w&&fE(S)){for(S=0,w=y.responseEnd,c+=1;c<l.length;c++){var U=l[c],K=U.startTime;if(K>w)break;var W=U.transferSize,te=U.initiatorType;W&&fE(te)&&(U=U.responseEnd,S+=W*(U<w?1:(w-K)/(U-K)))}if(--c,r+=8*(v+S)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Mp=null,kp=null;function of(s){return s.nodeType===9?s:s.ownerDocument}function dE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hE(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Pp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Vp=null;function I1(){var s=window.event;return s&&s.type==="popstate"?s===Vp?!1:(Vp=s,!0):(Vp=null,!1)}var pE=typeof setTimeout=="function"?setTimeout:void 0,w1=typeof clearTimeout=="function"?clearTimeout:void 0,mE=typeof Promise=="function"?Promise:void 0,R1=typeof queueMicrotask=="function"?queueMicrotask:typeof mE<"u"?function(s){return mE.resolve(null).then(s).catch(b1)}:pE;function b1(s){setTimeout(function(){throw s})}function tr(s){return s==="head"}function gE(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),_a(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Wl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Wl(l);for(var v=l.firstChild;v;){var S=v.nextSibling,w=v.nodeName;v[Ri]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=S}}else l==="body"&&Wl(s.ownerDocument.body);l=y}while(l);_a(r)}function yE(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Up(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Up(l),Po(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function N1(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Ri])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Jn(s.nextSibling),s===null)break}return null}function x1(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Jn(s.nextSibling),s===null))return null;return s}function _E(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Jn(s.nextSibling),s===null))return null;return s}function Lp(s){return s.data==="$?"||s.data==="$~"}function Op(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function D1(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Jn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Fp=null;function vE(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Jn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function EE(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function TE(s,r,l){switch(r=of(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Wl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Po(s)}var Qn=new Map,AE=new Set;function af(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var gs=re.d;re.d={f:M1,r:k1,D:P1,C:V1,L:U1,m:L1,X:F1,S:O1,M:B1};function M1(){var s=gs.f(),r=Wc();return s||r}function k1(s){var r=On(s);r!==null&&r.tag===5&&r.type==="form"?F_(r):gs.r(s)}var ma=typeof document>"u"?null:document;function SE(s,r,l){var c=ma;if(c&&typeof r=="string"&&r){var y=gn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),AE.has(y)||(AE.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),jt(r,"link",s),Nt(r),c.head.appendChild(r)))}}function P1(s){gs.D(s),SE("dns-prefetch",s,null)}function V1(s,r){gs.C(s,r),SE("preconnect",s,r)}function U1(s,r,l){gs.L(s,r,l);var c=ma;if(c&&s&&r){var y='link[rel="preload"][as="'+gn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+gn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+gn(l.imageSizes)+'"]')):y+='[href="'+gn(s)+'"]';var v=y;switch(r){case"style":v=ga(s);break;case"script":v=ya(s)}Qn.has(v)||(s=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Qn.set(v,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(Zl(v))||r==="script"&&c.querySelector(jl(v))||(r=c.createElement("link"),jt(r,"link",s),Nt(r),c.head.appendChild(r)))}}function L1(s,r){gs.m(s,r);var l=ma;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+gn(c)+'"][href="'+gn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ya(s)}if(!Qn.has(v)&&(s=E({rel:"modulepreload",href:s},r),Qn.set(v,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(jl(v)))return}c=l.createElement("link"),jt(c,"link",s),Nt(c),l.head.appendChild(c)}}}function O1(s,r,l){gs.S(s,r,l);var c=ma;if(c&&s){var y=Ni(c).hoistableStyles,v=ga(s);r=r||"default";var S=y.get(v);if(!S){var w={loading:0,preload:null};if(S=c.querySelector(Zl(v)))w.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Qn.get(v))&&Bp(s,l);var U=S=c.createElement("link");Nt(U),jt(U,"link",s),U._p=new Promise(function(K,W){U.onload=K,U.onerror=W}),U.addEventListener("load",function(){w.loading|=1}),U.addEventListener("error",function(){w.loading|=2}),w.loading|=4,lf(S,r,c)}S={type:"stylesheet",instance:S,count:1,state:w},y.set(v,S)}}}function F1(s,r){gs.X(s,r);var l=ma;if(l&&s){var c=Ni(l).hoistableScripts,y=ya(s),v=c.get(y);v||(v=l.querySelector(jl(y)),v||(s=E({src:s,async:!0},r),(r=Qn.get(y))&&qp(s,r),v=l.createElement("script"),Nt(v),jt(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function B1(s,r){gs.M(s,r);var l=ma;if(l&&s){var c=Ni(l).hoistableScripts,y=ya(s),v=c.get(y);v||(v=l.querySelector(jl(y)),v||(s=E({src:s,async:!0,type:"module"},r),(r=Qn.get(y))&&qp(s,r),v=l.createElement("script"),Nt(v),jt(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function CE(s,r,l,c){var y=(y=ke.current)?af(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ga(l.href),l=Ni(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=ga(l.href);var v=Ni(y).hoistableStyles,S=v.get(s);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,S),(v=y.querySelector(Zl(s)))&&!v._p&&(S.instance=v,S.state.loading=5),Qn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qn.set(s,l),v||q1(y,s,l,S.state))),r&&c===null)throw Error(i(528,""));return S}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ya(l),l=Ni(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ga(s){return'href="'+gn(s)+'"'}function Zl(s){return'link[rel="stylesheet"]['+s+"]"}function IE(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function q1(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),jt(r,"link",l),Nt(r),s.head.appendChild(r))}function ya(s){return'[src="'+gn(s)+'"]'}function jl(s){return"script[async]"+s}function wE(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+gn(l.href)+'"]');if(c)return r.instance=c,Nt(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Nt(c),jt(c,"style",y),lf(c,l.precedence,s),r.instance=c;case"stylesheet":y=ga(l.href);var v=s.querySelector(Zl(y));if(v)return r.state.loading|=4,r.instance=v,Nt(v),v;c=IE(l),(y=Qn.get(y))&&Bp(c,y),v=(s.ownerDocument||s).createElement("link"),Nt(v);var S=v;return S._p=new Promise(function(w,U){S.onload=w,S.onerror=U}),jt(v,"link",c),r.state.loading|=4,lf(v,l.precedence,s),r.instance=v;case"script":return v=ya(l.src),(y=s.querySelector(jl(v)))?(r.instance=y,Nt(y),y):(c=l,(y=Qn.get(v))&&(c=E({},l),qp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Nt(y),jt(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,lf(c,l.precedence,s));return r.instance}function lf(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,S=0;S<c.length;S++){var w=c[S];if(w.dataset.precedence===r)v=w;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Bp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function qp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var uf=null;function RE(s,r,l){if(uf===null){var c=new Map,y=uf=new Map;y.set(l,c)}else y=uf,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var v=l[y];if(!(v[Ri]||v[bt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(r)||"";S=s+S;var w=c.get(S);w?w.push(v):c.set(S,[v])}}return c}function bE(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function G1(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function NE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function H1(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ga(c.href),v=r.querySelector(Zl(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=cf.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=v,Nt(v);return}v=r.ownerDocument||r,c=IE(c),(y=Qn.get(y))&&Bp(c,y),v=v.createElement("link"),Nt(v);var S=v;S._p=new Promise(function(w,U){S.onload=w,S.onerror=U}),jt(v,"link",c),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=cf.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Gp=0;function z1(s,r){return s.stylesheets&&s.count===0&&df(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&df(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+r);0<s.imgBytes&&Gp===0&&(Gp=62500*C1());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&df(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>Gp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function cf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)df(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ff=null;function df(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ff=new Map,r.forEach(K1,s),ff=null,cf.call(s))}function K1(s,r){if(!(r.state.loading&4)){var l=ff.get(s);if(l)var c=l.get(null);else{l=new Map,ff.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var S=y[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),c=S)}c&&l.set(null,c)}y=r.instance,S=y.getAttribute("data-precedence"),v=l.get(S)||c,v===c&&l.set(null,y),l.set(S,y),this.count++,c=cf.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var eu={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function Y1(s,r,l,c,y,v,S,w,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function xE(s,r,l,c,y,v,S,w,U,K,W,te){return s=new Y1(s,r,l,S,U,K,W,te,w),r=1,v===!0&&(r|=24),v=bn(3,null,null,r),s.current=v,v.stateNode=s,r=Th(),r.refCount++,s.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:r},Ih(v),s}function DE(s){return s?(s=Jo,s):Jo}function ME(s,r,l,c,y,v){y=DE(y),c.context===null?c.context=y:c.pendingContext=y,c=zs(r),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Ks(s,c,r),l!==null&&(An(l,s,r),Ml(l,s,r))}function kE(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Hp(s,r){kE(s,r),(s=s.alternate)&&kE(s,r)}function PE(s){if(s.tag===13||s.tag===31){var r=Jr(s,67108864);r!==null&&An(r,s,67108864),Hp(s,67108864)}}function VE(s){if(s.tag===13||s.tag===31){var r=kn();r=Ur(r);var l=Jr(s,r);l!==null&&An(l,s,r),Hp(s,r)}}var hf=!0;function $1(s,r,l,c){var y=Y.T;Y.T=null;var v=re.p;try{re.p=2,zp(s,r,l,c)}finally{re.p=v,Y.T=y}}function J1(s,r,l,c){var y=Y.T;Y.T=null;var v=re.p;try{re.p=8,zp(s,r,l,c)}finally{re.p=v,Y.T=y}}function zp(s,r,l,c){if(hf){var y=Kp(c);if(y===null)xp(s,r,c,pf,l),LE(s,c);else if(X1(y,s,r,l,c))c.stopPropagation();else if(LE(s,c),r&4&&-1<Q1.indexOf(s)){for(;y!==null;){var v=On(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Si(v.pendingLanes);if(S!==0){var w=v;for(w.pendingLanes|=2,w.entangledLanes|=2;S;){var U=1<<31-Et(S);w.entanglements[1]|=U,S&=~U}Gi(v),(Ze&6)===0&&(Qc=cn()+500,Jl(0))}}break;case 31:case 13:w=Jr(v,2),w!==null&&An(w,v,2),Wc(),Hp(v,2)}if(v=Kp(c),v===null&&xp(s,r,c,pf,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else xp(s,r,c,null,l)}}function Kp(s){return s=Fn(s),Yp(s)}var pf=null;function Yp(s){if(pf=null,s=bi(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=f(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return pf=s,null}function UE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mr()){case il:return 2;case sl:return 8;case Ns:case Zd:return 32;case Ku:return 268435456;default:return 32}default:return 32}}var $p=!1,nr=null,ir=null,sr=null,tu=new Map,nu=new Map,rr=[],Q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LE(s,r){switch(s){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":tu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(r.pointerId)}}function iu(s,r,l,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},r!==null&&(r=On(r),r!==null&&PE(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function X1(s,r,l,c,y){switch(r){case"focusin":return nr=iu(nr,s,r,l,c,y),!0;case"dragenter":return ir=iu(ir,s,r,l,c,y),!0;case"mouseover":return sr=iu(sr,s,r,l,c,y),!0;case"pointerover":var v=y.pointerId;return tu.set(v,iu(tu.get(v)||null,s,r,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,nu.set(v,iu(nu.get(v)||null,s,r,l,c,y)),!0}return!1}function OE(s){var r=bi(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,ii(s.priority,function(){VE(l)});return}}else if(r===31){if(r=f(l),r!==null){s.blockedOn=r,ii(s.priority,function(){VE(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function mf(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Kp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);gl=c,l.target.dispatchEvent(c),gl=null}else return r=On(l),r!==null&&PE(r),s.blockedOn=l,!1;r.shift()}return!0}function FE(s,r,l){mf(s)&&l.delete(r)}function W1(){$p=!1,nr!==null&&mf(nr)&&(nr=null),ir!==null&&mf(ir)&&(ir=null),sr!==null&&mf(sr)&&(sr=null),tu.forEach(FE),nu.forEach(FE)}function gf(s,r){s.blockedOn===r&&(s.blockedOn=null,$p||($p=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,W1)))}var yf=null;function BE(s){yf!==s&&(yf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yf===s&&(yf=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Yp(c||l)===null)continue;break}var v=On(l);v!==null&&(s.splice(r,3),r-=3,Kh(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function _a(s){function r(U){return gf(U,s)}nr!==null&&gf(nr,s),ir!==null&&gf(ir,s),sr!==null&&gf(sr,s),tu.forEach(r),nu.forEach(r);for(var l=0;l<rr.length;l++){var c=rr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<rr.length&&(l=rr[0],l.blockedOn===null);)OE(l),l.blockedOn===null&&rr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],S=y[Ht]||null;if(typeof v=="function")S||BE(l);else if(S){var w=null;if(v&&v.hasAttribute("formAction")){if(y=v,S=v[Ht]||null)w=S.formAction;else if(Yp(y)!==null)continue}else w=S.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),BE(l)}}}function qE(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Jp(s){this._internalRoot=s}_f.prototype.render=Jp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=kn();ME(l,c,s,r,null,null)},_f.prototype.unmount=Jp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;ME(s.current,2,null,s,null,null),Wc(),r[wi]=null}};function _f(s){this._internalRoot=s}_f.prototype.unstable_scheduleHydration=function(s){if(s){var r=Wu();s={blockedOn:null,target:s,priority:r};for(var l=0;l<rr.length&&r!==0&&r<rr[l].priority;l++);rr.splice(l,0,s),l===0&&OE(s)}};var GE=e.version;if(GE!=="19.2.3")throw Error(i(527,GE,"19.2.3"));re.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var Z1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vf.isDisabled&&vf.supportsFiber)try{ti=vf.inject(Z1),Jt=vf}catch{}}return ru.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=Q_,v=X_,S=W_;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=xE(s,1,!1,null,null,l,c,null,y,v,S,qE),s[wi]=r.current,Np(s),new Jp(r)},ru.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",v=Q_,S=X_,w=W_,U=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.formState!==void 0&&(U=l.formState)),r=xE(s,1,!0,r,l??null,c,y,U,v,S,w,qE),r.context=DE(null),l=r.current,c=kn(),c=Ur(c),y=zs(c),y.callback=null,Ks(l,y,c),l=c,r.current.lanes=l,Pr(r,l),Gi(r),s[wi]=r.current,Np(s),new _f(r)},ru.version="19.2.3",ru}var ZE;function ub(){if(ZE)return Wp.exports;ZE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wp.exports=lb(),Wp.exports}var cb=ub();const fb=ES(cb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hb=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),jE=n=>{const e=hb(n);return e.charAt(0).toUpperCase()+e.slice(1)},TS=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),pb=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=Ae.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...f},p)=>Ae.createElement("svg",{ref:p,...mb,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:TS("lucide",o),...!a&&!pb(f)&&{"aria-hidden":"true"},...f},[...u.map(([h,_])=>Ae.createElement(h,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(n,e)=>{const t=Ae.forwardRef(({className:i,...o},a)=>Ae.createElement(gb,{ref:a,iconNode:e,className:TS(`lucide-${db(jE(n))}`,`lucide-${n}`,i),...o}));return t.displayName=jE(n),t};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Mf=He("arrow-right",yb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],AS=He("book-open",_b);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],vm=He("book",vb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],SS=He("bookmark",Eb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],CS=He("camera",Tb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Sb=He("chevron-right",Ab);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ib=He("chevron-left",Cb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Rb=He("circle-alert",wb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Kf=He("circle-check-big",bb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],e0=He("circle-check",Nb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Db=He("circle-user",xb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],kb=He("circle-x",Mb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Vb=He("download",Pb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Lb=He("graduation-cap",Ub);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Fb=He("history",Ob);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Yf=He("key",Bb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Gb=He("layers",qb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fo=He("loader-circle",Hb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Kb=He("lock",zb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],$b=He("log-in",Yb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Qb=He("log-out",Jb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wb=He("mail",Xb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],jb=He("moon",Zb);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],$f=He("play",eN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],nN=He("quote",tN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sN=He("refresh-cw",iN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],oN=He("save",rN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],IS=He("settings",aN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wS=He("shield-check",lN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],RS=He("sparkles",uN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],fN=He("sun",cN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],bS=He("trash-2",dN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],t0=He("upload",hN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],mN=He("user-plus",pN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],NS=He("user",gN);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_N=He("x",yN);var vt=(n=>(n.HOME="HOME",n.ANALYZE="ANALYZE",n.VOCAB="VOCAB",n.HISTORY="HISTORY",n.SETTINGS="SETTINGS",n))(vt||{});const vN=()=>{};var n0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},EN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],f=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},DS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,f=u?n[o+1]:0,p=o+2<n.length,h=p?n[o+2]:0,_=a>>2,E=(a&3)<<4|f>>4;let T=(f&15)<<2|h>>6,I=h&63;p||(I=64,u||(T=64)),i.push(t[_],t[E],t[T],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):EN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||f==null||h==null||E==null)throw new TN;const T=a<<2|f>>4;if(i.push(T),h!==64){const I=f<<4&240|h>>2;if(i.push(I),E!==64){const P=h<<6&192|E;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AN=function(n){const e=xS(n);return DS.encodeByteArray(e,!0)},Jf=function(n){return AN(n).replace(/\./g,"")},MS=function(n){try{return DS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=()=>SN().__FIREBASE_DEFAULTS__,IN=()=>{if(typeof process>"u"||typeof n0>"u")return;const n=n0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&MS(n[1]);return e&&JSON.parse(e)},Ed=()=>{try{return vN()||CN()||IN()||wN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kS=n=>{var e,t;return(t=(e=Ed())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},RN=n=>{const e=kS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},PS=()=>{var n;return(n=Ed())==null?void 0:n.config},VS=n=>{var e;return(e=Ed())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function US(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Jf(JSON.stringify(t)),Jf(JSON.stringify(u)),""].join(".")}const pu={};function xN(){const n={prod:[],emulator:[]};for(const e of Object.keys(pu))pu[e]?n.emulator.push(e):n.prod.push(e);return n}function DN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let i0=!1;function LS(n,e){if(typeof window>"u"||typeof document>"u"||!Ha(window.location.host)||pu[n]===e||pu[n]||i0)return;pu[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=xN().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{i0=!0,u()},T}function _(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=DN(i),I=t("text"),P=document.getElementById(I)||document.createElement("span"),B=t("learnmore"),L=document.getElementById(B)||document.createElement("a"),J=t("preprendIcon"),ie=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Z=T.element;f(Z),_(L,B);const oe=h();p(ie,J),Z.append(ie,P,L,oe),document.body.appendChild(Z)}a?(P.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function kN(){var e;const n=(e=Ed())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function VN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UN(){const n=un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function LN(){return!kN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FS(){try{return typeof indexedDB=="object"}catch{return!1}}function BS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}function ON(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="FirebaseError";class vi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=FN,Object.setPrototypeOf(this,vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}}class To{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?BN(a,i):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new vi(o,f,i)}}function BN(n,e){return n.replace(qN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const qN=/\{\$([^}]+)}/g;function GN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _r(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(s0(a)&&s0(u)){if(!_r(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function s0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function lu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function uu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function HN(n,e){const t=new zN(n,e);return t.subscribe.bind(t)}class zN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");KN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=tm),o.error===void 0&&(o.error=tm),o.complete===void 0&&(o.complete=tm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=1e3,$N=2,JN=14400*1e3,QN=.5;function r0(n,e=YN,t=$N){const i=e*Math.pow(t,n),o=Math.round(QN*i*(Math.random()-.5)*2);return Math.min(JN,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(n){return n&&n._delegate?n._delegate:n}class gi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new bN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZN(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:WN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WN(n){return n===ao?void 0:n}function ZN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const ex={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},tx=Be.INFO,nx={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},ix=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=nx[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Td{constructor(e){this.name=e,this._logLevel=tx,this._logHandler=ix,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ex[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const sx=(n,e)=>e.some(t=>n instanceof t);let o0,a0;function rx(){return o0||(o0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ox(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qS=new WeakMap,Em=new WeakMap,GS=new WeakMap,nm=new WeakMap,ug=new WeakMap;function ax(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(hr(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&qS.set(t,n)}).catch(()=>{}),ug.set(e,n),e}function lx(n){if(Em.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Em.set(n,e)}let Tm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Em.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ux(n){Tm=n(Tm)}function cx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(im(this),e,...t);return GS.set(i,e.sort?e.sort():[e]),hr(i)}:ox().includes(n)?function(...e){return n.apply(im(this),e),hr(qS.get(this))}:function(...e){return hr(n.apply(im(this),e))}}function fx(n){return typeof n=="function"?cx(n):(n instanceof IDBTransaction&&lx(n),sx(n,rx())?new Proxy(n,Tm):n)}function hr(n){if(n instanceof IDBRequest)return ax(n);if(nm.has(n))return nm.get(n);const e=fx(n);return e!==n&&(nm.set(n,e),ug.set(e,n)),e}const im=n=>ug.get(n);function HS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),f=hr(u);return i&&u.addEventListener("upgradeneeded",p=>{i(hr(u.result),p.oldVersion,p.newVersion,hr(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const dx=["get","getKey","getAll","getAllKeys","count"],hx=["put","add","delete","clear"],sm=new Map;function l0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sm.get(e))return sm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=hx.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||dx.includes(t)))return;const a=async function(u,...f){const p=this.transaction(u,o?"readwrite":"readonly");let h=p.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),o&&p.done]))[0]};return sm.set(e,a),a}ux(n=>({...n,get:(e,t,i)=>l0(e,t)||n.get(e,t,i),has:(e,t)=>!!l0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mx(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function mx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Am="@firebase/app",u0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Td("@firebase/app"),gx="@firebase/app-compat",yx="@firebase/analytics-compat",_x="@firebase/analytics",vx="@firebase/app-check-compat",Ex="@firebase/app-check",Tx="@firebase/auth",Ax="@firebase/auth-compat",Sx="@firebase/database",Cx="@firebase/data-connect",Ix="@firebase/database-compat",wx="@firebase/functions",Rx="@firebase/functions-compat",bx="@firebase/installations",Nx="@firebase/installations-compat",xx="@firebase/messaging",Dx="@firebase/messaging-compat",Mx="@firebase/performance",kx="@firebase/performance-compat",Px="@firebase/remote-config",Vx="@firebase/remote-config-compat",Ux="@firebase/storage",Lx="@firebase/storage-compat",Ox="@firebase/firestore",Fx="@firebase/ai",Bx="@firebase/firestore-compat",qx="firebase",Gx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="[DEFAULT]",Hx={[Am]:"fire-core",[gx]:"fire-core-compat",[_x]:"fire-analytics",[yx]:"fire-analytics-compat",[Ex]:"fire-app-check",[vx]:"fire-app-check-compat",[Tx]:"fire-auth",[Ax]:"fire-auth-compat",[Sx]:"fire-rtdb",[Cx]:"fire-data-connect",[Ix]:"fire-rtdb-compat",[wx]:"fire-fn",[Rx]:"fire-fn-compat",[bx]:"fire-iid",[Nx]:"fire-iid-compat",[xx]:"fire-fcm",[Dx]:"fire-fcm-compat",[Mx]:"fire-perf",[kx]:"fire-perf-compat",[Px]:"fire-rc",[Vx]:"fire-rc-compat",[Ux]:"fire-gcs",[Lx]:"fire-gcs-compat",[Ox]:"fire-fst",[Bx]:"fire-fst-compat",[Fx]:"fire-vertex","fire-js":"fire-js",[qx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=new Map,zx=new Map,Cm=new Map;function c0(n,e){try{n.container.addComponent(e)}catch(t){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xi(n){const e=n.name;if(Cm.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;Cm.set(e,n);for(const t of Qf.values())c0(t,n);for(const t of zx.values())c0(t,n);return!0}function Ao(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new To("app","Firebase",Kx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=Gx;function zS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Sm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw pr.create("bad-app-name",{appName:String(o)});if(t||(t=PS()),!t)throw pr.create("no-options");const a=Qf.get(o);if(a){if(_r(t,a.options)&&_r(i,a.config))return a;throw pr.create("duplicate-app",{appName:o})}const u=new jN(o);for(const p of Cm.values())u.addComponent(p);const f=new Yx(t,i,u);return Qf.set(o,f),f}function cg(n=Sm){const e=Qf.get(n);if(!e&&n===Sm&&PS())return zS();if(!e)throw pr.create("no-app",{appName:n});return e}function Zn(n,e,t){let i=Hx[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(u.join(" "));return}Xi(new gi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="firebase-heartbeat-database",Jx=1,Eu="firebase-heartbeat-store";let rm=null;function KS(){return rm||(rm=HS($x,Jx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Eu)}catch(t){console.warn(t)}}}}).catch(n=>{throw pr.create("idb-open",{originalErrorMessage:n.message})})),rm}async function Qx(n){try{const t=(await KS()).transaction(Eu),i=await t.objectStore(Eu).get(YS(n));return await t.done,i}catch(e){if(e instanceof vi)Es.warn(e.message);else{const t=pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(t.message)}}}async function f0(n,e){try{const i=(await KS()).transaction(Eu,"readwrite");await i.objectStore(Eu).put(e,YS(n)),await i.done}catch(t){if(t instanceof vi)Es.warn(t.message);else{const i=pr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Es.warn(i.message)}}}function YS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=1024,Wx=30;class Zx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=d0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>Wx){const u=t2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Es.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=d0(),{heartbeatsToSend:i,unsentEntries:o}=jx(this._heartbeatsCache.heartbeats),a=Jf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Es.warn(t),""}}}function d0(){return new Date().toISOString().substring(0,10)}function jx(n,e=Xx){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),h0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),h0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class e2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FS()?BS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Qx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return f0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return f0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function h0(n){return Jf(JSON.stringify({version:2,heartbeats:n})).length}function t2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n){Xi(new gi("platform-logger",e=>new px(e),"PRIVATE")),Xi(new gi("heartbeat",e=>new Zx(e),"PRIVATE")),Zn(Am,u0,n),Zn(Am,u0,"esm2020"),Zn("fire-js","")}n2("");var i2="firebase",s2="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(i2,s2,"app");var p0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mr,$S;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,D){function N(){}N.prototype=D.prototype,M.F=D.prototype,M.prototype=new N,M.prototype.constructor=M,M.D=function(V,k,O){for(var x=Array(arguments.length-2),he=2;he<arguments.length;he++)x[he-2]=arguments[he];return D.prototype[k].apply(V,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,D,N){N||(N=0);const V=Array(16);if(typeof D=="string")for(var k=0;k<16;++k)V[k]=D.charCodeAt(N++)|D.charCodeAt(N++)<<8|D.charCodeAt(N++)<<16|D.charCodeAt(N++)<<24;else for(k=0;k<16;++k)V[k]=D[N++]|D[N++]<<8|D[N++]<<16|D[N++]<<24;D=M.g[0],N=M.g[1],k=M.g[2];let O=M.g[3],x;x=D+(O^N&(k^O))+V[0]+3614090360&4294967295,D=N+(x<<7&4294967295|x>>>25),x=O+(k^D&(N^k))+V[1]+3905402710&4294967295,O=D+(x<<12&4294967295|x>>>20),x=k+(N^O&(D^N))+V[2]+606105819&4294967295,k=O+(x<<17&4294967295|x>>>15),x=N+(D^k&(O^D))+V[3]+3250441966&4294967295,N=k+(x<<22&4294967295|x>>>10),x=D+(O^N&(k^O))+V[4]+4118548399&4294967295,D=N+(x<<7&4294967295|x>>>25),x=O+(k^D&(N^k))+V[5]+1200080426&4294967295,O=D+(x<<12&4294967295|x>>>20),x=k+(N^O&(D^N))+V[6]+2821735955&4294967295,k=O+(x<<17&4294967295|x>>>15),x=N+(D^k&(O^D))+V[7]+4249261313&4294967295,N=k+(x<<22&4294967295|x>>>10),x=D+(O^N&(k^O))+V[8]+1770035416&4294967295,D=N+(x<<7&4294967295|x>>>25),x=O+(k^D&(N^k))+V[9]+2336552879&4294967295,O=D+(x<<12&4294967295|x>>>20),x=k+(N^O&(D^N))+V[10]+4294925233&4294967295,k=O+(x<<17&4294967295|x>>>15),x=N+(D^k&(O^D))+V[11]+2304563134&4294967295,N=k+(x<<22&4294967295|x>>>10),x=D+(O^N&(k^O))+V[12]+1804603682&4294967295,D=N+(x<<7&4294967295|x>>>25),x=O+(k^D&(N^k))+V[13]+4254626195&4294967295,O=D+(x<<12&4294967295|x>>>20),x=k+(N^O&(D^N))+V[14]+2792965006&4294967295,k=O+(x<<17&4294967295|x>>>15),x=N+(D^k&(O^D))+V[15]+1236535329&4294967295,N=k+(x<<22&4294967295|x>>>10),x=D+(k^O&(N^k))+V[1]+4129170786&4294967295,D=N+(x<<5&4294967295|x>>>27),x=O+(N^k&(D^N))+V[6]+3225465664&4294967295,O=D+(x<<9&4294967295|x>>>23),x=k+(D^N&(O^D))+V[11]+643717713&4294967295,k=O+(x<<14&4294967295|x>>>18),x=N+(O^D&(k^O))+V[0]+3921069994&4294967295,N=k+(x<<20&4294967295|x>>>12),x=D+(k^O&(N^k))+V[5]+3593408605&4294967295,D=N+(x<<5&4294967295|x>>>27),x=O+(N^k&(D^N))+V[10]+38016083&4294967295,O=D+(x<<9&4294967295|x>>>23),x=k+(D^N&(O^D))+V[15]+3634488961&4294967295,k=O+(x<<14&4294967295|x>>>18),x=N+(O^D&(k^O))+V[4]+3889429448&4294967295,N=k+(x<<20&4294967295|x>>>12),x=D+(k^O&(N^k))+V[9]+568446438&4294967295,D=N+(x<<5&4294967295|x>>>27),x=O+(N^k&(D^N))+V[14]+3275163606&4294967295,O=D+(x<<9&4294967295|x>>>23),x=k+(D^N&(O^D))+V[3]+4107603335&4294967295,k=O+(x<<14&4294967295|x>>>18),x=N+(O^D&(k^O))+V[8]+1163531501&4294967295,N=k+(x<<20&4294967295|x>>>12),x=D+(k^O&(N^k))+V[13]+2850285829&4294967295,D=N+(x<<5&4294967295|x>>>27),x=O+(N^k&(D^N))+V[2]+4243563512&4294967295,O=D+(x<<9&4294967295|x>>>23),x=k+(D^N&(O^D))+V[7]+1735328473&4294967295,k=O+(x<<14&4294967295|x>>>18),x=N+(O^D&(k^O))+V[12]+2368359562&4294967295,N=k+(x<<20&4294967295|x>>>12),x=D+(N^k^O)+V[5]+4294588738&4294967295,D=N+(x<<4&4294967295|x>>>28),x=O+(D^N^k)+V[8]+2272392833&4294967295,O=D+(x<<11&4294967295|x>>>21),x=k+(O^D^N)+V[11]+1839030562&4294967295,k=O+(x<<16&4294967295|x>>>16),x=N+(k^O^D)+V[14]+4259657740&4294967295,N=k+(x<<23&4294967295|x>>>9),x=D+(N^k^O)+V[1]+2763975236&4294967295,D=N+(x<<4&4294967295|x>>>28),x=O+(D^N^k)+V[4]+1272893353&4294967295,O=D+(x<<11&4294967295|x>>>21),x=k+(O^D^N)+V[7]+4139469664&4294967295,k=O+(x<<16&4294967295|x>>>16),x=N+(k^O^D)+V[10]+3200236656&4294967295,N=k+(x<<23&4294967295|x>>>9),x=D+(N^k^O)+V[13]+681279174&4294967295,D=N+(x<<4&4294967295|x>>>28),x=O+(D^N^k)+V[0]+3936430074&4294967295,O=D+(x<<11&4294967295|x>>>21),x=k+(O^D^N)+V[3]+3572445317&4294967295,k=O+(x<<16&4294967295|x>>>16),x=N+(k^O^D)+V[6]+76029189&4294967295,N=k+(x<<23&4294967295|x>>>9),x=D+(N^k^O)+V[9]+3654602809&4294967295,D=N+(x<<4&4294967295|x>>>28),x=O+(D^N^k)+V[12]+3873151461&4294967295,O=D+(x<<11&4294967295|x>>>21),x=k+(O^D^N)+V[15]+530742520&4294967295,k=O+(x<<16&4294967295|x>>>16),x=N+(k^O^D)+V[2]+3299628645&4294967295,N=k+(x<<23&4294967295|x>>>9),x=D+(k^(N|~O))+V[0]+4096336452&4294967295,D=N+(x<<6&4294967295|x>>>26),x=O+(N^(D|~k))+V[7]+1126891415&4294967295,O=D+(x<<10&4294967295|x>>>22),x=k+(D^(O|~N))+V[14]+2878612391&4294967295,k=O+(x<<15&4294967295|x>>>17),x=N+(O^(k|~D))+V[5]+4237533241&4294967295,N=k+(x<<21&4294967295|x>>>11),x=D+(k^(N|~O))+V[12]+1700485571&4294967295,D=N+(x<<6&4294967295|x>>>26),x=O+(N^(D|~k))+V[3]+2399980690&4294967295,O=D+(x<<10&4294967295|x>>>22),x=k+(D^(O|~N))+V[10]+4293915773&4294967295,k=O+(x<<15&4294967295|x>>>17),x=N+(O^(k|~D))+V[1]+2240044497&4294967295,N=k+(x<<21&4294967295|x>>>11),x=D+(k^(N|~O))+V[8]+1873313359&4294967295,D=N+(x<<6&4294967295|x>>>26),x=O+(N^(D|~k))+V[15]+4264355552&4294967295,O=D+(x<<10&4294967295|x>>>22),x=k+(D^(O|~N))+V[6]+2734768916&4294967295,k=O+(x<<15&4294967295|x>>>17),x=N+(O^(k|~D))+V[13]+1309151649&4294967295,N=k+(x<<21&4294967295|x>>>11),x=D+(k^(N|~O))+V[4]+4149444226&4294967295,D=N+(x<<6&4294967295|x>>>26),x=O+(N^(D|~k))+V[11]+3174756917&4294967295,O=D+(x<<10&4294967295|x>>>22),x=k+(D^(O|~N))+V[2]+718787259&4294967295,k=O+(x<<15&4294967295|x>>>17),x=N+(O^(k|~D))+V[9]+3951481745&4294967295,M.g[0]=M.g[0]+D&4294967295,M.g[1]=M.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+O&4294967295}i.prototype.v=function(M,D){D===void 0&&(D=M.length);const N=D-this.blockSize,V=this.C;let k=this.h,O=0;for(;O<D;){if(k==0)for(;O<=N;)o(this,M,O),O+=this.blockSize;if(typeof M=="string"){for(;O<D;)if(V[k++]=M.charCodeAt(O++),k==this.blockSize){o(this,V),k=0;break}}else for(;O<D;)if(V[k++]=M[O++],k==this.blockSize){o(this,V),k=0;break}}this.h=k,this.o+=D},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var D=1;D<M.length-8;++D)M[D]=0;D=this.o*8;for(var N=M.length-8;N<M.length;++N)M[N]=D&255,D/=256;for(this.v(M),M=Array(16),D=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)M[D++]=this.g[N]>>>V&255;return M};function a(M,D){var N=f;return Object.prototype.hasOwnProperty.call(N,M)?N[M]:N[M]=D(M)}function u(M,D){this.h=D;const N=[];let V=!0;for(let k=M.length-1;k>=0;k--){const O=M[k]|0;V&&O==D||(N[k]=O,V=!1)}this.g=N}var f={};function p(M){return-128<=M&&M<128?a(M,function(D){return new u([D|0],D<0?-1:0)}):new u([M|0],M<0?-1:0)}function h(M){if(isNaN(M)||!isFinite(M))return E;if(M<0)return L(h(-M));const D=[];let N=1;for(let V=0;M>=N;V++)D[V]=M/N|0,N*=4294967296;return new u(D,0)}function _(M,D){if(M.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(M.charAt(0)=="-")return L(_(M.substring(1),D));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(D,8));let V=E;for(let O=0;O<M.length;O+=8){var k=Math.min(8,M.length-O);const x=parseInt(M.substring(O,O+k),D);k<8?(k=h(Math.pow(D,k)),V=V.j(k).add(h(x))):(V=V.j(N),V=V.add(h(x)))}return V}var E=p(0),T=p(1),I=p(16777216);n=u.prototype,n.m=function(){if(B(this))return-L(this).m();let M=0,D=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);M+=(V>=0?V:4294967296+V)*D,D*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(P(this))return"0";if(B(this))return"-"+L(this).toString(M);const D=h(Math.pow(M,6));var N=this;let V="";for(;;){const k=oe(N,D).g;N=J(N,k.j(D));let O=((N.g.length>0?N.g[0]:N.h)>>>0).toString(M);if(N=k,P(N))return O+V;for(;O.length<6;)O="0"+O;V=O+V}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function P(M){if(M.h!=0)return!1;for(let D=0;D<M.g.length;D++)if(M.g[D]!=0)return!1;return!0}function B(M){return M.h==-1}n.l=function(M){return M=J(this,M),B(M)?-1:P(M)?0:1};function L(M){const D=M.g.length,N=[];for(let V=0;V<D;V++)N[V]=~M.g[V];return new u(N,~M.h).add(T)}n.abs=function(){return B(this)?L(this):this},n.add=function(M){const D=Math.max(this.g.length,M.g.length),N=[];let V=0;for(let k=0;k<=D;k++){let O=V+(this.i(k)&65535)+(M.i(k)&65535),x=(O>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);V=x>>>16,O&=65535,x&=65535,N[k]=x<<16|O}return new u(N,N[N.length-1]&-2147483648?-1:0)};function J(M,D){return M.add(L(D))}n.j=function(M){if(P(this)||P(M))return E;if(B(this))return B(M)?L(this).j(L(M)):L(L(this).j(M));if(B(M))return L(this.j(L(M)));if(this.l(I)<0&&M.l(I)<0)return h(this.m()*M.m());const D=this.g.length+M.g.length,N=[];for(var V=0;V<2*D;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<M.g.length;k++){const O=this.i(V)>>>16,x=this.i(V)&65535,he=M.i(k)>>>16,_e=M.i(k)&65535;N[2*V+2*k]+=x*_e,ie(N,2*V+2*k),N[2*V+2*k+1]+=O*_e,ie(N,2*V+2*k+1),N[2*V+2*k+1]+=x*he,ie(N,2*V+2*k+1),N[2*V+2*k+2]+=O*he,ie(N,2*V+2*k+2)}for(M=0;M<D;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=D;M<2*D;M++)N[M]=0;return new u(N,0)};function ie(M,D){for(;(M[D]&65535)!=M[D];)M[D+1]+=M[D]>>>16,M[D]&=65535,D++}function Z(M,D){this.g=M,this.h=D}function oe(M,D){if(P(D))throw Error("division by zero");if(P(M))return new Z(E,E);if(B(M))return D=oe(L(M),D),new Z(L(D.g),L(D.h));if(B(D))return D=oe(M,L(D)),new Z(L(D.g),D.h);if(M.g.length>30){if(B(M)||B(D))throw Error("slowDivide_ only works with positive integers.");for(var N=T,V=D;V.l(M)<=0;)N=le(N),V=le(V);var k=ue(N,1),O=ue(V,1);for(V=ue(V,2),N=ue(N,2);!P(V);){var x=O.add(V);x.l(M)<=0&&(k=k.add(N),O=x),V=ue(V,1),N=ue(N,1)}return D=J(M,k.j(D)),new Z(k,D)}for(k=E;M.l(D)>=0;){for(N=Math.max(1,Math.floor(M.m()/D.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),O=h(N),x=O.j(D);B(x)||x.l(M)>0;)N-=V,O=h(N),x=O.j(D);P(O)&&(O=T),k=k.add(O),M=J(M,x)}return new Z(k,M)}n.B=function(M){return oe(this,M).h},n.and=function(M){const D=Math.max(this.g.length,M.g.length),N=[];for(let V=0;V<D;V++)N[V]=this.i(V)&M.i(V);return new u(N,this.h&M.h)},n.or=function(M){const D=Math.max(this.g.length,M.g.length),N=[];for(let V=0;V<D;V++)N[V]=this.i(V)|M.i(V);return new u(N,this.h|M.h)},n.xor=function(M){const D=Math.max(this.g.length,M.g.length),N=[];for(let V=0;V<D;V++)N[V]=this.i(V)^M.i(V);return new u(N,this.h^M.h)};function le(M){const D=M.g.length+1,N=[];for(let V=0;V<D;V++)N[V]=M.i(V)<<1|M.i(V-1)>>>31;return new u(N,M.h)}function ue(M,D){const N=D>>5;D%=32;const V=M.g.length-N,k=[];for(let O=0;O<V;O++)k[O]=D>0?M.i(O+N)>>>D|M.i(O+N+1)<<32-D:M.i(O+N);return new u(k,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,$S=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,mr=u}).apply(typeof p0<"u"?p0:typeof self<"u"?self:typeof window<"u"?window:{});var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JS,cu,QS,kf,Im,XS,WS,ZS;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ef=="object"&&Ef];for(var A=0;A<g.length;++A){var C=g[A];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(g,A){if(A)e:{var C=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var H=g[b];if(!(H in C))break e;C=C[H]}g=g[g.length-1],b=C[g],A=A(b),A!=b&&A!=null&&e(C,g,{configurable:!0,writable:!0,value:A})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(A){var C=[],b;for(b in A)Object.prototype.hasOwnProperty.call(A,b)&&C.push([b,A[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function f(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function p(g,A,C){return g.call.apply(g.bind,arguments)}function h(g,A,C){return h=p,h.apply(null,arguments)}function _(g,A){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function E(g,A){function C(){}C.prototype=A.prototype,g.Z=A.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(b,H,Q){for(var ae=Array(arguments.length-2),De=2;De<arguments.length;De++)ae[De-2]=arguments[De];return A.prototype[H].apply(b,ae)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const A=g.length;if(A>0){const C=Array(A);for(let b=0;b<A;b++)C[b]=g[b];return C}return[]}function P(g,A){for(let b=1;b<arguments.length;b++){const H=arguments[b];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=g.length||0;const Q=H.length||0;g.length=C+Q;for(let ae=0;ae<Q;ae++)g[C+ae]=H[ae]}else g.push(H)}}class B{constructor(A,C){this.i=A,this.j=C,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function L(g){u.setTimeout(()=>{throw g},0)}function J(){var g=M;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class ie{constructor(){this.h=this.g=null}add(A,C){const b=Z.get();b.set(A,C),this.h?this.h.next=b:this.g=b,this.h=b}}var Z=new B(()=>new oe,g=>g.reset());class oe{constructor(){this.next=this.g=this.h=null}set(A,C){this.h=A,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ue=!1,M=new ie,D=()=>{const g=Promise.resolve(void 0);le=()=>{g.then(N)}};function N(){for(var g;g=J();){try{g.h.call(g.g)}catch(C){L(C)}var A=Z;A.j(g),A.h<100&&(A.h++,g.next=A.g,A.g=g)}ue=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,A),u.removeEventListener("test",C,A)}catch{}return g})();function x(g){return/^[\s\xa0]*$/.test(g)}function he(g,A){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,A)}E(he,k),he.prototype.init=function(g,A){const C=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget,A||(C=="mouseover"?A=g.fromElement:C=="mouseout"&&(A=g.toElement)),this.relatedTarget=A,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),Y=0;function re(g,A,C,b,H){this.listener=g,this.proxy=null,this.src=A,this.type=C,this.capture=!!b,this.ha=H,this.key=++Y,this.da=this.fa=!1}function ge(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ve(g,A,C){for(const b in g)A.call(C,g[b],b,g)}function $e(g,A){for(const C in g)A.call(void 0,g[C],C,g)}function q(g){const A={};for(const C in g)A[C]=g[C];return A}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(g,A){let C,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(C in b)g[C]=b[C];for(let Q=0;Q<ne.length;Q++)C=ne[Q],Object.prototype.hasOwnProperty.call(b,C)&&(g[C]=b[C])}}function me(g){this.src=g,this.g={},this.h=0}me.prototype.add=function(g,A,C,b,H){const Q=g.toString();g=this.g[Q],g||(g=this.g[Q]=[],this.h++);const ae=ke(g,A,b,H);return ae>-1?(A=g[ae],C||(A.fa=!1)):(A=new re(A,this.src,Q,!!b,H),A.fa=C,g.push(A)),A};function we(g,A){const C=A.type;if(C in g.g){var b=g.g[C],H=Array.prototype.indexOf.call(b,A,void 0),Q;(Q=H>=0)&&Array.prototype.splice.call(b,H,1),Q&&(ge(A),g.g[C].length==0&&(delete g.g[C],g.h--))}}function ke(g,A,C,b){for(let H=0;H<g.length;++H){const Q=g[H];if(!Q.da&&Q.listener==A&&Q.capture==!!C&&Q.ha==b)return H}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),Ot={};function dt(g,A,C,b,H){if(Array.isArray(A)){for(let Q=0;Q<A.length;Q++)dt(g,A[Q],C,b,H);return null}return C=nl(C),g&&g[_e]?g.J(A,C,f(b)?!!b.capture:!1,H):xr(g,A,C,!1,b,H)}function xr(g,A,C,b,H,Q){if(!A)throw Error("Invalid event type");const ae=f(H)?!!H.capture:!!H;let De=Dr(g);if(De||(g[Ke]=De=new me(g)),C=De.add(A,C,b,ae,Q),C.proxy)return C;if(b=No(),C.proxy=b,b.src=g,b.listener=C,g.addEventListener)O||(H=ae),H===void 0&&(H=!1),g.addEventListener(A.toString(),b,H);else if(g.attachEvent)g.attachEvent(Ti(A.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function No(){function g(C){return A.call(g.src,g.listener,C)}const A=el;return g}function xo(g,A,C,b,H){if(Array.isArray(A))for(var Q=0;Q<A.length;Q++)xo(g,A[Q],C,b,H);else b=f(b)?!!b.capture:!!b,C=nl(C),g&&g[_e]?(g=g.i,Q=String(A).toString(),Q in g.g&&(A=g.g[Q],C=ke(A,C,b,H),C>-1&&(ge(A[C]),Array.prototype.splice.call(A,C,1),A.length==0&&(delete g.g[Q],g.h--)))):g&&(g=Dr(g))&&(A=g.g[A.toString()],g=-1,A&&(g=ke(A,C,b,H)),(C=g>-1?A[g]:null)&&Do(C))}function Do(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[_e])we(A.i,g);else{var C=g.type,b=g.proxy;A.removeEventListener?A.removeEventListener(C,b,g.capture):A.detachEvent?A.detachEvent(Ti(C),b):A.addListener&&A.removeListener&&A.removeListener(b),(C=Dr(A))?(we(C,g),C.h==0&&(C.src=null,A[Ke]=null)):ge(g)}}}function Ti(g){return g in Ot?Ot[g]:Ot[g]="on"+g}function el(g,A){if(g.da)g=!0;else{A=new he(A,this);const C=g.listener,b=g.ha||g.src;g.fa&&Do(g),g=C.call(b,A)}return g}function Dr(g){return g=g[Ke],g instanceof me?g:null}var tl="__closure_events_fn_"+(Math.random()*1e9>>>0);function nl(g){return typeof g=="function"?g:(g[tl]||(g[tl]=function(A){return g.handleEvent(A)}),g[tl])}function wt(){V.call(this),this.i=new me(this),this.M=this,this.G=null}E(wt,V),wt.prototype[_e]=!0,wt.prototype.removeEventListener=function(g,A,C,b){xo(this,g,A,C,b)};function Ft(g,A){var C,b=g.G;if(b)for(C=[];b;b=b.G)C.push(b);if(g=g.M,b=A.type||A,typeof A=="string")A=new k(A,g);else if(A instanceof k)A.target=A.target||g;else{var H=A;A=new k(b,g),ce(A,H)}H=!0;let Q,ae;if(C)for(ae=C.length-1;ae>=0;ae--)Q=A.g=C[ae],H=bs(Q,b,!0,A)&&H;if(Q=A.g=g,H=bs(Q,b,!0,A)&&H,H=bs(Q,b,!1,A)&&H,C)for(ae=0;ae<C.length;ae++)Q=A.g=C[ae],H=bs(Q,b,!1,A)&&H}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var g=this.i;for(const A in g.g){const C=g.g[A];for(let b=0;b<C.length;b++)ge(C[b]);delete g.g[A],g.h--}}this.G=null},wt.prototype.J=function(g,A,C,b){return this.i.add(String(g),A,!1,C,b)},wt.prototype.K=function(g,A,C,b){return this.i.add(String(g),A,!0,C,b)};function bs(g,A,C,b){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();let H=!0;for(let Q=0;Q<A.length;++Q){const ae=A[Q];if(ae&&!ae.da&&ae.capture==C){const De=ae.listener,Tt=ae.ha||ae.src;ae.fa&&we(g.i,ae),H=De.call(Tt,b)!==!1&&H}}return H&&!b.defaultPrevented}function Wd(g,A){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:u.setTimeout(g,A||0)}function zu(g){g.g=Wd(()=>{g.g=null,g.i&&(g.i=!1,zu(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class cn extends V{constructor(A,C){super(),this.m=A,this.l=C,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:zu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mr(g){V.call(this),this.h=g,this.g={}}E(Mr,V);var il=[];function sl(g){Ve(g.g,function(A,C){this.g.hasOwnProperty(C)&&Do(A)},g),g.g={}}Mr.prototype.N=function(){Mr.Z.N.call(this),sl(this)},Mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ns=u.JSON.stringify,Zd=u.JSON.parse,Ku=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function Yu(){}function $u(){}var ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){k.call(this,"d")}E(Jt,k);function Ln(){k.call(this,"c")}E(Ln,k);var Et={},Ju=null;function Mo(){return Ju=Ju||new wt}Et.Ia="serverreachability";function Qu(g){k.call(this,Et.Ia,g)}E(Qu,k);function Ai(g){const A=Mo();Ft(A,new Qu(A))}Et.STAT_EVENT="statevent";function kr(g,A){k.call(this,Et.STAT_EVENT,g),this.stat=A}E(kr,k);function Rt(g){const A=Mo();Ft(A,new kr(A,g))}Et.Ja="timingevent";function Si(g,A){k.call(this,Et.Ja,g),this.size=A}E(Si,k);function Ci(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},A)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function jd(g,A,C,b,H,Q){g.info(function(){if(g.g)if(Q){var ae="",De=Q.split("&");for(let We=0;We<De.length;We++){var Tt=De[We].split("=");if(Tt.length>1){const ht=Tt[0];Tt=Tt[1];const qn=ht.split("_");ae=qn.length>=2&&qn[1]=="type"?ae+(ht+"="+Tt+"&"):ae+(ht+"=redacted&")}}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+A+`
`+C+`
`+ae})}function Xu(g,A,C,b,H,Q,ae){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+A+`
`+C+`
`+Q+" "+ae})}function Ii(g,A,C,b){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+eh(g,C)+(b?" "+b:"")})}function Pr(g,A){g.info(function(){return"TIMEOUT: "+A})}ni.prototype.info=function(){};function eh(g,A){if(!g.g)return A;if(!A)return null;try{const Q=JSON.parse(A);if(Q){for(g=0;g<Q.length;g++)if(Array.isArray(Q[g])){var C=Q[g];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ae=1;ae<b.length;ae++)b[ae]=""}}}}return Ns(Q)}catch{return A}}var Vr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},rl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ol;function Ur(){}E(Ur,Yu),Ur.prototype.g=function(){return new XMLHttpRequest},ol=new Ur;function Zi(g){return encodeURIComponent(String(g))}function Wu(g){var A=1;g=g.split(":");const C=[];for(;A>0&&g.length;)C.push(g.shift()),A--;return g.length&&C.push(g.join(":")),C}function ii(g,A,C,b){this.j=g,this.i=A,this.l=C,this.S=b||1,this.V=new Mr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new si}function si(){this.i=null,this.g="",this.h=!1}var bt={},Ht={};function wi(g,A,C){g.M=1,g.A=Lr(xt(A)),g.u=C,g.R=!0,ko(g,null)}function ko(g,A){g.F=Date.now(),Ri(g),g.B=xt(g.A);var C=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),Lo(C.i,"t",b),g.C=0,C=g.j.L,g.h=new si,g.g=dc(g.j,C?A:null,!g.u),g.P>0&&(g.O=new cn(h(g.Y,g,g.g),g.P)),A=g.V,C=g.g,b=g.ba;var H="readystatechange";Array.isArray(H)||(H&&(il[0]=H.toString()),H=il);for(let Q=0;Q<H.length;Q++){const ae=dt(C,H[Q],b||A.handleEvent,!1,A.h||A);if(!ae)break;A.g[ae.key]=ae}A=g.J?q(g.J):{},g.u?(g.v||(g.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,A)):(g.v="GET",g.g.ea(g.B,g.v,null,A)),Ai(),jd(g.i,g.v,g.B,g.l,g.S,g.u)}ii.prototype.ba=function(g){g=g.target;const A=this.O;A&&ai(g)==3?A.j():this.Y(g)},ii.prototype.Y=function(g){try{if(g==this.g)e:{const De=ai(this.g),Tt=this.g.ya(),We=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||De!=4||Tt==7||(Tt==8||We<=0?Ai(3):Ai(2)),bi(this);var A=this.g.ca();this.X=A;var C=th(this);if(this.o=A==200,Xu(this.i,this.v,this.B,this.l,this.S,De,A),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(b)){var Q=b;break t}}Q=null}if(g=Q)Ii(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ni(this,g);else{this.o=!1,this.m=3,Rt(12),In(this),On(this);break e}}if(this.R){g=!0;let ht;for(;!this.K&&this.C<C.length;)if(ht=ju(this,C),ht==Ht){De==4&&(this.m=4,Rt(14),g=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==bt){this.m=4,Rt(15),Ii(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ii(this.i,this.l,ht,null),Ni(this,ht);if(Zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||C.length!=0||this.h.h||(this.m=1,Rt(16),g=!1),this.o=this.o&&g,!g)Ii(this.i,this.l,C,"[Invalid Chunked Response]"),In(this),On(this);else if(C.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Tl(ae),ae.P=!0,Rt(11))}}else Ii(this.i,this.l,C,null),Ni(this,C);De==4&&In(this),this.o&&!this.K&&(De==4?lc(this.j,this):(this.o=!1,Ri(this)))}else es(this.g),A==400&&C.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),In(this),On(this)}}}catch{}finally{}};function th(g){if(!Zu(g))return g.g.la();const A=Qt(g.g);if(A==="")return"";let C="";const b=A.length,H=ai(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return In(g),On(g),"";g.h.i=new u.TextDecoder}for(let Q=0;Q<b;Q++)g.h.h=!0,C+=g.h.i.decode(A[Q],{stream:!(H&&Q==b-1)});return A.length=0,g.h.g+=C,g.C=0,g.h.g}function Zu(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function ju(g,A){var C=g.C,b=A.indexOf(`
`,C);return b==-1?Ht:(C=Number(A.substring(C,b)),isNaN(C)?bt:(b+=1,b+C>A.length?Ht:(A=A.slice(b,b+C),g.C=b+C,A)))}ii.prototype.cancel=function(){this.K=!0,In(this)};function Ri(g){g.T=Date.now()+g.H,Po(g,g.H)}function Po(g,A){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Ci(h(g.aa,g),A)}function bi(g){g.D&&(u.clearTimeout(g.D),g.D=null)}ii.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Pr(this.i,this.B),this.M!=2&&(Ai(),Rt(17)),In(this),this.m=2,On(this)):Po(this,this.T-g)};function On(g){g.j.I==0||g.K||lc(g.j,g)}function In(g){bi(g);var A=g.O;A&&typeof A.dispose=="function"&&A.dispose(),g.O=null,sl(g.V),g.g&&(A=g.g,g.g=null,A.abort(),A.dispose())}function Ni(g,A){try{var C=g.j;if(C.I!=0&&(C.g==g||Di(C.h,g))){if(!g.L&&Di(C.h,g)&&C.I==3){try{var b=C.Ba.g.parse(A)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)Go(C),Ls(C);else break e;zr(C),Rt(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Ci(h(C.Va,C),6e3));xi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Li(C,11)}else if((g.L||C.g==g)&&Go(C),!x(A))for(H=C.Ba.g.parse(A),A=0;A<H.length;A++){let We=H[A];const ht=We[0];if(!(ht<=C.K))if(C.K=ht,We=We[1],C.I==2)if(We[0]=="c"){C.M=We[1],C.ba=We[2];const qn=We[3];qn!=null&&(C.ka=qn,C.j.info("VER="+C.ka));const Oi=We[4];Oi!=null&&(C.za=Oi,C.j.info("SVER="+C.za));const li=We[5];li!=null&&typeof li=="number"&&li>0&&(b=1.5*li,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const ui=g.g;if(ui){const Kr=ui.g?ui.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kr){var Q=b.h;Q.g||Kr.indexOf("spdy")==-1&&Kr.indexOf("quic")==-1&&Kr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ul(Q,Q.h),Q.h=null))}if(b.G){const Ho=ui.g?ui.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(b.wa=Ho,et(b.J,b.G,Ho))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var ae=g;if(b.na=fc(b,b.L?b.ba:null,b.W),ae.L){cl(b.h,ae);var De=ae,Tt=b.O;Tt&&(De.H=Tt),De.D&&(bi(De),Ri(De)),b.g=ae}else oc(b);C.i.length>0&&Ui(C)}else We[0]!="stop"&&We[0]!="close"||Li(C,7);else C.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Li(C,7):vl(C):We[0]!="noop"&&C.l&&C.l.qa(We),C.A=0)}}Ai(4)}catch{}}var Nt=class{constructor(g,A){this.g=g,this.map=A}};function al(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ll(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function xi(g){return g.h?1:g.g?g.g.size:0}function Di(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function ul(g,A){g.g?g.g.add(A):g.h=A}function cl(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}al.prototype.cancel=function(){if(this.i=fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function fl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const C of g.g.values())A=A.concat(C.G);return A}return I(g.i)}var ec=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vo(g,A){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const b=g[C].indexOf("=");let H,Q=null;b>=0?(H=g[C].substring(0,b),Q=g[C].substring(b+1)):H=g[C],A(H,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function wn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;g instanceof wn?(this.l=g.l,zt(this,g.j),this.o=g.o,this.g=g.g,xs(this,g.u),this.h=g.h,dl(this,sc(g.i)),this.m=g.m):g&&(A=String(g).match(ec))?(this.l=!1,zt(this,A[1]||"",!0),this.o=Mi(A[2]||""),this.g=Mi(A[3]||"",!0),xs(this,A[4]),this.h=Mi(A[5]||"",!0),dl(this,A[6]||"",!0),this.m=Mi(A[7]||"")):(this.l=!1,this.i=new Ms(null,this.l))}wn.prototype.toString=function(){const g=[];var A=this.j;A&&g.push(Or(A,Uo,!0),":");var C=this.g;return(C||A=="file")&&(g.push("//"),(A=this.o)&&g.push(Or(A,Uo,!0),"@"),g.push(Zi(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(Or(C,C.charAt(0)=="/"?hl:tc,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",Or(C,nc)),g.join("")},wn.prototype.resolve=function(g){const A=xt(this);let C=!!g.j;C?zt(A,g.j):C=!!g.o,C?A.o=g.o:C=!!g.g,C?A.g=g.g:C=g.u!=null;var b=g.h;if(C)xs(A,g.u);else if(C=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=A.h.lastIndexOf("/");H!=-1&&(b=A.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const Q=[];for(let ae=0;ae<H.length;){const De=H[ae++];De=="."?b&&ae==H.length&&Q.push(""):De==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),b&&ae==H.length&&Q.push("")):(Q.push(De),b=!0)}b=Q.join("/")}else b=H}return C?A.h=b:C=g.i.toString()!=="",C?dl(A,sc(g.i)):C=!!g.m,C&&(A.m=g.m),A};function xt(g){return new wn(g)}function zt(g,A,C){g.j=C?Mi(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function xs(g,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);g.u=A}else g.u=null}function dl(g,A,C){A instanceof Ms?(g.i=A,Oo(g.i,g.l)):(C||(A=Or(A,Ds)),g.i=new Ms(A,g.l))}function et(g,A,C){g.i.set(A,C)}function Lr(g){return et(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Mi(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Or(g,A,C){return typeof g=="string"?(g=encodeURI(g).replace(A,gn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function gn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Uo=/[#\/\?@]/g,tc=/[#\?:]/g,hl=/[#\?]/g,Ds=/[#\?@]/g,nc=/#/g;function Ms(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function yn(g){g.g||(g.g=new Map,g.h=0,g.i&&Vo(g.i,function(A,C){g.add(decodeURIComponent(A.replace(/\+/g," ")),C)}))}n=Ms.prototype,n.add=function(g,A){yn(this),this.i=null,g=ks(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(A),this.h+=1,this};function ic(g,A){yn(g),A=ks(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function pl(g,A){return yn(g),A=ks(g,A),g.g.has(A)}n.forEach=function(g,A){yn(this),this.g.forEach(function(C,b){C.forEach(function(H){g.call(A,H,b,this)},this)},this)};function ml(g,A){yn(g);let C=[];if(typeof A=="string")pl(g,A)&&(C=C.concat(g.g.get(ks(g,A))));else for(g=Array.from(g.g.values()),A=0;A<g.length;A++)C=C.concat(g[A]);return C}n.set=function(g,A){return yn(this),this.i=null,g=ks(this,g),pl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},n.get=function(g,A){return g?(g=ml(this,g),g.length>0?String(g[0]):A):A};function Lo(g,A,C){ic(g,A),C.length>0&&(g.i=null,g.g.set(ks(g,A),I(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(let b=0;b<A.length;b++){var C=A[b];const H=Zi(C);C=ml(this,C);for(let Q=0;Q<C.length;Q++){let ae=H;C[Q]!==""&&(ae+="="+Zi(C[Q])),g.push(ae)}}return this.i=g.join("&")};function sc(g){const A=new Ms;return A.i=g.i,g.g&&(A.g=new Map(g.g),A.h=g.h),A}function ks(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Oo(g,A){A&&!g.j&&(yn(g),g.i=null,g.g.forEach(function(C,b){const H=b.toLowerCase();b!=H&&(ic(this,b),Lo(this,H,C))},g)),g.j=A}function ri(g,A){const C=new ni;if(u.Image){const b=new Image;b.onload=_(Fn,C,"TestLoadImage: loaded",!0,A,b),b.onerror=_(Fn,C,"TestLoadImage: error",!1,A,b),b.onabort=_(Fn,C,"TestLoadImage: abort",!1,A,b),b.ontimeout=_(Fn,C,"TestLoadImage: timeout",!1,A,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else A(!1)}function gl(g,A){const C=new ni,b=new AbortController,H=setTimeout(()=>{b.abort(),Fn(C,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:b.signal}).then(Q=>{clearTimeout(H),Q.ok?Fn(C,"TestPingServer: ok",!0,A):Fn(C,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(H),Fn(C,"TestPingServer: error",!1,A)})}function Fn(g,A,C,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(C)}catch{}}function Ps(){this.g=new Ku}function ki(g){this.i=g.Sb||null,this.h=g.ab||!1}E(ki,Yu),ki.prototype.g=function(){return new Fr(this.i,this.h)};function Fr(g,A){wt.call(this),this.H=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Fr,wt),n=Fr.prototype,n.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=A,this.readyState=1,oi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(A.body=g),(this.H||u).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vs(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?Vs(this):oi(this),this.readyState==3&&Fo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Vs(this))},n.Na=function(g){this.g&&(this.response=g,Vs(this))},n.ga=function(){this.g&&Vs(this)};function Vs(g){g.readyState=4,g.l=null,g.j=null,g.B=null,oi(g)}n.setRequestHeader=function(g,A){this.A.append(g,A)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var C=A.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=A.next();return g.join(`\r
`)};function oi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Bn(g){let A="";return Ve(g,function(C,b){A+=b,A+=":",A+=C,A+=`\r
`}),A}function Br(g,A,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=Bn(C),typeof g=="string"?C!=null&&Zi(C):et(g,A,C))}function it(g){wt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(it,wt);var Pi=/^https?$/i,yl=["POST","PUT"];n=it.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,A,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ol.g(),this.g.onreadystatechange=T(h(this.Ca,this));try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(Q){qr(this,Q);return}if(g=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)C.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Q of b.keys())C.set(Q,b.get(Q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(yl,A,void 0)>=0)||b||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of C)this.g.setRequestHeader(Q,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(Q){qr(this,Q)}};function qr(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.o=5,_l(g),ji(g)}function _l(g){g.A||(g.A=!0,Ft(g,"complete"),Ft(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Ft(this,"complete"),Ft(this,"abort"),ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Gr(this):this.Xa())},n.Xa=function(){Gr(this)};function Gr(g){if(g.h&&typeof a<"u"){if(g.v&&ai(g)==4)setTimeout(g.Ca.bind(g),0);else if(Ft(g,"readystatechange"),ai(g)==4){g.h=!1;try{const Q=g.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var C;if(!(C=A)){var b;if(b=Q===0){let ae=String(g.D).match(ec)[1]||null;!ae&&u.self&&u.self.location&&(ae=u.self.location.protocol.slice(0,-1)),b=!Pi.test(ae?ae.toLowerCase():"")}C=b}if(C)Ft(g,"complete"),Ft(g,"success");else{g.o=6;try{var H=ai(g)>2?g.g.statusText:""}catch{H=""}g.l=H+" ["+g.ca()+"]",_l(g)}}finally{ji(g)}}}}function ji(g,A){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,A||Ft(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ai(g){return g.g?g.g.readyState:0}n.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),Zd(A)}};function Qt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function es(g){const A={};g=(g.g&&ai(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(x(g[b]))continue;var C=Wu(g[b]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=A[H]||[];A[H]=Q,Q.push(C)}$e(A,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(g,A,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||A}function Us(g){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,g),this.Za=Vi("retryDelaySeedMs",1e4,g),this.Ta=Vi("forwardChannelMaxRetries",2,g),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new al(g&&g.concurrentRequestLimit),this.Ba=new Ps,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Us.prototype,n.ka=8,n.I=1,n.connect=function(g,A,C,b){Rt(0),this.W=g,this.H=A||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=fc(this,null,this.W),Ui(this)};function vl(g){if(Bo(g),g.I==3){var A=g.V++,C=xt(g.J);if(et(C,"SID",g.M),et(C,"RID",A),et(C,"TYPE","terminate"),Hr(g,C),A=new ii(g,g.j,A),A.M=2,A.A=Lr(xt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(A.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=A.A,C=!0),C||(A.g=dc(A.j,null),A.g.ea(A.A)),A.F=Date.now(),Ri(A)}cc(g)}function Ls(g){g.g&&(Tl(g),g.g.cancel(),g.g=null)}function Bo(g){Ls(g),g.v&&(u.clearTimeout(g.v),g.v=null),Go(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Ui(g){if(!ll(g.h)&&!g.m){g.m=!0;var A=g.Ea;le||D(),ue||(le(),ue=!0),M.add(A,g),g.D=0}}function qo(g,A){return xi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=A.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Ci(h(g.Ea,g,A),uc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const H=new ii(this,this.j,g);let Q=this.o;if(this.U&&(Q?(Q=q(Q),ce(Q,this.U)):Q=this.U),this.u!==null||this.R||(H.J=Q,Q=null),this.S)e:{for(var A=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(A+=b,A>4096){A=C;break e}if(A===4096||C===this.i.length-1){A=C+1;break e}}A=1e3}else A=1e3;A=rc(this,H,A),C=xt(this.J),et(C,"RID",g),et(C,"CVER",22),this.G&&et(C,"X-HTTP-Session-Id",this.G),Hr(this,C),Q&&(this.R?A="headers="+Zi(Bn(Q))+"&"+A:this.u&&Br(C,this.u,Q)),ul(this.h,H),this.Ra&&et(C,"TYPE","init"),this.S?(et(C,"$req",A),et(C,"SID","null"),H.U=!0,wi(H,C,null)):wi(H,C,A),this.I=2}}else this.I==3&&(g?El(this,g):this.i.length==0||ll(this.h)||El(this))};function El(g,A){var C;A?C=A.l:C=g.V++;const b=xt(g.J);et(b,"SID",g.M),et(b,"RID",C),et(b,"AID",g.K),Hr(g,b),g.u&&g.o&&Br(b,g.u,g.o),C=new ii(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),A&&(g.i=A.G.concat(g.i)),A=rc(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),ul(g.h,C),wi(C,b,A)}function Hr(g,A){g.H&&Ve(g.H,function(C,b){et(A,b,C)}),g.l&&Ve({},function(C,b){et(A,b,C)})}function rc(g,A,C){C=Math.min(g.i.length,C);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var H=g.i;let De=-1;for(;;){const Tt=["count="+C];De==-1?C>0?(De=H[0].g,Tt.push("ofs="+De)):De=0:Tt.push("ofs="+De);let We=!0;for(let ht=0;ht<C;ht++){var Q=H[ht].g;const qn=H[ht].map;if(Q-=De,Q<0)De=Math.max(0,H[ht].g-100),We=!1;else try{Q="req"+Q+"_"||"";try{var ae=qn instanceof Map?qn:Object.entries(qn);for(const[Oi,li]of ae){let ui=li;f(li)&&(ui=Ns(li)),Tt.push(Q+Oi+"="+encodeURIComponent(ui))}}catch(Oi){throw Tt.push(Q+"type="+encodeURIComponent("_badmap")),Oi}}catch{b&&b(qn)}}if(We){ae=Tt.join("&");break e}}ae=void 0}return g=g.i.splice(0,C),A.G=g,ae}function oc(g){if(!g.g&&!g.v){g.Y=1;var A=g.Da;le||D(),ue||(le(),ue=!0),M.add(A,g),g.A=0}}function zr(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Ci(h(g.Da,g),uc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,ac(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Ci(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Ls(this),ac(this))};function Tl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function ac(g){g.g=new ii(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var A=xt(g.na);et(A,"RID","rpc"),et(A,"SID",g.M),et(A,"AID",g.K),et(A,"CI",g.F?"0":"1"),!g.F&&g.ia&&et(A,"TO",g.ia),et(A,"TYPE","xmlhttp"),Hr(g,A),g.u&&g.o&&Br(A,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=Lr(xt(A)),C.u=null,C.R=!0,ko(C,g)}n.Va=function(){this.C!=null&&(this.C=null,Ls(this),zr(this),Rt(19))};function Go(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function lc(g,A){var C=null;if(g.g==A){Go(g),Tl(g),g.g=null;var b=2}else if(Di(g.h,A))C=A.G,cl(g.h,A),b=1;else return;if(g.I!=0){if(A.o)if(b==1){C=A.u?A.u.length:0,A=Date.now()-A.F;var H=g.D;b=Mo(),Ft(b,new Si(b,C)),Ui(g)}else oc(g);else if(H=A.m,H==3||H==0&&A.X>0||!(b==1&&qo(g,A)||b==2&&zr(g)))switch(C&&C.length>0&&(A=g.h,A.i=A.i.concat(C)),H){case 1:Li(g,5);break;case 4:Li(g,10);break;case 3:Li(g,6);break;default:Li(g,2)}}}function uc(g,A){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*A}function Li(g,A){if(g.j.info("Error code "+A),A==2){var C=h(g.bb,g),b=g.Ua;const H=!b;b=new wn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||zt(b,"https"),Lr(b),H?ri(b.toString(),C):gl(b.toString(),C)}else Rt(2);g.I=0,g.l&&g.l.pa(A),cc(g),Bo(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function cc(g){if(g.I=0,g.ja=[],g.l){const A=fl(g.h);(A.length!=0||g.i.length!=0)&&(P(g.ja,A),P(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function fc(g,A,C){var b=C instanceof wn?xt(C):new wn(C);if(b.g!="")A&&(b.g=A+"."+b.g),xs(b,b.u);else{var H=u.location;b=H.protocol,A=A?A+"."+H.hostname:H.hostname,H=+H.port;const Q=new wn(null);b&&zt(Q,b),A&&(Q.g=A),H&&xs(Q,H),C&&(Q.h=C),b=Q}return C=g.G,A=g.wa,C&&A&&et(b,C,A),et(b,"VER",g.ka),Hr(g,b),b}function dc(g,A,C){if(A&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Aa&&!g.ma?new it(new ki({ab:C})):new it(g.ma),A.Fa(g.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hc(){}n=hc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Os(){}Os.prototype.g=function(g,A){return new fn(g,A)};function fn(g,A){wt.call(this),this.g=new Us(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(g?g["X-WebChannel-Client-Profile"]=A.sa:g={"X-WebChannel-Client-Profile":A.sa}),this.g.U=g,(g=A&&A.Qb)&&!x(g)&&(this.g.u=g),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!x(A)&&(this.g.G=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new ts(this)}E(fn,wt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){vl(this.g)},fn.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=Ns(g),g=C);A.i.push(new Nt(A.Ya++,g)),A.I==3&&Ui(A)},fn.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,fn.Z.N.call(this)};function pc(g){Jt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const C in A){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}E(pc,Jt);function mc(){Ln.call(this),this.status=1}E(mc,Ln);function ts(g){this.g=g}E(ts,hc),ts.prototype.ra=function(){Ft(this.g,"a")},ts.prototype.qa=function(g){Ft(this.g,new pc(g))},ts.prototype.pa=function(g){Ft(this.g,new mc)},ts.prototype.oa=function(){Ft(this.g,"b")},Os.prototype.createWebChannel=Os.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,ZS=function(){return new Os},WS=function(){return Mo()},XS=Et,Im={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,kf=Vr,rl.COMPLETE="complete",QS=rl,$u.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",wt.prototype.listen=wt.prototype.J,cu=$u,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,JS=it}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});const m0="@firebase/firestore",g0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Td("@firebase/firestore");function va(){return po.logLevel}function pe(n,...e){if(po.logLevel<=Be.DEBUG){const t=e.map(fg);po.debug(`Firestore (${Ka}): ${n}`,...t)}}function Ts(n,...e){if(po.logLevel<=Be.ERROR){const t=e.map(fg);po.error(`Firestore (${Ka}): ${n}`,...t)}}function Ua(n,...e){if(po.logLevel<=Be.WARN){const t=e.map(fg);po.warn(`Firestore (${Ka}): ${n}`,...t)}}function fg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,jS(n,i,t)}function jS(n,e,t){let i=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ts(i),new Error(i)}function je(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||jS(e,o,i)}function xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends vi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class o2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class a2{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new gr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new gr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(je(typeof i.accessToken=="string",31837,{l:i}),new eC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class l2{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u2{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new l2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class y0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new y0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new y0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=f2(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function wm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return om(o)===om(a)?qe(o,a):om(o)?1:-1}return qe(n.length,e.length)}const d2=55296,h2=57343;function om(n){const e=n.charCodeAt(0);return e>=d2&&e<=h2}function La(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="__name__";class Hi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ie(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Hi.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return qe(e.length,t.length)}static compareSegments(e,t){const i=Hi.isNumericId(e),o=Hi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Hi.extractNumericId(e).compare(Hi.extractNumericId(t)):wm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mr.fromString(e.substring(4,e.length-2))}}class lt extends Hi{construct(e,t,i){return new lt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const p2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Hi{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return p2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_0}static keyField(){return new tn([_0])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new de(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new de(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else f==="`"?(u=!u,o++):f!=="."||u?(i+=f,o++):(a(),o++)}if(a(),u)throw new de(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(lt.fromString(e))}static fromName(e){return new Te(lt.fromString(e).popFirst(5))}static empty(){return new Te(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(n,e,t){if(!t)throw new de(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function m2(n,e,t,i){if(e===!0&&i===!0)throw new de(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function v0(n){if(!Te.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function E0(n){if(Te.isDocumentKey(n))throw new de(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ad(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function mo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ad(n);throw new de(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Du(n,e){if(!nC(n))throw new de(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new de(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=-62135596800,A0=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*A0);return new ft(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<T0)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/A0}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Du(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-T0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Lt("string",ft._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new ft(0,0))}static max(){return new be(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=-1;function g2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new ft(t+1,0):new ft(t,i));return new vr(o,Te.empty(),e)}function y2(n){return new vr(n.readTime,n.key,Tu)}class vr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new vr(be.min(),Te.empty(),Tu)}static max(){return new vr(be.max(),Te.empty(),Tu)}}function _2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==v2)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((f=>{++o,f.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let f=0;for(let p=0;p<a;p++){const h=p;t(e[h]).next((_=>{u[h]=_,++f,f===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function T2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $a(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=-1;function Cd(n){return n==null}function Xf(n){return n===0&&1/n==-1/0}function A2(n){return typeof n=="number"&&Number.isInteger(n)&&!Xf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="";function S2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=S0(e)),e=C2(n.get(t),e);return S0(e)}function C2(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case iC:t+="";break;default:t+=a}}return t}function S0(n){return n+iC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tf(this.root,e,this.comparator,!0)}}class Tf{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??en.RED,this.left=o??en.EMPTY,this.right=a??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new en(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new I0(this.data.getIterator())}getIteratorFrom(e){return new I0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class I0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Pn([])}unionWith(e){let t=new Gt(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Pn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new rC("Invalid base64 string: "+a):a}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const I2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=I2.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Tr(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="server_timestamp",aC="__type__",lC="__previous_value__",uC="__local_write_time__";function pg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[aC])==null?void 0:i.stringValue)===oC}function Id(n){const e=n.mapValue.fields[lC];return pg(e)?Id(e):e}function Au(n){const e=Er(n.mapValue.fields[uC].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,t,i,o,a,u,f,p,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=_}}const Wf="(default)";class Su{constructor(e,t){this.projectId=e,this.database=t||Wf}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database===Wf}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="__type__",R2="__max__",Af={mapValue:{}},fC="__vector__",Zf="value";function Ar(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pg(n)?4:N2(n)?9007199254740991:b2(n)?10:11:Ie(28295,{value:n})}function Wi(n,e){if(n===e)return!0;const t=Ar(n);if(t!==Ar(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Au(n).isEqual(Au(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Er(o.timestampValue),f=Er(a.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Tr(o.bytesValue).isEqual(Tr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return It(o.geoPointValue.latitude)===It(a.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return It(o.integerValue)===It(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=It(o.doubleValue),f=It(a.doubleValue);return u===f?Xf(u)===Xf(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return La(n.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},f=a.mapValue.fields||{};if(C0(u)!==C0(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!Wi(u[p],f[p])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function Cu(n,e){return(n.values||[]).find((t=>Wi(t,e)))!==void 0}function Oa(n,e){if(n===e)return 0;const t=Ar(n),i=Ar(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const f=It(a.integerValue||a.doubleValue),p=It(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return w0(n.timestampValue,e.timestampValue);case 4:return w0(Au(n),Au(e));case 5:return wm(n.stringValue,e.stringValue);case 6:return(function(a,u){const f=Tr(a),p=Tr(u);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const f=a.split("/"),p=u.split("/");for(let h=0;h<f.length&&h<p.length;h++){const _=qe(f[h],p[h]);if(_!==0)return _}return qe(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const f=qe(It(a.latitude),It(u.latitude));return f!==0?f:qe(It(a.longitude),It(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return R0(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var T,I,P,B;const f=a.fields||{},p=u.fields||{},h=(T=f[Zf])==null?void 0:T.arrayValue,_=(I=p[Zf])==null?void 0:I.arrayValue,E=qe(((P=h==null?void 0:h.values)==null?void 0:P.length)||0,((B=_==null?void 0:_.values)==null?void 0:B.length)||0);return E!==0?E:R0(h,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Af.mapValue&&u===Af.mapValue)return 0;if(a===Af.mapValue)return 1;if(u===Af.mapValue)return-1;const f=a.fields||{},p=Object.keys(f),h=u.fields||{},_=Object.keys(h);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const T=wm(p[E],_[E]);if(T!==0)return T;const I=Oa(f[p[E]],h[_[E]]);if(I!==0)return I}return qe(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function w0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Er(n),i=Er(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function R0(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Oa(t[o],i[o]);if(a)return a}return qe(t.length,i.length)}function Fa(n){return Rm(n)}function Rm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Er(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Tr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Rm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Rm(t.fields[u])}`;return o+"}"})(n.mapValue):Ie(61005,{value:n})}function Pf(n){switch(Ar(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Id(n);return e?16+Pf(e):16;case 5:return 2*n.stringValue.length;case 6:return Tr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Pf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return wr(i.fields,((a,u)=>{o+=a.length+Pf(u)})),o})(n.mapValue);default:throw Ie(13486,{value:n})}}function b0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bm(n){return!!n&&"integerValue"in n}function mg(n){return!!n&&"arrayValue"in n}function N0(n){return!!n&&"nullValue"in n}function x0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vf(n){return!!n&&"mapValue"in n}function b2(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[cC])==null?void 0:i.stringValue)===fC}function mu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return wr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=mu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mu(n.arrayValue.values[t]);return e}return{...n}}function N2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===R2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(t)}setAll(e){let t=tn.emptyPath(),i={},o=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=f.popLast()}u?i[f.lastSegment()]=mu(u):o.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Vf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){wr(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Cn(mu(this.value))}}function dC(n){const e=[];return wr(n.fields,((t,i)=>{const o=new tn([t]);if(Vf(i)){const a=dC(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t,i,o,a,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new an(e,0,be.min(),be.min(),be.min(),Cn.empty(),0)}static newFoundDocument(e,t,i,o){return new an(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new an(e,2,t,be.min(),be.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,be.min(),be.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t){this.position=e,this.inclusive=t}}function D0(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Te.comparator(Te.fromName(u.referenceValue),t.key):i=Oa(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function M0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t="asc"){this.field=e,this.dir=t}}function x2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{}class Ut extends hC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new M2(e,t,i):t==="array-contains"?new V2(e,i):t==="in"?new U2(e,i):t==="not-in"?new L2(e,i):t==="array-contains-any"?new O2(e,i):new Ut(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new k2(e,i):new P2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oa(t,this.value)):t!==null&&Ar(this.value)===Ar(t)&&this.matchesComparison(Oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends hC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new yi(e,t)}matches(e){return pC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pC(n){return n.op==="and"}function mC(n){return D2(n)&&pC(n)}function D2(n){for(const e of n.filters)if(e instanceof yi)return!1;return!0}function Nm(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+Fa(n.value);if(mC(n))return n.filters.map((e=>Nm(e))).join(",");{const e=n.filters.map((t=>Nm(t))).join(",");return`${n.op}(${e})`}}function gC(n,e){return n instanceof Ut?(function(i,o){return o instanceof Ut&&i.op===o.op&&i.field.isEqual(o.field)&&Wi(i.value,o.value)})(n,e):n instanceof yi?(function(i,o){return o instanceof yi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,f)=>a&&gC(u,o.filters[f])),!0):!1})(n,e):void Ie(19439)}function yC(n){return n instanceof Ut?(function(t){return`${t.field.canonicalString()} ${t.op} ${Fa(t.value)}`})(n):n instanceof yi?(function(t){return t.op.toString()+" {"+t.getFilters().map(yC).join(" ,")+"}"})(n):"Filter"}class M2 extends Ut{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class k2 extends Ut{constructor(e,t){super(e,"in",t),this.keys=_C("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class P2 extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=_C("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _C(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Te.fromName(i.referenceValue)))}class V2 extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mg(t)&&Cu(t.arrayValue,this.value)}}class U2 extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Cu(this.value.arrayValue,t)}}class L2 extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Cu(this.value.arrayValue,t)}}class O2 extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Cu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,t=null,i=[],o=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=f,this.Te=null}}function k0(n,e=null,t=[],i=[],o=null,a=null,u=null){return new F2(n,e,t,i,o,a,u)}function gg(n){const e=xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Nm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Cd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Fa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Fa(i))).join(",")),e.Te=t}return e.Te}function yg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!x2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!M0(n.startAt,e.startAt)&&M0(n.endAt,e.endAt)}function xm(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,t=null,i=[],o=[],a=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function B2(n,e,t,i,o,a,u,f){return new Ja(n,e,t,i,o,a,u,f)}function vC(n){return new Ja(n)}function P0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function EC(n){return n.collectionGroup!==null}function gu(n){const e=xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Gt(tn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Iu(a,i))})),t.has(tn.keyField().canonicalString())||e.Ie.push(new Iu(tn.keyField(),i))}return e.Ie}function zi(n){const e=xe(n);return e.Ee||(e.Ee=q2(e,gu(n))),e.Ee}function q2(n,e){if(n.limitType==="F")return k0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new Iu(o.field,a)}));const t=n.endAt?new jf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new jf(n.startAt.position,n.startAt.inclusive):null;return k0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Dm(n,e){const t=n.filters.concat([e]);return new Ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Mm(n,e,t){return new Ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wd(n,e){return yg(zi(n),zi(e))&&n.limitType===e.limitType}function TC(n){return`${gg(zi(n))}|lt:${n.limitType}`}function Ea(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>yC(o))).join(", ")}]`),Cd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Fa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Fa(o))).join(",")),`Target(${i})`})(zi(n))}; limitType=${n.limitType})`}function Rd(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Te.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of gu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,f,p){const h=D0(u,f,p);return u.inclusive?h<=0:h<0})(i.startAt,gu(i),o)||i.endAt&&!(function(u,f,p){const h=D0(u,f,p);return u.inclusive?h>=0:h>0})(i.endAt,gu(i),o))})(n,e)}function G2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AC(n){return(e,t)=>{let i=!1;for(const o of gu(n)){const a=H2(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function H2(n,e,t){const i=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(a,u,f){const p=u.data.field(a),h=f.data.field(a);return p!==null&&h!==null?Oa(p,h):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){wr(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return sC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new gt(Te.comparator);function As(){return z2}const SC=new gt(Te.comparator);function fu(...n){let e=SC;for(const t of n)e=e.insert(t.key,t);return e}function CC(n){let e=SC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function uo(){return yu()}function IC(){return yu()}function yu(){return new So((n=>n.toString()),((n,e)=>n.isEqual(e)))}const K2=new gt(Te.comparator),Y2=new Gt(Te.comparator);function Ge(...n){let e=Y2;for(const t of n)e=e.add(t);return e}const $2=new Gt(qe);function J2(){return $2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xf(e)?"-0":e}}function wC(n){return{integerValue:""+n}}function Q2(n,e){return A2(e)?wC(e):_g(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(){this._=void 0}}function X2(n,e,t){return n instanceof ed?(function(o,a){const u={fields:{[aC]:{stringValue:oC},[uC]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&pg(a)&&(a=Id(a)),a&&(u.fields[lC]=a),{mapValue:u}})(t,e):n instanceof wu?bC(n,e):n instanceof Ru?NC(n,e):(function(o,a){const u=RC(o,a),f=V0(u)+V0(o.Ae);return bm(u)&&bm(o.Ae)?wC(f):_g(o.serializer,f)})(n,e)}function W2(n,e,t){return n instanceof wu?bC(n,e):n instanceof Ru?NC(n,e):t}function RC(n,e){return n instanceof td?(function(i){return bm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class ed extends bd{}class wu extends bd{constructor(e){super(),this.elements=e}}function bC(n,e){const t=xC(e);for(const i of n.elements)t.some((o=>Wi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Ru extends bd{constructor(e){super(),this.elements=e}}function NC(n,e){let t=xC(e);for(const i of n.elements)t=t.filter((o=>!Wi(o,i)));return{arrayValue:{values:t}}}class td extends bd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function V0(n){return It(n.integerValue||n.doubleValue)}function xC(n){return mg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Z2(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof wu&&o instanceof wu||i instanceof Ru&&o instanceof Ru?La(i.elements,o.elements,Wi):i instanceof td&&o instanceof td?Wi(i.Ae,o.Ae):i instanceof ed&&o instanceof ed})(n.transform,e.transform)}class j2{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Nd{}function DC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xd(n.key,Vn.none()):new Mu(n.key,n.data,Vn.none());{const t=n.data,i=Cn.empty();let o=new Gt(tn.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Rr(n.key,i,new Pn(o.toArray()),Vn.none())}}function eD(n,e,t){n instanceof Mu?(function(o,a,u){const f=o.value.clone(),p=L0(o.fieldTransforms,a,u.transformResults);f.setAll(p),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Rr?(function(o,a,u){if(!Uf(o.precondition,a))return void a.convertToUnknownDocument(u.version);const f=L0(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll(MC(o)),p.setAll(f),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function _u(n,e,t,i){return n instanceof Mu?(function(a,u,f,p){if(!Uf(a.precondition,u))return f;const h=a.value.clone(),_=O0(a.fieldTransforms,p,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Rr?(function(a,u,f,p){if(!Uf(a.precondition,u))return f;const h=O0(a.fieldTransforms,p,u),_=u.data;return _.setAll(MC(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,f){return Uf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function tD(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=RC(i.transform,o||null);a!=null&&(t===null&&(t=Cn.empty()),t.set(i.field,a))}return t||null}function U0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&La(i,o,((a,u)=>Z2(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Mu extends Nd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Rr extends Nd{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function MC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function L0(n,e,t){const i=new Map;je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,f=e.data.field(a.field);i.set(a.field,W2(u,f,t[o]))}return i}function O0(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,X2(a,u,e))}return i}class xd extends Nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nD extends Nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&eD(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=_u(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=_u(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=IC();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(o.key)?null:f;const p=DC(u,f);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(be.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,((t,i)=>U0(t,i)))&&La(this.baseMutations,e.baseMutations,((t,i)=>U0(t,i)))}}class vg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){je(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return K2})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new vg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ye;function oD(n){switch(n){case ee.OK:return Ie(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function kC(n){if(n===void 0)return Ts("GRPC error has no .code"),ee.UNKNOWN;switch(n){case Vt.OK:return ee.OK;case Vt.CANCELLED:return ee.CANCELLED;case Vt.UNKNOWN:return ee.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return ee.INTERNAL;case Vt.UNAVAILABLE:return ee.UNAVAILABLE;case Vt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Vt.NOT_FOUND:return ee.NOT_FOUND;case Vt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Vt.ABORTED:return ee.ABORTED;case Vt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Vt.DATA_LOSS:return ee.DATA_LOSS;default:return Ie(39323,{code:n})}}(Ye=Vt||(Vt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new mr([4294967295,4294967295],0);function F0(n){const e=aD().encode(n),t=new $S;return t.update(e),new Uint8Array(t.digest())}function B0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mr([t,i],0),new mr([o,a],0)]}class Eg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new du(`Invalid padding: ${t}`);if(i<0)throw new du(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new du(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new du(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=mr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(mr.fromNumber(i)));return o.compare(lD)===1&&(o=new mr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=F0(e),[i,o]=B0(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Eg(a,o,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=F0(e),[i,o]=B0(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Dd(be.min(),o,new gt(qe),As(),Ge())}}class ku{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ku(i,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class PC{constructor(e,t){this.targetId=e,this.Ce=t}}class VC{constructor(e,t,i=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class q0{constructor(){this.ve=0,this.Fe=G0(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),i=Ge();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie(38017,{changeType:a})}})),new ku(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=G0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uD{constructor(e){this.Ge=e,this.ze=new Map,this.je=As(),this.Je=Sf(),this.He=Sf(),this.Ye=new gt(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(xm(a))if(i===0){const u=new Te(a.path);this.et(t,u,an.newNoDocument(u,be.min()))}else je(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),p=f?this.ct(f,e,u):1;if(p!==0){this.it(t);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,f;try{u=Tr(i).toUint8Array()}catch(p){if(p instanceof rC)return Ua("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Eg(u,o,a)}catch(p){return Ua(p instanceof du?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const f=this.ot(u);if(f){if(a.current&&xm(f.target)){const p=new Te(f.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,an.newNoDocument(p,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=Ge();this.He.forEach(((a,u)=>{let f=!0;u.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Dd(e,t,this.Ye,this.je,i);return this.je=As(),this.Je=Sf(),this.He=Sf(),this.Ye=new gt(qe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new q0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gt(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gt(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new q0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Sf(){return new gt(Te.comparator)}function G0(){return new gt(Te.comparator)}const cD={asc:"ASCENDING",desc:"DESCENDING"},fD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dD={and:"AND",or:"OR"};class hD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function km(n,e){return n.useProto3Json||Cd(e)?e:{value:e}}function nd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function pD(n,e){return nd(n,e.toTimestamp())}function Ki(n){return je(!!n,49232),be.fromTimestamp((function(t){const i=Er(t);return new ft(i.seconds,i.nanos)})(n))}function Tg(n,e){return Pm(n,e).canonicalString()}function Pm(n,e){const t=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function LC(n){const e=lt.fromString(n);return je(GC(e),10190,{key:e.toString()}),e}function Vm(n,e){return Tg(n.databaseId,e.path)}function am(n,e){const t=LC(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(FC(t))}function OC(n,e){return Tg(n.databaseId,e)}function mD(n){const e=LC(n);return e.length===4?lt.emptyPath():FC(e)}function Um(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FC(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function H0(n,e,t){return{name:Vm(n,e),fields:t.value.mapValue.fields}}function gD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ie(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(je(_===void 0||typeof _=="string",58123),nn.fromBase64String(_||"")):(je(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),nn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const _=h.code===void 0?ee.UNKNOWN:kC(h.code);return new de(_,h.message||"")})(u);t=new VC(i,o,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=am(n,i.document.name),a=Ki(i.document.updateTime),u=i.document.createTime?Ki(i.document.createTime):be.min(),f=new Cn({mapValue:{fields:i.document.fields}}),p=an.newFoundDocument(o,a,u,f),h=i.targetIds||[],_=i.removedTargetIds||[];t=new Lf(h,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=am(n,i.document),a=i.readTime?Ki(i.readTime):be.min(),u=an.newNoDocument(o,a),f=i.removedTargetIds||[];t=new Lf([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=am(n,i.document),a=i.removedTargetIds||[];t=new Lf([],a,o,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new rD(o,a),f=i.targetId;t=new PC(f,u)}}return t}function yD(n,e){let t;if(e instanceof Mu)t={update:H0(n,e.key,e.value)};else if(e instanceof xd)t={delete:Vm(n,e.key)};else if(e instanceof Rr)t={update:H0(n,e.key,e.data),updateMask:wD(e.fieldMask)};else{if(!(e instanceof nD))return Ie(16599,{Vt:e.type});t={verify:Vm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const f=u.transform;if(f instanceof ed)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof wu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ru)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof td)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ie(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:pD(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)})(n,e.precondition)),t}function _D(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Ki(o.updateTime):Ki(a);return u.isEqual(be.min())&&(u=Ki(a)),new j2(u,o.transformResults||[])})(t,e)))):[]}function vD(n,e){return{documents:[OC(n,e.path)]}}function ED(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=OC(n,o);const a=(function(h){if(h.length!==0)return qC(yi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(T){return{field:Ta(T.field),direction:SD(T.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=km(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function TD(n){let e=mD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){je(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const T=BC(E);return T instanceof yi&&mC(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((T=>(function(P){return new Iu(Aa(P.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let T;return T=typeof E=="object"?E.value:E,Cd(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(E){const T=!!E.before,I=E.values||[];return new jf(I,T)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const T=!E.before,I=E.values||[];return new jf(I,T)})(t.endAt)),B2(e,o,u,a,f,"F",p,h)}function AD(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Aa(t.unaryFilter.field);return Ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Aa(t.unaryFilter.field);return Ut.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Aa(t.unaryFilter.field);return Ut.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Aa(t.unaryFilter.field);return Ut.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ut.create(Aa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return yi.create(t.compositeFilter.filters.map((i=>BC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function SD(n){return cD[n]}function CD(n){return fD[n]}function ID(n){return dD[n]}function Ta(n){return{fieldPath:n.canonicalString()}}function Aa(n){return tn.fromServerFormat(n.fieldPath)}function qC(n){return n instanceof Ut?(function(t){if(t.op==="=="){if(x0(t.value))return{unaryFilter:{field:Ta(t.field),op:"IS_NAN"}};if(N0(t.value))return{unaryFilter:{field:Ta(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(x0(t.value))return{unaryFilter:{field:Ta(t.field),op:"IS_NOT_NAN"}};if(N0(t.value))return{unaryFilter:{field:Ta(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ta(t.field),op:CD(t.op),value:t.value}}})(n):n instanceof yi?(function(t){const i=t.getFilters().map((o=>qC(o)));return i.length===1?i[0]:{compositeFilter:{op:ID(t.op),filters:i}}})(n):Ie(54877,{filter:n})}function wD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function GC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t,i,o,a=be.min(),u=be.min(),f=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.yt=e}}function bD(n){const e=TD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.Cn=new xD}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(vr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(vr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class xD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Gt(lt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Gt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HC=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(HC,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ba(0)}static cr(){return new Ba(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="LruGarbageCollector",DD=1048576;function Y0([n,e],[t,i]){const o=qe(n,t);return o===0?qe(e,i):o}class MD{constructor(e){this.Ir=e,this.buffer=new Gt(Y0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Y0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kD{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(K0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$a(t)?pe(K0,"Ignoring IndexedDB error during garbage collection: ",t):await Ya(t)}await this.Vr(3e5)}))}}class PD{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Sd.ce);const i=new MD(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(z0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,f,p,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),va()<=Be.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(f-u)+`ms
	Removed ${a} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(h-p)+`ms
Total Duration: ${h-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function VD(n,e){return new PD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(){this.changes=new So((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&_u(i.mutation,o,Pn.empty(),ft.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ge()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ge()){const o=uo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=fu();return a.forEach(((f,p)=>{u=u.insert(f,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=uo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ge())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,o){let a=As();const u=yu(),f=(function(){return yu()})();return t.forEach(((p,h)=>{const _=i.get(h.key);o.has(h.key)&&(_===void 0||_.mutation instanceof Rr)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),_u(_.mutation,h,_.mutation.getFieldMask(),ft.now())):u.set(h.key,Pn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>f.set(h,new LD(_,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=yu();let o=new gt(((u,f)=>u-f)),a=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((p=>{const h=t.get(p);if(h===null)return;let _=i.get(p)||Pn.empty();_=f.applyToLocalView(h,_),i.set(p,_);const E=(o.get(f.batchId)||Ge()).add(p);o=o.insert(f.batchId,E)}))})).next((()=>{const u=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),h=p.key,_=p.value,E=IC();_.forEach((T=>{if(!a.has(T)){const I=DC(t.get(T),i.get(T));I!==null&&E.set(T,I),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):EC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(uo());let f=Tu,p=a;return u.next((h=>se.forEach(h,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),a.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{p=p.insert(_,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,p,h,Ge()))).next((_=>({batchId:f,changes:CC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((i=>{let o=fu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=fu();return this.indexManager.getCollectionParents(e,a).next((f=>se.forEach(f,(p=>{const h=(function(E,T){return new Ja(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((_=>{_.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,an.newInvalidDocument(_)))}));let f=fu();return u.forEach(((p,h)=>{const _=a.get(p);_!==void 0&&_u(_.mutation,h,Pn.empty(),ft.now()),Rd(t,h)&&(f=f.insert(p,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ki(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:bD(o.bundledQuery),readTime:Ki(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.overlays=new gt(Te.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=uo();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=uo(),a=t.length+1,u=new Te(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,h=p.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new gt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=uo(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const f=uo(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,_)=>f.set(h,_))),!(f.size()>=o)););return se.resolve(f)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new sD(t,i));let a=this.qr.get(t);a===void 0&&(a=Ge(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this.Qr=new Gt(Yt.$r),this.Ur=new Gt(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Yt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Yt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Te(new lt([])),i=new Yt(t,e),o=new Yt(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new lt([])),i=new Yt(t,e),o=new Yt(t,e+1);let a=Ge();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Yt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Yt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gt(Yt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new iD(a,t,i,o);this.mutationQueue.push(u);for(const f of o)this.Zr=this.Zr.add(new Yt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?hg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Yt(t,0),o=new Yt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const f=this.Xr(u.Yr);a.push(f)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Gt(qe);return t.forEach((o=>{const a=new Yt(o,0),u=new Yt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(f=>{i=i.add(f.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Te.isDocumentKey(a)||(a=a.child(""));const u=new Yt(new Te(a),0);let f=new Gt(qe);return this.Zr.forEachWhile((p=>{const h=p.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(f=f.add(p.Yr)),!0)}),u),se.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(o=>{const a=new Yt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Yt(t,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e){this.ri=e,this.docs=(function(){return new gt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let i=As();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():an.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=As();const u=t.path,f=new Te(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:h,value:{document:_}}=p.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||_2(y2(_),i)<=0||(o.has(_.key)||Rd(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ie(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new zD(this)}getSize(e){return se.resolve(this.size)}}class zD extends UD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.persistence=e,this.si=new So((t=>gg(t)),yg),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new Ag,this.targetCount=0,this.ai=Ba.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ba(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t){this.ui={},this.overlays={},this.ci=new Sd(0),this.li=!1,this.li=!0,this.hi=new qD,this.referenceDelegate=e(this),this.Pi=new KD(this),this.indexManager=new ND,this.remoteDocumentCache=(function(o){return new HD(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new RD(t),this.Ii=new FD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new GD(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const o=new YD(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class YD extends E2{constructor(e){super(),this.currentSequenceNumber=e}}class Sg{constructor(e){this.persistence=e,this.Ri=new Ag,this.Vi=null}static mi(e){return new Sg(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=Te.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,be.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class id{constructor(e,t){this.persistence=e,this.pi=new So((i=>S2(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=VD(this,t)}static mi(e,t){return new id(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,a.removeEntry(u,be.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pf(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ge(),o=Ge();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Cg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return LN()?8:T2(un())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new $D;return this.Ss(e,t,u).next((f=>{if(a.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(va()<=Be.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Ea(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(va()<=Be.DEBUG&&pe("QueryEngine","Query:",Ea(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(va()<=Be.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Ea(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zi(t))):se.resolve())}ys(e,t){if(P0(t))return se.resolve(null);let i=zi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Mm(t,null,"F"),i=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Ge(...a);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const h=this.Ds(t,f);return this.Cs(t,h,u,p.readTime)?this.ys(e,Mm(t,null,"F")):this.vs(e,h,t,p)}))))})))))}ws(e,t,i,o){return P0(t)||o.isEqual(be.min())?se.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?se.resolve(null):(va()<=Be.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ea(t)),this.vs(e,u,t,g2(o,Tu)).next((f=>f)))}))}Ds(e,t){let i=new Gt(AC(e));return t.forEach(((o,a)=>{Rd(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return va()<=Be.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Ea(t)),this.ps.getDocumentsMatchingQuery(e,t,vr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="LocalStore",QD=3e8;class XD{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new gt(qe),this.xs=new So((a=>gg(a)),yg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function WD(n,e,t,i){return new XD(n,e,t,i)}async function KC(n,e){const t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],f=[];let p=Ge();for(const h of o){u.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}for(const h of a){f.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function ZD(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,p,h,_){const E=h.batch,T=E.keys();let I=se.resolve();return T.forEach((P=>{I=I.next((()=>_.getEntry(p,P))).next((B=>{const L=h.docVersions.get(P);je(L!==null,48541),B.version.compareTo(L)<0&&(E.applyToRemoteDocument(B,h),B.isValidDocument()&&(B.setReadTime(h.commitVersion),_.addEntry(B)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=Ge();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(p=p.add(f.batch.mutations[h].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function YC(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function jD(n,e){const t=xe(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const f=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;f.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,E))));let I=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(nn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,i)),o=o.insert(E,I),(function(B,L,J){return B.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=QD?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(T,I,_)&&f.push(t.Pi.updateTargetData(a,I))}));let p=As(),h=Ge();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),f.push(eM(a,u,e.documentUpdates).next((_=>{p=_.ks,h=_.qs}))),!i.isEqual(be.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));f.push(_)}return se.waitFor(f).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,h))).next((()=>p))})).then((a=>(t.Ms=o,a)))}function eM(n,e,t){let i=Ge(),o=Ge();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=As();return t.forEach(((f,p)=>{const h=a.get(f);p.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(be.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):pe(Ig,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",p.version)})),{ks:u,qs:o}}))}function tM(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=hg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function nM(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new dr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Lm(n,e,t){const i=xe(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!$a(u))throw u;pe(Ig,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function $0(n,e,t){const i=xe(n);let o=be.min(),a=Ge();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,h,_){const E=xe(p),T=E.xs.get(_);return T!==void 0?se.resolve(E.Ms.get(T)):E.Pi.getTargetData(h,_)})(i,u,zi(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((p=>{a=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:be.min(),t?a:Ge()))).next((f=>(iM(i,G2(e),f),{documents:f,Qs:a})))))}function iM(n,e,t){let i=n.Os.get(e)||be.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class J0{constructor(){this.activeTargetIds=J2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sM{constructor(){this.Mo=new J0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new J0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="ConnectivityMonitor";class X0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(Q0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(Q0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf=null;function Om(){return Cf===null?Cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cf++,"0x"+Cf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="RestConnection",oM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Wf?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=Om(),f=this.zo(e,t.toUriEncodedString());pe(lm,`Sending RPC '${e}' ${u}:`,f,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,a);const{host:h}=new URL(f),_=Ha(h);return this.Jo(e,f,p,i,_).then((E=>(pe(lm,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Ua(lm,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",i),E}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ka})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=oM[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class uM extends aM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=Om();return new Promise(((f,p)=>{const h=new JS;h.setWithCredentials(!0),h.listenOnce(QS.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case kf.NO_ERROR:const E=h.getResponseJson();pe(rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case kf.TIMEOUT:pe(rn,`RPC '${e}' ${u} timed out`),p(new de(ee.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const T=h.getStatus();if(pe(rn,`RPC '${e}' ${u} failed with status:`,T,"response text:",h.getResponseText()),T>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const P=I==null?void 0:I.error;if(P&&P.status&&P.message){const B=(function(J){const ie=J.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ie)>=0?ie:ee.UNKNOWN})(P.status);p(new de(B,P.message))}else p(new de(ee.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new de(ee.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{pe(rn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);pe(rn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Om(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ZS(),f=WS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(p.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=a.join("");pe(rn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=u.createWebChannel(_,p);this.I_(E);let T=!1,I=!1;const P=new lM({Yo:L=>{I?pe(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(T||(pe(rn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),pe(rn,`RPC '${e}' stream ${o} sending:`,L),E.send(L))},Zo:()=>E.close()}),B=(L,J,ie)=>{L.listen(J,(Z=>{try{ie(Z)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return B(E,cu.EventType.OPEN,(()=>{I||(pe(rn,`RPC '${e}' stream ${o} transport opened.`),P.o_())})),B(E,cu.EventType.CLOSE,(()=>{I||(I=!0,pe(rn,`RPC '${e}' stream ${o} transport closed`),P.a_(),this.E_(E))})),B(E,cu.EventType.ERROR,(L=>{I||(I=!0,Ua(rn,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),P.a_(new de(ee.UNAVAILABLE,"The operation could not be completed")))})),B(E,cu.EventType.MESSAGE,(L=>{var J;if(!I){const ie=L.data[0];je(!!ie,16349);const Z=ie,oe=(Z==null?void 0:Z.error)||((J=Z[0])==null?void 0:J.error);if(oe){pe(rn,`RPC '${e}' stream ${o} received error:`,oe);const le=oe.status;let ue=(function(N){const V=Vt[N];if(V!==void 0)return kC(V)})(le),M=oe.message;ue===void 0&&(ue=ee.INTERNAL,M="Unknown error status: "+le+" with message "+oe.message),I=!0,P.a_(new de(ue,M)),E.close()}else pe(rn,`RPC '${e}' stream ${o} received:`,ie),P.u_(ie)}})),B(f,XS.STAT_EVENT,(L=>{L.stat===Im.PROXY?pe(rn,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Im.NOPROXY&&pe(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(n){return new hD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="PersistentStream";class JC{constructor(e,t,i,o,a,u,f,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $C(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Ts(t.toString()),Ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new de(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(W0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(pe(W0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class cM extends JC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=gD(this.serializer,e),i=(function(a){if(!("targetChange"in a))return be.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?Ki(u.readTime):be.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Um(this.serializer),t.addTarget=(function(a,u){let f;const p=u.target;if(f=xm(p)?{documents:vD(a,p)}:{query:ED(a,p).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=UC(a,u.resumeToken);const h=km(a,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(be.min())>0){f.readTime=nd(a,u.snapshotVersion.toTimestamp());const h=km(a,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=AD(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Um(this.serializer),t.removeTarget=e,this.q_(t)}}class fM extends JC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_D(e.writeResults,e.commitTime),i=Ki(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Um(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>yD(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{}class hM extends dM{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Pm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(ee.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,Pm(t,i),o,u,f,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(ee.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class pM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ts(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="RemoteStore";class mM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Co(this)&&(pe(go,"Restarting streams for network reachability change."),await(async function(p){const h=xe(p);h.Ea.add(4),await Pu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await kd(h)})(this))}))})),this.Ra=new pM(i,o)}}async function kd(n){if(Co(n))for(const e of n.da)await e(!0)}async function Pu(n){for(const e of n.da)await e(!1)}function QC(n,e){const t=xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ng(t)?bg(t):Qa(t).O_()&&Rg(t,e))}function wg(n,e){const t=xe(n),i=Qa(t);t.Ia.delete(e),i.O_()&&XC(t,e),t.Ia.size===0&&(i.O_()?i.L_():Co(t)&&t.Ra.set("Unknown"))}function Rg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qa(n).Y_(e)}function XC(n,e){n.Va.Ue(e),Qa(n).Z_(e)}function bg(n){n.Va=new uD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Qa(n).start(),n.Ra.ua()}function Ng(n){return Co(n)&&!Qa(n).x_()&&n.Ia.size>0}function Co(n){return xe(n).Ea.size===0}function WC(n){n.Va=void 0}async function gM(n){n.Ra.set("Online")}async function yM(n){n.Ia.forEach(((e,t)=>{Rg(n,e)}))}async function _M(n,e){WC(n),Ng(n)?(n.Ra.ha(e),bg(n)):n.Ra.set("Unknown")}async function vM(n,e,t){if(n.Ra.set("Online"),e instanceof VC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const f of a.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,u),o.Ia.delete(f),o.Va.removeTarget(f))})(n,e)}catch(i){pe(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await sd(n,i)}else if(e instanceof Lf?n.Va.Ze(e):e instanceof PC?n.Va.st(e):n.Va.tt(e),!t.isEqual(be.min()))try{const i=await YC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const f=a.Va.Tt(u);return f.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(p.resumeToken,u))}})),f.targetMismatches.forEach(((p,h)=>{const _=a.Ia.get(p);if(!_)return;a.Ia.set(p,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),XC(a,p);const E=new dr(_.target,p,h,_.sequenceNumber);Rg(a,E)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){pe(go,"Failed to raise snapshot:",i),await sd(n,i)}}async function sd(n,e,t){if(!$a(e))throw e;n.Ea.add(1),await Pu(n),n.Ra.set("Offline"),t||(t=()=>YC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(go,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await kd(n)}))}function ZC(n,e){return e().catch((t=>sd(n,t,e)))}async function Pd(n){const e=xe(n),t=Sr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;EM(e);)try{const o=await tM(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,TM(e,o)}catch(o){await sd(e,o)}jC(e)&&eI(e)}function EM(n){return Co(n)&&n.Ta.length<10}function TM(n,e){n.Ta.push(e);const t=Sr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function jC(n){return Co(n)&&!Sr(n).x_()&&n.Ta.length>0}function eI(n){Sr(n).start()}async function AM(n){Sr(n).ra()}async function SM(n){const e=Sr(n);for(const t of n.Ta)e.ea(t.mutations)}async function CM(n,e,t){const i=n.Ta.shift(),o=vg.from(i,e,t);await ZC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Pd(n)}async function IM(n,e){e&&Sr(n).X_&&await(async function(i,o){if((function(u){return oD(u)&&u!==ee.ABORTED})(o.code)){const a=i.Ta.shift();Sr(i).B_(),await ZC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Pd(i)}})(n,e),jC(n)&&eI(n)}async function Z0(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),pe(go,"RemoteStore received new credentials");const i=Co(t);t.Ea.add(3),await Pu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await kd(t)}async function wM(n,e){const t=xe(n);e?(t.Ea.delete(2),await kd(t)):e||(t.Ea.add(2),await Pu(t),t.Ra.set("Unknown"))}function Qa(n){return n.ma||(n.ma=(function(t,i,o){const a=xe(t);return a.sa(),new cM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:gM.bind(null,n),t_:yM.bind(null,n),r_:_M.bind(null,n),H_:vM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Ng(n)?bg(n):n.Ra.set("Unknown")):(await n.ma.stop(),WC(n))}))),n.ma}function Sr(n){return n.fa||(n.fa=(function(t,i,o){const a=xe(t);return a.sa(),new fM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:AM.bind(null,n),r_:IM.bind(null,n),ta:SM.bind(null,n),na:CM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Pd(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(go,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,f=new xg(e,t,u,o,a);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dg(n,e){if(Ts("AsyncQueue",`${e}: ${n}`),$a(n))return new de(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{static emptySet(e){return new Ra(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=fu(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ra)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ra;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(){this.ga=new gt(Te.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class qa{constructor(e,t,i,o,a,u,f,p,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new qa(e,t,Ra.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class bM{constructor(){this.queries=eT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=xe(t),a=o.queries;o.queries=eT(),a.forEach(((u,f)=>{for(const p of f.Sa)p.onError(i)}))})(this,new de(ee.ABORTED,"Firestore shutting down"))}}function eT(){return new So((n=>TC(n)),wd)}async function NM(n,e){const t=xe(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new RM,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const f=Dg(u,`Initialization of query '${Ea(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Mg(t)}async function xM(n,e){const t=xe(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function DM(n,e){const t=xe(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const f of u.Sa)f.Fa(o)&&(i=!0);u.wa=o}}i&&Mg(t)}function MM(n,e,t){const i=xe(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function Mg(n){n.Ca.forEach((e=>{e.next()}))}var Fm,tT;(tT=Fm||(Fm={})).Ma="default",tT.Cache="cache";class kM{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.key=e}}class nI{constructor(e){this.key=e}}class PM{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=AC(e),this.tu=new Ra(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new j0,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),I=Rd(this.query,E)?E:null,P=!!T&&this.mutatedKeys.has(T.key),B=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let L=!1;T&&I?T.data.isEqual(I.data)?P!==B&&(i.track({type:3,doc:I}),L=!0):this.su(T,I)||(i.track({type:2,doc:I}),L=!0,(p&&this.eu(I,p)>0||h&&this.eu(I,h)<0)&&(f=!0)):!T&&I?(i.track({type:0,doc:I}),L=!0):T&&!I&&(i.track({type:1,doc:T}),L=!0,(p||h)&&(f=!0)),L&&(I?(u=u.add(I),a=B?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,E)=>(function(I,P){const B=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:L})}};return B(I)-B(P)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,h=p!==this.Za;return this.Za=p,u.length!==0||h?{snapshot:new qa(this.query,e.tu,a,u,e.mutatedKeys,p===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new j0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new nI(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new tI(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kg="SyncEngine";class VM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class UM{constructor(e){this.key=e,this.hu=!1}}class LM{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new So((f=>TC(f)),wd),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Te.comparator),this.Au=new Map,this.Ru=new Ag,this.Vu={},this.mu=new Map,this.fu=Ba.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OM(n,e,t=!0){const i=lI(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await iI(i,e,t,!0),o}async function FM(n,e){const t=lI(n);await iI(t,e,!0,!1)}async function iI(n,e,t,i){const o=await nM(n.localStore,zi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let f;return i&&(f=await BM(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&QC(n.remoteStore,o),f}async function BM(n,e,t,i,o){n.pu=(E,T,I)=>(async function(B,L,J,ie){let Z=L.view.ru(J);Z.Cs&&(Z=await $0(B.localStore,L.query,!1).then((({documents:M})=>L.view.ru(M,Z))));const oe=ie&&ie.targetChanges.get(L.targetId),le=ie&&ie.targetMismatches.get(L.targetId)!=null,ue=L.view.applyChanges(Z,B.isPrimaryClient,oe,le);return iT(B,L.targetId,ue.au),ue.snapshot})(n,E,T,I);const a=await $0(n.localStore,e,!0),u=new PM(e,a.Qs),f=u.ru(a.documents),p=ku.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(f,n.isPrimaryClient,p);iT(n,t,h.au);const _=new VM(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function qM(n,e,t){const i=xe(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!wd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Lm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&wg(i.remoteStore,o.targetId),Bm(i,o.targetId)})).catch(Ya)):(Bm(i,o.targetId),await Lm(i.localStore,o.targetId,!0))}async function GM(n,e){const t=xe(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),wg(t.remoteStore,i.targetId))}async function HM(n,e,t){const i=XM(n);try{const o=await(function(u,f){const p=xe(u),h=ft.now(),_=f.reduce(((I,P)=>I.add(P.key)),Ge());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=As(),B=Ge();return p.Ns.getEntries(I,_).next((L=>{P=L,P.forEach(((J,ie)=>{ie.isValidDocument()||(B=B.add(J))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,P))).next((L=>{E=L;const J=[];for(const ie of f){const Z=tD(ie,E.get(ie.key).overlayedDocument);Z!=null&&J.push(new Rr(ie.key,Z,dC(Z.value.mapValue),Vn.exists(!0)))}return p.mutationQueue.addMutationBatch(I,h,J,f)})).next((L=>{T=L;const J=L.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(I,L.batchId,J)}))})).then((()=>({batchId:T.batchId,changes:CC(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,f,p){let h=u.Vu[u.currentUser.toKey()];h||(h=new gt(qe)),h=h.insert(f,p),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await Vu(i,o.changes),await Pd(i.remoteStore)}catch(o){const a=Dg(o,"Failed to persist write");t.reject(a)}}async function sI(n,e){const t=xe(n);try{const i=await jD(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?je(u.hu,14607):o.removedDocuments.size>0&&(je(u.hu,42227),u.hu=!1))})),await Vu(t,i,e)}catch(i){await Ya(i)}}function nT(n,e,t){const i=xe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const f=u.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(u,f){const p=xe(u);p.onlineState=f;let h=!1;p.queries.forEach(((_,E)=>{for(const T of E.Sa)T.va(f)&&(h=!0)})),h&&Mg(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function zM(n,e,t){const i=xe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new gt(Te.comparator);u=u.insert(a,an.newNoDocument(a,be.min()));const f=Ge().add(a),p=new Dd(be.min(),new Map,new gt(qe),u,f);await sI(i,p),i.du=i.du.remove(a),i.Au.delete(e),Pg(i)}else await Lm(i.localStore,e,!1).then((()=>Bm(i,e,t))).catch(Ya)}async function KM(n,e){const t=xe(n),i=e.batch.batchId;try{const o=await ZD(t.localStore,e);oI(t,i,null),rI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Vu(t,o)}catch(o){await Ya(o)}}async function YM(n,e,t){const i=xe(n);try{const o=await(function(u,f){const p=xe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return p.mutationQueue.lookupMutationBatch(h,f).next((E=>(je(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(h,E)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,_,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>p.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);oI(i,e,t),rI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Vu(i,o)}catch(o){await Ya(o)}}function rI(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function oI(n,e,t){const i=xe(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Bm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||aI(n,i)}))}function aI(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(wg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Pg(n))}function iT(n,e,t){for(const i of t)i instanceof tI?(n.Ru.addReference(i.key,e),$M(n,i)):i instanceof nI?(pe(kg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||aI(n,i.key)):Ie(19791,{wu:i})}function $M(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(pe(kg,"New document in limbo: "+t),n.Eu.add(i),Pg(n))}function Pg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(lt.fromString(e)),i=n.fu.next();n.Au.set(i,new UM(t)),n.du=n.du.insert(t,i),QC(n.remoteStore,new dr(zi(vC(t.path)),i,"TargetPurposeLimboResolution",Sd.ce))}}async function Vu(n,e,t){const i=xe(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{u.push(i.pu(p,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const E=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(h){o.push(h);const E=Cg.As(p.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(p,h){const _=xe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(h,(T=>se.forEach(T.Es,(I=>_.persistence.referenceDelegate.addReference(E,T.targetId,I))).next((()=>se.forEach(T.ds,(I=>_.persistence.referenceDelegate.removeReference(E,T.targetId,I)))))))))}catch(E){if(!$a(E))throw E;pe(Ig,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const I=_.Ms.get(T),P=I.snapshotVersion,B=I.withLastLimboFreeSnapshotVersion(P);_.Ms=_.Ms.insert(T,B)}}})(i.localStore,a))}async function JM(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){pe(kg,"User change. New user:",e.toKey());const i=await KC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((f=>{f.forEach((p=>{p.reject(new de(ee.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vu(t,i.Ls)}}function QM(n,e){const t=xe(n),i=t.Au.get(e);if(i&&i.hu)return Ge().add(i.key);{let o=Ge();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const f=t.Tu.get(u);o=o.unionWith(f.view.nu)}return o}}function lI(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zM.bind(null,e),e.Pu.H_=DM.bind(null,e.eventManager),e.Pu.yu=MM.bind(null,e.eventManager),e}function XM(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YM.bind(null,e),e}class rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Md(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return WD(this.persistence,new JD,e.initialUser,this.serializer)}Cu(e){return new zC(Sg.mi,this.serializer)}Du(e){return new sM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rd.provider={build:()=>new rd};class WM extends rd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){je(this.persistence.referenceDelegate instanceof id,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new kD(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new zC((i=>id.mi(i,t)),this.serializer)}}class qm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JM.bind(null,this.syncEngine),await wM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bM})()}createDatastore(e){const t=Md(e.databaseInfo.databaseId),i=(function(a){return new uM(a)})(e.databaseInfo);return(function(a,u,f,p){return new hM(a,u,f,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,f){return new mM(i,o,a,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>nT(this.syncEngine,t,0)),(function(){return X0.v()?new X0:new rM})())}createSyncEngine(e,t){return(function(o,a,u,f,p,h,_){const E=new LM(o,a,u,f,p,h);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=xe(o);pe(go,"RemoteStore shutting down."),a.Ea.add(5),await Pu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}qm.provider={build:()=>new qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="FirestoreClient";class jM{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{pe(Cr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe(Cr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Dg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function cm(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Cr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await KC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function sT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ek(n);pe(Cr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Z0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>Z0(e.remoteStore,o))),n._onlineComponents=e}async function ek(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Cr,"Using user provided OfflineComponentProvider");try{await cm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ua("Error using user provided cache. Falling back to memory cache: "+t),await cm(n,new rd)}}else pe(Cr,"Using default OfflineComponentProvider"),await cm(n,new WM(void 0));return n._offlineComponents}async function uI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Cr,"Using user provided OnlineComponentProvider"),await sT(n,n._uninitializedComponentsProvider._online)):(pe(Cr,"Using default OnlineComponentProvider"),await sT(n,new qm))),n._onlineComponents}function tk(n){return uI(n).then((e=>e.syncEngine))}async function nk(n){const e=await uI(n),t=e.eventManager;return t.onListen=OM.bind(null,e.syncEngine),t.onUnlisten=qM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GM.bind(null,e.syncEngine),t}function ik(n,e,t={}){const i=new gr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,p,h){const _=new ZM({next:T=>{_.Nu(),u.enqueueAndForget((()=>xM(a,E))),T.fromCache&&p.source==="server"?h.reject(new de(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(T)},error:T=>h.reject(T)}),E=new kM(f,_,{includeMetadataChanges:!0,qa:!0});return NM(a,E)})(await nk(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firestore.googleapis.com",oT=!0;class aT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fI,this.ssl=oT}else this.host=e.host,this.ssl=e.ssl??oT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DD)throw new de(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cI(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new r2;switch(i.type){case"firstParty":return new u2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=rT.get(t);i&&(pe("ComponentProvider","Removing Datastore"),rT.delete(t),i.terminate())})(this),Promise.resolve()}}function sk(n,e,t,i={}){var h;n=mo(n,Vd);const o=Ha(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(US(`https://${f}`),LS("Firestore",!0)),a.host!==fI&&a.host!==f&&Ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:f,ssl:o,emulatorOptions:i};if(!_r(p,u)&&(n._setSettings(p),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=on.MOCK_USER;else{_=NN(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new de(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(T)}n._authCredentials=new o2(new eC(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Io(this.firestore,e,this._query)}}class qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Du(t,qt._jsonSchema))return new qt(e,i||null,new Te(lt.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:Lt("string",qt._jsonSchemaVersion),referencePath:Lt("string")};class yr extends Io{constructor(e,t,i){super(e,t,vC(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Te(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function rk(n,e,...t){if(n=mt(n),tC("collection","path",e),n instanceof Vd){const i=lt.fromString(e,...t);return E0(i),new yr(n,null,i)}{if(!(n instanceof qt||n instanceof yr))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(lt.fromString(e,...t));return E0(i),new yr(n.firestore,null,i)}}function Ud(n,e,...t){if(n=mt(n),arguments.length===1&&(e=dg.newId()),tC("doc","path",e),n instanceof Vd){const i=lt.fromString(e,...t);return v0(i),new qt(n,null,new Te(i))}{if(!(n instanceof qt||n instanceof yr))throw new de(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(lt.fromString(e,...t));return v0(i),new qt(n.firestore,n instanceof yr?n.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="AsyncQueue";class uT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $C(this,"async_queue_retry"),this._c=()=>{const i=um();i&&pe(lT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=um();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=um();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new gr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$a(e))throw e;pe(lT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ts("INTERNAL UNHANDLED ERROR: ",cT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=xg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Ie(47125,{Pc:cT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function cT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Uu extends Vd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new uT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uT(e),this._firestoreClient=void 0,await e}}}function ok(n,e){const t=typeof n=="object"?n:cg(),i=typeof n=="string"?n:Wf,o=Ao(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=RN("firestore");a&&sk(o,...a)}return o}function Vg(n){if(n._terminated)throw new de(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ak(n),n._firestoreClient}function ak(n){var i,o,a;const e=n._freezeSettings(),t=(function(f,p,h,_){return new w2(f,p,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,cI(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new jM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(nn.fromBase64String(e))}catch(t){throw new de(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wn(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Du(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:Lt("string",Wn._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(e){if(Du(e,Yi._jsonSchema))return new Yi(e.latitude,e.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:Lt("string",Yi._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Du(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new $i(e.vectorValues);throw new de(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:Lt("string",$i._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=/^__.*__$/;class uk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mu(e,this.data,t,this.fieldTransforms)}}class dI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Rr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class Lg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Lg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return od(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hI(this.Ac)&&lk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ck{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Md(e)}Cc(e,t,i,o=!1){return new Lg({Ac:e,methodName:t,Dc:i,path:tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Og(n){const e=n._freezeSettings(),t=Md(n._databaseId);return new ck(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pI(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);Fg("Data must be an object, but it was:",u,i);const f=mI(i,u);let p,h;if(a.merge)p=new Pn(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const T=Gm(e,E,t);if(!u.contains(T))throw new de(ee.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);yI(_,T)||_.push(T)}p=new Pn(_),h=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,h=u.fieldTransforms;return new uk(new Cn(f),p,h)}class Od extends Ug{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Od}}function fk(n,e,t,i){const o=n.Cc(1,e,t);Fg("Data must be an object, but it was:",o,i);const a=[],u=Cn.empty();wr(i,((p,h)=>{const _=Bg(e,p,t);h=mt(h);const E=o.yc(_);if(h instanceof Od)a.push(_);else{const T=Lu(h,E);T!=null&&(a.push(_),u.set(_,T))}}));const f=new Pn(a);return new dI(u,f,o.fieldTransforms)}function dk(n,e,t,i,o,a){const u=n.Cc(1,e,t),f=[Gm(e,i,t)],p=[o];if(a.length%2!=0)throw new de(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)f.push(Gm(e,a[T])),p.push(a[T+1]);const h=[],_=Cn.empty();for(let T=f.length-1;T>=0;--T)if(!yI(h,f[T])){const I=f[T];let P=p[T];P=mt(P);const B=u.yc(I);if(P instanceof Od)h.push(I);else{const L=Lu(P,B);L!=null&&(h.push(I),_.set(I,L))}}const E=new Pn(h);return new dI(_,E,u.fieldTransforms)}function hk(n,e,t,i=!1){return Lu(t,n.Cc(i?4:3,e))}function Lu(n,e){if(gI(n=mt(n)))return Fg("Unsupported field value:",e,n),mI(n,e);if(n instanceof Ug)return(function(i,o){if(!hI(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const f of i){let p=Lu(f,o.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Q2(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ft.fromDate(i);return{timestampValue:nd(o.serializer,a)}}if(i instanceof ft){const a=new ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:nd(o.serializer,a)}}if(i instanceof Yi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wn)return{bytesValue:UC(o.serializer,i._byteString)};if(i instanceof qt){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Tg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof $i)return(function(u,f){return{mapValue:{fields:{[cC]:{stringValue:fC},[Zf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return _g(f.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Ad(i)}`)})(n,e)}function mI(n,e){const t={};return sC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wr(n,((i,o)=>{const a=Lu(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function gI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Yi||n instanceof Wn||n instanceof qt||n instanceof Ug||n instanceof $i)}function Fg(n,e,t){if(!gI(t)||!nC(t)){const i=Ad(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Gm(n,e,t){if((e=mt(e))instanceof Ld)return e._internalPath;if(typeof e=="string")return Bg(n,e);throw od("Field path arguments must be of type string or ",n,!1,void 0,t)}const pk=new RegExp("[~\\*/\\[\\]]");function Bg(n,e,t){if(e.search(pk)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ld(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function od(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new de(ee.INVALID_ARGUMENT,f+n+p)}function yI(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mk extends _I{data(){return super.data()}}function qg(n,e){return typeof e=="string"?Bg(n,e):e instanceof Ld?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gg{}class vI extends Gg{}function yk(n,e,...t){let i=[];e instanceof Gg&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof zg)).length,f=a.filter((p=>p instanceof Hg)).length;if(u>1||u>0&&f>0)throw new de(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Hg extends vI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Hg(e,t,i)}_apply(e){const t=this._parse(e);return EI(e._query,t),new Io(e.firestore,e.converter,Dm(e._query,t))}_parse(e){const t=Og(e.firestore);return(function(a,u,f,p,h,_,E){let T;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){dT(E,_);const P=[];for(const B of E)P.push(fT(p,a,B));T={arrayValue:{values:P}}}else T=fT(p,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||dT(E,_),T=hk(f,u,E,_==="in"||_==="not-in");return Ut.create(h,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class zg extends Gg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zg(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const f=a.getFlattenedFilters();for(const p of f)EI(u,p),u=Dm(u,p)})(e._query,t),new Io(e.firestore,e.converter,Dm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kg extends vI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Kg(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Iu(a,u)})(e._query,this._field,this._direction);return new Io(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Ja(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function _k(n,e="asc"){const t=e,i=qg("orderBy",n);return Kg._create(i,t)}function fT(n,e,t){if(typeof(t=mt(t))=="string"){if(t==="")throw new de(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EC(e)&&t.indexOf("/")!==-1)throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(lt.fromString(t));if(!Te.isDocumentKey(i))throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return b0(n,new Te(i))}if(t instanceof qt)return b0(n,t._key);throw new de(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ad(t)}.`)}function dT(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EI(n,e){const t=(function(o,a){for(const u of o)for(const f of u.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class vk{convertValue(e,t="none"){switch(Ar(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return wr(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[Zf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>It(u.doubleValue)));return new $i(t)}convertGeoPoint(e){return new Yi(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Id(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const t=Er(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=lt.fromString(e);je(GC(i),9688,{name:e});const o=new Su(i.get(1),i.get(3)),a=new Te(i.popFirst(5));return o.isEqual(t)||Ts(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class If{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ba extends _I{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(qg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ba._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",ba._jsonSchema={type:Lt("string",ba._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Of extends ba{data(e={}){return super.data(e)}}class Na{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new If(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Of(this._firestore,this._userDataWriter,i.key,i,new If(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((f=>{const p=new Of(o._firestore,o._userDataWriter,f.doc.key,f.doc,new If(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const p=new Of(o._firestore,o._userDataWriter,f.doc.key,f.doc,new If(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,_=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:Ek(f.type),doc:p,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Na._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ek(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}Na._jsonSchemaVersion="firestore/querySnapshot/1.0",Na._jsonSchema={type:Lt("string",Na._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Tk extends vk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function Ak(n){n=mo(n,Io);const e=mo(n.firestore,Uu),t=Vg(e),i=new Tk(e);return gk(n._query),ik(t,n._query).then((o=>new Na(e,i,n,o)))}function Sk(n,e,t){n=mo(n,qt);const i=mo(n.firestore,Uu),o=TI(n.converter,e,t);return Yg(i,[pI(Og(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Vn.none())])}function Ck(n){return Yg(mo(n.firestore,Uu),[new xd(n._key,Vn.none())])}function Yg(n,e){return(function(i,o){const a=new gr;return i.asyncQueue.enqueueAndForget((async()=>HM(await tk(i),o,a))),a.promise})(Vg(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Og(e)}set(e,t,i){this._verifyNotCommitted();const o=fm(e,this._firestore),a=TI(o.converter,t,i),u=pI(this._dataReader,"WriteBatch.set",o._key,a,o.converter!==null,i);return this._mutations.push(u.toMutation(o._key,Vn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const a=fm(e,this._firestore);let u;return u=typeof(t=mt(t))=="string"||t instanceof Ld?dk(this._dataReader,"WriteBatch.update",a._key,t,i,o):fk(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fm(e,this._firestore);return this._mutations=this._mutations.concat(new xd(t._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fm(n,e){if((n=mt(n)).firestore!==e)throw new de(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(n){return Vg(n=mo(n,Uu)),new Ik(n,(e=>Yg(n,e)))}(function(e,t=!0){(function(o){Ka=o})(za),Xi(new gi("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),f=new Uu(new a2(i.getProvider("auth-internal")),new c2(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new de(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(h.options.projectId,_)})(u,o),u);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),Zn(m0,g0,e),Zn(m0,g0,"esm2020")})();function SI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wk=SI,CI=new To("auth","Firebase",SI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new Td("@firebase/auth");function Rk(n,...e){ad.logLevel<=Be.WARN&&ad.warn(`Auth (${za}): ${n}`,...e)}function Ff(n,...e){ad.logLevel<=Be.ERROR&&ad.error(`Auth (${za}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(n,...e){throw $g(n,...e)}function Ji(n,...e){return $g(n,...e)}function II(n,e,t){const i={...wk(),[e]:t};return new To("auth","Firebase",i).create(e,{appName:n.name})}function vs(n){return II(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $g(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return CI.create(n,...e)}function Ce(n,e,...t){if(!n)throw $g(e,...t)}function ys(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ff(e),new Error(e)}function Ss(n,e){n||ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function bk(){return hT()==="http:"||hT()==="https:"}function hT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bk()||OS()||"connection"in navigator)?navigator.onLine:!0}function xk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ss(t>e,"Short delay should be less than long delay!"),this.isMobile=MN()||VN()}get(){return Nk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(n,e){Ss(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kk=new Ou(3e4,6e4);function br(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Is(n,e,t,i,o={}){return RI(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const f=xu({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:p,...a};return PN()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Ha(n.emulatorConfig.host)&&(h.credentials="include"),wI.fetch()(await bI(n,n.config.apiHost,t,f),h)})}async function RI(n,e,t){n._canInitEmulator=!1;const i={...Dk,...e};try{const o=new Vk(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw wf(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const f=a.ok?u.errorMessage:u.error.message,[p,h]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw wf(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw wf(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw wf(n,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw II(n,_,h);_i(n,_)}}catch(o){if(o instanceof vi)throw o;_i(n,"network-request-failed",{message:String(o)})}}async function Fu(n,e,t,i,o={}){const a=await Is(n,e,t,i,o);return"mfaPendingCredential"in a&&_i(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function bI(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?Jg(n.config,o):`${n.config.apiScheme}://${o}`;return Mk.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function Pk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ji(this.auth,"network-request-failed")),kk.get())})}}function wf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Ji(n,e,i);return o.customData._tokenResponse=t,o}function pT(n){return n!==void 0&&n.enterprise!==void 0}class Uk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Pk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Lk(n,e){return Is(n,"GET","/v2/recaptchaConfig",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(n,e){return Is(n,"POST","/v1/accounts:delete",e)}async function ld(n,e){return Is(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Fk(n,e=!1){const t=mt(n),i=await t.getIdToken(e),o=Qg(i);Ce(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:vu(dm(o.auth_time)),issuedAtTime:vu(dm(o.iat)),expirationTime:vu(dm(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function dm(n){return Number(n)*1e3}function Qg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ff("JWT malformed, contained fewer than 3 sections"),null;try{const o=MS(t);return o?JSON.parse(o):(Ff("Failed to decode base64 JWT payload"),null)}catch(o){return Ff("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function mT(n){const e=Qg(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof vi&&Bk(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Bk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ud(n){var E;const e=n.auth,t=await n.getIdToken(),i=await Ga(n,ld(e,{idToken:t}));Ce(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(E=o.providerUserInfo)!=null&&E.length?NI(o.providerUserInfo):[],u=Hk(n.providerData,a),f=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=f?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new zm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function Gk(n){const e=mt(n);await ud(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hk(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function NI(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(n,e){const t=await RI(n,{},async()=>{const i=xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await bI(n,o,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return n.emulatorConfig&&Ha(n.emulatorConfig.host)&&(p.credentials="include"),wI.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Kk(n,e){return Is(n,"POST","/v2/accounts:revokeToken",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=mT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await zk(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new xa;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ce(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ce(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class hi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new qk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new zm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Fk(this,e)}reload(){return Gk(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ud(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(vs(this.auth));const e=await this.getIdToken();return await Ga(this,Ok(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:I,providerData:P,stsTokenManager:B}=t;Ce(E&&B,e,"internal-error");const L=xa.fromJSON(this.name,B);Ce(typeof E=="string",e,"internal-error"),ar(i,e.name),ar(o,e.name),Ce(typeof T=="boolean",e,"internal-error"),Ce(typeof I=="boolean",e,"internal-error"),ar(a,e.name),ar(u,e.name),ar(f,e.name),ar(p,e.name),ar(h,e.name),ar(_,e.name);const J=new hi({uid:E,auth:e,email:o,emailVerified:T,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:f,stsTokenManager:L,createdAt:h,lastLoginAt:_});return P&&Array.isArray(P)&&(J.providerData=P.map(ie=>({...ie}))),p&&(J._redirectEventId=p),J}static async _fromIdTokenResponse(e,t,i=!1){const o=new xa;o.updateFromServerResponse(t);const a=new hi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ud(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ce(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?NI(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),f=new xa;f.updateFromIdToken(i);const p=new hi({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new zm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=new Map;function _s(n){Ss(n instanceof Function,"Expected a class definition");let e=gT.get(n);return e?(Ss(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xI.type="NONE";const yT=xI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n,e,t){return`firebase:${n}:${e}:${t}`}class Da{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Bf(this.userKey,o.apiKey,a),this.fullPersistenceKey=Bf("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ld(this.auth,{idToken:e}).catch(()=>{});return t?hi._fromGetAccountInfoResponse(this.auth,t,e):null}return hi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Da(_s(yT),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||_s(yT);const u=Bf(i,e.config.apiKey,e.name);let f=null;for(const h of t)try{const _=await h._get(u);if(_){let E;if(typeof _=="string"){const T=await ld(e,{idToken:_}).catch(()=>{});if(!T)break;E=await hi._fromGetAccountInfoResponse(e,T,_)}else E=hi._fromJSON(e,_);h!==a&&(f=E),a=h;break}}catch{}const p=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Da(a,e,i):(a=p[0],f&&await a._set(u,f.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new Da(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UI(e))return"Blackberry";if(LI(e))return"Webos";if(MI(e))return"Safari";if((e.includes("chrome/")||kI(e))&&!e.includes("edge/"))return"Chrome";if(VI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function DI(n=un()){return/firefox\//i.test(n)}function MI(n=un()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kI(n=un()){return/crios\//i.test(n)}function PI(n=un()){return/iemobile/i.test(n)}function VI(n=un()){return/android/i.test(n)}function UI(n=un()){return/blackberry/i.test(n)}function LI(n=un()){return/webos/i.test(n)}function Xg(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Yk(n=un()){var e;return Xg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function $k(){return UN()&&document.documentMode===10}function OI(n=un()){return Xg(n)||VI(n)||LI(n)||UI(n)||/windows phone/i.test(n)||PI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(n,e=[]){let t;switch(n){case"Browser":t=_T(un());break;case"Worker":t=`${_T(un())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${za}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,f)=>{try{const p=e(a);u(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(n,e={}){return Is(n,"GET","/v2/passwordPolicy",br(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=6;class Wk{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Xk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vT(this),this.idTokenSubscription=new vT(this),this.beforeStateQueue=new Jk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_s(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Da.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ld(this,{idToken:e}),i=await hi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ud(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(vs(this));const t=e?mt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qk(this),t=new Wk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Kk(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_s(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Da.create(this,[_s(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(f,this,"internal-error"),f.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Rk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wo(n){return mt(n)}class vT{constructor(e){this.auth=e,this.observer=null,this.addObserver=HN(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jk(n){Fd=n}function BI(n){return Fd.loadJS(n)}function eP(){return Fd.recaptchaEnterpriseScript}function tP(){return Fd.gapiScript}function nP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class iP{constructor(){this.enterprise=new sP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class sP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rP="recaptcha-enterprise",qI="NO_RECAPTCHA";class oP{constructor(e){this.type=rP,this.auth=wo(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,f)=>{Lk(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const h=new Uk(p);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(p=>{f(p)})})}function o(a,u,f){const p=window.grecaptcha;pT(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(qI)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iP().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(f=>{if(!t&&pT(window.grecaptcha))o(f,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=eP();p.length!==0&&(p+=f),BI(p).then(()=>{o(f,a,u)}).catch(h=>{u(h)})}}).catch(f=>{u(f)})})}}async function ET(n,e,t,i=!1,o=!1){const a=new oP(n);let u;if(o)u=qI;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,h=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Km(n,e,t,i,o){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await ET(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ET(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(n,e){const t=Ao(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(_r(a,e??{}))return o;_i(o,"already-initialized")}return t.initialize({options:e})}function lP(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(_s);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function uP(n,e,t){const i=wo(n);Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=GI(e),{host:u,port:f}=cP(e),p=f===null?"":`:${f}`,h={url:`${a}//${u}${p}/`},_=Object.freeze({host:u,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ce(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ce(_r(h,i.config.emulator)&&_r(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ha(u)?(US(`${a}//${u}${p}`),LS("Auth",!0)):fP()}function GI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cP(n){const e=GI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:TT(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:TT(u)}}}function TT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function fP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ys("not implemented")}_getIdTokenResponse(e){return ys("not implemented")}_linkToIdToken(e,t){return ys("not implemented")}_getReauthenticationResolver(e){return ys("not implemented")}}async function dP(n,e){return Is(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(n,e){return Fu(n,"POST","/v1/accounts:signInWithPassword",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(n,e){return Fu(n,"POST","/v1/accounts:signInWithEmailLink",br(n,e))}async function mP(n,e){return Fu(n,"POST","/v1/accounts:signInWithEmailLink",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Wg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new bu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new bu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Km(e,t,"signInWithPassword",hP);case"emailLink":return pP(e,{email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Km(e,i,"signUpPassword",dP);case"emailLink":return mP(e,{idToken:t,email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(n,e){return Fu(n,"POST","/v1/accounts:signInWithIdp",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="http://localhost";class yo extends Wg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_i("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new yo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ma(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ma(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ma(e,t)}buildRequest(){const e={requestUri:gP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=xu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _P(n){const e=lu(uu(n)).link,t=e?lu(uu(e)).deep_link_id:null,i=lu(uu(n)).deep_link_id;return(i?lu(uu(i)).link:null)||i||t||e||n}class Zg{constructor(e){const t=lu(uu(e)),i=t.apiKey??null,o=t.oobCode??null,a=yP(t.mode??null);Ce(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=_P(e);try{return new Zg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.providerId=Xa.PROVIDER_ID}static credential(e,t){return bu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Zg.parseLink(t);return Ce(i,"argument-error"),bu._fromEmailAndCode(e,i.code,i.tenantId)}}Xa.PROVIDER_ID="password";Xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends HI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Bu{constructor(){super("facebook.com")}static credential(e){return yo._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return yo._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ur.credential(t,i)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Bu{constructor(){super("github.com")}static credential(e){return yo._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Bu{constructor(){super("twitter.com")}static credential(e,t){return yo._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return fr.credential(t,i)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(n,e){return Fu(n,"POST","/v1/accounts:signUp",br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await hi._fromIdTokenResponse(e,i,o),u=AT(i);return new _o({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=AT(i);return new _o({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function AT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends vi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,cd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new cd(e,t,i,o)}}function zI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?cd._fromErrorAndOperation(n,a,e,i):a})}async function EP(n,e,t=!1){const i=await Ga(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return _o._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(n,e,t=!1){const{auth:i}=n;if(Xn(i.app))return Promise.reject(vs(i));const o="reauthenticate";try{const a=await Ga(n,zI(i,o,e,n),t);Ce(a.idToken,i,"internal-error");const u=Qg(a.idToken);Ce(u,i,"internal-error");const{sub:f}=u;return Ce(n.uid===f,i,"user-mismatch"),_o._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&_i(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(n,e,t=!1){if(Xn(n.app))return Promise.reject(vs(n));const i="signIn",o=await zI(n,i,e),a=await _o._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function AP(n,e){return KI(wo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(n){const e=wo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function SP(n,e,t){if(Xn(n.app))return Promise.reject(vs(n));const i=wo(n),u=await Km(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vP).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&YI(n),p}),f=await _o._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function CP(n,e,t){return Xn(n.app)?Promise.reject(vs(n)):AP(mt(n),Xa.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&YI(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(n,e){return Is(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=mt(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Ga(i,IP(i.auth,a));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const f=i.providerData.find(({providerId:p})=>p==="password");f&&(f.displayName=i.displayName,f.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function RP(n,e,t,i){return mt(n).onIdTokenChanged(e,t,i)}function bP(n,e,t){return mt(n).beforeAuthStateChanged(e,t)}function $I(n,e,t,i){return mt(n).onAuthStateChanged(e,t,i)}function NP(n){return mt(n).signOut()}const fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fd,"1"),this.storage.removeItem(fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=1e3,DP=10;class QI extends JI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);$k()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,DP):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},xP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}QI.type="LOCAL";const MP=QI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI extends JI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XI.type="SESSION";const WI=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Bd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(u).map(async h=>h(t.origin,a)),p=await kP(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((f,p)=>{const h=jg("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(T.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(){return window}function VP(n){Qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){return typeof Qi().WorkerGlobalScope<"u"&&typeof Qi().importScripts=="function"}async function UP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function OP(){return ZI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="firebaseLocalStorageDb",FP=1,dd="firebaseLocalStorage",ew="fbase_key";class qu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qd(n,e){return n.transaction([dd],e?"readwrite":"readonly").objectStore(dd)}function BP(){const n=indexedDB.deleteDatabase(jI);return new qu(n).toPromise()}function Ym(){const n=indexedDB.open(jI,FP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(dd,{keyPath:ew})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(dd)?e(i):(i.close(),await BP(),e(await Ym()))})})}async function ST(n,e,t){const i=qd(n,!0).put({[ew]:e,value:t});return new qu(i).toPromise()}async function qP(n,e){const t=qd(n,!1).get(e),i=await new qu(t).toPromise();return i===void 0?null:i.value}function CT(n,e){const t=qd(n,!0).delete(e);return new qu(t).toPromise()}const GP=800,HP=3;class tw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>HP)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bd._getInstance(OP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await UP(),!this.activeServiceWorker)return;this.sender=new PP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await ST(e,fd,"1"),await CT(e,fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ST(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>qP(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>CT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=qd(o,!1).getAll();return new qu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tw.type="LOCAL";const zP=tw;new Ou(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(n,e){return e?_s(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey extends Wg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ma(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ma(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function YP(n){return KI(n.auth,new ey(n),n.bypassAuthState)}function $P(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),TP(t,new ey(n),n.bypassAuthState)}async function JP(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),EP(t,new ey(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YP;case"linkViaPopup":case"linkViaRedirect":return JP;case"reauthViaPopup":case"reauthViaRedirect":return $P;default:_i(this.auth,"internal-error")}}resolve(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ss(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=new Ou(2e3,1e4);class Ca extends nw{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,Ca.currentPopupAction&&Ca.currentPopupAction.cancel(),Ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ss(this.filter.length===1,"Popup operations only handle one event");const e=jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QP.get())};e()}}Ca.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="pendingRedirect",qf=new Map;class WP extends nw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=qf.get(this.auth._key());if(!e){try{const i=await ZP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}qf.set(this.auth._key(),e)}return this.bypassAuthState||qf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZP(n,e){const t=tV(e),i=eV(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function jP(n,e){qf.set(n._key(),e)}function eV(n){return _s(n._redirectPersistence)}function tV(n){return Bf(XP,n.config.apiKey,n.name)}async function nV(n,e,t=!1){if(Xn(n.app))return Promise.reject(vs(n));const i=wo(n),o=KP(i,e),u=await new WP(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=600*1e3;class sV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!iw(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ji(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iV&&this.cachedEventUids.clear(),this.cachedEventUids.has(IT(e))}saveEventToCache(e){this.cachedEventUids.add(IT(e)),this.lastProcessedEventTime=Date.now()}}function IT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function iw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV(n,e={}){return Is(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lV=/^https?/;async function uV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oV(n);for(const t of e)try{if(cV(t))return}catch{}_i(n,"unauthorized-domain")}function cV(n){const e=Hm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!lV.test(t))return!1;if(aV.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=new Ou(3e4,6e4);function wT(){const n=Qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dV(n){return new Promise((e,t)=>{var o,a,u;function i(){wT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wT(),t(Ji(n,"network-request-failed"))},timeout:fV.get()})}if((a=(o=Qi().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Qi().gapi)!=null&&u.load)i();else{const f=nP("iframefcb");return Qi()[f]=()=>{gapi.load?i():t(Ji(n,"network-request-failed"))},BI(`${tP()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Gf=null,e})}let Gf=null;function hV(n){return Gf=Gf||dV(n),Gf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=new Ou(5e3,15e3),mV="__/auth/iframe",gV="emulator/auth/iframe",yV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_V=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vV(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Jg(e,gV):`https://${n.config.authDomain}/${mV}`,i={apiKey:e.apiKey,appName:n.name,v:za},o=_V.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${xu(i).slice(1)}`}async function EV(n){const e=await hV(n),t=Qi().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:vV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yV,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Ji(n,"network-request-failed"),f=Qi().setTimeout(()=>{a(u)},pV.get());function p(){Qi().clearTimeout(f),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AV=500,SV=600,CV="_blank",IV="http://localhost";class RT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wV(n,e,t,i=AV,o=SV){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...TV,width:i.toString(),height:o.toString(),top:a,left:u},h=un().toLowerCase();t&&(f=kI(h)?CV:t),DI(h)&&(e=e||IV,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[I,P])=>`${T}${I}=${P},`,"");if(Yk(h)&&f!=="_self")return RV(e||"",f),new RT(null);const E=window.open(e||"",f,_);Ce(E,n,"popup-blocked");try{E.focus()}catch{}return new RT(E)}function RV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="__/auth/handler",NV="emulator/auth/handler",xV=encodeURIComponent("fac");async function bT(n,e,t,i,o,a){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:za,eventId:o};if(e instanceof HI){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",GN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Bu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await n._getAppCheckToken(),h=p?`#${xV}=${encodeURIComponent(p)}`:"";return`${DV(n)}?${xu(f).slice(1)}${h}`}function DV({config:n}){return n.emulator?Jg(n,NV):`https://${n.authDomain}/${bV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="webStorageSupport";class MV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WI,this._completeRedirectFn=nV,this._overrideRedirectResult=jP}async _openPopup(e,t,i,o){var u;Ss((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await bT(e,t,i,Hm(),o);return wV(e,a,jg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await bT(e,t,i,Hm(),o);return VP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Ss(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await EV(e),i=new sV(e);return t.register("authEvent",o=>(Ce(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hm,{type:hm},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[hm];a!==void 0&&t(!!a),_i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return OI()||MI()||Xg()}}const kV=MV;var NT="@firebase/auth",xT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UV(n){Xi(new gi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;Ce(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FI(n)},h=new Zk(i,o,a,p);return lP(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Xi(new gi("auth-internal",e=>{const t=wo(e.getProvider("auth").getImmediate());return(i=>new PV(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(NT,xT,VV(n)),Zn(NT,xT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV=300,OV=VS("authIdTokenMaxAge")||LV;let DT=null;const FV=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>OV)return;const o=t==null?void 0:t.token;DT!==o&&(DT=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function BV(n=cg()){const e=Ao(n,"auth");if(e.isInitialized())return e.getImmediate();const t=aP(n,{popupRedirectResolver:kV,persistence:[zP,MP,WI]}),i=VS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=FV(a.toString());bP(t,u,()=>u(t.currentUser)),RP(t,f=>u(f))}}const o=kS("auth");return o&&uP(t,`http://${o}`),t}function qV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}jk({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Ji("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",qV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UV("Browser");const sw="@firebase/installations",ty="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=1e4,ow=`w:${ty}`,aw="FIS_v2",GV="https://firebaseinstallations.googleapis.com/v1",HV=3600*1e3,zV="installations",KV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vo=new To(zV,KV,YV);function lw(n){return n instanceof vi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw({projectId:n}){return`${GV}/projects/${n}/installations`}function cw(n){return{token:n.token,requestStatus:2,expiresIn:JV(n.expiresIn),creationTime:Date.now()}}async function fw(n,e){const i=(await e.json()).error;return vo.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function dw({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function $V(n,{refreshToken:e}){const t=dw(n);return t.append("Authorization",QV(e)),t}async function hw(n){const e=await n();return e.status>=500&&e.status<600?n():e}function JV(n){return Number(n.replace("s","000"))}function QV(n){return`${aw} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=uw(n),o=dw(n),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const u={fid:t,authVersion:aw,appId:n.appId,sdkVersion:ow},f={method:"POST",headers:o,body:JSON.stringify(u)},p=await hw(()=>fetch(i,f));if(p.ok){const h=await p.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:cw(h.authToken)}}else throw await fw("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=/^[cdef][\w-]{21}$/,$m="";function jV(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=e4(n);return ZV.test(t)?t:$m}catch{return $m}}function e4(n){return WV(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=new Map;function gw(n,e){const t=Gd(n);yw(t,e),t4(t,e)}function yw(n,e){const t=mw.get(n);if(t)for(const i of t)i(e)}function t4(n,e){const t=n4();t&&t.postMessage({key:n,fid:e}),i4()}let co=null;function n4(){return!co&&"BroadcastChannel"in self&&(co=new BroadcastChannel("[Firebase] FID Change"),co.onmessage=n=>{yw(n.data.key,n.data.fid)}),co}function i4(){mw.size===0&&co&&(co.close(),co=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="firebase-installations-database",r4=1,Eo="firebase-installations-store";let pm=null;function ny(){return pm||(pm=HS(s4,r4,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Eo)}}})),pm}async function hd(n,e){const t=Gd(n),o=(await ny()).transaction(Eo,"readwrite"),a=o.objectStore(Eo),u=await a.get(t);return await a.put(e,t),await o.done,(!u||u.fid!==e.fid)&&gw(n,e.fid),e}async function _w(n){const e=Gd(n),i=(await ny()).transaction(Eo,"readwrite");await i.objectStore(Eo).delete(e),await i.done}async function Hd(n,e){const t=Gd(n),o=(await ny()).transaction(Eo,"readwrite"),a=o.objectStore(Eo),u=await a.get(t),f=e(u);return f===void 0?await a.delete(t):await a.put(f,t),await o.done,f&&(!u||u.fid!==f.fid)&&gw(n,f.fid),f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iy(n){let e;const t=await Hd(n.appConfig,i=>{const o=o4(i),a=a4(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===$m?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function o4(n){const e=n||{fid:jV(),registrationStatus:0};return vw(e)}function a4(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(vo.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=l4(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:u4(n)}:{installationEntry:e}}async function l4(n,e){try{const t=await XV(n,e);return hd(n.appConfig,t)}catch(t){throw lw(t)&&t.customData.serverCode===409?await _w(n.appConfig):await hd(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function u4(n){let e=await MT(n.appConfig);for(;e.registrationStatus===1;)await pw(100),e=await MT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await iy(n);return i||t}return e}function MT(n){return Hd(n,e=>{if(!e)throw vo.create("installation-not-found");return vw(e)})}function vw(n){return c4(n)?{fid:n.fid,registrationStatus:0}:n}function c4(n){return n.registrationStatus===1&&n.registrationTime+rw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4({appConfig:n,heartbeatServiceProvider:e},t){const i=d4(n,t),o=$V(n,t),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const u={installation:{sdkVersion:ow,appId:n.appId}},f={method:"POST",headers:o,body:JSON.stringify(u)},p=await hw(()=>fetch(i,f));if(p.ok){const h=await p.json();return cw(h)}else throw await fw("Generate Auth Token",p)}function d4(n,{fid:e}){return`${uw(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sy(n,e=!1){let t;const i=await Hd(n.appConfig,a=>{if(!Ew(a))throw vo.create("not-registered");const u=a.authToken;if(!e&&m4(u))return a;if(u.requestStatus===1)return t=h4(n,e),a;{if(!navigator.onLine)throw vo.create("app-offline");const f=y4(a);return t=p4(n,f),f}});return t?await t:i.authToken}async function h4(n,e){let t=await kT(n.appConfig);for(;t.authToken.requestStatus===1;)await pw(100),t=await kT(n.appConfig);const i=t.authToken;return i.requestStatus===0?sy(n,e):i}function kT(n){return Hd(n,e=>{if(!Ew(e))throw vo.create("not-registered");const t=e.authToken;return _4(t)?{...e,authToken:{requestStatus:0}}:e})}async function p4(n,e){try{const t=await f4(n,e),i={...e,authToken:t};return await hd(n.appConfig,i),t}catch(t){if(lw(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await _w(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await hd(n.appConfig,i)}throw t}}function Ew(n){return n!==void 0&&n.registrationStatus===2}function m4(n){return n.requestStatus===2&&!g4(n)}function g4(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+HV}function y4(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function _4(n){return n.requestStatus===1&&n.requestTime+rw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v4(n){const e=n,{installationEntry:t,registrationPromise:i}=await iy(e);return i?i.catch(console.error):sy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4(n,e=!1){const t=n;return await T4(t),(await sy(t,e)).token}async function T4(n){const{registrationPromise:e}=await iy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(n){if(!n||!n.options)throw mm("App Configuration");if(!n.name)throw mm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw mm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function mm(n){return vo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="installations",S4="installations-internal",C4=n=>{const e=n.getProvider("app").getImmediate(),t=A4(e),i=Ao(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},I4=n=>{const e=n.getProvider("app").getImmediate(),t=Ao(e,Tw).getImmediate();return{getId:()=>v4(t),getToken:o=>E4(t,o)}};function w4(){Xi(new gi(Tw,C4,"PUBLIC")),Xi(new gi(S4,I4,"PRIVATE"))}w4();Zn(sw,ty);Zn(sw,ty,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="analytics",R4="firebase_id",b4="origin",N4=60*1e3,x4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ry="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new Td("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Un=new To("analytics","Analytics",D4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(n){if(!n.startsWith(ry)){const e=Un.create("invalid-gtag-resource",{gtagURL:n});return pn.warn(e.message),""}return n}function Aw(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function k4(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function P4(n,e){const t=k4("firebase-js-sdk-policy",{createScriptURL:M4}),i=document.createElement("script"),o=`${ry}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function V4(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function U4(n,e,t,i,o,a){const u=i[o];try{if(u)await e[u];else{const p=(await Aw(t)).find(h=>h.measurementId===o);p&&await e[p.appId]}}catch(f){pn.error(f)}n("config",o,a)}async function L4(n,e,t,i,o){try{let a=[];if(o&&o.send_to){let u=o.send_to;Array.isArray(u)||(u=[u]);const f=await Aw(t);for(const p of u){const h=f.find(E=>E.measurementId===p),_=h&&e[h.appId];if(_)a.push(_);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",i,o||{})}catch(a){pn.error(a)}}function O4(n,e,t,i){async function o(a,...u){try{if(a==="event"){const[f,p]=u;await L4(n,e,t,f,p)}else if(a==="config"){const[f,p]=u;await U4(n,e,t,i,f,p)}else if(a==="consent"){const[f,p]=u;n("consent",f,p)}else if(a==="get"){const[f,p,h]=u;n("get",f,p,h)}else if(a==="set"){const[f]=u;n("set",f)}else n(a,...u)}catch(f){pn.error(f)}}return o}function F4(n,e,t,i,o){let a=function(...u){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=O4(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function B4(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ry)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=30,G4=1e3;class H4{constructor(e={},t=G4){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Sw=new H4;function z4(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function K4(n){var u;const{appId:e,apiKey:t}=n,i={method:"GET",headers:z4(t)},o=x4.replace("{app-id}",e),a=await fetch(o,i);if(a.status!==200&&a.status!==304){let f="";try{const p=await a.json();(u=p.error)!=null&&u.message&&(f=p.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:a.status,responseMessage:f})}return a.json()}async function Y4(n,e=Sw,t){const{appId:i,apiKey:o,measurementId:a}=n.options;if(!i)throw Un.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:i};throw Un.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},f=new Q4;return setTimeout(async()=>{f.abort()},N4),Cw({appId:i,apiKey:o,measurementId:a},u,f,e)}async function Cw(n,{throttleEndTimeMillis:e,backoffCount:t},i,o=Sw){var f;const{appId:a,measurementId:u}=n;try{await $4(i,e)}catch(p){if(u)return pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:a,measurementId:u};throw p}try{const p=await K4(n);return o.deleteThrottleMetadata(a),p}catch(p){const h=p;if(!J4(h)){if(o.deleteThrottleMetadata(a),u)return pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:u};throw p}const _=Number((f=h==null?void 0:h.customData)==null?void 0:f.httpStatus)===503?r0(t,o.intervalMillis,q4):r0(t,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return o.setThrottleMetadata(a,E),pn.debug(`Calling attemptFetch again in ${_} millis`),Cw(n,E,i,o)}}function $4(n,e){return new Promise((t,i)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),i(Un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function J4(n){if(!(n instanceof vi)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Q4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function X4(n,e,t,i,o){if(o&&o.global){n("event",t,i);return}else{const a=await e,u={...i,send_to:a};n("event",t,u)}}async function W4(n,e,t,i){if(i&&i.global){const o={};for(const a of Object.keys(t))o[`user_properties.${a}`]=t[a];return n("set",o),Promise.resolve()}else{const o=await e;n("config",o,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z4(){if(FS())try{await BS()}catch(n){return pn.warn(Un.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return pn.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function j4(n,e,t,i,o,a,u){const f=Y4(n);f.then(T=>{t[T.measurementId]=T.appId,n.options.measurementId&&T.measurementId!==n.options.measurementId&&pn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>pn.error(T)),e.push(f);const p=Z4().then(T=>{if(T)return i.getId()}),[h,_]=await Promise.all([f,p]);B4(a)||P4(a,h.measurementId),o("js",new Date);const E=(u==null?void 0:u.config)??{};return E[b4]="firebase",E.update=!0,_!=null&&(E[R4]=_),o("config",h.measurementId,E),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e){this.app=e}_delete(){return delete ka[this.app.options.appId],Promise.resolve()}}let ka={},PT=[];const VT={};let gm="dataLayer",tU="gtag",UT,oy,LT=!1;function nU(){const n=[];if(OS()&&n.push("This is a browser extension environment."),ON()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,o)=>`(${o+1}) ${i}`).join(" "),t=Un.create("invalid-analytics-context",{errorInfo:e});pn.warn(t.message)}}function iU(n,e,t){nU();const i=n.options.appId;if(!i)throw Un.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Un.create("no-api-key");if(ka[i]!=null)throw Un.create("already-exists",{id:i});if(!LT){V4(gm);const{wrappedGtag:a,gtagCore:u}=F4(ka,PT,VT,gm,tU);oy=a,UT=u,LT=!0}return ka[i]=j4(n,PT,VT,e,UT,gm,t),new eU(n)}function sU(n=cg()){n=mt(n);const e=Ao(n,pd);return e.isInitialized()?e.getImmediate():rU(n)}function rU(n,e={}){const t=Ao(n,pd);if(t.isInitialized()){const o=t.getImmediate();if(_r(e,t.getOptions()))return o;throw Un.create("already-initialized")}return t.initialize({options:e})}function oU(n,e,t){n=mt(n),W4(oy,ka[n.app.options.appId],e,t).catch(i=>pn.error(i))}function aU(n,e,t,i){n=mt(n),X4(oy,ka[n.app.options.appId],e,t,i).catch(o=>pn.error(o))}const OT="@firebase/analytics",FT="0.10.19";function lU(){Xi(new gi(pd,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return iU(i,o,t)},"PUBLIC")),Xi(new gi("analytics-internal",n,"PRIVATE")),Zn(OT,FT),Zn(OT,FT,"esm2020");function n(e){try{const t=e.getProvider(pd).getImmediate();return{logEvent:(i,o,a)=>aU(t,i,o,a),setUserProperties:(i,o)=>oU(t,i,o)}}catch(t){throw Un.create("interop-component-reg-failed",{reason:t})}}}lU();const uU={apiKey:"AIzaSyDAbQWI8JJJZxi4u2m3CpXoVXo_tfV9idQ",authDomain:"spanish-reading-7f2f6.firebaseapp.com",projectId:"spanish-reading-7f2f6",storageBucket:"spanish-reading-7f2f6.firebasestorage.app",messagingSenderId:"199552752380",appId:"1:199552752380:web:7f00e4d764d4cefcde5579",measurementId:"G-B41M23QF87"},ay=zS(uU);typeof window<"u"&&sU(ay);const Gu=ok(ay),ho=BV(ay),cU=({currentView:n,onChangeView:e,children:t,theme:i,onToggleTheme:o,isGuest:a,onLogoutGuest:u})=>{var h,_,E;const f=async()=>{if(window.confirm("Mchten Sie sich wirklich abmelden?"))if(a)u==null||u();else try{await NP(ho)}catch(T){console.error("Logout failed:",T)}},p=a?"Gast":((h=ho.currentUser)==null?void 0:h.displayName)||((E=(_=ho.currentUser)==null?void 0:_.email)==null?void 0:E.split("@")[0]);return R.jsxs("div",{className:"min-h-screen flex flex-col bg-[#FDFBF7] dark:bg-[#12100E]",children:[R.jsx("header",{className:"bg-[#FDFBF7]/90 dark:bg-[#12100E]/90 backdrop-blur-xl border-b border-[#EAE2D6] dark:border-[#2C2420] sticky top-0 z-50 transition-colors",children:R.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-20 flex justify-between items-center",children:[R.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>e(vt.HOME),children:[R.jsx("div",{className:"bg-[#2C2420] dark:bg-[#D4A373] p-2 rounded-xl text-[#FDFBF7] dark:text-[#12100E] shadow-md group-hover:bg-[#B26B4A] dark:group-hover:bg-[#B26B4A] transition-colors duration-500",children:R.jsx(vm,{className:"w-4 h-4"})}),R.jsxs("div",{className:"hidden sm:block",children:[R.jsx("h1",{className:"text-lg font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] tracking-tight",children:"Leseassistent"}),R.jsx("p",{className:"text-[8px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-[0.2em] -mt-1 opacity-60",children:"Tu compaero"})]})]}),R.jsxs("nav",{className:"flex items-center bg-[#2C2420]/5 dark:bg-white/5 p-1.5 rounded-2xl border border-[#2C2420]/5 dark:border-white/5 mx-2",children:[R.jsxs("button",{onClick:()=>e(vt.HOME),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===vt.HOME?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[R.jsx(vm,{className:"w-4 h-4"}),R.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Lesen"})]}),R.jsxs("button",{onClick:()=>e(vt.ANALYZE),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===vt.ANALYZE?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[R.jsx(CS,{className:"w-4 h-4"}),R.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Scan"})]}),R.jsxs("button",{onClick:()=>e(vt.VOCAB),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===vt.VOCAB?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[R.jsx(SS,{className:"w-4 h-4"}),R.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Lernen"})]})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsxs("div",{className:"hidden lg:flex items-center gap-2 px-3 py-1.5 bg-[#FDFBF7] dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-xl mr-2",children:[R.jsx(NS,{className:"w-3.5 h-3.5 text-[#B26B4A] dark:text-[#D4A373]"}),R.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D]",children:p})]}),R.jsx("button",{onClick:o,className:"p-2.5 rounded-xl bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-[#B26B4A] dark:hover:text-[#D4A373] transition-all",title:"Design ndern",children:i==="dark"?R.jsx(fN,{className:"w-4 h-4"}):R.jsx(jb,{className:"w-4 h-4"})}),R.jsx("button",{onClick:()=>e(vt.SETTINGS),className:`p-2.5 rounded-xl transition-colors shadow-sm ${n===vt.SETTINGS?"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E]":"bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-[#B26B4A] dark:hover:text-[#D4A373]"}`,title:"Einstellungen",children:R.jsx(IS,{className:"w-4 h-4"})}),R.jsx("button",{onClick:f,className:"p-2.5 rounded-xl bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-red-500 transition-all",title:"Abmelden",children:R.jsx(Qb,{className:"w-4 h-4"})})]})]})}),R.jsx("main",{className:`flex-grow p-6 w-full mx-auto ${n===vt.ANALYZE?"max-w-6xl":"max-w-4xl"} transition-colors`,children:t})]})};var fU={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dU,hU;function pU(){return{geminiUrl:dU,vertexUrl:hU}}function mU(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=pU();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ws{}function fe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const p=n[f];if(Array.isArray(t))for(let h=0;h<p.length;h++){const _=p[h];m(_,e.slice(a+1),t[h])}else for(const h of p)m(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const p=n[f];m(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function gU(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let f=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){f=p;break}if(f!==-1&&a.length>f)for(let p=f;p<a.length;p++){const h=a[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}Jm(n,o,a,0,u)}}function Jm(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const p of f[u])Jm(p,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),p={};for(const h of f)p[h]=u[h];for(const[h,_]of Object.entries(p)){const E=[];for(const T of t.slice(i))T==="*"?E.push(h):E.push(T);m(u,E,_)}for(const h of f)delete u[h]}}else{const u=n;a in u&&Jm(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ly(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yU(n){const e={},t=d(n,["operationName"]);t!=null&&m(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function _U(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],EU(u)),e}function vU(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],TU(u)),e}function EU(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>AU(u))),m(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function TU(n){const e={},t=d(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>SU(u))),m(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function AU(n){const e={},t=d(n,["video"]);return t!=null&&m(e,["video"],NU(t)),e}function SU(n){const e={},t=d(n,["_self"]);return t!=null&&m(e,["video"],xU(t)),e}function CU(n){const e={},t=d(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function IU(n){const e={},t=d(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function wU(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],RU(u)),e}function RU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&m(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function Iw(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],bU(u)),e}function bU(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&m(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function NU(n){const e={},t=d(n,["uri"]);t!=null&&m(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],ly(i));const o=d(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function xU(n){const e={},t=d(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],ly(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var BT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(BT||(BT={}));var qT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(qT||(qT={}));var GT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(GT||(GT={}));var Ct;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ct||(Ct={}));var HT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(HT||(HT={}));var zT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zT||(zT={}));var KT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(KT||(KT={}));var YT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(YT||(YT={}));var $T;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})($T||($T={}));var JT;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(JT||(JT={}));var QT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(QT||(QT={}));var XT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(XT||(XT={}));var WT;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(WT||(WT={}));var ZT;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(ZT||(ZT={}));var jT;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(jT||(jT={}));var eA;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(eA||(eA={}));var tA;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(tA||(tA={}));var nA;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(nA||(nA={}));var iA;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(iA||(iA={}));var Nu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Nu||(Nu={}));var sA;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(sA||(sA={}));var rA;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(rA||(rA={}));var oA;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(oA||(oA={}));var Qm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qm||(Qm={}));var aA;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(aA||(aA={}));var lA;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(lA||(lA={}));var uA;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(uA||(uA={}));var cA;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(cA||(cA={}));var fA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(fA||(fA={}));var dA;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(dA||(dA={}));var hA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(hA||(hA={}));var pA;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(pA||(pA={}));var mA;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(mA||(mA={}));var gA;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(gA||(gA={}));var yA;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yA||(yA={}));var _A;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_A||(_A={}));var vA;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vA||(vA={}));var EA;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(EA||(EA={}));var TA;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(TA||(TA={}));var AA;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(AA||(AA={}));var SA;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(SA||(SA={}));var CA;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(CA||(CA={}));var IA;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(IA||(IA={}));var wA;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(wA||(wA={}));var RA;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(RA||(RA={}));var bA;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(bA||(bA={}));var NA;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(NA||(NA={}));var xA;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(xA||(xA={}));var DA;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(DA||(DA={}));var MA;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(MA||(MA={}));var kA;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(kA||(kA={}));var PA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(PA||(PA={}));var VA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(VA||(VA={}));var UA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(UA||(UA={}));var LA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(LA||(LA={}));var Ia;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ia||(Ia={}));class Xm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ou{get text(){var e,t,i,o,a,u,f,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const E=[];for(const T of(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[I,P]of Object.entries(T))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(P!==null||P!==void 0)&&E.push(I);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;_=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,o,a,u,f,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const E of(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&p!==void 0?p:[]){for(const[T,I]of Object.entries(E))T!=="inlineData"&&(I!==null||I!==void 0)&&_.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,f,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,f,p,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,f,p,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(p=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class OA{}class FA{}class DU{}class MU{}class kU{}class PU{}class BA{}class qA{}class GA{}class VU{}class md{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new md;let o;const a=e;return t?o=vU(a):o=_U(a),Object.assign(i,o),i}}class HA{}class zA{}class KA{}class YA{}class UU{}class LU{}class OU{}class uy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new uy,a=wU(e);return Object.assign(i,a),i}}class FU{}class BU{}class qU{}class $A{}class GU{get text(){var e,t,i;let o="",a=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,h]of Object.entries(f))p!=="text"&&p!=="thought"&&h!==null&&u.push(p);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,p]of Object.entries(u))f!=="inlineData"&&p!==null&&a.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class HU{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class cy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new cy,a=Iw(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ww(n,e){const t=Xe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Rw(n){return Array.isArray(n)?n.map(e=>gd(e)):[gd(n)]}function gd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function bw(n){const e=gd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Nw(n){const e=gd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JA(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function xw(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>JA(e)):[JA(n)]}function Wm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function QA(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function XA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ln(n){if(n==null)throw new Error("ContentUnion is required");return Wm(n)?n:{role:"user",parts:xw(n)}}function fy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=ln(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=ln(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ln(t)):[ln(e)]}function jn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(QA(n)||XA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ln(n)]}const e=[],t=[],i=Wm(n[0]);for(const o of n){const a=Wm(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(QA(o)||XA(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:xw(t)}),e}function zU(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Ct).includes(t[0].toUpperCase())?t[0].toUpperCase():Ct.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Ct).includes(i.toUpperCase())?i.toUpperCase():Ct.TYPE_UNSPECIFIED})}}function Pa(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&zU(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Ct).includes(f.toUpperCase())?f.toUpperCase():Ct.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Pa(f);else if(i.includes(u)){const p=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}p.push(Pa(h))}e[u]=p}else if(o.includes(u)){const p={};for(const[h,_]of Object.entries(f))p[h]=Pa(_);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=f}return e}function dy(n){return Pa(n)}function hy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function py(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Wa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Pa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Pa(e.response));return n}function Za(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function KU(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Rs(n,e){if(typeof e!="string")throw new Error("name must be a string");return KU(n,e,"cachedContents")}function Dw(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Nr(n){return ly(n)}function YU(n){return n!=null&&typeof n=="object"&&"name"in n}function $U(n){return n!=null&&typeof n=="object"&&"video"in n}function JU(n){return n!=null&&typeof n=="object"&&"uri"in n}function Mw(n){var e;let t;if(YU(n)&&(t=n.name),!(JU(n)&&(t=n.uri,t===void 0))&&!($U(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function kw(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Pw(n){for(const e of["models","tunedModels","publisherModels"])if(QU(n,e))return n[e];return[]}function QU(n,e){return n!==null&&typeof n=="object"&&e in n}function XU(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function WU(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=XU(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function Vw(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function ZU(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Uw(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ja(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Lw(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jU(n){const e={},t=d(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>kL(u))),m(e,["inlinedResponses"],a)}const o=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["inlinedEmbedContentResponses"],a)}return e}function eL(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const o=d(n,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function tL(n){const e={},t=d(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Hf(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const o=d(n,["metadata","state"]);o!=null&&m(e,["state"],Lw(o));const a=d(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const u=d(n,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&m(e,["updateTime"],f);const p=d(n,["metadata","model"]);p!=null&&m(e,["model"],p);const h=d(n,["metadata","output"]);return h!=null&&m(e,["dest"],jU(Uw(h))),e}function Zm(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=d(n,["state"]);o!=null&&m(e,["state"],Lw(o));const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["createTime"]);u!=null&&m(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&m(e,["startTime"],f);const p=d(n,["endTime"]);p!=null&&m(e,["endTime"],p);const h=d(n,["updateTime"]);h!=null&&m(e,["updateTime"],h);const _=d(n,["model"]);_!=null&&m(e,["model"],_);const E=d(n,["inputConfig"]);E!=null&&m(e,["src"],nL(E));const T=d(n,["outputConfig"]);T!=null&&m(e,["dest"],eL(Uw(T)));const I=d(n,["completionStats"]);return I!=null&&m(e,["completionStats"],I),e}function nL(n){const e={},t=d(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const o=d(n,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function iL(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&m(t,["fileName"],i);const o=d(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>ML(n,u))),m(t,["requests","requests"],a)}return t}function sL(n){const e={},t=d(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function rL(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function oL(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],ja(n,i)),t}function aL(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],ja(n,i)),t}function lL(n){const e={},t=d(n,["content"]);t!=null&&m(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],uL(i));const o=d(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=d(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=d(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(n,["index"]);p!=null&&m(e,["index"],p);const h=d(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),m(e,["safetyRatings"],T)}const E=d(n,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function uL(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function Ow(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>BL(a))),m(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function cL(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function fL(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=d(n,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],tL(ZU(o))),t}function WA(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["src"]);o!=null&&m(t,["batch","inputConfig"],iL(n,Vw(n,o)));const a=d(e,["config"]);return a!=null&&cL(a,t),t}function dL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["model"],Xe(n,i));const o=d(e,["src"]);o!=null&&m(t,["inputConfig"],sL(Vw(n,o)));const a=d(e,["config"]);return a!=null&&fL(a,t),t}function hL(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),t}function pL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["src"]);o!=null&&m(t,["batch","inputConfig"],TL(n,o));const a=d(e,["config"]);return a!=null&&hL(a,t),t}function mL(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],ja(n,i)),t}function gL(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],ja(n,i)),t}function yL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);return a!=null&&m(e,["error"],a),e}function _L(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);return a!=null&&m(e,["error"],a),e}function vL(n,e){const t={},i=d(e,["contents"]);if(i!=null){let a=fy(n,i);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["requests[]","request","content"],a)}const o=d(e,["config"]);return o!=null&&(m(t,["_self"],EL(o,t)),gU(t,{"requests[].*":"requests[].request.*"})),t}function EL(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function TL(n,e){const t={},i=d(e,["fileName"]);i!=null&&m(t,["file_name"],i);const o=d(e,["inlinedRequests"]);return o!=null&&m(t,["requests"],vL(n,o)),t}function AL(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function SL(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const o=d(n,["name"]);if(o!=null&&m(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function CL(n){const e={},t=d(n,["mode"]);t!=null&&m(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function IL(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],Ow(ln(o)));const a=d(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(i,["topP"],u);const f=d(e,["topK"]);f!=null&&m(i,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=d(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=d(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=d(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const P=d(e,["frequencyPenalty"]);P!=null&&m(i,["frequencyPenalty"],P);const B=d(e,["seed"]);B!=null&&m(i,["seed"],B);const L=d(e,["responseMimeType"]);L!=null&&m(i,["responseMimeType"],L);const J=d(e,["responseSchema"]);J!=null&&m(i,["responseSchema"],dy(J));const ie=d(e,["responseJsonSchema"]);if(ie!=null&&m(i,["responseJsonSchema"],ie),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=d(e,["safetySettings"]);if(t!==void 0&&Z!=null){let x=Z;Array.isArray(x)&&(x=x.map(he=>qL(he))),m(t,["safetySettings"],x)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let x=Za(oe);Array.isArray(x)&&(x=x.map(he=>HL(Wa(he)))),m(t,["tools"],x)}const le=d(e,["toolConfig"]);if(t!==void 0&&le!=null&&m(t,["toolConfig"],GL(le)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=d(e,["cachedContent"]);t!==void 0&&ue!=null&&m(t,["cachedContent"],Rs(n,ue));const M=d(e,["responseModalities"]);M!=null&&m(i,["responseModalities"],M);const D=d(e,["mediaResolution"]);D!=null&&m(i,["mediaResolution"],D);const N=d(e,["speechConfig"]);if(N!=null&&m(i,["speechConfig"],hy(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=d(e,["thinkingConfig"]);V!=null&&m(i,["thinkingConfig"],V);const k=d(e,["imageConfig"]);k!=null&&m(i,["imageConfig"],DL(k));const O=d(e,["enableEnhancedCivicAnswers"]);return O!=null&&m(i,["enableEnhancedCivicAnswers"],O),i}function wL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>lL(h))),m(e,["candidates"],p)}const o=d(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=d(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=d(n,["responseId"]);u!=null&&m(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function RL(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],ja(n,i)),t}function bL(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],ja(n,i)),t}function NL(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function xL(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function DL(n){const e={},t=d(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ML(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["request","model"],Xe(n,i));const o=d(e,["contents"]);if(o!=null){let f=jn(o);Array.isArray(f)&&(f=f.map(p=>Ow(p))),m(t,["request","contents"],f)}const a=d(e,["metadata"]);a!=null&&m(t,["metadata"],a);const u=d(e,["config"]);return u!=null&&m(t,["request","generationConfig"],IL(n,u,d(t,["request"],{}))),t}function kL(n){const e={},t=d(n,["response"]);t!=null&&m(e,["response"],wL(t));const i=d(n,["error"]);return i!=null&&m(e,["error"],i),e}function PL(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function VL(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=d(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function UL(n){const e={},t=d(n,["config"]);return t!=null&&PL(t,e),e}function LL(n){const e={},t=d(n,["config"]);return t!=null&&VL(t,e),e}function OL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Hf(u))),m(e,["batchJobs"],a)}return e}function FL(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Zm(u))),m(e,["batchJobs"],a)}return e}function BL(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],AL(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],SL(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(n,["inlineData"]);p!=null&&m(e,["inlineData"],rL(p));const h=d(n,["text"]);h!=null&&m(e,["text"],h);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const E=d(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function qL(n){const e={},t=d(n,["category"]);if(t!=null&&m(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function GL(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],CL(t));const i=d(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function HL(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],NL(f));const p=d(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],xL(p));const h=d(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Cs||(Cs={}));class Ro{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zL extends ws{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(Cs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=WA(this.apiClient,e),i=t._url,o=fe("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,p=f.requests,h=[];for(const _ of p){const E=Object.assign({},_);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=T,E.request=I}h.push(E)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=dL(this.apiClient,e);return f=fe("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Zm(_))}else{const h=WA(this.apiClient,e);return f=fe("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Hf(_))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=pL(this.apiClient,e);return a=fe("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>Hf(p))}}async get(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=bL(this.apiClient,e);return f=fe("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Zm(_))}else{const h=RL(this.apiClient,e);return f=fe("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Hf(_))}}async cancel(e){var t,i,o,a;let u="",f={};if(this.apiClient.isVertexAI()){const p=aL(this.apiClient,e);u=fe("batchPredictionJobs/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=oL(this.apiClient,e);u=fe("batches/{name}:cancel",p._url),f=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=LL(e);return f=fe("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=FL(_),T=new $A;return Object.assign(T,E),T})}else{const h=UL(e);return f=fe("batches",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=OL(_),T=new $A;return Object.assign(T,E),T})}}async delete(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=gL(this.apiClient,e);return f=fe("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>_L(_))}else{const h=mL(this.apiClient,e);return f=fe("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>yL(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KL(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function ZA(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>pO(a))),m(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function YL(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=d(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let _=jn(u);Array.isArray(_)&&(_=_.map(E=>ZA(E))),m(e,["contents"],_)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],ZA(ln(f)));const p=d(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(E=>gO(E))),m(e,["tools"],_)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],mO(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function $L(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=d(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let E=jn(u);Array.isArray(E)&&(E=E.map(T=>T)),m(e,["contents"],E)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],ln(f));const p=d(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(T=>yO(T))),m(e,["tools"],E)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const _=d(n,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),t}function JL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["model"],ww(n,i));const o=d(e,["config"]);return o!=null&&YL(o,t),t}function QL(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["model"],ww(n,i));const o=d(e,["config"]);return o!=null&&$L(o,t),t}function XL(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Rs(n,i)),t}function WL(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Rs(n,i)),t}function ZL(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function jL(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function eO(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function tO(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const o=d(n,["name"]);if(o!=null&&m(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nO(n){const e={},t=d(n,["mode"]);t!=null&&m(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function iO(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&m(e,["description"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const o=d(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&m(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function sO(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Rs(n,i)),t}function rO(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Rs(n,i)),t}function oO(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function aO(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function lO(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function uO(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function cO(n){const e={},t=d(n,["config"]);return t!=null&&lO(t,e),e}function fO(n){const e={},t=d(n,["config"]);return t!=null&&uO(t,e),e}function dO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function hO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function pO(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],eO(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],tO(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(n,["inlineData"]);p!=null&&m(e,["inlineData"],KL(p));const h=d(n,["text"]);h!=null&&m(e,["text"],h);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const E=d(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function mO(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],nO(t));const i=d(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function gO(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],oO(f));const p=d(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],aO(p));const h=d(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function yO(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>iO(T))),m(e,["functionDeclarations"],E)}const i=d(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=d(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function _O(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function vO(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function EO(n,e){const t={},i=d(e,["name"]);i!=null&&m(t,["_url","name"],Rs(n,i));const o=d(e,["config"]);return o!=null&&_O(o,t),t}function TO(n,e){const t={},i=d(e,["name"]);i!=null&&m(t,["_url","name"],Rs(n,i));const o=d(e,["config"]);return o!=null&&vO(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AO extends ws{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(Cs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=QL(this.apiClient,e);return f=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=JL(this.apiClient,e);return f=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=rO(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=sO(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=WL(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=jL(_),T=new KA;return Object.assign(T,E),T})}else{const h=XL(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=ZL(_),T=new KA;return Object.assign(T,E),T})}}async update(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=TO(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=EO(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=fO(e);return f=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=hO(_),T=new YA;return Object.assign(T,E),T})}else{const h=cO(e);return f=fe("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=dO(_),T=new YA;return Object.assign(T,E),T})}}}function yd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function jA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Re(n){return this instanceof Re?(this.v=n,this):new Re(n)}function pi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(I){return function(P){return Promise.resolve(P).then(I,E)}}function f(I,P){i[I]&&(o[I]=function(B){return new Promise(function(L,J){a.push([I,B,L,J])>1||p(I,B)})},P&&(o[I]=P(o[I])))}function p(I,P){try{h(i[I](P))}catch(B){T(a[0][3],B)}}function h(I){I.value instanceof Re?Promise.resolve(I.value.v).then(_,E):T(a[0][2],I)}function _(I){p("next",I)}function E(I){p("throw",I)}function T(I,P){I(P),a.shift(),a.length&&p(a[0][0],a[0][1])}}function mi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof jA=="function"?jA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(f,p){u=n[a](u),o(f,p,u.done,u.value)})}}function o(a,u,f,p){Promise.resolve(p).then(function(h){a({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SO(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Fw(t)}function Fw(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function CO(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function eS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!Fw(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class IO{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new wO(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class wO{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),CO(a)}async sendMessage(e){var t;await this.sendPromise;const i=ln(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,f;const p=await o,h=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];_!=null&&(T=(f=_.slice(E))!==null&&f!==void 0?f:[]);const I=h?[h]:[];this.recordHistory(i,I,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=ln(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?eS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return pi(this,arguments,function*(){var o,a,u,f,p,h;const _=[];try{for(var E=!0,T=mi(e),I;I=yield Re(T.next()),o=I.done,!o;E=!0){f=I.value,E=!1;const P=f;if(SO(P)){const B=(h=(p=P.candidates)===null||p===void 0?void 0:p[0])===null||h===void 0?void 0:h.content;B!==void 0&&_.push(B)}yield yield Re(P)}}catch(P){a={error:P}}finally{try{!E&&!o&&(u=T.return)&&(yield Re(u.call(T)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...eS(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,zd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RO(n){const e={},t=d(n,["file"]);return t!=null&&m(e,["file"],t),e}function bO(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function NO(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","file"],Mw(t)),e}function xO(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function DO(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","file"],Mw(t)),e}function MO(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function kO(n){const e={},t=d(n,["config"]);return t!=null&&MO(t,e),e}function PO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VO extends ws{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(Cs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kO(e);return a=fe("files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=PO(p),_=new FU;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=RO(e);return a=fe("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=bO(p),_=new BU;return Object.assign(_,h),_})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=DO(e);return a=fe("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=NO(e);return a=fe("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=xO(p),_=new qU;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zf(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function UO(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>ZO(a))),m(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function LO(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function OO(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const o=d(n,["name"]);if(o!=null&&m(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FO(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&m(e,["description"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const o=d(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&m(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function BO(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=d(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=d(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=d(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const E=d(n,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const T=d(n,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const I=d(n,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const P=d(n,["responseModalities"]);P!=null&&m(e,["responseModalities"],P);const B=d(n,["responseSchema"]);B!=null&&m(e,["responseSchema"],B);const L=d(n,["routingConfig"]);L!=null&&m(e,["routingConfig"],L);const J=d(n,["seed"]);J!=null&&m(e,["seed"],J);const ie=d(n,["speechConfig"]);ie!=null&&m(e,["speechConfig"],ie);const Z=d(n,["stopSequences"]);Z!=null&&m(e,["stopSequences"],Z);const oe=d(n,["temperature"]);oe!=null&&m(e,["temperature"],oe);const le=d(n,["thinkingConfig"]);le!=null&&m(e,["thinkingConfig"],le);const ue=d(n,["topK"]);ue!=null&&m(e,["topK"],ue);const M=d(n,["topP"]);if(M!=null&&m(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function qO(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function GO(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function HO(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],py(E));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const P=d(n,["systemInstruction"]);e!==void 0&&P!=null&&m(e,["setup","systemInstruction"],UO(ln(P)));const B=d(n,["tools"]);if(e!==void 0&&B!=null){let ue=Za(B);Array.isArray(ue)&&(ue=ue.map(M=>e6(Wa(M)))),m(e,["setup","tools"],ue)}const L=d(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],jO(L));const J=d(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&m(e,["setup","inputAudioTranscription"],J);const ie=d(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&m(e,["setup","outputAudioTranscription"],ie);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&m(e,["setup","realtimeInputConfig"],Z);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const le=d(n,["proactivity"]);if(e!==void 0&&le!=null&&m(e,["setup","proactivity"],le),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function zO(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],BO(i));const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],py(E));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const P=d(n,["systemInstruction"]);e!==void 0&&P!=null&&m(e,["setup","systemInstruction"],ln(P));const B=d(n,["tools"]);if(e!==void 0&&B!=null){let M=Za(B);Array.isArray(M)&&(M=M.map(D=>t6(Wa(D)))),m(e,["setup","tools"],M)}const L=d(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],L);const J=d(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&m(e,["setup","inputAudioTranscription"],J);const ie=d(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&m(e,["setup","outputAudioTranscription"],ie);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&m(e,["setup","realtimeInputConfig"],Z);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const le=d(n,["proactivity"]);e!==void 0&&le!=null&&m(e,["setup","proactivity"],le);const ue=d(n,["explicitVadSignal"]);return e!==void 0&&ue!=null&&m(e,["setup","explicitVadSignal"],ue),t}function KO(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["setup","model"],Xe(n,i));const o=d(e,["config"]);return o!=null&&m(t,["config"],HO(o,t)),t}function YO(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["setup","model"],Xe(n,i));const o=d(e,["config"]);return o!=null&&m(t,["config"],zO(o,t)),t}function $O(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function JO(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["weightedPrompts"],i)}return e}function QO(n){const e={},t=d(n,["media"]);if(t!=null){let h=Rw(t);Array.isArray(h)&&(h=h.map(_=>zf(_))),m(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&m(e,["audio"],zf(Nw(i)));const o=d(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=d(n,["video"]);a!=null&&m(e,["video"],zf(bw(a)));const u=d(n,["text"]);u!=null&&m(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function XO(n){const e={},t=d(n,["media"]);if(t!=null){let h=Rw(t);Array.isArray(h)&&(h=h.map(_=>_)),m(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&m(e,["audio"],Nw(i));const o=d(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=d(n,["video"]);a!=null&&m(e,["video"],bw(a));const u=d(n,["text"]);u!=null&&m(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&m(e,["activityStart"],f);const p=d(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function WO(n){const e={},t=d(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&m(e,["serverContent"],i);const o=d(n,["toolCall"]);o!=null&&m(e,["toolCall"],o);const a=d(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const u=d(n,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],n6(u));const f=d(n,["goAway"]);f!=null&&m(e,["goAway"],f);const p=d(n,["sessionResumptionUpdate"]);p!=null&&m(e,["sessionResumptionUpdate"],p);const h=d(n,["voiceActivityDetectionSignal"]);return h!=null&&m(e,["voiceActivityDetectionSignal"],h),e}function ZO(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],LO(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],OO(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(n,["inlineData"]);p!=null&&m(e,["inlineData"],zf(p));const h=d(n,["text"]);h!=null&&m(e,["text"],h);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const E=d(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function jO(n){const e={},t=d(n,["handle"]);if(t!=null&&m(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function e6(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],qO(f));const p=d(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],GO(p));const h=d(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function t6(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>FO(T))),m(e,["functionDeclarations"],E)}const i=d(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=d(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function n6(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const o=d(n,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const a=d(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const u=d(n,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&m(e,["totalTokenCount"],f);const p=d(n,["promptTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(P=>P)),m(e,["promptTokensDetails"],I)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(P=>P)),m(e,["cacheTokensDetails"],I)}const _=d(n,["candidatesTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(P=>P)),m(e,["responseTokensDetails"],I)}const E=d(n,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(P=>P)),m(e,["toolUsePromptTokensDetails"],I)}const T=d(n,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i6(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function s6(n){const e={},t=d(n,["content"]);t!=null&&m(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],r6(i));const o=d(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=d(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=d(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const p=d(n,["index"]);p!=null&&m(e,["index"],p);const h=d(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),m(e,["safetyRatings"],T)}const E=d(n,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function r6(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function o6(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["contents"]);if(o!=null){let a=jn(o);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["contents"],a)}return t}function a6(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["tokensInfo"],o)}return e}function l6(n){const e={},t=d(n,["values"]);t!=null&&m(e,["values"],t);const i=d(n,["statistics"]);return i!=null&&m(e,["statistics"],u6(i)),e}function u6(n){const e={},t=d(n,["truncated"]);t!=null&&m(e,["truncated"],t);const i=d(n,["token_count"]);return i!=null&&m(e,["tokenCount"],i),e}function Kd(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>_3(a))),m(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function c6(n){const e={},t=d(n,["controlType"]);t!=null&&m(e,["controlType"],t);const i=d(n,["enableControlImageComputation"]);return i!=null&&m(e,["computeControl"],i),e}function f6(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function d6(n,e){const t={},i=d(n,["systemInstruction"]);e!==void 0&&i!=null&&m(e,["systemInstruction"],ln(i));const o=d(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>Hw(f))),m(e,["tools"],u)}const a=d(n,["generationConfig"]);return e!==void 0&&a!=null&&m(e,["generationConfig"],i3(a)),t}function h6(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["contents"]);if(o!=null){let u=jn(o);Array.isArray(u)&&(u=u.map(f=>Kd(f))),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&f6(a),t}function p6(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["contents"]);if(o!=null){let u=jn(o);Array.isArray(u)&&(u=u.map(f=>f)),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&d6(a,t),t}function m6(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);i!=null&&m(e,["totalTokens"],i);const o=d(n,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function g6(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["totalTokens"]);return i!=null&&m(e,["totalTokens"],i),e}function y6(n,e){const t={},i=d(e,["model"]);return i!=null&&m(t,["_url","name"],Xe(n,i)),t}function _6(n,e){const t={},i=d(e,["model"]);return i!=null&&m(t,["_url","name"],Xe(n,i)),t}function v6(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function E6(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function T6(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=d(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const T=d(n,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const I=d(n,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const P=d(n,["outputMimeType"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","mimeType"],P);const B=d(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&m(e,["parameters","outputOptions","compressionQuality"],B);const L=d(n,["addWatermark"]);e!==void 0&&L!=null&&m(e,["parameters","addWatermark"],L);const J=d(n,["labels"]);e!==void 0&&J!=null&&m(e,["labels"],J);const ie=d(n,["editMode"]);e!==void 0&&ie!=null&&m(e,["parameters","editMode"],ie);const Z=d(n,["baseSteps"]);return e!==void 0&&Z!=null&&m(e,["parameters","editConfig","baseSteps"],Z),t}function A6(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=d(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>C3(p))),m(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&T6(u,t),t}function S6(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Yd(a))),m(e,["generatedImages"],o)}return e}function C6(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function I6(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&m(e,["instances[]","task_type"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const a=d(n,["outputDimensionality"]);e!==void 0&&a!=null&&m(e,["parameters","outputDimensionality"],a);const u=d(n,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&m(e,["parameters","autoTruncate"],f),t}function w6(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["contents"]);if(o!=null){let f=fy(n,o);Array.isArray(f)&&(f=f.map(p=>p)),m(t,["requests[]","content"],f)}const a=d(e,["config"]);a!=null&&C6(a,t);const u=d(e,["model"]);return u!==void 0&&m(t,["requests[]","model"],Xe(n,u)),t}function R6(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["contents"]);if(o!=null){let u=fy(n,o);Array.isArray(u)&&(u=u.map(f=>f)),m(t,["instances[]","content"],u)}const a=d(e,["config"]);return a!=null&&I6(a,t),t}function b6(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["embeddings"],a)}const o=d(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function N6(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>l6(u))),m(e,["embeddings"],a)}const o=d(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function x6(n){const e={},t=d(n,["endpoint"]);t!=null&&m(e,["name"],t);const i=d(n,["deployedModelId"]);return i!=null&&m(e,["deployedModelId"],i),e}function D6(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function M6(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const o=d(n,["name"]);if(o!=null&&m(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function k6(n){const e={},t=d(n,["mode"]);t!=null&&m(e,["mode"],t);const i=d(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function P6(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&m(e,["description"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const o=d(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&m(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function V6(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],Kd(ln(o)));const a=d(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(i,["topP"],u);const f=d(e,["topK"]);f!=null&&m(i,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=d(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=d(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=d(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const P=d(e,["frequencyPenalty"]);P!=null&&m(i,["frequencyPenalty"],P);const B=d(e,["seed"]);B!=null&&m(i,["seed"],B);const L=d(e,["responseMimeType"]);L!=null&&m(i,["responseMimeType"],L);const J=d(e,["responseSchema"]);J!=null&&m(i,["responseSchema"],dy(J));const ie=d(e,["responseJsonSchema"]);if(ie!=null&&m(i,["responseJsonSchema"],ie),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=d(e,["safetySettings"]);if(t!==void 0&&Z!=null){let x=Z;Array.isArray(x)&&(x=x.map(he=>I3(he))),m(t,["safetySettings"],x)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let x=Za(oe);Array.isArray(x)&&(x=x.map(he=>M3(Wa(he)))),m(t,["tools"],x)}const le=d(e,["toolConfig"]);if(t!==void 0&&le!=null&&m(t,["toolConfig"],D3(le)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=d(e,["cachedContent"]);t!==void 0&&ue!=null&&m(t,["cachedContent"],Rs(n,ue));const M=d(e,["responseModalities"]);M!=null&&m(i,["responseModalities"],M);const D=d(e,["mediaResolution"]);D!=null&&m(i,["mediaResolution"],D);const N=d(e,["speechConfig"]);if(N!=null&&m(i,["speechConfig"],hy(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=d(e,["thinkingConfig"]);V!=null&&m(i,["thinkingConfig"],V);const k=d(e,["imageConfig"]);k!=null&&m(i,["imageConfig"],l3(k));const O=d(e,["enableEnhancedCivicAnswers"]);return O!=null&&m(i,["enableEnhancedCivicAnswers"],O),i}function U6(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],ln(o));const a=d(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(i,["topP"],u);const f=d(e,["topK"]);f!=null&&m(i,["topK"],f);const p=d(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=d(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=d(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=d(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=d(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const P=d(e,["frequencyPenalty"]);P!=null&&m(i,["frequencyPenalty"],P);const B=d(e,["seed"]);B!=null&&m(i,["seed"],B);const L=d(e,["responseMimeType"]);L!=null&&m(i,["responseMimeType"],L);const J=d(e,["responseSchema"]);J!=null&&m(i,["responseSchema"],dy(J));const ie=d(e,["responseJsonSchema"]);ie!=null&&m(i,["responseJsonSchema"],ie);const Z=d(e,["routingConfig"]);Z!=null&&m(i,["routingConfig"],Z);const oe=d(e,["modelSelectionConfig"]);oe!=null&&m(i,["modelConfig"],oe);const le=d(e,["safetySettings"]);if(t!==void 0&&le!=null){let Y=le;Array.isArray(Y)&&(Y=Y.map(re=>re)),m(t,["safetySettings"],Y)}const ue=d(e,["tools"]);if(t!==void 0&&ue!=null){let Y=Za(ue);Array.isArray(Y)&&(Y=Y.map(re=>Hw(Wa(re)))),m(t,["tools"],Y)}const M=d(e,["toolConfig"]);t!==void 0&&M!=null&&m(t,["toolConfig"],M);const D=d(e,["labels"]);t!==void 0&&D!=null&&m(t,["labels"],D);const N=d(e,["cachedContent"]);t!==void 0&&N!=null&&m(t,["cachedContent"],Rs(n,N));const V=d(e,["responseModalities"]);V!=null&&m(i,["responseModalities"],V);const k=d(e,["mediaResolution"]);k!=null&&m(i,["mediaResolution"],k);const O=d(e,["speechConfig"]);O!=null&&m(i,["speechConfig"],hy(O));const x=d(e,["audioTimestamp"]);x!=null&&m(i,["audioTimestamp"],x);const he=d(e,["thinkingConfig"]);he!=null&&m(i,["thinkingConfig"],he);const _e=d(e,["imageConfig"]);if(_e!=null&&m(i,["imageConfig"],u3(_e)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function tS(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["contents"]);if(o!=null){let u=jn(o);Array.isArray(u)&&(u=u.map(f=>Kd(f))),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(t,["generationConfig"],V6(n,a,t)),t}function nS(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["contents"]);if(o!=null){let u=jn(o);Array.isArray(u)&&(u=u.map(f=>f)),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(t,["generationConfig"],U6(n,a,t)),t}function iS(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>s6(h))),m(e,["candidates"],p)}const o=d(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=d(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=d(n,["responseId"]);u!=null&&m(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function sS(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["candidates"],h)}const o=d(n,["createTime"]);o!=null&&m(e,["createTime"],o);const a=d(n,["modelVersion"]);a!=null&&m(e,["modelVersion"],a);const u=d(n,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&m(e,["responseId"],f);const p=d(n,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function L6(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=d(n,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=d(n,["guidanceScale"]);if(e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const p=d(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const _=d(n,["language"]);e!==void 0&&_!=null&&m(e,["parameters","language"],_);const E=d(n,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const T=d(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=d(n,["imageSize"]);if(e!==void 0&&I!=null&&m(e,["parameters","sampleImageSize"],I),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function O6(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=d(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=d(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const p=d(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=d(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const T=d(n,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const I=d(n,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const P=d(n,["outputMimeType"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","mimeType"],P);const B=d(n,["outputCompressionQuality"]);e!==void 0&&B!=null&&m(e,["parameters","outputOptions","compressionQuality"],B);const L=d(n,["addWatermark"]);e!==void 0&&L!=null&&m(e,["parameters","addWatermark"],L);const J=d(n,["labels"]);e!==void 0&&J!=null&&m(e,["labels"],J);const ie=d(n,["imageSize"]);e!==void 0&&ie!=null&&m(e,["parameters","sampleImageSize"],ie);const Z=d(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&m(e,["parameters","enhancePrompt"],Z),t}function F6(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=d(e,["config"]);return a!=null&&L6(a,t),t}function B6(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=d(e,["config"]);return a!=null&&O6(a,t),t}function q6(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>j6(u))),m(e,["generatedImages"],a)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],qw(o)),e}function G6(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Yd(u))),m(e,["generatedImages"],a)}const o=d(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],Gw(o)),e}function H6(n,e){const t={},i=d(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(n,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const u=d(n,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(n,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(n,["lastFrame"]);e!==void 0&&_!=null&&m(e,["instances[0]","lastFrame"],$d(_));const E=d(n,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(I=>K3(I))),m(e,["instances[0]","referenceImages"],T)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function z6(n,e){const t={},i=d(n,["numberOfVideos"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const a=d(n,["fps"]);e!==void 0&&a!=null&&m(e,["parameters","fps"],a);const u=d(n,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const p=d(n,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=d(n,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=d(n,["pubsubTopic"]);e!==void 0&&E!=null&&m(e,["parameters","pubsubTopic"],E);const T=d(n,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const I=d(n,["enhancePrompt"]);e!==void 0&&I!=null&&m(e,["parameters","enhancePrompt"],I);const P=d(n,["generateAudio"]);e!==void 0&&P!=null&&m(e,["parameters","generateAudio"],P);const B=d(n,["lastFrame"]);e!==void 0&&B!=null&&m(e,["instances[0]","lastFrame"],Ei(B));const L=d(n,["referenceImages"]);if(e!==void 0&&L!=null){let Z=L;Array.isArray(Z)&&(Z=Z.map(oe=>Y3(oe))),m(e,["instances[0]","referenceImages"],Z)}const J=d(n,["mask"]);e!==void 0&&J!=null&&m(e,["instances[0]","mask"],z3(J));const ie=d(n,["compressionQuality"]);return e!==void 0&&ie!=null&&m(e,["parameters","compressionQuality"],ie),t}function K6(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],Q6(u)),e}function Y6(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],X6(u)),e}function $6(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=d(e,["image"]);a!=null&&m(t,["instances[0]","image"],$d(a));const u=d(e,["video"]);u!=null&&m(t,["instances[0]","video"],zw(u));const f=d(e,["source"]);f!=null&&W6(f,t);const p=d(e,["config"]);return p!=null&&H6(p,t),t}function J6(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=d(e,["image"]);a!=null&&m(t,["instances[0]","image"],Ei(a));const u=d(e,["video"]);u!=null&&m(t,["instances[0]","video"],Kw(u));const f=d(e,["source"]);f!=null&&Z6(f,t);const p=d(e,["config"]);return p!=null&&z6(p,t),t}function Q6(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>t3(u))),m(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function X6(n){const e={},t=d(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>n3(u))),m(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function W6(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],$d(o));const a=d(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],zw(a)),t}function Z6(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ei(o));const a=d(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],Kw(a)),t}function j6(n){const e={},t=d(n,["_self"]);t!=null&&m(e,["image"],c3(t));const i=d(n,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=d(n,["_self"]);return o!=null&&m(e,["safetyAttributes"],qw(o)),e}function Yd(n){const e={},t=d(n,["_self"]);t!=null&&m(e,["image"],Bw(t));const i=d(n,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=d(n,["_self"]);o!=null&&m(e,["safetyAttributes"],Gw(o));const a=d(n,["prompt"]);return a!=null&&m(e,["enhancedPrompt"],a),e}function e3(n){const e={},t=d(n,["_self"]);t!=null&&m(e,["mask"],Bw(t));const i=d(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["labels"],o)}return e}function t3(n){const e={},t=d(n,["video"]);return t!=null&&m(e,["video"],G3(t)),e}function n3(n){const e={},t=d(n,["_self"]);return t!=null&&m(e,["video"],H3(t)),e}function i3(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=d(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=d(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=d(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const p=d(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=d(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const E=d(n,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const T=d(n,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const I=d(n,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const P=d(n,["responseModalities"]);P!=null&&m(e,["responseModalities"],P);const B=d(n,["responseSchema"]);B!=null&&m(e,["responseSchema"],B);const L=d(n,["routingConfig"]);L!=null&&m(e,["routingConfig"],L);const J=d(n,["seed"]);J!=null&&m(e,["seed"],J);const ie=d(n,["speechConfig"]);ie!=null&&m(e,["speechConfig"],ie);const Z=d(n,["stopSequences"]);Z!=null&&m(e,["stopSequences"],Z);const oe=d(n,["temperature"]);oe!=null&&m(e,["temperature"],oe);const le=d(n,["thinkingConfig"]);le!=null&&m(e,["thinkingConfig"],le);const ue=d(n,["topK"]);ue!=null&&m(e,["topK"],ue);const M=d(n,["topP"]);if(M!=null&&m(e,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function s3(n,e){const t={},i=d(e,["model"]);return i!=null&&m(t,["_url","name"],Xe(n,i)),t}function r3(n,e){const t={},i=d(e,["model"]);return i!=null&&m(t,["_url","name"],Xe(n,i)),t}function o3(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function a3(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function l3(n){const e={},t=d(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function u3(n){const e={},t=d(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=d(n,["imageSize"]);i!=null&&m(e,["imageSize"],i);const o=d(n,["outputMimeType"]);o!=null&&m(e,["imageOutputOptions","mimeType"],o);const a=d(n,["outputCompressionQuality"]);return a!=null&&m(e,["imageOutputOptions","compressionQuality"],a),e}function c3(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&m(e,["imageBytes"],Nr(t));const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Bw(n){const e={},t=d(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Nr(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function $d(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&m(e,["bytesBase64Encoded"],Nr(t));const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Ei(n){const e={},t=d(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const i=d(n,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Nr(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function f3(n,e,t){const i={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=d(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=d(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&m(t,["_url","models_url"],kw(n,f)),i}function d3(n,e,t){const i={},o=d(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=d(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=d(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&m(t,["_url","models_url"],kw(n,f)),i}function h3(n,e){const t={},i=d(e,["config"]);return i!=null&&f3(n,i,t),t}function p3(n,e){const t={},i=d(e,["config"]);return i!=null&&d3(n,i,t),t}function m3(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["_self"]);if(o!=null){let a=Pw(o);Array.isArray(a)&&(a=a.map(u=>jm(u))),m(e,["models"],a)}return e}function g3(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["_self"]);if(o!=null){let a=Pw(o);Array.isArray(a)&&(a=a.map(u=>eg(u))),m(e,["models"],a)}return e}function y3(n){const e={},t=d(n,["maskMode"]);t!=null&&m(e,["maskMode"],t);const i=d(n,["segmentationClasses"]);i!=null&&m(e,["maskClasses"],i);const o=d(n,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function jm(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=d(n,["description"]);o!=null&&m(e,["description"],o);const a=d(n,["version"]);a!=null&&m(e,["version"],a);const u=d(n,["_self"]);u!=null&&m(e,["tunedModelInfo"],k3(u));const f=d(n,["inputTokenLimit"]);f!=null&&m(e,["inputTokenLimit"],f);const p=d(n,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=d(n,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const _=d(n,["temperature"]);_!=null&&m(e,["temperature"],_);const E=d(n,["maxTemperature"]);E!=null&&m(e,["maxTemperature"],E);const T=d(n,["topP"]);T!=null&&m(e,["topP"],T);const I=d(n,["topK"]);I!=null&&m(e,["topK"],I);const P=d(n,["thinking"]);return P!=null&&m(e,["thinking"],P),e}function eg(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=d(n,["description"]);o!=null&&m(e,["description"],o);const a=d(n,["versionId"]);a!=null&&m(e,["version"],a);const u=d(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>x6(T))),m(e,["endpoints"],E)}const f=d(n,["labels"]);f!=null&&m(e,["labels"],f);const p=d(n,["_self"]);p!=null&&m(e,["tunedModelInfo"],P3(p));const h=d(n,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const _=d(n,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(T=>T)),m(e,["checkpoints"],E)}return e}function _3(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],D6(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],M6(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(n,["inlineData"]);p!=null&&m(e,["inlineData"],i6(p));const h=d(n,["text"]);h!=null&&m(e,["text"],h);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const E=d(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function v3(n){const e={},t=d(n,["productImage"]);return t!=null&&m(e,["image"],Ei(t)),e}function E3(n,e){const t={},i=d(n,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=d(n,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","baseSteps"],o);const a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const u=d(n,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const p=d(n,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const _=d(n,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const E=d(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","compressionQuality"],E);const T=d(n,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const I=d(n,["labels"]);return e!==void 0&&I!=null&&m(e,["labels"],I),t}function T3(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["source"]);o!=null&&S3(o,t);const a=d(e,["config"]);return a!=null&&E3(a,t),t}function A3(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Yd(o))),m(e,["generatedImages"],i)}return e}function S3(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(n,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],Ei(o));const a=d(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>v3(f))),m(e,["instances[0]","productImages"],u)}return t}function C3(n){const e={},t=d(n,["referenceImage"]);t!=null&&m(e,["referenceImage"],Ei(t));const i=d(n,["referenceId"]);i!=null&&m(e,["referenceId"],i);const o=d(n,["referenceType"]);o!=null&&m(e,["referenceType"],o);const a=d(n,["maskImageConfig"]);a!=null&&m(e,["maskImageConfig"],y3(a));const u=d(n,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],c6(u));const f=d(n,["styleImageConfig"]);f!=null&&m(e,["styleImageConfig"],f);const p=d(n,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function qw(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=d(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function Gw(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const i=d(n,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=d(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function I3(n){const e={},t=d(n,["category"]);if(t!=null&&m(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function w3(n){const e={},t=d(n,["image"]);return t!=null&&m(e,["image"],Ei(t)),e}function R3(n,e){const t={},i=d(n,["mode"]);e!==void 0&&i!=null&&m(e,["parameters","mode"],i);const o=d(n,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const a=d(n,["confidenceThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","confidenceThreshold"],a);const u=d(n,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&m(e,["parameters","binaryColorThreshold"],f);const p=d(n,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),t}function b3(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["source"]);o!=null&&x3(o,t);const a=d(e,["config"]);return a!=null&&R3(a,t),t}function N3(n){const e={},t=d(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>e3(o))),m(e,["generatedMasks"],i)}return e}function x3(n,e){const t={},i=d(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=d(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ei(o));const a=d(n,["scribbleImage"]);return e!==void 0&&a!=null&&m(e,["instances[0]","scribble"],w3(a)),t}function D3(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],k6(t));const i=d(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function M3(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],o3(f));const p=d(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],a3(p));const h=d(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function Hw(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>P6(T))),m(e,["functionDeclarations"],E)}const i=d(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=d(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=d(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const p=d(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=d(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function k3(n){const e={},t=d(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=d(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function P3(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&m(e,["baseModel"],t);const i=d(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=d(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function V3(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=d(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function U3(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=d(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=d(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function L3(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","name"],Xe(n,i));const o=d(e,["config"]);return o!=null&&V3(o,t),t}function O3(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["config"]);return o!=null&&U3(o,t),t}function F3(n,e){const t={},i=d(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=d(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const a=d(n,["personGeneration"]);e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a);const u=d(n,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","mimeType"],f);const p=d(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=d(n,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=d(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=d(n,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const T=d(n,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const I=d(n,["mode"]);return e!==void 0&&I!=null&&m(e,["parameters","mode"],I),t}function B3(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const o=d(e,["image"]);o!=null&&m(t,["instances[0]","image"],Ei(o));const a=d(e,["upscaleFactor"]);a!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=d(e,["config"]);return u!=null&&F3(u,t),t}function q3(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Yd(a))),m(e,["generatedImages"],o)}return e}function G3(n){const e={},t=d(n,["uri"]);t!=null&&m(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Nr(i));const o=d(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function H3(n){const e={},t=d(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Nr(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function z3(n){const e={},t=d(n,["image"]);t!=null&&m(e,["_self"],Ei(t));const i=d(n,["maskMode"]);return i!=null&&m(e,["maskMode"],i),e}function K3(n){const e={},t=d(n,["image"]);t!=null&&m(e,["image"],$d(t));const i=d(n,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function Y3(n){const e={},t=d(n,["image"]);t!=null&&m(e,["image"],Ei(t));const i=d(n,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function zw(n){const e={},t=d(n,["uri"]);t!=null&&m(e,["uri"],t);const i=d(n,["videoBytes"]);i!=null&&m(e,["encodedVideo"],Nr(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function Kw(n){const e={},t=d(n,["uri"]);t!=null&&m(e,["gcsUri"],t);const i=d(n,["videoBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Nr(i));const o=d(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $3(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),t}function J3(n){const e={},t=d(n,["config"]);return t!=null&&$3(t,e),e}function Q3(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function X3(n){const e={},t=d(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&Q3(i,e),e}function W3(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function Z3(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["customMetadata"],a)}const o=d(n,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),t}function j3(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=d(n,["done"]);o!=null&&m(e,["done"],o);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],t5(u)),e}function e5(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&m(e,["fileName"],i);const o=d(n,["config"]);return o!=null&&Z3(o,e),e}function t5(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&m(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function n5(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function i5(n){const e={},t=d(n,["config"]);return t!=null&&n5(t,e),e}function s5(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["fileSearchStores"],a)}return e}function Yw(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const o=d(n,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const a=d(n,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(p=>p)),m(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),t}function r5(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&Yw(i,e),e}function o5(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a5="Content-Type",l5="X-Server-Timeout",u5="User-Agent",tg="x-goog-api-client",c5="1.34.0",f5=`google-genai-sdk/${c5}`,d5="v1beta1",h5="v1beta";class p5{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:d5,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:h5,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))o.searchParams.append(u,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>a.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&m5(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await rS(o),new Xm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await rS(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return pi(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const f="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Re(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(_,{stream:!0});try{const P=JSON.parse(E);if("error"in P){const B=JSON.parse(JSON.stringify(P.error)),L=B.status,J=B.code,ie=`got status: ${L}. ${JSON.stringify(P)}`;if(J>=400&&J<600)throw new zd({message:ie,status:J})}}catch(P){if(P.name==="ApiError")throw P}u+=E;let T=-1,I=0;for(;;){T=-1,I=0;for(const L of p){const J=u.indexOf(L);J!==-1&&(T===-1||J<T)&&(T=J,I=L.length)}if(T===-1)break;const P=u.substring(0,T);u=u.substring(T+I);const B=P.trim();if(B.startsWith(f)){const L=B.substring(f.length).trim();try{const J=new Response(L,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Re(new Xm(J))}catch(J){throw new Error(`exception parsing stream chunk ${L}. ${J}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=f5+" "+this.clientOptions.userAgentExtra;return e[u5]=t,e[tg]=t,e[a5]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(l5,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const p={file:o},h=this.getFileName(e),_=fe("upload/v1beta/files",p._url),E=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,p,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),f=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),E={};i!=null&&Yw(i,E);const T=await this.fetchUploadUrl(h,f,p,_,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var f;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function rS(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new zd({message:o,status:t}):new Error(o)}}function m5(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const f=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=u[p],_=f[p];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?f[p]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),f[p]=h)}return f}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g5="mcp_used/unknown";let y5=!1;function $w(n){for(const e of n)if(_5(e)||typeof e=="object"&&"inputSchema"in e)return!0;return y5}function Jw(n){var e;const t=(e=n[tg])!==null&&e!==void 0?e:"";n[tg]=(t+` ${g5}`).trimStart()}function _5(n){return n!==null&&typeof n=="object"&&n instanceof my}function v5(n){return pi(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield Re(t.listTools({cursor:o}));for(const f of u.tools)yield yield Re(f),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class my{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new my(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,p=(t=void 0,mi(v5(_))),h;h=await p.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const E=o;u.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=_}}catch(E){t={error:E}}finally{try{!f&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),WU(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function E5(n,e,t){const i=new HU;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class T5{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=C5(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const _=new Promise(Z=>{h=Z}),E=e.callbacks,T=function(){h({})},I=this.apiClient,P={onopen:T,onmessage:Z=>{E5(I,E.onmessage,Z)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(Z){}},B=this.webSocketFactory.create(p,S5(u),P);B.connect(),await _;const ie={setup:{model:Xe(this.apiClient,e.model)}};return B.send(JSON.stringify(ie)),new A5(B,this.apiClient)}}class A5{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=JO(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=$O(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ia.PLAY)}pause(){this.sendPlaybackControl(Ia.PAUSE)}stop(){this.sendPlaybackControl(Ia.STOP)}resetContext(){this.sendPlaybackControl(Ia.RESET_CONTEXT)}close(){this.conn.close()}}function S5(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function C5(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function w5(n,e,t){const i=new GU;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=WO(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class R5{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new T5(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&$w(e.config.tools)&&Jw(E);const T=D5(E);if(this.apiClient.isVertexAI())_=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,_);else{const N=this.apiClient.getApiKey();let V="BidiGenerateContent",k="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",k="access_token"),_=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${V}?${k}=${N}`}let I=()=>{};const P=new Promise(N=>{I=N}),B=e.callbacks,L=function(){var N;(N=B==null?void 0:B.onopen)===null||N===void 0||N.call(B),I({})},J=this.apiClient,ie={onopen:L,onmessage:N=>{w5(J,B.onmessage,N)},onerror:(t=B==null?void 0:B.onerror)!==null&&t!==void 0?t:function(N){},onclose:(i=B==null?void 0:B.onclose)!==null&&i!==void 0?i:function(N){}},Z=this.webSocketFactory.create(_,x5(T),ie);Z.connect(),await P;let oe=Xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const N=this.apiClient.getProject(),V=this.apiClient.getLocation();oe=`projects/${N}/locations/${V}/`+oe}let le={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Nu.AUDIO]}:e.config.responseModalities=[Nu.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],M=[];for(const N of ue)if(this.isCallableTool(N)){const V=N;M.push(await V.tool())}else M.push(N);M.length>0&&(e.config.tools=M);const D={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?le=YO(this.apiClient,D):le=KO(this.apiClient,D),delete le.config,Z.send(JSON.stringify(le)),new N5(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const b5={turnComplete:!0};class N5{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=jn(t.turns),e.isVertexAI()||(i=i.map(o=>Kd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(I5)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},b5),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:XO(e)}:t={realtimeInput:QO(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function x5(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function D5(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oS=10;function aS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Va(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Va(n){return"callTool"in n&&typeof n.callTool=="function"}function M5(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Va(o)))!==null&&i!==void 0?i:!1}function lS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Va(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function uS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k5 extends ws{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,f;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!M5(t)||aS(t.config))return await this.generateContentInternal(p);const h=lS(t);if(h.length>0){const B=h.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${B}.`)}let _,E;const T=jn(p.contents),I=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:oS;let P=0;for(;P<I&&(_=await this.generateContentInternal(p),!(!_.functionCalls||_.functionCalls.length===0));){const B=_.candidates[0].content,L=[];for(const J of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Va(J)){const Z=await J.callTool(_.functionCalls);L.push(...Z)}P++,E={role:"user",parts:L},p.contents=jn(p.contents),p.contents.push(B),p.contents.push(E),uS(p.config)&&(T.push(B),T.push(E))}return uS(p.config)&&(_.automaticFunctionCallingHistory=T),_},this.generateContentStream=async t=>{var i,o,a,u,f;if(this.maybeMoveToResponseJsonSchem(t),aS(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const p=lS(t);if(p.length>0){const E=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let f;return a?f={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ro(Cs.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,f,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(f=t.source)===null||f===void 0?void 0:f.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Va(p)?await p.tool():p)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&$w(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Jw(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Va(u)){const f=u,p=await f.tool();for(const h of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,f)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:oS;let u=!1,f=0;const p=await this.initAfcToolsMap(e);return(function(h,_,E){return pi(this,arguments,function*(){for(var T,I,P,B,L,J;f<a;){u&&(f++,u=!1);const le=yield Re(h.processParamsMaybeAddMcpUsage(E)),ue=yield Re(h.generateContentStreamInternal(le)),M=[],D=[];try{for(var ie=!0,Z=(I=void 0,mi(ue)),oe;oe=yield Re(Z.next()),T=oe.done,!T;ie=!0){B=oe.value,ie=!1;const N=B;if(yield yield Re(N),N.candidates&&(!((L=N.candidates[0])===null||L===void 0)&&L.content)){D.push(N.candidates[0].content);for(const V of(J=N.candidates[0].content.parts)!==null&&J!==void 0?J:[])if(f<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(V.functionCall.name)){const k=yield Re(_.get(V.functionCall.name).callTool([V.functionCall]));M.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(N){I={error:N}}finally{try{!ie&&!T&&(P=Z.return)&&(yield Re(P.call(Z)))}finally{if(I)throw I.error}}if(M.length>0){u=!0;const N=new ou;N.candidates=[{content:{role:"user",parts:M}}],yield yield Re(N);const V=[];V.push(...D),V.push({role:"user",parts:M});const k=jn(E.contents).concat(V);E.contents=k}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=nS(this.apiClient,e);return f=fe("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=sS(_),T=new ou;return Object.assign(T,E),T})}else{const h=tS(this.apiClient,e);return f=fe("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=iS(_),T=new ou;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=nS(this.apiClient,e);return f=fe("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return pi(this,arguments,function*(){var T,I,P,B;try{for(var L=!0,J=mi(E),ie;ie=yield Re(J.next()),T=ie.done,!T;L=!0){B=ie.value,L=!1;const Z=B,oe=sS(yield Re(Z.json()));oe.sdkHttpResponse={headers:Z.headers};const le=new ou;Object.assign(le,oe),yield yield Re(le)}}catch(Z){I={error:Z}}finally{try{!L&&!T&&(P=J.return)&&(yield Re(P.call(J)))}finally{if(I)throw I.error}}})})}else{const h=tS(this.apiClient,e);return f=fe("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return pi(this,arguments,function*(){var T,I,P,B;try{for(var L=!0,J=mi(E),ie;ie=yield Re(J.next()),T=ie.done,!T;L=!0){B=ie.value,L=!1;const Z=B,oe=iS(yield Re(Z.json()));oe.sdkHttpResponse={headers:Z.headers};const le=new ou;Object.assign(le,oe),yield yield Re(le)}}catch(Z){I={error:Z}}finally{try{!L&&!T&&(P=J.return)&&(yield Re(P.call(J)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=R6(this.apiClient,e);return f=fe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=N6(_),T=new OA;return Object.assign(T,E),T})}else{const h=w6(this.apiClient,e);return f=fe("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=b6(_),T=new OA;return Object.assign(T,E),T})}}async generateImagesInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=B6(this.apiClient,e);return f=fe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=G6(_),T=new FA;return Object.assign(T,E),T})}else{const h=F6(this.apiClient,e);return f=fe("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=q6(_),T=new FA;return Object.assign(T,E),T})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=A6(this.apiClient,e);return a=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=S6(p),_=new DU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=B3(this.apiClient,e);return a=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=q3(p),_=new MU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=T3(this.apiClient,e);return a=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=A3(p),_=new kU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=b3(this.apiClient,e);return a=fe("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=N3(p),_=new PU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=r3(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>eg(_))}else{const h=s3(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>jm(_))}}async listInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=p3(this.apiClient,e);return f=fe("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=g3(_),T=new BA;return Object.assign(T,E),T})}else{const h=h3(this.apiClient,e);return f=fe("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=m3(_),T=new BA;return Object.assign(T,E),T})}}async update(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=O3(this.apiClient,e);return f=fe("{model}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>eg(_))}else{const h=L3(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>jm(_))}}async delete(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=_6(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=E6(_),T=new qA;return Object.assign(T,E),T})}else{const h=y6(this.apiClient,e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=v6(_),T=new qA;return Object.assign(T,E),T})}}async countTokens(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=p6(this.apiClient,e);return f=fe("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=g6(_),T=new GA;return Object.assign(T,E),T})}else{const h=h6(this.apiClient,e);return f=fe("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=m6(_),T=new GA;return Object.assign(T,E),T})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=o6(this.apiClient,e);return a=fe("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=a6(p),_=new VU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=J6(this.apiClient,e);return f=fe("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const E=Y6(_),T=new md;return Object.assign(T,E),T})}else{const h=$6(this.apiClient,e);return f=fe("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const E=K6(_),T=new md;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P5 extends ws{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=IU(e);return f=fe("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=CU(e);return f=fe("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=yU(e);return a=fe("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V5(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function U5(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>K5(a))),m(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function L5(n,e,t){const i={},o=d(e,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const a=d(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const u=d(e,["uses"]);t!==void 0&&u!=null&&m(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&m(t,["bidiGenerateContentSetup"],z5(n,f));const p=d(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&m(t,["fieldMask"],p),i}function O5(n,e){const t={},i=d(e,["config"]);return i!=null&&m(t,["config"],L5(n,i,t)),t}function F5(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function B5(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const o=d(n,["name"]);if(o!=null&&m(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function q5(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function G5(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function H5(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const p=d(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],py(E));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const P=d(n,["systemInstruction"]);e!==void 0&&P!=null&&m(e,["setup","systemInstruction"],U5(ln(P)));const B=d(n,["tools"]);if(e!==void 0&&B!=null){let ue=Za(B);Array.isArray(ue)&&(ue=ue.map(M=>$5(Wa(M)))),m(e,["setup","tools"],ue)}const L=d(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],Y5(L));const J=d(n,["inputAudioTranscription"]);e!==void 0&&J!=null&&m(e,["setup","inputAudioTranscription"],J);const ie=d(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&m(e,["setup","outputAudioTranscription"],ie);const Z=d(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&m(e,["setup","realtimeInputConfig"],Z);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&m(e,["setup","contextWindowCompression"],oe);const le=d(n,["proactivity"]);if(e!==void 0&&le!=null&&m(e,["setup","proactivity"],le),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function z5(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["setup","model"],Xe(n,i));const o=d(e,["config"]);return o!=null&&m(t,["config"],H5(o,t)),t}function K5(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],F5(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],B5(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const p=d(n,["inlineData"]);p!=null&&m(e,["inlineData"],V5(p));const h=d(n,["text"]);h!=null&&m(e,["text"],h);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const E=d(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function Y5(n){const e={},t=d(n,["handle"]);if(t!=null&&m(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $5(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=d(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=d(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=d(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],q5(f));const p=d(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],G5(p));const h=d(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J5(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function Q5(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=J5(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const p=[];a&&p.push(a),f.length>0&&p.push(...f),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class X5 extends ws{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=O5(this.apiClient,e);a=fe("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const p=Q5(f,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W5(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function Z5(n){const e={},t=d(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&W5(i,e),e}function j5(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function eF(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function tF(n){const e={},t=d(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&eF(i,e),e}function nF(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=d(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iF extends ws{constructor(e){super(),this.apiClient=e,this.list=async t=>new Ro(Cs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=j5(e);return a=fe("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Z5(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=tF(e);return a=fe("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=nF(p),_=new UU;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sF extends ws{constructor(e,t=new iF(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Ro(Cs.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=J3(e);return a=fe("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=W3(e);return a=fe("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=X3(e);o=fe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=i5(e);return a=fe("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=s5(p),_=new LU;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=r5(e);return a=fe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=o5(p),_=new OU;return Object.assign(_,h),_})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=e5(e);return a=fe("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=j3(p),_=new uy;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Qw=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return Qw=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const rF=()=>Qw();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ng(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const ig=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ei extends Error{}class mn extends ei{constructor(e,t,i,o){super(`${mn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new Jd({message:i,cause:ig(t)});const a=t;return e===400?new Ww(e,a,i,o):e===401?new Zw(e,a,i,o):e===403?new jw(e,a,i,o):e===404?new eR(e,a,i,o):e===409?new tR(e,a,i,o):e===422?new nR(e,a,i,o):e===429?new iR(e,a,i,o):e>=500?new sR(e,a,i,o):new mn(e,a,i,o)}}class sg extends mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Jd extends mn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Xw extends Jd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ww extends mn{}class Zw extends mn{}class jw extends mn{}class eR extends mn{}class tR extends mn{}class nR extends mn{}class iR extends mn{}class sR extends mn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oF=/^[a-z][a-z0-9+.-]*:/i,aF=n=>oF.test(n);let rg=n=>(rg=Array.isArray,rg(n));const lF=rg;let uF=lF;const cS=uF;function cF(n){if(!n)return!0;for(const e in n)return!1;return!0}function fF(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const dF=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ei(`${n} must be an integer`);if(e<0)throw new ei(`${n} must be a positive integer`);return e},hF=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pF=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mF(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const gF=()=>{var n,e,t,i,o;const a=mF();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sa,"X-Stainless-OS":dS(Deno.build.os),"X-Stainless-Arch":fS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sa,"X-Stainless-OS":dS((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":fS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=yF();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function yF(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const fS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",dS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Rf;const _F=()=>Rf??(Rf=gF());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function rR(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function EF(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return rR({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function oR(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function TF(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AF=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aR=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ym(n,e,t){return aR(),new File(n,e??"unknown_file",t)}function SF(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const CF=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lR=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",IF=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&lR(n),wF=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function RF(n,e,t){if(aR(),n=await n,IF(n))return n instanceof File?n:ym([await n.arrayBuffer()],n.name);if(wF(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),ym(await og(o),e,t)}const i=await og(n);if(e||(e=SF(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return ym(i,e,t)}async function og(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(lR(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(CF(n))try{for(var f=!0,p=mi(n),h;h=await p.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const _=o;u.push(...await og(_))}}catch(_){t={error:_}}finally{try{!f&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${bF(n)}`)}return u}function bF(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uR{constructor(e){this._client=e}}uR._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cR(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const hS=Object.freeze(Object.create(null)),NF=(n=cR)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((_,E,T)=>{var I,P,B;/[?#]/.test(E)&&(o=!0);const L=i[T];let J=(o?encodeURIComponent:n)(""+L);return T!==i.length&&(L==null||typeof L=="object"&&L.toString===((B=Object.getPrototypeOf((P=Object.getPrototypeOf((I=L.hasOwnProperty)!==null&&I!==void 0?I:hS))!==null&&P!==void 0?P:hS))===null||B===void 0?void 0:B.toString))&&(J=L+"",a.push({start:_.length+E.length,length:J.length,error:`Value of type ${Object.prototype.toString.call(L).slice(8,-1)} is not a valid path parameter`})),_+E+(T===i.length?"":J)},""),f=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(f))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,E)=>_.start-E.start),a.length>0){let _=0;const E=a.reduce((T,I)=>{const P=" ".repeat(I.start-_),B="^".repeat(I.length);return _=I.start+I.length,T+P+B},"");throw new ei(`Path parameters result in path with invalid segments:
${a.map(T=>T.error).join(`
`)}
${u}
${E}`)}return u}),bf=NF(cR);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fR extends uR{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=yd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new ei("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ei("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(bf`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(bf`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(bf`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,f=yd(a,["api_version"]);return this._client.get(bf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}fR._key=Object.freeze(["interactions"]);class dR extends fR{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xF(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let Nf;function gy(n){let e;return(Nf??(e=new globalThis.TextEncoder,Nf=e.encode.bind(e)))(n)}let xf;function pS(n){let e;return(xf??(e=new globalThis.TextDecoder,xf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?gy(e):e;this.buffer=xF([this.buffer,t]);const i=[];let o;for(;(o=DF(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(pS(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=pS(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Qd.NEWLINE_CHARS=new Set([`
`,"\r"]);Qd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function DF(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function MF(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _d={off:0,error:200,warn:300,info:400,debug:500},mS=(n,e,t)=>{if(n){if(fF(_d,n))return n;hn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(_d))}`)}};function hu(){}function Df(n,e,t){return!e||_d[n]>_d[t]?hu:e[n].bind(e)}const kF={error:hu,warn:hu,info:hu,debug:hu};let gS=new WeakMap;function hn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return kF;const o=gS.get(t);if(o&&o[0]===i)return o[1];const a={error:Df("error",t,i),warn:Df("warn",t,i),info:Df("info",t,i),debug:Df("debug",t,i)};return gS.set(t,[i,a]),a}const lo=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wa{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?hn(i):console;function u(){return pi(this,arguments,function*(){var p,h,_,E;if(o)throw new ei("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let T=!1;try{try{for(var I=!0,P=mi(PF(e,t)),B;B=yield Re(P.next()),p=B.done,!p;I=!0){E=B.value,I=!1;const L=E;if(!T)if(L.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Re(JSON.parse(L.data))}catch(J){throw a.error("Could not parse message into JSON:",L.data),a.error("From chunk:",L.raw),J}}}catch(L){h={error:L}}finally{try{!I&&!p&&(_=P.return)&&(yield Re(_.call(P)))}finally{if(h)throw h.error}}T=!0}catch(L){if(ng(L))return yield Re(void 0);throw L}finally{T||t.abort()}})}return new wa(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return pi(this,arguments,function*(){var p,h,_,E;const T=new Qd,I=oR(e);try{for(var P=!0,B=mi(I),L;L=yield Re(B.next()),p=L.done,!p;P=!0){E=L.value,P=!1;const J=E;for(const ie of T.decode(J))yield yield Re(ie)}}catch(J){h={error:J}}finally{try{!P&&!p&&(_=B.return)&&(yield Re(_.call(B)))}finally{if(h)throw h.error}}for(const J of T.flush())yield yield Re(J)})}function u(){return pi(this,arguments,function*(){var p,h,_,E;if(o)throw new ei("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let T=!1;try{try{for(var I=!0,P=mi(a()),B;B=yield Re(P.next()),p=B.done,!p;I=!0){E=B.value,I=!1;const L=E;T||L&&(yield yield Re(JSON.parse(L)))}}catch(L){h={error:L}}finally{try{!I&&!p&&(_=P.return)&&(yield Re(_.call(P)))}finally{if(h)throw h.error}}T=!0}catch(L){if(ng(L))return yield Re(void 0);throw L}finally{T||t.abort()}})}return new wa(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new wa(()=>o(e),this.controller,this.client),new wa(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return rR({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=gy(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function PF(n,e){return pi(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ei("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ei("Attempted to iterate over a response with no body");const f=new UF,p=new Qd,h=oR(n.body);try{for(var _=!0,E=mi(VF(h)),T;T=yield Re(E.next()),i=T.done,!i;_=!0){u=T.value,_=!1;const I=u;for(const P of p.decode(I)){const B=f.decode(P);B&&(yield yield Re(B))}}}catch(I){o={error:I}}finally{try{!_&&!i&&(a=E.return)&&(yield Re(a.call(E)))}finally{if(o)throw o.error}}for(const I of p.flush()){const P=f.decode(I);P&&(yield yield Re(P))}})}function VF(n){return pi(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var f=!0,p=mi(n),h;h=yield Re(p.next()),t=h.done,!t;f=!0){a=h.value,f=!1;const _=a;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?gy(_):_;let T=new Uint8Array(u.length+E.length);T.set(u),T.set(E,u.length),u=T;let I;for(;(I=MF(u))!==-1;)yield yield Re(u.slice(0,I)),u=u.slice(I)}}catch(_){i={error:_}}finally{try{!f&&!t&&(o=p.return)&&(yield Re(o.call(p)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Re(u))})}class UF{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=LF(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function LF(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function OF(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var f;if(e.options.stream)return hn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):wa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),h=(f=p==null?void 0:p.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return hn(n).debug(`[${i}] response parsed`,lo({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yy extends Promise{constructor(e,t,i=OF){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new yy(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hR=Symbol("brand.privateNullableHeaders");function*FF(n){if(!n)return;if(hR in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():cS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=cS(i[1])?i[1]:[i[1]];let u=!1;for(const f of a)f!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,f])}}const au=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of FF(i)){const f=a.toLowerCase();o.has(f)||(e.delete(a),o.add(f)),u===null?(e.delete(a),t.add(f)):(e.append(a,u),t.delete(f))}}return{[hR]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _m=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=fU)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pR;class Xd{constructor(e){var t,i,o,a,u,f,p,{baseURL:h=_m("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=_m("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,T=yd(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:_,apiVersion:E},T),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(i=I.timeout)!==null&&i!==void 0?i:Xd.DEFAULT_TIMEOUT,this.logger=(o=I.logger)!==null&&o!==void 0?o:console;const P="warn";this.logLevel=P,this.logLevel=(u=(a=mS(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:mS(_m("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:P,this.fetchOptions=I.fetchOptions,this.maxRetries=(f=I.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(p=I.fetch)!==null&&p!==void 0?p:vF(),this.encoder=AF,this._options=I,this.apiKey=_,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=au([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return au([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return au([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new ei(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Sa}`}defaultIdempotencyKey(){return`stainless-node-retry-${rF()}`}makeStatusError(e,t,i,o){return mn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=aF(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return cF(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new yy(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const f=await e,p=(o=f.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=p),await this.prepareOptions(f);const{req:h,url:_,timeout:E}=await this.buildRequest(f,{retryCount:p-t});await this.prepareRequest(h,{url:_,options:f});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=i===void 0?"":`, retryOf: ${i}`,P=Date.now();if(hn(this).debug(`[${T}] sending request`,lo({retryOfRequestLogID:i,method:f.method,url:_,options:f,headers:h.headers})),!((a=f.signal)===null||a===void 0)&&a.aborted)throw new sg;const B=new AbortController,L=await this.fetchWithTimeout(_,h,E,B).catch(ig),J=Date.now();if(L instanceof globalThis.Error){const Z=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new sg;const oe=ng(L)||/timed? ?out/i.test(String(L)+("cause"in L?String(L.cause):""));if(t)return hn(this).info(`[${T}] connection ${oe?"timed out":"failed"} - ${Z}`),hn(this).debug(`[${T}] connection ${oe?"timed out":"failed"} (${Z})`,lo({retryOfRequestLogID:i,url:_,durationMs:J-P,message:L.message})),this.retryRequest(f,t,i??T);throw hn(this).info(`[${T}] connection ${oe?"timed out":"failed"} - error; no more retries left`),hn(this).debug(`[${T}] connection ${oe?"timed out":"failed"} (error; no more retries left)`,lo({retryOfRequestLogID:i,url:_,durationMs:J-P,message:L.message})),oe?new Xw:new Jd({cause:L})}const ie=`[${T}${I}] ${h.method} ${_} ${L.ok?"succeeded":"failed"} with status ${L.status} in ${J-P}ms`;if(!L.ok){const Z=await this.shouldRetry(L);if(t&&Z){const N=`retrying, ${t} attempts remaining`;return await TF(L.body),hn(this).info(`${ie} - ${N}`),hn(this).debug(`[${T}] response error (${N})`,lo({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:J-P})),this.retryRequest(f,t,i??T,L.headers)}const oe=Z?"error; no more retries left":"error; not retryable";hn(this).info(`${ie} - ${oe}`);const le=await L.text().catch(N=>ig(N).message),ue=hF(le),M=ue?void 0:le;throw hn(this).debug(`[${T}] response error (${oe})`,lo({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,message:M,durationMs:Date.now()-P})),this.makeStatusError(L.status,ue,M,L.headers)}return hn(this).info(ie),hn(this).debug(`[${T}] response start`,lo({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:J-P})),{response:L,options:f,controller:B,requestLogID:T,retryOfRequestLogID:i,startTime:P}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:f}=a,p=yd(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),_=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,E=Object.assign(Object.assign(Object.assign({signal:o.signal},_?{duplex:"half"}:{}),{method:"GET"}),p);f&&(E.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const f=o==null?void 0:o.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const p=o==null?void 0:o.get("retry-after");if(p&&!u){const h=parseFloat(p);Number.isNaN(h)?u=Date.parse(p)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await pF(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:f,path:p,query:h,defaultBaseURL:_}=u,E=this.buildURL(p,h,_);"timeout"in u&&dF("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:T,body:I}=this.buildBody({options:u}),P=await this.buildHeaders({options:e,method:f,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:P},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=au([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),_F()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=au([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:EF(e)}:this.encoder({body:e,headers:i})}}Xd.DEFAULT_TIMEOUT=6e4;class $t extends Xd{constructor(){super(...arguments),this.interactions=new dR(this)}}pR=$t;$t.GeminiNextGenAPIClient=pR;$t.GeminiNextGenAPIClientError=ei;$t.APIError=mn;$t.APIConnectionError=Jd;$t.APIConnectionTimeoutError=Xw;$t.APIUserAbortError=sg;$t.NotFoundError=eR;$t.ConflictError=tR;$t.RateLimitError=iR;$t.BadRequestError=Ww;$t.AuthenticationError=Zw;$t.InternalServerError=sR;$t.PermissionDeniedError=jw;$t.UnprocessableEntityError=nR;$t.toFile=RF;$t.Interactions=dR;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BF(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function qF(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function GF(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function HF(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function zF(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(n,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const u=d(n,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","batchSize"],f);const p=d(n,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function KF(n,e,t){const i={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const I=d(n,["validationDataset"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec"],yS(I))}else if(o==="PREFERENCE_TUNING"){const I=d(n,["validationDataset"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec"],yS(I))}const a=d(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const u=d(n,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const I=d(n,["epochCount"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(f==="PREFERENCE_TUNING"){const I=d(n,["epochCount"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let p=d(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const I=d(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(p==="PREFERENCE_TUNING"){const I=d(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const I=d(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(h==="PREFERENCE_TUNING"){const I=d(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let _=d(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const I=d(n,["adapterSize"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(_==="PREFERENCE_TUNING"){const I=d(n,["adapterSize"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=d(n,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const T=d(n,["beta"]);return e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function YF(n,e){const t={},i=d(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const o=d(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const a=d(n,["trainingDataset"]);a!=null&&iB(a);const u=d(n,["config"]);return u!=null&&zF(u,t),t}function $F(n,e){const t={},i=d(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const o=d(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const a=d(n,["trainingDataset"]);a!=null&&sB(a,t,e);const u=d(n,["config"]);return u!=null&&KF(u,t,e),t}function JF(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function QF(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function XF(n,e,t){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function WF(n,e,t){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function ZF(n,e){const t={},i=d(n,["config"]);return i!=null&&XF(i,t),t}function jF(n,e){const t={},i=d(n,["config"]);return i!=null&&WF(i,t),t}function eB(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const a=d(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>mR(f))),m(t,["tuningJobs"],u)}return t}function tB(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const a=d(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>ag(f))),m(t,["tuningJobs"],u)}return t}function nB(n,e){const t={},i=d(n,["name"]);i!=null&&m(t,["model"],i);const o=d(n,["name"]);return o!=null&&m(t,["endpoint"],o),t}function iB(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(t,["examples","examples"],o)}return t}function sB(n,e,t){const i={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=d(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function mR(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&m(t,["name"],o);const a=d(n,["state"]);a!=null&&m(t,["state"],Dw(a));const u=d(n,["createTime"]);u!=null&&m(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&m(t,["startTime"],f);const p=d(n,["tuningTask","completeTime"]);p!=null&&m(t,["endTime"],p);const h=d(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=d(n,["description"]);_!=null&&m(t,["description"],_);const E=d(n,["baseModel"]);E!=null&&m(t,["baseModel"],E);const T=d(n,["_self"]);return T!=null&&m(t,["tunedModel"],nB(T)),t}function ag(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&m(t,["name"],o);const a=d(n,["state"]);a!=null&&m(t,["state"],Dw(a));const u=d(n,["createTime"]);u!=null&&m(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&m(t,["startTime"],f);const p=d(n,["endTime"]);p!=null&&m(t,["endTime"],p);const h=d(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=d(n,["error"]);_!=null&&m(t,["error"],_);const E=d(n,["description"]);E!=null&&m(t,["description"],E);const T=d(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const I=d(n,["tunedModel"]);I!=null&&m(t,["tunedModel"],I);const P=d(n,["preTunedModel"]);P!=null&&m(t,["preTunedModel"],P);const B=d(n,["supervisedTuningSpec"]);B!=null&&m(t,["supervisedTuningSpec"],B);const L=d(n,["preferenceOptimizationSpec"]);L!=null&&m(t,["preferenceOptimizationSpec"],L);const J=d(n,["tuningDataStats"]);J!=null&&m(t,["tuningDataStats"],J);const ie=d(n,["encryptionSpec"]);ie!=null&&m(t,["encryptionSpec"],ie);const Z=d(n,["partnerModelTuningSpec"]);Z!=null&&m(t,["partnerModelTuningSpec"],Z);const oe=d(n,["customBaseModel"]);oe!=null&&m(t,["customBaseModel"],oe);const le=d(n,["experiment"]);le!=null&&m(t,["experiment"],le);const ue=d(n,["labels"]);ue!=null&&m(t,["labels"],ue);const M=d(n,["outputUri"]);M!=null&&m(t,["outputUri"],M);const D=d(n,["pipelineJob"]);D!=null&&m(t,["pipelineJob"],D);const N=d(n,["serviceAccount"]);N!=null&&m(t,["serviceAccount"],N);const V=d(n,["tunedModelDisplayName"]);V!=null&&m(t,["tunedModelDisplayName"],V);const k=d(n,["veoTuningSpec"]);return k!=null&&m(t,["veoTuningSpec"],k),t}function rB(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&m(t,["name"],o);const a=d(n,["metadata"]);a!=null&&m(t,["metadata"],a);const u=d(n,["done"]);u!=null&&m(t,["done"],u);const f=d(n,["error"]);return f!=null&&m(t,["error"],f),t}function yS(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&m(t,["validationDatasetUri"],i);const o=d(n,["vertexDatasetResource"]);return o!=null&&m(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oB extends ws{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(Cs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:Qm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=QF(e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>ag(_))}else{const h=JF(e);return f=fe("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>mR(_))}}async listInternal(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=jF(e);return f=fe("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=tB(_),T=new HA;return Object.assign(T,E),T})}else{const h=ZF(e);return f=fe("tunedModels",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=eB(_),T=new HA;return Object.assign(T,E),T})}}async cancel(e){var t,i,o,a;let u,f="",p={};if(this.apiClient.isVertexAI()){const h=qF(e);return f=fe("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=HF(_),T=new zA;return Object.assign(T,E),T})}else{const h=BF(e);return f=fe("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=GF(_),T=new zA;return Object.assign(T,E),T})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=$F(e,e);return a=fe("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>ag(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=YF(e);return a=fe("tunedModels",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>rB(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aB{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const lB=1024*1024*8,uB=3,cB=1e3,fB=2,vd="x-goog-upload-status";async function dB(n,e,t){var i;const o=await gR(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[vd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function hB(n,e,t){var i;const o=await gR(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[vd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=Iw(a),f=new cy;return Object.assign(f,u),f}async function gR(n,e,t){var i,o;let a=0,u=0,f=new Xm(new Response),p="upload";for(a=n.size;u<a;){const h=Math.min(lB,a-u),_=n.slice(u,u+h);u+h>=a&&(p+=", finalize");let E=0,T=cB;for(;E<uB&&(f=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[vd]));)E++,await mB(T),T=T*fB;if(u+=h,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[vd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function pB(n){return{size:n.size,type:n.type}}function mB(n){return new Promise(e=>setTimeout(e,n))}class gB{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dB(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hB(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yB{create(e,t,i){return new _B(e,t,i)}}class _B{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _S="x-goog-api-key";class vB{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(_S)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(_S,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EB="gl-node/";class TB{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new $t({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=mU(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new vB(this.apiKey);this.apiClient=new p5({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:EB+"web",uploader:new gB,downloader:new aB}),this.models=new k5(this.apiClient),this.live=new R5(this.apiClient,o,new yB),this.batches=new zL(this.apiClient),this.chats=new IO(this.models,this.apiClient),this.caches=new AO(this.apiClient),this.files=new VO(this.apiClient),this.operations=new P5(this.apiClient),this.authTokens=new X5(this.apiClient),this.tunings=new oB(this.apiClient),this.fileSearchStores=new sF(this.apiClient)}}const Hu="spanish_assistant_vocab",_y="spanish_assistant_last_analysis",yR="spanish_assistant_history",_R="spanish_assistant_theme",vy="spanish_assistant_session_key";let bo=null;$I(ho,n=>{bo=n});const Ey=n=>{const e={};return Object.keys(n).forEach(t=>{n[t]!==void 0&&(e[t]=n[t])}),e},vR=n=>{sessionStorage.setItem(vy,n)},Ty=()=>sessionStorage.getItem(vy),AB=()=>{sessionStorage.removeItem(vy)},Ay=()=>{const n=bo;return n?rk(Gu,"users",n.uid,"vocabulary"):null},Ir=async()=>{if(bo)try{const e=Ay();if(!e)return[];const t=yk(e,_k("addedAt","desc"));return(await Ak(t)).docs.map(o=>o.data())}catch(e){return console.error("Failed to load vocab from Firestore",e),[]}try{const e=localStorage.getItem(Hu);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load vocab from LocalStorage",e),[]}},SB=async n=>{const e=bo,t=Date.now();let i=0;const o=await Ir(),a=new Set(o.map(f=>f.word.toLowerCase()));if(e)try{const f=AI(Gu),p=Ay();if(!p)return 0;for(const h of n){const _=h.word.toLowerCase();if(!a.has(_)){const E=crypto.randomUUID(),T={...h,id:E,addedAt:t,mastered:!1},I=Ud(p,E);f.set(I,Ey(T)),i++,a.add(_)}}return i>0&&await f.commit(),i}catch(f){return console.error("Batch add failed in Firestore",f),0}const u=[...o];return n.forEach(f=>{const p=f.word.toLowerCase();a.has(p)||(u.unshift({...f,id:crypto.randomUUID(),addedAt:t,mastered:!1}),i++,a.add(p))}),i>0&&localStorage.setItem(Hu,JSON.stringify(u)),i},CB=async n=>{const e=bo;let t=0;if(e)try{const u=AI(Gu),f=Ay();if(!f)return 0;const p=await Ir(),h=new Set(p.map(_=>_.word.toLowerCase()));for(const _ of n)if(!h.has(_.word.toLowerCase())){const E=_.id||crypto.randomUUID(),T=Ud(f,E),I={..._,id:E};u.set(T,Ey(I)),t++,h.add(_.word.toLowerCase())}return await u.commit(),t}catch(u){return console.error("Import failed in Firestore",u),0}const i=await Ir(),o=[...i],a=new Set(i.map(u=>u.word.toLowerCase()));return n.forEach(u=>{a.has(u.word.toLowerCase())||(o.unshift({...u,id:u.id||crypto.randomUUID()}),t++,a.add(u.word.toLowerCase()))}),t>0&&localStorage.setItem(Hu,JSON.stringify(o)),t},IB=async n=>{const e=bo;if(e)try{const o=Ud(Gu,"users",e.uid,"vocabulary",n);await Ck(o);return}catch(o){console.error("Failed to delete from Firestore",o)}const i=(await Ir()).filter(o=>o.id!==n);localStorage.setItem(Hu,JSON.stringify(i))},wB=async n=>{const e=bo,t=await Ir(),i=t.find(u=>u.id===n);if(!i)return;const o={...i,mastered:!i.mastered};if(e)try{const u=Ud(Gu,"users",e.uid,"vocabulary",n);await Sk(u,Ey(o),{merge:!0});return}catch(u){console.error("Failed to update Firestore",u)}const a=t.map(u=>u.id===n?o:u);localStorage.setItem(Hu,JSON.stringify(a))},RB=(n,e)=>{const t={data:n,image:e,timestamp:Date.now()};localStorage.setItem(_y,JSON.stringify(t));const i=bB(),o=[t,...i].slice(0,10);localStorage.setItem(yR,JSON.stringify(o))},ER=()=>{const n=localStorage.getItem(_y);return n?JSON.parse(n):null},vS=()=>{localStorage.removeItem(_y)},bB=()=>{const n=localStorage.getItem(yR);return n?JSON.parse(n):[]},NB=()=>localStorage.getItem(_R)||"light",xB=n=>{localStorage.setItem(_R,n)};function DB(n){const e=atob(n),t=e.length,i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=e.charCodeAt(o);return i}async function MB(n,e,t,i){const o=new Int16Array(n.buffer),a=o.length/i,u=e.createBuffer(i,a,t);for(let f=0;f<i;f++){const p=u.getChannelData(f);for(let h=0;h<a;h++)p[h]=o[h*i+f]/32768}return u}const kB={type:Ct.OBJECT,properties:{sentences:{type:Ct.ARRAY,items:{type:Ct.OBJECT,properties:{original:{type:Ct.STRING,description:"The EXACT verbatim sentence from the image. No omissions."},translation:{type:Ct.STRING,description:"Natural German translation of the full sentence."},words:{type:Ct.ARRAY,items:{type:Ct.OBJECT,properties:{word:{type:Ct.STRING,description:"The word, phrase, punctuation, or space."},type:{type:Ct.STRING,enum:["word","punctuation"],description:"Use 'word' for lexical units/phrases, 'punctuation' for symbols/spaces."},translation:{type:Ct.STRING,description:"German translation (required if type='word')."},explanation:{type:Ct.STRING,description:"German Grammar/context explanation (required if type='word')."},category:{type:Ct.STRING,enum:["noun","verb","adjective","function"],description:"Grammatical category."},baseForm:{type:Ct.STRING,description:"Lemma/Infinitiv."}},required:["word","type"]}}},required:["original","translation","words"]}}},required:["sentences"]},TR=()=>{const t=Ty()||void 0;if(!t)throw new Error("Kein API Key gefunden. Bitte geben Sie einen in den Einstellungen ein.");return new TB({apiKey:t})},PB=async n=>{const e=TR(),t=`
    Analyze the attached Spanish book page. You are an expert Spanish teacher.
    
    CRITICAL INSTRUCTIONS:
    1. COMPLETE TRANSCRIPTION: You MUST process EVERY SINGLE SENTENCE visible on the page. Do not skip any sentences.
    2. PHRASE BINDING: Combine words that belong together (reflexive verbs like "se levant", idioms like "tener que") into a SINGLE 'word' object.
    3. FULL CHARACTER COVERAGE: Reconstruct the 'original' string perfectly including spaces.
    4. Provide the result in German.
  `;try{const o=(await e.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:n}},{text:t}]},config:{responseMimeType:"application/json",responseSchema:kB,systemInstruction:"You are a professional Spanish-to-German translator. Extract all text and provide linguistic analysis for learners."}})).text;if(!o)throw new Error("No response text from Gemini.");return JSON.parse(o)}catch(i){throw console.error("Analysis failed:",i),i}},AR=async n=>{var t,i,o,a,u,f;const e=TR();try{const h=(f=(u=(a=(o=(i=(t=(await e.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:n}]}],config:{responseModalities:[Nu.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Puck"}}}}})).candidates)==null?void 0:t[0])==null?void 0:i.content)==null?void 0:o.parts)==null?void 0:a[0])==null?void 0:u.inlineData)==null?void 0:f.data;if(!h)throw new Error("No audio data returned");const _=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),E=_.createGain();E.connect(_.destination);const T=await MB(DB(h),_,24e3,1),I=_.createBufferSource();I.buffer=T,I.connect(E),I.start()}catch(p){throw console.error("TTS failed:",p),p}},VB=({onChangeView:n})=>{const[e,t]=Ae.useState(null),[i,o]=Ae.useState(!1),[a,u]=Ae.useState(null),[f,p]=Ae.useState(0),[h,_]=Ae.useState("sentence"),[E,T]=Ae.useState(0),[I,P]=Ae.useState(null),[B,L]=Ae.useState(!1),[J,ie]=Ae.useState(0),[Z,oe]=Ae.useState(new Set),le=Ae.useRef(null);Ae.useEffect(()=>{const _e=ER();_e&&!a&&(u(_e.data),t(_e.image))},[]),Ae.useEffect(()=>{(async()=>{const Y=await Ir();oe(new Set(Y.map(re=>re.word.toLowerCase())))})()},[a]);const ue=async _e=>{o(!0),u(null),L(!1),p(0),_("sentence"),T(0),ie(0);try{const Y=await PB(_e);u(Y),RB(Y,_e)}catch(Y){console.error(Y),t(null)}finally{o(!1)}},M=_e=>{var re;const Y=(re=_e.target.files)==null?void 0:re[0];if(Y){const ge=new FileReader;ge.onloadend=()=>{const $e=ge.result.split(",")[1];t($e),ue($e)},ge.readAsDataURL(Y)}},D=async(_e,Y)=>{if(!I){P(Y);try{await AR(_e)}catch(re){console.error(re)}finally{P(null)}}},N=a==null?void 0:a.sentences[f],V=(N==null?void 0:N.words.filter(_e=>_e.type==="word"))||[],k=Ae.useCallback(async()=>{if(!(!a||!N)){if(h==="sentence")V.length>0?(_("words"),T(0)):_("translation");else if(h==="words")E<V.length-1?T(_e=>_e+1):_("translation");else if(h==="translation"){const _e=V.map(re=>({word:re.word,translation:re.translation||"",explanation:re.explanation||"",category:re.category,baseForm:re.baseForm,contextSentence:N.original})),Y=await SB(_e);ie(re=>re+Y),oe(re=>{const ge=new Set(re);return _e.forEach(Ve=>ge.add(Ve.word.toLowerCase())),ge}),f<a.sentences.length-1?(p(re=>re+1),_("sentence"),T(0)):(L(!0),vS())}}},[a,h,E,f,V,N]),O=()=>{h==="translation"?V.length>0?(_("words"),T(V.length-1)):_("sentence"):h==="words"?E>0?T(_e=>_e-1):_("sentence"):h==="sentence"&&f>0&&(p(_e=>_e-1),_("translation"))},x=()=>{t(null),u(null),L(!1),vS()};if(Ae.useEffect(()=>{const _e=Y=>{Y.code==="Space"&&a&&!B&&(Y.preventDefault(),k())};return window.addEventListener("keydown",_e),()=>window.removeEventListener("keydown",_e)},[a,B,k]),i)return R.jsxs("div",{className:"fixed inset-0 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col items-center justify-center text-center p-6 z-50",children:[R.jsx(fo,{className:"w-12 h-12 animate-spin text-[#6B705C] dark:text-[#D4A373] mb-4"}),R.jsx("h2",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Verarbeite Seite..."}),R.jsx("p",{className:"text-sm text-[#6B705C] dark:text-[#A5A58D] font-serif italic mt-2",children:"Die KI analysiert Grammatik und Vokabeln."})]});if(!a&&!e)return R.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-6 animate-fade-in text-center px-6",children:[R.jsx(vm,{className:"w-16 h-16 text-[#6B705C] dark:text-[#A5A58D] opacity-20"}),R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"Bereit zum Lesen?"}),R.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Scanne eine Seite deines spanischen Buches."})]}),R.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:le,className:"hidden",onChange:M}),R.jsx("button",{onClick:()=>{var _e;return(_e=le.current)==null?void 0:_e.click()},className:"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 px-10 rounded-2xl shadow-xl font-bold uppercase text-[10px] tracking-widest active:scale-95 transition-transform",children:"Kamera starten"})]});if(B)return R.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-6 animate-fade-in",children:[R.jsx("div",{className:"w-16 h-16 bg-[#E9EDC9] dark:bg-[#2C2420] rounded-2xl flex items-center justify-center text-[#6B705C] dark:text-[#D4A373] mb-6",children:R.jsx(Kf,{className:"w-8 h-8"})}),R.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"Seite beendet!"}),R.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic mb-8",children:J>0?`Du hast ${J} neue Fundstcke in deine Sammlung aufgenommen.`:"Alle Wrter dieser Seite sind bereits in deiner Sammlung."}),R.jsxs("div",{className:"flex gap-4",children:[R.jsx("button",{onClick:x,className:"bg-[#6B705C] dark:bg-[#2C2420] text-white px-8 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest border dark:border-[#2C2420] shadow-md",children:"Nchste Seite"}),R.jsx("button",{onClick:()=>n==null?void 0:n(vt.VOCAB),className:"bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] px-8 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest shadow-md",children:"Zum Lernbereich"})]})]});const he=V[E];return R.jsxs("div",{className:"fixed inset-0 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col overflow-hidden animate-fade-in transition-colors",children:[R.jsxs("div",{className:"px-6 pt-4 pb-2 flex justify-between items-center bg-[#FDFBF7] dark:bg-[#12100E] z-10 transition-colors",children:[R.jsxs("div",{className:"flex flex-col gap-1 w-full max-w-[150px]",children:[R.jsxs("span",{className:"text-[9px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-widest",children:["Satz ",f+1," / ",a==null?void 0:a.sentences.length]}),R.jsx("div",{className:"h-1 bg-[#EAE2D6] dark:bg-[#2C2420] rounded-full overflow-hidden",children:R.jsx("div",{className:"h-full bg-[#B26B4A] dark:bg-[#D4A373] transition-all duration-500",style:{width:`${(f+1)/((a==null?void 0:a.sentences.length)||1)*100}%`}})})]}),R.jsx("button",{onClick:x,className:"p-2 text-[#A5A58D] dark:text-[#2C2420] hover:text-[#B26B4A] dark:hover:text-[#D4A373]",children:R.jsx(kb,{className:"w-5 h-5"})})]}),R.jsxs("div",{className:"flex-grow flex flex-col px-6 py-4 overflow-hidden relative",children:[h==="sentence"&&R.jsx("div",{className:"flex-grow flex items-center justify-center animate-fade-in",children:R.jsx("p",{className:"text-2xl sm:text-3xl font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed text-center italic",children:N==null?void 0:N.original})}),h==="words"&&N&&R.jsxs("div",{className:"flex-grow flex flex-col gap-6 animate-fade-in h-full",children:[R.jsx("div",{className:"bg-white dark:bg-[#1C1917] p-4 rounded-2xl border border-[#EAE2D6] dark:border-[#2C2420] shadow-sm shrink-0",children:R.jsx("p",{className:"text-lg font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed",children:N.words.map((_e,Y)=>{const re=he&&_e.word===he.word;return R.jsx("span",{className:`transition-colors duration-300 ${re?"bg-[#FEFAE0] dark:bg-[#2C2420] text-[#B26B4A] dark:text-[#D4A373] font-bold px-1 rounded":"opacity-40"}`,children:_e.word},Y)})})}),R.jsx("div",{className:"flex-grow flex items-center justify-center overflow-hidden",children:he&&R.jsxs("div",{className:"w-full bg-[#2C2420] dark:bg-[#1C1917] text-[#FDFBF7] p-6 rounded-[2rem] shadow-xl border border-transparent dark:border-[#2C2420] flex flex-col animate-fade-in overflow-hidden max-h-full",children:[R.jsxs("div",{className:"overflow-y-auto",children:[R.jsx("span",{className:"text-[8px] font-bold uppercase tracking-[0.2em] text-[#B26B4A] dark:text-[#D4A373] mb-2 block",children:he.category||"Vokabel"}),R.jsx("h3",{className:"text-3xl font-serif font-bold text-[#FEFAE0] dark:text-[#D4A373] mb-2",children:he.word}),R.jsx("p",{className:"text-xl font-serif italic text-[#FDFBF7]/90 mb-4",children:he.translation}),he.explanation&&R.jsx("div",{className:"bg-white/5 dark:bg-black/20 p-4 rounded-xl border border-white/10 dark:border-white/5 mb-4",children:R.jsx("p",{className:"text-sm font-serif italic text-[#FDFBF7]/70 leading-relaxed",children:he.explanation})})]}),R.jsxs("div",{className:"mt-auto pt-4 flex justify-between items-center border-t border-white/10",children:[R.jsx("button",{onClick:()=>D(he.word,`w-${f}-${E}`),className:"w-10 h-10 bg-[#B26B4A] dark:bg-[#D4A373] rounded-xl flex items-center justify-center",children:I===`w-${f}-${E}`?R.jsx(fo,{className:"w-4 h-4 animate-spin text-white"}):R.jsx($f,{className:"w-4 h-4 fill-white text-white dark:text-[#12100E] dark:fill-[#12100E]"})}),Z.has(he.word.toLowerCase())&&R.jsxs("div",{className:"flex items-center gap-1.5 bg-[#E9EDC9]/20 px-3 py-1.5 rounded-full",children:[R.jsx(Kf,{className:"w-3 h-3 text-[#E9EDC9]"}),R.jsx("span",{className:"text-[8px] font-bold uppercase tracking-widest text-[#E9EDC9]",children:"In Sammlung"})]})]})]})})]}),h==="translation"&&N&&R.jsxs("div",{className:"flex-grow flex flex-col justify-center gap-8 animate-fade-in",children:[R.jsxs("div",{className:"text-center",children:[R.jsx("span",{className:"text-[8px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-widest mb-2 block",children:"Original"}),R.jsx("p",{className:"text-2xl font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed italic",children:N.original})]}),R.jsx("div",{className:"w-12 h-[1px] bg-[#EAE2D6] dark:bg-[#2C2420] mx-auto opacity-50"}),R.jsxs("div",{className:"text-center",children:[R.jsx("span",{className:"text-[8px] font-bold text-[#B26B4A] dark:text-[#D4A373] uppercase tracking-widest mb-2 block",children:"bersetzung"}),R.jsx("p",{className:"text-xl font-serif text-[#6B705C] dark:text-[#A5A58D] leading-relaxed",children:N.translation})]}),R.jsx("button",{onClick:()=>D(N.original,`s-${f}`),className:"mx-auto w-12 h-12 bg-[#FDFBF7] dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-full flex items-center justify-center text-[#6B705C] dark:text-[#A5A58D] hover:bg-[#FEFAE0] dark:hover:bg-[#2C2420] transition-colors",children:I===`s-${f}`?R.jsx(fo,{className:"w-4 h-4 animate-spin"}):R.jsx($f,{className:"w-4 h-4 fill-current"})})]})]}),R.jsx("div",{className:"px-6 py-6 bg-[#FDFBF7] dark:bg-[#12100E] border-t border-[#EAE2D6] dark:border-[#2C2420] shrink-0 pb-[max(1.5rem,env(safe-area-inset-bottom))] transition-colors",children:R.jsxs("div",{className:"flex gap-3 max-w-lg mx-auto",children:[R.jsx("button",{onClick:O,disabled:h==="sentence"&&f===0,className:"w-14 h-14 flex items-center justify-center bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl text-[#6B705C] dark:text-[#A5A58D] disabled:opacity-20 active:scale-95 transition-all shadow-sm",children:R.jsx(Ib,{className:"w-6 h-6"})}),R.jsxs("button",{onClick:k,className:`flex-grow h-14 rounded-2xl flex items-center justify-center gap-3 font-bold text-[10px] uppercase tracking-[0.2em] shadow-lg active:scale-95 transition-all ${h==="translation"?"bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E]":"bg-[#2C2420] dark:bg-white text-white dark:text-[#12100E]"}`,children:[h==="sentence"?"Wrter analysieren":h==="words"&&E<V.length-1?"Nchstes Wort":h==="words"?"bersetzung":"Nchster Satz",R.jsx(Sb,{className:"w-4 h-4"})]})]})})]})},UB=()=>{const[n,e]=Ae.useState([]),[t,i]=Ae.useState(!0),[o,a]=Ae.useState("list"),[u,f]=Ae.useState("all"),[p,h]=Ae.useState([]),[_,E]=Ae.useState(0),[T,I]=Ae.useState(!1),[P,B]=Ae.useState(!1),L=Ae.useRef(null);Ae.useEffect(()=>{J()},[]);const J=async()=>{i(!0);const O=await Ir();e(O.sort((x,he)=>he.addedAt-x.addedAt)),i(!1)},ie=()=>u==="all"?n:n.filter(O=>(O.category||"function")===u),Z=async O=>{window.confirm("Dieses Wort aus deiner Sammlung lschen?")&&(await IB(O),J())},oe=()=>{const O=JSON.stringify(n,null,2),x="data:application/json;charset=utf-8,"+encodeURIComponent(O),he=`spanish-vocab-${new Date().toISOString().split("T")[0]}.json`,_e=document.createElement("a");_e.setAttribute("href",x),_e.setAttribute("download",he),_e.click()},le=()=>{var O;(O=L.current)==null||O.click()},ue=async O=>{var _e;const x=(_e=O.target.files)==null?void 0:_e[0];if(!x)return;B(!0);const he=new FileReader;he.onload=async Y=>{var re;try{const ge=JSON.parse((re=Y.target)==null?void 0:re.result);if(Array.isArray(ge)){const Ve=await CB(ge);alert(`${Ve} neue Vokabeln importiert!`),await J()}else alert("Ungltiges JSON-Format. Erwartet wird ein Array von Vokabeln.")}catch(ge){console.error("Import failed:",ge),alert("Import fehlgeschlagen. Bitte berprfen Sie die Datei.")}finally{B(!1),L.current&&(L.current.value="")}},he.readAsText(x)},M=()=>{const O=ie().filter(he=>!he.mastered);if(O.length===0){alert("Keine offenen Vokabeln in dieser Kategorie!");return}const x=[...O].sort(()=>Math.random()-.5);h(x),E(0),I(!1),a("train")},D=async O=>{const x=p[_];O==="good"?await wB(x.id):h(he=>[...he,x]),I(!1),_<p.length-1?E(he=>he+1):(alert("Sitzung abgeschlossen! Gut gemacht."),a("list"),J())},N=async()=>{if(o==="train"&&p[_])try{await AR(p[_].word)}catch(O){console.error(O)}},V=()=>R.jsx("div",{className:"flex overflow-x-auto gap-3 pb-3 mb-6 scrollbar-hide px-1",children:["all","noun","verb","adjective","function"].map(O=>R.jsx("button",{onClick:()=>f(O),className:`px-5 py-2.5 rounded-2xl whitespace-nowrap text-xs font-bold uppercase tracking-widest transition-all duration-300 ${u===O?"bg-[#B26B4A] dark:bg-[#D4A373] text-[#FDFBF7] dark:text-[#12100E] shadow-lg":"bg-white dark:bg-[#1C1917] text-[#6B705C] dark:text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420]"}`,children:O==="all"?"Alle":O==="noun"?"Nomen":O==="verb"?"Verben":O==="adjective"?"Adjektive":"Andere"},O))});if(t)return R.jsx("div",{className:"flex flex-col items-center justify-center h-[50vh] animate-fade-in",children:R.jsx(fo,{className:"w-10 h-10 animate-spin text-[#B26B4A] dark:text-[#D4A373]"})});if(n.length===0&&!P)return R.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] text-center p-8 animate-fade-in",children:[R.jsx("div",{className:"w-20 h-20 bg-white dark:bg-[#1C1917] rounded-full flex items-center justify-center mb-6 text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420]",children:R.jsx(Lb,{className:"w-10 h-10"})}),R.jsx("h3",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Deine Sammlung ist leer"}),R.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] mt-3 font-serif italic mb-6",children:"Scanne ein Buch, um neue Vokabeln automatisch hierher zu speichern."}),R.jsx("input",{type:"file",accept:".json",ref:L,className:"hidden",onChange:ue}),R.jsxs("button",{onClick:le,className:"bg-white dark:bg-[#1C1917] text-[#6B705C] dark:text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420] px-6 py-3 rounded-2xl flex items-center gap-2 font-bold uppercase text-[10px] tracking-widest shadow-sm hover:bg-[#FDFBF7] transition-all",children:[R.jsx(t0,{className:"w-4 h-4"}),"JSON Importieren"]})]});if(o==="list"){const O=ie(),x=O.filter(he=>!he.mastered).length;return R.jsxs("div",{className:"space-y-6 pb-24 animate-fade-in",children:[R.jsxs("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] rounded-[2.5rem] p-8 text-[#FDFBF7] shadow-2xl mb-8 relative overflow-hidden border border-transparent dark:border-[#2C2420]",children:[R.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#B26B4A]/10 dark:bg-[#D4A373]/5 rounded-full -mr-16 -mt-16"}),R.jsxs("div",{className:"relative z-10",children:[R.jsxs("div",{className:"flex justify-between items-start mb-4",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-4xl font-serif font-bold",children:x}),R.jsx("p",{className:"text-[#FDFBF7]/60 text-sm font-serif italic tracking-wide",children:"offene Fundstcke"})]}),R.jsxs("div",{className:"flex gap-2",children:[R.jsx("input",{type:"file",accept:".json",ref:L,className:"hidden",onChange:ue}),R.jsx("button",{onClick:le,disabled:P,className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl text-[#FDFBF7] transition-all border border-white/10",title:"Vokabeln importieren",children:P?R.jsx(fo,{className:"w-5 h-5 animate-spin"}):R.jsx(t0,{className:"w-5 h-5"})}),R.jsx("button",{onClick:oe,className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl text-[#FDFBF7] transition-all border border-white/10",title:"Vokabeln exportieren",children:R.jsx(Vb,{className:"w-5 h-5"})}),R.jsx(Gb,{className:"w-8 h-8 text-[#B26B4A] dark:text-[#D4A373] ml-2"})]})]}),R.jsx("button",{onClick:M,disabled:x===0,className:"w-full bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] font-bold py-4 rounded-2xl shadow-xl hover:bg-[#9E5A3B] transition-all disabled:opacity-30 mt-4 uppercase text-xs tracking-[0.2em]",children:"Sitzung starten"})]})]}),V(),R.jsx("div",{className:"grid gap-4",children:O.length===0?R.jsx("p",{className:"text-center text-[#A5A58D] py-12 font-serif italic",children:"In dieser Kategorie hast du noch keine Wrter gesammelt."}):O.map(he=>R.jsxs("div",{className:"bg-white dark:bg-[#1C1917] p-5 rounded-3xl border border-[#EAE2D6] dark:border-[#2C2420] shadow-sm flex justify-between items-center group transition-all hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30",children:[R.jsxs("div",{className:"flex-grow",children:[R.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[R.jsx("p",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] text-xl",children:he.word}),he.mastered&&R.jsx(Kf,{className:"w-4 h-4 text-[#6B705C] dark:text-[#D4A373]"}),he.category&&R.jsx("span",{className:"text-[7px] font-bold uppercase tracking-widest text-[#B26B4A] dark:text-[#D4A373] bg-[#B26B4A]/10 px-1.5 py-0.5 rounded",children:he.category})]}),R.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] text-sm italic font-serif",children:he.translation})]}),R.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:R.jsx("button",{onClick:()=>Z(he.id),className:"p-3 text-[#A5A58D] hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-2xl transition-all",children:R.jsx(bS,{className:"w-5 h-5"})})})]},he.id))})]})}const k=p[_];return R.jsxs("div",{className:"h-full flex flex-col items-center max-w-md mx-auto animate-fade-in",children:[R.jsxs("div",{className:"w-full flex justify-between items-center mb-8",children:[R.jsx("button",{onClick:()=>a("list"),className:"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7] text-xs font-bold uppercase tracking-widest bg-white dark:bg-[#1C1917] px-4 py-2 rounded-xl border border-[#EAE2D6] dark:border-[#2C2420]",children:"Abbrechen"}),R.jsxs("span",{className:"text-[#A5A58D] text-xs font-bold tracking-[0.3em]",children:[_+1," / ",p.length]})]}),R.jsx("div",{className:"w-full aspect-[4/5] perspective-1000 cursor-pointer mb-10",onClick:()=>!T&&I(!0),children:R.jsxs("div",{className:"relative w-full h-full bg-white dark:bg-[#1C1917] rounded-[3rem] shadow-2xl border border-[#EAE2D6] dark:border-[#2C2420] overflow-hidden flex flex-col transition-all duration-500",children:[R.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center p-10 text-center ${T?"border-b border-[#FDFBF7] dark:border-[#12100E]":""}`,children:[R.jsx("span",{className:"text-[10px] font-bold text-[#B26B4A] dark:text-[#D4A373] uppercase tracking-[0.3em] mb-6",children:k.category||"Wort"}),R.jsx("h2",{className:"text-5xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-8",children:k.word}),!T&&R.jsxs("div",{className:"flex flex-col items-center gap-4",children:[R.jsx("p",{className:"text-[#A5A58D] text-sm font-serif italic animate-pulse",children:"Karte aufdecken"}),R.jsx("button",{onClick:O=>{O.stopPropagation(),N()},className:"p-4 bg-[#FEFAE0] dark:bg-[#2C2420] text-[#B26B4A] dark:text-[#D4A373] rounded-2xl hover:bg-[#FAEDCD] dark:hover:bg-black/20",children:R.jsx($f,{className:"w-6 h-6 fill-current"})})]})]}),T&&R.jsxs("div",{className:"flex-1 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col items-center justify-center p-10 text-center animate-in fade-in slide-in-from-bottom-6 duration-500 overflow-y-auto",children:[R.jsx("h2",{className:"text-3xl font-serif font-bold text-[#B26B4A] dark:text-[#D4A373] mb-3",children:k.translation}),k.baseForm&&k.baseForm.toLowerCase()!==k.word.toLowerCase()&&R.jsxs("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] mb-4 font-bold uppercase tracking-widest opacity-60",children:["Grundform: ",k.baseForm]}),R.jsxs("p",{className:"text-[#6B705C] dark:text-[#A5A58D] italic font-serif text-lg leading-relaxed mb-6",children:['"',k.explanation,'"']}),k.contextSentence&&R.jsxs("div",{className:"mb-6 p-4 bg-white/50 dark:bg-white/5 rounded-2xl border border-[#EAE2D6] dark:border-white/10 relative",children:[R.jsx(nN,{className:"w-3 h-3 text-[#B26B4A] dark:text-[#D4A373] absolute top-2 left-2 opacity-30"}),R.jsx("p",{className:"text-[11px] font-serif italic text-[#6B705C] dark:text-[#A5A58D] px-2",children:k.contextSentence})]}),R.jsx("button",{onClick:O=>{O.stopPropagation(),N()},className:"p-3 bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] rounded-xl hover:bg-[#E9EDC9] dark:hover:bg-[#2C2420]",children:R.jsx($f,{className:"w-5 h-5 fill-current"})})]})]})}),T?R.jsxs("div",{className:"grid grid-cols-2 gap-6 w-full px-4",children:[R.jsxs("button",{onClick:()=>D("again"),className:"flex flex-col items-center justify-center p-5 bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#B26B4A] dark:text-[#D4A373] rounded-3xl hover:bg-[#FEFAE0] dark:hover:bg-[#2C2420] active:scale-95 transition-all shadow-sm",children:[R.jsx(sN,{className:"w-6 h-6 mb-2"}),R.jsx("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Nochmal"})]}),R.jsxs("button",{onClick:()=>D("good"),className:"flex flex-col items-center justify-center p-5 bg-[#6B705C] dark:bg-[#D4A373] text-white dark:text-[#12100E] rounded-3xl hover:bg-[#585E4A] dark:hover:bg-[#B26B4A] active:scale-95 transition-all shadow-xl",children:[R.jsx(Kf,{className:"w-6 h-6 mb-2"}),R.jsx("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Gelernt"})]})]}):R.jsx("div",{className:"w-full px-4",children:R.jsx("button",{onClick:()=>I(!0),className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-[#FDFBF7] dark:text-[#12100E] font-bold py-5 rounded-3xl shadow-2xl hover:bg-[#3D332D] dark:hover:bg-[#B26B4A] active:scale-95 transition-all uppercase text-xs tracking-[0.3em]",children:"Antwort zeigen"})})]})},LB=()=>{const[n,e]=Ae.useState(""),[t,i]=Ae.useState(!1),[o,a]=Ae.useState(!1);Ae.useEffect(()=>{const p=Ty();p&&(i(!0),e(p))},[]);const u=()=>{n.trim()&&(vR(n.trim()),i(!0),a(!0),setTimeout(()=>a(!1),3e3))},f=()=>{AB(),e(""),i(!1)};return R.jsxs("div",{className:"max-w-2xl mx-auto py-8 animate-fade-in",children:[R.jsxs("div",{className:"mb-10",children:[R.jsx("h2",{className:"text-3xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"Einstellungen"}),R.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Verwalte deinen Zugang zur KI und deine lokalen Daten."})]}),R.jsxs("div",{className:"space-y-6",children:[R.jsxs("section",{className:"bg-white dark:bg-[#1C1917] rounded-[2.5rem] border border-[#EAE2D6] dark:border-[#2C2420] p-8 shadow-sm",children:[R.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[R.jsx("div",{className:"w-12 h-12 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] shadow-sm",children:R.jsx(Yf,{className:"w-6 h-6"})}),R.jsxs("div",{children:[R.jsx("h3",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] text-xl",children:"API Konfiguration"}),R.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Dein persnlicher Schlssel fr Google Gemini."})]})]}),R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{className:"relative",children:[R.jsx("input",{type:"password",value:n,onChange:p=>e(p.target.value),placeholder:"Geben Sie Ihren API Key ein...",className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-4 pr-12 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm font-mono"}),R.jsx(Yf,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D] opacity-40"})]}),R.jsxs("div",{className:"flex flex-wrap gap-3",children:[R.jsxs("button",{onClick:u,disabled:!n.trim(),className:"flex-1 bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2 disabled:opacity-30",children:[o?R.jsx(e0,{className:"w-4 h-4"}):R.jsx(oN,{className:"w-4 h-4"}),o?"Gespeichert":"Key Speichern"]}),t&&R.jsxs("button",{onClick:f,className:"bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900/30 px-6 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] active:scale-95 transition-all flex items-center justify-center gap-2",children:[R.jsx(bS,{className:"w-4 h-4"}),"Lschen"]})]}),R.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-2xl border transition-colors ${t?"bg-[#E9EDC9]/30 border-[#CCD5AE]/30":"bg-[#FEFAE0]/50 border-[#FAEDCD]"}`,children:[t?R.jsx(e0,{className:"w-5 h-5 text-[#6B705C] shrink-0 mt-0.5"}):R.jsx(Rb,{className:"w-5 h-5 text-[#B26B4A] shrink-0 mt-0.5"}),R.jsxs("div",{children:[R.jsxs("p",{className:"text-xs font-bold uppercase tracking-widest text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:["Status: ",t?"Persnlicher Key aktiv":"Kein Key konfiguriert"]}),R.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:t?"Dieser Key wird ausschlielich in deiner aktuellen Browser-Session verwendet und nicht permanent gespeichert.":"Bitte hinterlege einen Key, um die bersetzungs- und Audio-Funktionen nutzen zu knnen."})]})]})]})]}),R.jsxs("section",{className:"bg-[#FEFAE0]/30 dark:bg-[#1C1917]/50 rounded-[2.5rem] border border-[#FAEDCD] dark:border-[#2C2420] p-8",children:[R.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[R.jsx("div",{className:"w-10 h-10 bg-white dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#6B705C] dark:text-[#A5A58D] shadow-sm",children:R.jsx(wS,{className:"w-5 h-5"})}),R.jsx("h3",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Sicherheit & Lokalitt"})]}),R.jsxs("p",{className:"text-sm text-[#6B705C] dark:text-[#A5A58D] font-serif italic leading-relaxed",children:["Dein Lernfortschritt wird bei Gsten ausschlielich in deinem Browser (Local Storage) gespeichert. API Keys werden aus Sicherheitsgrnden nur im ",R.jsx("strong",{children:"Session Storage"})," gehalten  sie verschwinden, sobald du den Tab schliet."]})]})]})]})},OB=({onGuestLogin:n})=>{const[e,t]=Ae.useState(!0),[i,o]=Ae.useState(""),[a,u]=Ae.useState(""),[f,p]=Ae.useState(""),[h,_]=Ae.useState(!1),[E,T]=Ae.useState(null),I=async P=>{P.preventDefault(),_(!0),T(null);try{if(e)await CP(ho,i,a);else{const B=await SP(ho,i,a);await wP(B.user,{displayName:f})}}catch(B){console.error("Auth error:",B),T(B.message||"Authentifizierung fehlgeschlagen.")}finally{_(!1)}};return R.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#FDFBF7] dark:bg-[#12100E]",children:R.jsxs("div",{className:"w-full max-w-md animate-fade-in",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#2C2420] dark:bg-[#D4A373] rounded-2xl text-[#FDFBF7] dark:text-[#12100E] shadow-xl mb-6",children:R.jsx(AS,{className:"w-8 h-8"})}),R.jsx("h1",{className:"text-3xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2 tracking-tight",children:"Spanish Reading Assistant"}),R.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Melde dich an, um deine Lesereise zu beginnen."})]}),R.jsxs("div",{className:"bg-white dark:bg-[#1C1917] p-8 rounded-[2.5rem] border border-[#EAE2D6] dark:border-[#2C2420] shadow-2xl",children:[R.jsxs("div",{className:"flex bg-[#FDFBF7] dark:bg-[#12100E] p-1 rounded-2xl border border-[#EAE2D6] dark:border-[#2C2420] mb-8",children:[R.jsx("button",{onClick:()=>t(!0),className:`flex-1 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all ${e?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D]"}`,children:"Anmelden"}),R.jsx("button",{onClick:()=>t(!1),className:`flex-1 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all ${e?"text-[#6B705C] dark:text-[#A5A58D]":"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm"}`,children:"Registrieren"})]}),R.jsxs("form",{onSubmit:I,className:"space-y-5",children:[!e&&R.jsxs("div",{className:"space-y-2",children:[R.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Name"}),R.jsxs("div",{className:"relative",children:[R.jsx(NS,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),R.jsx("input",{type:"text",required:!0,value:f,onChange:P=>p(P.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:"Dein Name"})]})]}),R.jsxs("div",{className:"space-y-2",children:[R.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Email"}),R.jsxs("div",{className:"relative",children:[R.jsx(Wb,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),R.jsx("input",{type:"email",required:!0,value:i,onChange:P=>o(P.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:"name@beispiel.de"})]})]}),R.jsxs("div",{className:"space-y-2",children:[R.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Passwort"}),R.jsxs("div",{className:"relative",children:[R.jsx(Kb,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),R.jsx("input",{type:"password",required:!0,value:a,onChange:P=>u(P.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:""})]})]}),E&&R.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 rounded-2xl text-red-600 dark:text-red-400 text-xs font-serif italic",children:E}),R.jsx("button",{type:"submit",disabled:h,className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-50",children:h?R.jsx(fo,{className:"w-4 h-4 animate-spin"}):e?R.jsxs(R.Fragment,{children:[R.jsx($b,{className:"w-4 h-4"}),"Anmelden"]}):R.jsxs(R.Fragment,{children:[R.jsx(mN,{className:"w-4 h-4"}),"Konto erstellen"]})})]}),R.jsxs("div",{className:"relative my-8",children:[R.jsx("div",{className:"absolute inset-0 flex items-center",children:R.jsx("div",{className:"w-full border-t border-[#EAE2D6] dark:border-[#2C2420]"})}),R.jsx("div",{className:"relative flex justify-center text-[8px] font-bold uppercase tracking-[0.3em]",children:R.jsx("span",{className:"bg-white dark:bg-[#1C1917] px-4 text-[#A5A58D]",children:"Oder"})})]}),R.jsxs("button",{onClick:n,disabled:h,className:"w-full bg-white dark:bg-transparent border border-[#EAE2D6] dark:border-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-sm active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-50 hover:bg-[#FDFBF7] dark:hover:bg-[#2C2420]/30",children:[R.jsx(Db,{className:"w-4 h-4"}),"Als Gast fortfahren"]}),R.jsxs("div",{className:"mt-8 pt-8 border-t border-[#EAE2D6] dark:border-[#2C2420] flex items-center justify-center gap-2 text-[#6B705C] dark:text-[#A5A58D]",children:[R.jsx(RS,{className:"w-4 h-4 opacity-50"}),R.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50",children:"App by Spanish Learners"})]})]})]})})},FB=({onClose:n})=>{const[e,t]=Ae.useState(""),i=()=>{e.trim()&&(vR(e.trim()),n())};return R.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-[#12100E]/80 backdrop-blur-sm animate-fade-in",children:R.jsxs("div",{className:"w-full max-w-md bg-[#FDFBF7] dark:bg-[#1C1917] rounded-[2.5rem] shadow-2xl border border-[#EAE2D6] dark:border-[#2C2420] p-8 relative",children:[R.jsx("button",{onClick:n,className:"absolute top-6 right-6 p-2 text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7] transition-colors",children:R.jsx(_N,{className:"w-5 h-5"})}),R.jsxs("div",{className:"mb-6",children:[R.jsx("div",{className:"w-14 h-14 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-2xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] mb-4",children:R.jsx(Yf,{className:"w-7 h-7"})}),R.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"API Key bentigt"}),R.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] text-sm font-serif italic",children:"Um die KI-Funktionen nutzen zu knnen, geben Sie bitte Ihren Gemini API Key ein. Dieser wird nur fr diese Sitzung gespeichert."})]}),R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{className:"relative",children:[R.jsx(Yf,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),R.jsx("input",{type:"password",value:e,onChange:o=>t(o.target.value),placeholder:"Geben Sie Ihren Key ein...",className:"w-full bg-white dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm font-mono"})]}),R.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[#E9EDC9]/30 dark:bg-[#2C2420]/30 rounded-xl border border-[#CCD5AE]/30 dark:border-[#2C2420]/50",children:[R.jsx(wS,{className:"w-4 h-4 text-[#6B705C] dark:text-[#A5A58D]"}),R.jsx("p",{className:"text-[10px] text-[#6B705C] dark:text-[#A5A58D] font-serif",children:"Sicher: Der Key wird beim Schlieen des Tabs gelscht."})]}),R.jsxs("button",{onClick:i,disabled:!e.trim(),className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-30",children:["Sitzung starten",R.jsx(Mf,{className:"w-4 h-4"})]}),R.jsx("button",{onClick:n,className:"w-full text-[#A5A58D] text-[10px] font-bold uppercase tracking-widest mt-2 hover:text-[#6B705C] transition-colors",children:"Spter eingeben"})]})]})})};function BB(){const[n,e]=Ae.useState(vt.HOME),[t,i]=Ae.useState(null),[o,a]=Ae.useState(0),[u,f]=Ae.useState(NB()),[p,h]=Ae.useState(null),[_,E]=Ae.useState(localStorage.getItem("spanish_assistant_is_guest")==="true"),[T,I]=Ae.useState(!0),[P,B]=Ae.useState(!1);Ae.useEffect(()=>{const le=$I(ho,ue=>{h(ue),ue&&(E(!1),localStorage.removeItem("spanish_assistant_is_guest"),L()),I(!1)});return()=>le()},[]),Ae.useEffect(()=>{i(ER()),Ir().then(le=>a(le.length))},[n,p,_]),Ae.useEffect(()=>{u==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),xB(u)},[u]);const L=()=>{Ty()||B(!0)},J=()=>f(le=>le==="light"?"dark":"light"),ie=()=>{E(!0),localStorage.setItem("spanish_assistant_is_guest","true"),L()},Z=()=>{E(!1),localStorage.removeItem("spanish_assistant_is_guest")};if(T)return R.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#FDFBF7] dark:bg-[#12100E]",children:[R.jsx(fo,{className:"w-12 h-12 animate-spin text-[#B26B4A] dark:text-[#D4A373] mb-4"}),R.jsx("p",{className:"font-serif italic text-[#6B705C] dark:text-[#A5A58D]",children:"Wird geladen..."})]});if(!p&&!_)return R.jsx(OB,{onGuestLogin:ie});const oe=()=>{switch(n){case vt.ANALYZE:return R.jsx(VB,{onChangeView:e});case vt.VOCAB:return R.jsx(UB,{});case vt.SETTINGS:return R.jsx(LB,{});case vt.HOME:default:return R.jsxs("div",{className:"flex flex-col gap-6 py-4 animate-fade-in",children:[R.jsxs("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] rounded-[2.5rem] p-8 text-[#FDFBF7] shadow-xl relative overflow-hidden border border-transparent dark:border-[#2C2420]",children:[R.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#B26B4A]/20 dark:bg-[#D4A373]/10 rounded-full -mr-12 -mt-12 blur-2xl"}),R.jsxs("div",{className:"relative z-10",children:[R.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[R.jsx(RS,{className:"text-[#FEFAE0] dark:text-[#D4A373] w-5 h-5"}),R.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest text-[#FEFAE0]/80 dark:text-[#D4A373]/80",children:_?"Bienvenido, Invitado":`Bienvenido, ${(p==null?void 0:p.displayName)||"Amigo"}`})]}),R.jsx("h2",{className:"text-4xl font-serif font-bold mb-4 tracking-tight",children:"Hola amigo."}),R.jsx("p",{className:"text-[#FDFBF7]/70 text-md font-serif italic leading-relaxed mb-6 max-w-sm",children:_?"Deine Vokabeln werden lokal im Browser gespeichert. Exportiere sie regelmig!":"Dein Fortschritt wird sicher in der Cloud synchronisiert."}),R.jsxs("div",{className:"flex flex-wrap gap-3",children:[R.jsxs("button",{onClick:()=>e(vt.ANALYZE),className:"bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] font-bold py-3.5 px-6 rounded-xl shadow-lg hover:bg-[#9E5A3B] transition-all inline-flex items-center gap-3 uppercase text-[10px] tracking-widest",children:[R.jsx(CS,{className:"w-4 h-4"}),"Seite scannen"]}),t&&R.jsxs("button",{onClick:()=>e(vt.ANALYZE),className:"bg-white/10 text-white border border-white/20 font-bold py-3.5 px-6 rounded-xl shadow-lg hover:bg-white/20 transition-all inline-flex items-center gap-3 uppercase text-[10px] tracking-widest",children:[R.jsx(Fb,{className:"w-4 h-4"}),"Letzte Seite fortsetzen"]})]})]})]}),R.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[R.jsxs("div",{onClick:()=>e(vt.ANALYZE),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] shadow-sm border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30 hover:shadow-md transition-all group",children:[R.jsx("div",{className:"w-12 h-12 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] mb-4 group-hover:scale-105 transition-transform",children:R.jsx(AS,{className:"w-6 h-6"})}),R.jsxs("div",{className:"flex justify-between items-start",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:"Lesereise"}),R.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Analysiere Texte und lerne Schtze kennen."})]}),R.jsx(Mf,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420] group-hover:text-[#B26B4A] dark:group-hover:text-[#D4A373] transition-colors"})]})]}),R.jsxs("div",{onClick:()=>e(vt.VOCAB),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] shadow-sm border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30 hover:shadow-md transition-all group",children:[R.jsx("div",{className:"w-12 h-12 bg-[#E9EDC9] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#6B705C] dark:text-[#A5A58D] mb-4 group-hover:scale-105 transition-transform",children:R.jsx(SS,{className:"w-6 h-6"})}),R.jsxs("div",{className:"flex justify-between items-start",children:[R.jsxs("div",{children:[R.jsx("h3",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:"Wortschatz"}),R.jsxs("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:[o," Fundstcke in deiner Sammlung."]})]}),R.jsx(Mf,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420] group-hover:text-[#6B705C] dark:group-hover:text-[#D4A373] transition-colors"})]})]})]}),R.jsxs("div",{onClick:()=>e(vt.SETTINGS),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer flex items-center justify-between hover:bg-[#FDFBF7] dark:hover:bg-[#12100E] transition-colors",children:[R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsx("div",{className:"bg-[#2C2420]/5 dark:bg-white/5 p-3 rounded-xl",children:R.jsx(IS,{className:"w-5 h-5 text-[#6B705C] dark:text-[#A5A58D]"})}),R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Einstellungen"}),R.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] italic",children:"Verwalte deinen Zugang und lerne mehr."})]})]}),R.jsx(Mf,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420]"})]})]})}};return R.jsxs(cU,{currentView:n,onChangeView:e,theme:u,onToggleTheme:J,isGuest:_,onLogoutGuest:Z,children:[oe(),P&&R.jsx(FB,{onClose:()=>B(!1)})]})}const SR=document.getElementById("root");if(!SR)throw new Error("Could not find root element to mount to");const qB=fb.createRoot(SR);qB.render(R.jsx(ib.StrictMode,{children:R.jsx(BB,{})}));
