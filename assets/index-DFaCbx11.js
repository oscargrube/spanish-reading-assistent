(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function PS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var tm={exports:{}},lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function g1(){if(nE)return lu;nE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return lu.Fragment=e,lu.jsx=t,lu.jsxs=t,lu}var iE;function y1(){return iE||(iE=1,tm.exports=g1()),tm.exports}var w=y1(),nm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE;function _1(){if(sE)return Ne;sE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function I(q){return q===null||typeof q!="object"?null:(q=T&&q[T]||q["@@iterator"],typeof q=="function"?q:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,L={};function Y(q,ne,fe){this.props=q,this.context=ne,this.refs=L,this.updater=fe||k}Y.prototype.isReactComponent={},Y.prototype.setState=function(q,ne){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ne,"setState")},Y.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function ee(){}ee.prototype=Y.prototype;function W(q,ne,fe){this.props=q,this.context=ne,this.refs=L,this.updater=fe||k}var ae=W.prototype=new ee;ae.constructor=W,F(ae,Y.prototype),ae.isPureReactComponent=!0;var oe=Array.isArray;function le(){}var D={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(q,ne,fe){var de=fe.ref;return{$$typeof:n,type:q,key:ne,ref:de!==void 0?de:null,props:fe}}function U(q,ne){return N(q.type,ne,q.props)}function P(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function O(q){var ne={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(fe){return ne[fe]})}var x=/\/+/g;function ve(q,ne){return typeof q=="object"&&q!==null&&q.key!=null?O(""+q.key):ne.toString(36)}function Xe(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(le,le):(q.status="pending",q.then(function(ne){q.status==="pending"&&(q.status="fulfilled",q.value=ne)},function(ne){q.status==="pending"&&(q.status="rejected",q.reason=ne)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Q(q,ne,fe,de,ue){var Te=typeof q;(Te==="undefined"||Te==="boolean")&&(q=null);var Ae=!1;if(q===null)Ae=!0;else switch(Te){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(q.$$typeof){case n:case e:Ae=!0;break;case _:return Ae=q._init,Q(Ae(q._payload),ne,fe,de,ue)}}if(Ae)return ue=ue(q),Ae=de===""?"."+ve(q,0):de,oe(ue)?(fe="",Ae!=null&&(fe=Ae.replace(x,"$&/")+"/"),Q(ue,ne,fe,"",function(Ai){return Ai})):ue!=null&&(P(ue)&&(ue=U(ue,fe+(ue.key==null||q&&q.key===ue.key?"":(""+ue.key).replace(x,"$&/")+"/")+Ae)),ne.push(ue)),1;Ae=0;var ct=de===""?".":de+":";if(oe(q))for(var lt=0;lt<q.length;lt++)de=q[lt],Te=ct+ve(de,lt),Ae+=Q(de,ne,fe,Te,ue);else if(lt=I(q),typeof lt=="function")for(q=lt.call(q),lt=0;!(de=q.next()).done;)de=de.value,Te=ct+ve(de,lt++),Ae+=Q(de,ne,fe,Te,ue);else if(Te==="object"){if(typeof q.then=="function")return Q(Xe(q),ne,fe,de,ue);throw ne=String(q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function re(q,ne,fe){if(q==null)return q;var de=[],ue=0;return Q(q,de,"","",function(Te){return ne.call(fe,Te,ue++)}),de}function ye(q){if(q._status===-1){var ne=q._result;ne=ne(),ne.then(function(fe){(q._status===0||q._status===-1)&&(q._status=1,q._result=fe)},function(fe){(q._status===0||q._status===-1)&&(q._status=2,q._result=fe)}),q._status===-1&&(q._status=0,q._result=ne)}if(q._status===1)return q._result.default;throw q._result}var Ue=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},$e={map:re,forEach:function(q,ne,fe){re(q,function(){ne.apply(this,arguments)},fe)},count:function(q){var ne=0;return re(q,function(){ne++}),ne},toArray:function(q){return re(q,function(ne){return ne})||[]},only:function(q){if(!P(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Ne.Activity=E,Ne.Children=$e,Ne.Component=Y,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=W,Ne.StrictMode=i,Ne.Suspense=p,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(q){return D.H.useMemoCache(q)}},Ne.cache=function(q){return function(){return q.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(q,ne,fe){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var de=F({},q.props),ue=q.key;if(ne!=null)for(Te in ne.key!==void 0&&(ue=""+ne.key),ne)!M.call(ne,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&ne.ref===void 0||(de[Te]=ne[Te]);var Te=arguments.length-2;if(Te===1)de.children=fe;else if(1<Te){for(var Ae=Array(Te),ct=0;ct<Te;ct++)Ae[ct]=arguments[ct+2];de.children=Ae}return N(q.type,ue,de)},Ne.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Ne.createElement=function(q,ne,fe){var de,ue={},Te=null;if(ne!=null)for(de in ne.key!==void 0&&(Te=""+ne.key),ne)M.call(ne,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ue[de]=ne[de]);var Ae=arguments.length-2;if(Ae===1)ue.children=fe;else if(1<Ae){for(var ct=Array(Ae),lt=0;lt<Ae;lt++)ct[lt]=arguments[lt+2];ue.children=ct}if(q&&q.defaultProps)for(de in Ae=q.defaultProps,Ae)ue[de]===void 0&&(ue[de]=Ae[de]);return N(q,Te,ue)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(q){return{$$typeof:d,render:q}},Ne.isValidElement=P,Ne.lazy=function(q){return{$$typeof:_,_payload:{_status:-1,_result:q},_init:ye}},Ne.memo=function(q,ne){return{$$typeof:h,type:q,compare:ne===void 0?null:ne}},Ne.startTransition=function(q){var ne=D.T,fe={};D.T=fe;try{var de=q(),ue=D.S;ue!==null&&ue(fe,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(le,Ue)}catch(Te){Ue(Te)}finally{ne!==null&&fe.types!==null&&(ne.types=fe.types),D.T=ne}},Ne.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ne.use=function(q){return D.H.use(q)},Ne.useActionState=function(q,ne,fe){return D.H.useActionState(q,ne,fe)},Ne.useCallback=function(q,ne){return D.H.useCallback(q,ne)},Ne.useContext=function(q){return D.H.useContext(q)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(q,ne){return D.H.useDeferredValue(q,ne)},Ne.useEffect=function(q,ne){return D.H.useEffect(q,ne)},Ne.useEffectEvent=function(q){return D.H.useEffectEvent(q)},Ne.useId=function(){return D.H.useId()},Ne.useImperativeHandle=function(q,ne,fe){return D.H.useImperativeHandle(q,ne,fe)},Ne.useInsertionEffect=function(q,ne){return D.H.useInsertionEffect(q,ne)},Ne.useLayoutEffect=function(q,ne){return D.H.useLayoutEffect(q,ne)},Ne.useMemo=function(q,ne){return D.H.useMemo(q,ne)},Ne.useOptimistic=function(q,ne){return D.H.useOptimistic(q,ne)},Ne.useReducer=function(q,ne,fe){return D.H.useReducer(q,ne,fe)},Ne.useRef=function(q){return D.H.useRef(q)},Ne.useState=function(q){return D.H.useState(q)},Ne.useSyncExternalStore=function(q,ne,fe){return D.H.useSyncExternalStore(q,ne,fe)},Ne.useTransition=function(){return D.H.useTransition()},Ne.version="19.2.3",Ne}var rE;function yg(){return rE||(rE=1,nm.exports=_1()),nm.exports}var me=yg();const v1=PS(me);var im={exports:{}},uu={},sm={exports:{}},rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE;function E1(){return oE||(oE=1,(function(n){function e(Q,re){var ye=Q.length;Q.push(re);e:for(;0<ye;){var Ue=ye-1>>>1,$e=Q[Ue];if(0<o($e,re))Q[Ue]=re,Q[ye]=$e,ye=Ue;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var re=Q[0],ye=Q.pop();if(ye!==re){Q[0]=ye;e:for(var Ue=0,$e=Q.length,q=$e>>>1;Ue<q;){var ne=2*(Ue+1)-1,fe=Q[ne],de=ne+1,ue=Q[de];if(0>o(fe,ye))de<$e&&0>o(ue,fe)?(Q[Ue]=ue,Q[de]=ye,Ue=de):(Q[Ue]=fe,Q[ne]=ye,Ue=ne);else if(de<$e&&0>o(ue,ye))Q[Ue]=ue,Q[de]=ye,Ue=de;else break e}}return re}function o(Q,re){var ye=Q.sortIndex-re.sortIndex;return ye!==0?ye:Q.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],h=[],_=1,E=null,T=3,I=!1,k=!1,F=!1,L=!1,Y=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function ae(Q){for(var re=t(h);re!==null;){if(re.callback===null)i(h);else if(re.startTime<=Q)i(h),re.sortIndex=re.expirationTime,e(p,re);else break;re=t(h)}}function oe(Q){if(F=!1,ae(Q),!k)if(t(p)!==null)k=!0,le||(le=!0,O());else{var re=t(h);re!==null&&Xe(oe,re.startTime-Q)}}var le=!1,D=-1,M=5,N=-1;function U(){return L?!0:!(n.unstable_now()-N<M)}function P(){if(L=!1,le){var Q=n.unstable_now();N=Q;var re=!0;try{e:{k=!1,F&&(F=!1,ee(D),D=-1),I=!0;var ye=T;try{t:{for(ae(Q),E=t(p);E!==null&&!(E.expirationTime>Q&&U());){var Ue=E.callback;if(typeof Ue=="function"){E.callback=null,T=E.priorityLevel;var $e=Ue(E.expirationTime<=Q);if(Q=n.unstable_now(),typeof $e=="function"){E.callback=$e,ae(Q),re=!0;break t}E===t(p)&&i(p),ae(Q)}else i(p);E=t(p)}if(E!==null)re=!0;else{var q=t(h);q!==null&&Xe(oe,q.startTime-Q),re=!1}}break e}finally{E=null,T=ye,I=!1}re=void 0}}finally{re?O():le=!1}}}var O;if(typeof W=="function")O=function(){W(P)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,ve=x.port2;x.port1.onmessage=P,O=function(){ve.postMessage(null)}}else O=function(){Y(P,0)};function Xe(Q,re){D=Y(function(){Q(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var re=3;break;default:re=T}var ye=T;T=re;try{return Q()}finally{T=ye}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(Q,re){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ye=T;T=Q;try{return re()}finally{T=ye}},n.unstable_scheduleCallback=function(Q,re,ye){var Ue=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ue+ye:Ue):ye=Ue,Q){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ye+$e,Q={id:_++,callback:re,priorityLevel:Q,startTime:ye,expirationTime:$e,sortIndex:-1},ye>Ue?(Q.sortIndex=ye,e(h,Q),t(p)===null&&Q===t(h)&&(F?(ee(D),D=-1):F=!0,Xe(oe,ye-Ue))):(Q.sortIndex=$e,e(p,Q),k||I||(k=!0,le||(le=!0,O()))),Q},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Q){var re=T;return function(){var ye=T;T=re;try{return Q.apply(this,arguments)}finally{T=ye}}}})(rm)),rm}var aE;function T1(){return aE||(aE=1,sm.exports=E1()),sm.exports}var om={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lE;function A1(){if(lE)return sn;lE=1;var n=yg();function e(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(p,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,sn.createPortal=function(p,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(p,h,null,_)},sn.flushSync=function(p){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=_,i.d.f()}},sn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},sn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},sn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:I}):_==="script"&&i.d.X(p,{crossOrigin:E,integrity:T,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},sn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},sn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,E=d(_,h.crossOrigin);i.d.L(p,_,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},sn.preloadModule=function(p,h){if(typeof p=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},sn.requestFormReset=function(p){i.d.r(p)},sn.unstable_batchedUpdates=function(p,h){return p(h)},sn.useFormState=function(p,h,_){return u.H.useFormState(p,h,_)},sn.useFormStatus=function(){return u.H.useHostTransitionStatus()},sn.version="19.2.3",sn}var uE;function S1(){if(uE)return om.exports;uE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),om.exports=A1(),om.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE;function C1(){if(cE)return uu;cE=1;var n=T1(),e=yg(),t=S1();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function d(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function p(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return p(y),s;if(v===c)return p(y),r;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var S=!1,R=y.child;R;){if(R===l){S=!0,l=y,c=v;break}if(R===c){S=!0,c=y,l=v;break}R=R.sibling}if(!S){for(R=v.child;R;){if(R===l){S=!0,l=v,c=y;break}if(R===c){S=!0,c=v,l=y;break}R=R.sibling}if(!S)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function _(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=_(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),W=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var x=Symbol.for("react.client.reference");function ve(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===x?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case F:return"Fragment";case Y:return"Profiler";case L:return"StrictMode";case oe:return"Suspense";case le:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case W:return s.displayName||"Context";case ee:return(s._context.displayName||"Context")+".Consumer";case ae:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case D:return r=s.displayName||null,r!==null?r:ve(s.type)||"Memo";case M:r=s._payload,s=s._init;try{return ve(s(r))}catch{}}return null}var Xe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ue=[],$e=-1;function q(s){return{current:s}}function ne(s){0>$e||(s.current=Ue[$e],Ue[$e]=null,$e--)}function fe(s,r){$e++,Ue[$e]=s.current,s.current=r}var de=q(null),ue=q(null),Te=q(null),Ae=q(null);function ct(s,r){switch(fe(Te,r),fe(ue,s),fe(de,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?w0(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=w0(r),s=I0(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(de),fe(de,s)}function lt(){ne(de),ne(ue),ne(Te)}function Ai(s){s.memoizedState!==null&&fe(Ae,s);var r=de.current,l=I0(r,s.type);r!==l&&(fe(ue,s),fe(de,l))}function ko(s){ue.current===s&&(ne(de),ne(ue)),Ae.current===s&&(ne(Ae),su._currentValue=ye)}var Po,Vo;function Si(s){if(Po===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Po=r&&r[1]||"",Vo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Po+s+Vo}var sl=!1;function Vr(s,r){if(!s||sl)return"";sl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var $=X}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(X){$=X}s.call(ie.prototype)}}else{try{throw Error()}catch(X){$=X}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),S=v[0],R=v[1];if(S&&R){var V=S.split(`
`),K=R.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===K.length)for(c=V.length-1,y=K.length-1;1<=c&&0<=y&&V[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==K[y]){var Z=`
`+V[c].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=c&&0<=y);break}}}finally{sl=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Si(l):""}function rl(s,r){switch(s.tag){case 26:case 27:case 5:return Si(s.type);case 16:return Si("Lazy");case 13:return s.child!==r&&r!==null?Si("Suspense Fallback"):Si("Suspense");case 19:return Si("SuspenseList");case 0:case 15:return Vr(s.type,!1);case 11:return Vr(s.type.render,!1);case 1:return Vr(s.type,!0);case 31:return Si("Activity");default:return""}}function ol(s){try{var r="",l=null;do r+=rl(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Rt=Object.prototype.hasOwnProperty,Bt=n.unstable_scheduleCallback,Ms=n.unstable_cancelCallback,ih=n.unstable_shouldYield,Wu=n.unstable_requestPaint,cn=n.unstable_now,Ur=n.unstable_getCurrentPriorityLevel,al=n.unstable_ImmediatePriority,ll=n.unstable_UserBlockingPriority,ks=n.unstable_NormalPriority,sh=n.unstable_LowPriority,Zu=n.unstable_IdlePriority,ju=n.log,ec=n.unstable_setDisableYieldValue,ni=null,Jt=null;function Ln(s){if(typeof ju=="function"&&ec(s),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(ni,s)}catch{}}var Tt=Math.clz32?Math.clz32:nc,tc=Math.log,Uo=Math.LN2;function nc(s){return s>>>=0,s===0?32:31-(tc(s)/Uo|0)|0}var Ci=256,Lr=262144,bt=4194304;function wi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ii(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,v=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var R=c&134217727;return R!==0?(c=R&~v,c!==0?y=wi(c):(S&=R,S!==0?y=wi(S):l||(l=R&~s,l!==0&&(y=wi(l))))):(R=c&~v,R!==0?y=wi(R):S!==0?y=wi(S):l||(l=c&~s,l!==0&&(y=wi(l)))),y===0?0:r!==0&&r!==y&&(r&v)===0&&(v=y&-y,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:y}function ii(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function rh(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ic(){var s=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),s}function Ri(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function Or(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function oh(s,r,l,c,y,v){var S=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var R=s.entanglements,V=s.expirationTimes,K=s.hiddenUpdates;for(l=S&~l;0<l;){var Z=31-Tt(l),ie=1<<Z;R[Z]=0,V[Z]=-1;var $=K[Z];if($!==null)for(K[Z]=null,Z=0;Z<$.length;Z++){var X=$[Z];X!==null&&(X.lane&=-536870913)}l&=~ie}c!==0&&Fr(s,c,0),v!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=v&~(S&~r))}function Fr(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-Tt(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function ul(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-Tt(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function cl(s,r){var l=r&-r;return l=(l&42)!==0?1:Br(l),(l&(s.suspendedLanes|r))!==0?0:l}function Br(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ns(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function sc(){var s=re.p;return s!==0?s:(s=window.event,s===void 0?32:Q0(s.type))}function si(s,r){var l=re.p;try{return re.p=s,r()}finally{re.p=l}}var ri=Math.random().toString(36).slice(2),xt="__reactFiber$"+ri,Ht="__reactProps$"+ri,bi="__reactContainer$"+ri,Lo="__reactEvents$"+ri,ah="__reactListeners$"+ri,rc="__reactHandles$"+ri,oc="__reactResources$"+ri,xi="__reactMarker$"+ri;function Oo(s){delete s[xt],delete s[Ht],delete s[Lo],delete s[ah],delete s[rc]}function Ni(s){var r=s[xt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[bi]||l[xt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=k0(s);s!==null;){if(l=s[xt])return l;s=k0(s)}return r}s=l,l=s.parentNode}return null}function On(s){if(s=s[xt]||s[bi]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function In(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Di(s){var r=s[oc];return r||(r=s[oc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Nt(s){s[xi]=!0}var dl=new Set,fl={};function Mi(s,r){ki(s,r),ki(s+"Capture",r)}function ki(s,r){for(fl[s]=r,s=0;s<r.length;s++)dl.add(r[s])}var hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pl={},ml={};function ac(s){return Rt.call(ml,s)?!0:Rt.call(pl,s)?!1:hl.test(s)?ml[s]=!0:(pl[s]=!0,!1)}function Fo(s,r,l){if(ac(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function Rn(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function Dt(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function zt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ps(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function gl(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(S){l=""+S,v.call(this,S)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function et(s){if(!s._valueTracker){var r=Ps(s)?"checked":"value";s._valueTracker=gl(s,r,""+s[r])}}function qr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Ps(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Pi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Gr=/[\n"\\]/g;function yn(s){return s.replace(Gr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Bo(s,r,l,c,y,v,S,R){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),r!=null?S==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+zt(r)):s.value!==""+zt(r)&&(s.value=""+zt(r)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),r!=null?yl(s,S,zt(r)):l!=null?yl(s,S,zt(l)):c!=null&&s.removeAttribute("value"),y==null&&v!=null&&(s.defaultChecked=!!v),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.name=""+zt(R):s.removeAttribute("name")}function lc(s,r,l,c,y,v,S,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){et(s);return}l=l!=null?""+zt(l):"",r=r!=null?""+zt(r):l,R||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=R?s.checked:!!c,s.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S),et(s)}function yl(s,r,l){r==="number"&&Pi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Vs(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+zt(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function uc(s,r,l){if(r!=null&&(r=""+zt(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+zt(l):""}function Us(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(Xe(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=zt(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),et(s)}function _n(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var cc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _l(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||cc.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function vl(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&_l(s,y,c)}else for(var v in r)r.hasOwnProperty(v)&&_l(s,v,r[v])}function qo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Go(s){return Ls.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function oi(){}var El=null;function Fn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Os=null,Vi=null;function Hr(s){var r=On(s);if(r&&(s=r.stateNode)){var l=s[Ht]||null;e:switch(s=r.stateNode,r.type){case"input":if(Bo(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+yn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Ht]||null;if(!y)throw Error(i(90));Bo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&qr(c)}break e;case"textarea":uc(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Vs(s,!!l.multiple,r,!1)}}}var Ho=!1;function Fs(s,r,l){if(Ho)return s(r,l);Ho=!0;try{var c=s(r);return c}finally{if(Ho=!1,(Os!==null||Vi!==null)&&(sd(),Os&&(r=Os,s=Vi,Vi=Os=null,Hr(r),s)))for(r=0;r<s.length;r++)Hr(s[r])}}function ai(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Ht]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zr=!1;if(Bn)try{var st={};Object.defineProperty(st,"passive",{get:function(){zr=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{zr=!1}var Ui=null,Tl=null,Kr=null;function Al(){if(Kr)return Kr;var s,r=Tl,l=r.length,c,y="value"in Ui?Ui.value:Ui.textContent,v=y.length;for(s=0;s<l&&r[s]===y[s];s++);var S=l-s;for(c=1;c<=S&&r[l-c]===y[v-c];c++);return Kr=y.slice(s,1<c?1-c:void 0)}function $r(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function is(){return!0}function li(){return!1}function Qt(s){function r(l,c,y,v,S){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var R in s)s.hasOwnProperty(R)&&(l=s[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?is:li,this.isPropagationStopped=li,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=is)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=is)},persist:function(){},isPersistent:is}),r}var ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Li=Qt(ss),Bs=E({},ss,{view:0,detail:0}),Sl=Qt(Bs),qs,zo,Oi,Ko=E({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Oi&&(Oi&&s.type==="mousemove"?(qs=s.screenX-Oi.screenX,zo=s.screenY-Oi.screenY):zo=qs=0,Oi=s),qs)},movementY:function(s){return"movementY"in s?s.movementY:zo}}),Cl=Qt(Ko),Yr=E({},Ko,{dataTransfer:0}),fc=Qt(Yr),hc=E({},Bs,{relatedTarget:0}),Jr=Qt(hc),wl=E({},ss,{animationName:0,elapsedTime:0,pseudoElement:0}),pc=Qt(wl),$o=E({},ss,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),mc=Qt($o),gc=E({},ss,{data:0}),Fi=Qt(gc),yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ec(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=vc[s])?!!r[s]:!1}function Gs(){return Ec}var dn=E({},Bs,{key:function(s){if(s.key){var r=yc[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=$r(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?_c[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(s){return s.type==="keypress"?$r(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?$r(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Tc=Qt(dn),Ac=E({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rs=Qt(Ac),g=E({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),A=Qt(g),C=E({},ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Qt(C),H=E({},Ko,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Qt(H),ce=E({},ss,{newState:0,oldState:0}),Me=Qt(ce),At=[9,13,27,32],We=Bn&&"CompositionEvent"in window,mt=null;Bn&&"documentMode"in document&&(mt=document.documentMode);var qn=Bn&&"TextEvent"in window&&!mt,Bi=Bn&&(!We||mt&&8<mt&&11>=mt),ui=" ",ci=!1;function Qr(s,r){switch(s){case"keyup":return At.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Jo=!1;function BR(s,r){switch(s){case"compositionend":return Yo(r);case"keypress":return r.which!==32?null:(ci=!0,ui);case"textInput":return s=r.data,s===ui&&ci?null:s;default:return null}}function qR(s,r){if(Jo)return s==="compositionend"||!We&&Qr(s,r)?(s=Al(),Kr=Tl=Ui=null,Jo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Bi&&r.locale!=="ko"?null:r.data;default:return null}}var GR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uy(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!GR[s.type]:r==="textarea"}function Ly(s,r,l,c){Os?Vi?Vi.push(c):Vi=[c]:Os=c,r=dd(r,"onChange"),0<r.length&&(l=new Li("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var Il=null,Rl=null;function HR(s){v0(s,0)}function Sc(s){var r=In(s);if(qr(r))return s}function Oy(s,r){if(s==="change")return r}var Fy=!1;if(Bn){var lh;if(Bn){var uh="oninput"in document;if(!uh){var By=document.createElement("div");By.setAttribute("oninput","return;"),uh=typeof By.oninput=="function"}lh=uh}else lh=!1;Fy=lh&&(!document.documentMode||9<document.documentMode)}function qy(){Il&&(Il.detachEvent("onpropertychange",Gy),Rl=Il=null)}function Gy(s){if(s.propertyName==="value"&&Sc(Rl)){var r=[];Ly(r,Rl,s,Fn(s)),Fs(HR,r)}}function zR(s,r,l){s==="focusin"?(qy(),Il=r,Rl=l,Il.attachEvent("onpropertychange",Gy)):s==="focusout"&&qy()}function KR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Sc(Rl)}function $R(s,r){if(s==="click")return Sc(r)}function YR(s,r){if(s==="input"||s==="change")return Sc(r)}function JR(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var bn=typeof Object.is=="function"?Object.is:JR;function bl(s,r){if(bn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Rt.call(r,y)||!bn(s[y],r[y]))return!1}return!0}function Hy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function zy(s,r){var l=Hy(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Hy(l)}}function Ky(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Ky(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function $y(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Pi(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Pi(s.document)}return r}function ch(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var QR=Bn&&"documentMode"in document&&11>=document.documentMode,Qo=null,dh=null,xl=null,fh=!1;function Yy(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;fh||Qo==null||Qo!==Pi(c)||(c=Qo,"selectionStart"in c&&ch(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),xl&&bl(xl,c)||(xl=c,c=dd(dh,"onSelect"),0<c.length&&(r=new Li("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Qo)))}function Xr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Xo={animationend:Xr("Animation","AnimationEnd"),animationiteration:Xr("Animation","AnimationIteration"),animationstart:Xr("Animation","AnimationStart"),transitionrun:Xr("Transition","TransitionRun"),transitionstart:Xr("Transition","TransitionStart"),transitioncancel:Xr("Transition","TransitionCancel"),transitionend:Xr("Transition","TransitionEnd")},hh={},Jy={};Bn&&(Jy=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function Wr(s){if(hh[s])return hh[s];if(!Xo[s])return s;var r=Xo[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in Jy)return hh[s]=r[l];return s}var Qy=Wr("animationend"),Xy=Wr("animationiteration"),Wy=Wr("animationstart"),XR=Wr("transitionrun"),WR=Wr("transitionstart"),ZR=Wr("transitioncancel"),Zy=Wr("transitionend"),jy=new Map,ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ph.push("scrollEnd");function di(s,r){jy.set(s,r),Mi(r,[s])}var Cc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Gn=[],Wo=0,mh=0;function wc(){for(var s=Wo,r=mh=Wo=0;r<s;){var l=Gn[r];Gn[r++]=null;var c=Gn[r];Gn[r++]=null;var y=Gn[r];Gn[r++]=null;var v=Gn[r];if(Gn[r++]=null,c!==null&&y!==null){var S=c.pending;S===null?y.next=y:(y.next=S.next,S.next=y),c.pending=y}v!==0&&e_(l,y,v)}}function Ic(s,r,l,c){Gn[Wo++]=s,Gn[Wo++]=r,Gn[Wo++]=l,Gn[Wo++]=c,mh|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function gh(s,r,l,c){return Ic(s,r,l,c),Rc(s)}function Zr(s,r){return Ic(s,null,null,r),Rc(s)}function e_(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=s.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(y=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,y&&r!==null&&(y=31-Tt(l),s=v.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),v):null}function Rc(s){if(50<Wl)throw Wl=0,wp=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Zo={};function jR(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(s,r,l,c){return new jR(s,r,l,c)}function yh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function os(s,r){var l=s.alternate;return l===null?(l=xn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function t_(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function bc(s,r,l,c,y,v){var S=0;if(c=s,typeof s=="function")yh(s)&&(S=1);else if(typeof s=="string")S=s1(s,l,de.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=xn(31,l,r,y),s.elementType=N,s.lanes=v,s;case F:return jr(l.children,y,v,r);case L:S=8,y|=24;break;case Y:return s=xn(12,l,r,y|2),s.elementType=Y,s.lanes=v,s;case oe:return s=xn(13,l,r,y),s.elementType=oe,s.lanes=v,s;case le:return s=xn(19,l,r,y),s.elementType=le,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:S=10;break e;case ee:S=9;break e;case ae:S=11;break e;case D:S=14;break e;case M:S=16,c=null;break e}S=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=xn(S,l,r,y),r.elementType=s,r.type=c,r.lanes=v,r}function jr(s,r,l,c){return s=xn(7,s,c,r),s.lanes=l,s}function _h(s,r,l){return s=xn(6,s,null,r),s.lanes=l,s}function n_(s){var r=xn(18,null,null,0);return r.stateNode=s,r}function vh(s,r,l){return r=xn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var i_=new WeakMap;function Hn(s,r){if(typeof s=="object"&&s!==null){var l=i_.get(s);return l!==void 0?l:(r={value:s,source:r,stack:ol(r)},i_.set(s,r),r)}return{value:s,source:r,stack:ol(r)}}var jo=[],ea=0,xc=null,Nl=0,zn=[],Kn=0,Hs=null,qi=1,Gi="";function as(s,r){jo[ea++]=Nl,jo[ea++]=xc,xc=s,Nl=r}function s_(s,r,l){zn[Kn++]=qi,zn[Kn++]=Gi,zn[Kn++]=Hs,Hs=s;var c=qi;s=Gi;var y=32-Tt(c)-1;c&=~(1<<y),l+=1;var v=32-Tt(r)+y;if(30<v){var S=y-y%5;v=(c&(1<<S)-1).toString(32),c>>=S,y-=S,qi=1<<32-Tt(r)+y|l<<y|c,Gi=v+s}else qi=1<<v|l<<y|c,Gi=s}function Eh(s){s.return!==null&&(as(s,1),s_(s,1,0))}function Th(s){for(;s===xc;)xc=jo[--ea],jo[ea]=null,Nl=jo[--ea],jo[ea]=null;for(;s===Hs;)Hs=zn[--Kn],zn[Kn]=null,Gi=zn[--Kn],zn[Kn]=null,qi=zn[--Kn],zn[Kn]=null}function r_(s,r){zn[Kn++]=qi,zn[Kn++]=Gi,zn[Kn++]=Hs,qi=r.id,Gi=r.overflow,Hs=s}var Xt=null,ft=null,ze=!1,zs=null,$n=!1,Ah=Error(i(519));function Ks(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(Hn(r,s)),Ah}function o_(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[xt]=s,r[Ht]=c,l){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(l=0;l<jl.length;l++)Oe(jl[l],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),lc(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Us(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||S0(r.textContent,l)?(c.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),c.onScroll!=null&&Oe("scroll",r),c.onScrollEnd!=null&&Oe("scrollend",r),c.onClick!=null&&(r.onclick=oi),r=!0):r=!1,r||Ks(s,!0)}function a_(s){for(Xt=s.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Xt=Xt.return}}function ta(s){if(s!==Xt)return!1;if(!ze)return a_(s),ze=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Bp(s.type,s.memoizedProps)),l=!l),l&&ft&&Ks(s),a_(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ft=M0(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ft=M0(s)}else r===27?(r=ft,rr(s.type)?(s=Kp,Kp=null,ft=s):ft=r):ft=Xt?Jn(s.stateNode.nextSibling):null;return!0}function eo(){ft=Xt=null,ze=!1}function Sh(){var s=zs;return s!==null&&(An===null?An=s:An.push.apply(An,s),zs=null),s}function Dl(s){zs===null?zs=[s]:zs.push(s)}var Ch=q(null),to=null,ls=null;function $s(s,r,l){fe(Ch,r._currentValue),r._currentValue=l}function us(s){s._currentValue=Ch.current,ne(Ch)}function wh(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function Ih(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var v=y.dependencies;if(v!==null){var S=y.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=y;for(var V=0;V<r.length;V++)if(R.context===r[V]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),wh(v.return,l,s),c||(S=null);break e}v=R.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(i(341));S.lanes|=l,v=S.alternate,v!==null&&(v.lanes|=l),wh(S,l,s),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===s){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function na(s,r,l,c){s=null;for(var y=r,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var R=y.type;bn(y.pendingProps.value,S.value)||(s!==null?s.push(R):s=[R])}}else if(y===Ae.current){if(S=y.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(su):s=[su])}y=y.return}s!==null&&Ih(r,s,l,c),r.flags|=262144}function Nc(s){for(s=s.firstContext;s!==null;){if(!bn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function no(s){to=s,ls=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wt(s){return l_(to,s)}function Dc(s,r){return to===null&&no(s),l_(s,r)}function l_(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},ls===null){if(s===null)throw Error(i(308));ls=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ls=ls.next=r;return l}var eb=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},tb=n.unstable_scheduleCallback,nb=n.unstable_NormalPriority,Mt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rh(){return{controller:new eb,data:new Map,refCount:0}}function Ml(s){s.refCount--,s.refCount===0&&tb(nb,function(){s.controller.abort()})}var kl=null,bh=0,ia=0,sa=null;function ib(s,r){if(kl===null){var l=kl=[];bh=0,ia=Dp(),sa={status:"pending",value:void 0,then:function(c){l.push(c)}}}return bh++,r.then(u_,u_),r}function u_(){if(--bh===0&&kl!==null){sa!==null&&(sa.status="fulfilled");var s=kl;kl=null,ia=0,sa=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function sb(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var c_=Q.S;Q.S=function(s,r){Yv=cn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&ib(s,r),c_!==null&&c_(s,r)};var io=q(null);function xh(){var s=io.current;return s!==null?s:ut.pooledCache}function Mc(s,r){r===null?fe(io,io.current):fe(io,r.pool)}function d_(){var s=xh();return s===null?null:{parent:Mt._currentValue,pool:s}}var ra=Error(i(460)),Nh=Error(i(474)),kc=Error(i(542)),Pc={then:function(){}};function f_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function h_(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(oi,oi),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,m_(s),s;default:if(typeof r.status=="string")r.then(oi,oi);else{if(s=ut,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,m_(s),s}throw ro=r,ra}}function so(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ro=l,ra):l}}var ro=null;function p_(){if(ro===null)throw Error(i(459));var s=ro;return ro=null,s}function m_(s){if(s===ra||s===kc)throw Error(i(483))}var oa=null,Pl=0;function Vc(s){var r=Pl;return Pl+=1,oa===null&&(oa=[]),h_(oa,s,r)}function Vl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Uc(s,r){throw r.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function g_(s){function r(G,B){if(s){var z=G.deletions;z===null?(G.deletions=[B],G.flags|=16):z.push(B)}}function l(G,B){if(!s)return null;for(;B!==null;)r(G,B),B=B.sibling;return null}function c(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function y(G,B){return G=os(G,B),G.index=0,G.sibling=null,G}function v(G,B,z){return G.index=z,s?(z=G.alternate,z!==null?(z=z.index,z<B?(G.flags|=67108866,B):z):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function S(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function R(G,B,z,j){return B===null||B.tag!==6?(B=_h(z,G.mode,j),B.return=G,B):(B=y(B,z),B.return=G,B)}function V(G,B,z,j){var Se=z.type;return Se===F?Z(G,B,z.props.children,j,z.key):B!==null&&(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===M&&so(Se)===B.type)?(B=y(B,z.props),Vl(B,z),B.return=G,B):(B=bc(z.type,z.key,z.props,null,G.mode,j),Vl(B,z),B.return=G,B)}function K(G,B,z,j){return B===null||B.tag!==4||B.stateNode.containerInfo!==z.containerInfo||B.stateNode.implementation!==z.implementation?(B=vh(z,G.mode,j),B.return=G,B):(B=y(B,z.children||[]),B.return=G,B)}function Z(G,B,z,j,Se){return B===null||B.tag!==7?(B=jr(z,G.mode,j,Se),B.return=G,B):(B=y(B,z),B.return=G,B)}function ie(G,B,z){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=_h(""+B,G.mode,z),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return z=bc(B.type,B.key,B.props,null,G.mode,z),Vl(z,B),z.return=G,z;case k:return B=vh(B,G.mode,z),B.return=G,B;case M:return B=so(B),ie(G,B,z)}if(Xe(B)||O(B))return B=jr(B,G.mode,z,null),B.return=G,B;if(typeof B.then=="function")return ie(G,Vc(B),z);if(B.$$typeof===W)return ie(G,Dc(G,B),z);Uc(G,B)}return null}function $(G,B,z,j){var Se=B!==null?B.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Se!==null?null:R(G,B,""+z,j);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===Se?V(G,B,z,j):null;case k:return z.key===Se?K(G,B,z,j):null;case M:return z=so(z),$(G,B,z,j)}if(Xe(z)||O(z))return Se!==null?null:Z(G,B,z,j,null);if(typeof z.then=="function")return $(G,B,Vc(z),j);if(z.$$typeof===W)return $(G,B,Dc(G,z),j);Uc(G,z)}return null}function X(G,B,z,j,Se){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return G=G.get(z)||null,R(B,G,""+j,Se);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return G=G.get(j.key===null?z:j.key)||null,V(B,G,j,Se);case k:return G=G.get(j.key===null?z:j.key)||null,K(B,G,j,Se);case M:return j=so(j),X(G,B,z,j,Se)}if(Xe(j)||O(j))return G=G.get(z)||null,Z(B,G,j,Se,null);if(typeof j.then=="function")return X(G,B,z,Vc(j),Se);if(j.$$typeof===W)return X(G,B,z,Dc(B,j),Se);Uc(B,j)}return null}function _e(G,B,z,j){for(var Se=null,Ye=null,Ee=B,Pe=B=0,Be=null;Ee!==null&&Pe<z.length;Pe++){Ee.index>Pe?(Be=Ee,Ee=null):Be=Ee.sibling;var Je=$(G,Ee,z[Pe],j);if(Je===null){Ee===null&&(Ee=Be);break}s&&Ee&&Je.alternate===null&&r(G,Ee),B=v(Je,B,Pe),Ye===null?Se=Je:Ye.sibling=Je,Ye=Je,Ee=Be}if(Pe===z.length)return l(G,Ee),ze&&as(G,Pe),Se;if(Ee===null){for(;Pe<z.length;Pe++)Ee=ie(G,z[Pe],j),Ee!==null&&(B=v(Ee,B,Pe),Ye===null?Se=Ee:Ye.sibling=Ee,Ye=Ee);return ze&&as(G,Pe),Se}for(Ee=c(Ee);Pe<z.length;Pe++)Be=X(Ee,G,Pe,z[Pe],j),Be!==null&&(s&&Be.alternate!==null&&Ee.delete(Be.key===null?Pe:Be.key),B=v(Be,B,Pe),Ye===null?Se=Be:Ye.sibling=Be,Ye=Be);return s&&Ee.forEach(function(cr){return r(G,cr)}),ze&&as(G,Pe),Se}function we(G,B,z,j){if(z==null)throw Error(i(151));for(var Se=null,Ye=null,Ee=B,Pe=B=0,Be=null,Je=z.next();Ee!==null&&!Je.done;Pe++,Je=z.next()){Ee.index>Pe?(Be=Ee,Ee=null):Be=Ee.sibling;var cr=$(G,Ee,Je.value,j);if(cr===null){Ee===null&&(Ee=Be);break}s&&Ee&&cr.alternate===null&&r(G,Ee),B=v(cr,B,Pe),Ye===null?Se=cr:Ye.sibling=cr,Ye=cr,Ee=Be}if(Je.done)return l(G,Ee),ze&&as(G,Pe),Se;if(Ee===null){for(;!Je.done;Pe++,Je=z.next())Je=ie(G,Je.value,j),Je!==null&&(B=v(Je,B,Pe),Ye===null?Se=Je:Ye.sibling=Je,Ye=Je);return ze&&as(G,Pe),Se}for(Ee=c(Ee);!Je.done;Pe++,Je=z.next())Je=X(Ee,G,Pe,Je.value,j),Je!==null&&(s&&Je.alternate!==null&&Ee.delete(Je.key===null?Pe:Je.key),B=v(Je,B,Pe),Ye===null?Se=Je:Ye.sibling=Je,Ye=Je);return s&&Ee.forEach(function(m1){return r(G,m1)}),ze&&as(G,Pe),Se}function at(G,B,z,j){if(typeof z=="object"&&z!==null&&z.type===F&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var Se=z.key;B!==null;){if(B.key===Se){if(Se=z.type,Se===F){if(B.tag===7){l(G,B.sibling),j=y(B,z.props.children),j.return=G,G=j;break e}}else if(B.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===M&&so(Se)===B.type){l(G,B.sibling),j=y(B,z.props),Vl(j,z),j.return=G,G=j;break e}l(G,B);break}else r(G,B);B=B.sibling}z.type===F?(j=jr(z.props.children,G.mode,j,z.key),j.return=G,G=j):(j=bc(z.type,z.key,z.props,null,G.mode,j),Vl(j,z),j.return=G,G=j)}return S(G);case k:e:{for(Se=z.key;B!==null;){if(B.key===Se)if(B.tag===4&&B.stateNode.containerInfo===z.containerInfo&&B.stateNode.implementation===z.implementation){l(G,B.sibling),j=y(B,z.children||[]),j.return=G,G=j;break e}else{l(G,B);break}else r(G,B);B=B.sibling}j=vh(z,G.mode,j),j.return=G,G=j}return S(G);case M:return z=so(z),at(G,B,z,j)}if(Xe(z))return _e(G,B,z,j);if(O(z)){if(Se=O(z),typeof Se!="function")throw Error(i(150));return z=Se.call(z),we(G,B,z,j)}if(typeof z.then=="function")return at(G,B,Vc(z),j);if(z.$$typeof===W)return at(G,B,Dc(G,z),j);Uc(G,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,B!==null&&B.tag===6?(l(G,B.sibling),j=y(B,z),j.return=G,G=j):(l(G,B),j=_h(z,G.mode,j),j.return=G,G=j),S(G)):l(G,B)}return function(G,B,z,j){try{Pl=0;var Se=at(G,B,z,j);return oa=null,Se}catch(Ee){if(Ee===ra||Ee===kc)throw Ee;var Ye=xn(29,Ee,null,G.mode);return Ye.lanes=j,Ye.return=G,Ye}finally{}}}var oo=g_(!0),y_=g_(!1),Ys=!1;function Dh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Js(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Qs(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Ze&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=Rc(s),e_(s,null,l),r}return Ic(s,c,r,l),Rc(s)}function Ul(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,ul(s,l)}}function kh(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?y=v=r:v=v.next=r}else y=v=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var Ph=!1;function Ll(){if(Ph){var s=sa;if(s!==null)throw s}}function Ol(s,r,l,c){Ph=!1;var y=s.updateQueue;Ys=!1;var v=y.firstBaseUpdate,S=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var V=R,K=V.next;V.next=null,S===null?v=K:S.next=K,S=V;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,R=Z.lastBaseUpdate,R!==S&&(R===null?Z.firstBaseUpdate=K:R.next=K,Z.lastBaseUpdate=V))}if(v!==null){var ie=y.baseState;S=0,Z=K=V=null,R=v;do{var $=R.lane&-536870913,X=$!==R.lane;if(X?(Fe&$)===$:(c&$)===$){$!==0&&$===ia&&(Ph=!0),Z!==null&&(Z=Z.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var _e=s,we=R;$=r;var at=l;switch(we.tag){case 1:if(_e=we.payload,typeof _e=="function"){ie=_e.call(at,ie,$);break e}ie=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=we.payload,$=typeof _e=="function"?_e.call(at,ie,$):_e,$==null)break e;ie=E({},ie,$);break e;case 2:Ys=!0}}$=R.callback,$!==null&&(s.flags|=64,X&&(s.flags|=8192),X=y.callbacks,X===null?y.callbacks=[$]:X.push($))}else X={lane:$,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Z===null?(K=Z=X,V=ie):Z=Z.next=X,S|=$;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;X=R,R=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);Z===null&&(V=ie),y.baseState=V,y.firstBaseUpdate=K,y.lastBaseUpdate=Z,v===null&&(y.shared.lanes=0),er|=S,s.lanes=S,s.memoizedState=ie}}function __(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function v_(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)__(l[s],r)}var aa=q(null),Lc=q(0);function E_(s,r){s=_s,fe(Lc,s),fe(aa,r),_s=s|r.baseLanes}function Vh(){fe(Lc,_s),fe(aa,aa.current)}function Uh(){_s=Lc.current,ne(aa),ne(Lc)}var Nn=q(null),Yn=null;function Xs(s){var r=s.alternate;fe(St,St.current&1),fe(Nn,s),Yn===null&&(r===null||aa.current!==null||r.memoizedState!==null)&&(Yn=s)}function Lh(s){fe(St,St.current),fe(Nn,s),Yn===null&&(Yn=s)}function T_(s){s.tag===22?(fe(St,St.current),fe(Nn,s),Yn===null&&(Yn=s)):Ws()}function Ws(){fe(St,St.current),fe(Nn,Nn.current)}function Dn(s){ne(Nn),Yn===s&&(Yn=null),ne(St)}var St=q(0);function Oc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Hp(l)||zp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var cs=0,ke=null,rt=null,kt=null,Fc=!1,la=!1,ao=!1,Bc=0,Fl=0,ua=null,rb=0;function vt(){throw Error(i(321))}function Oh(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!bn(s[l],r[l]))return!1;return!0}function Fh(s,r,l,c,y,v){return cs=v,ke=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Q.H=s===null||s.memoizedState===null?sv:ep,ao=!1,v=l(c,y),ao=!1,la&&(v=S_(r,l,c,y)),A_(s),v}function A_(s){Q.H=Gl;var r=rt!==null&&rt.next!==null;if(cs=0,kt=rt=ke=null,Fc=!1,Fl=0,ua=null,r)throw Error(i(300));s===null||Pt||(s=s.dependencies,s!==null&&Nc(s)&&(Pt=!0))}function S_(s,r,l,c){ke=s;var y=0;do{if(la&&(ua=null),Fl=0,la=!1,25<=y)throw Error(i(301));if(y+=1,kt=rt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Q.H=rv,v=r(l,c)}while(la);return v}function ob(){var s=Q.H,r=s.useState()[0];return r=typeof r.then=="function"?Bl(r):r,s=s.useState()[0],(rt!==null?rt.memoizedState:null)!==s&&(ke.flags|=1024),r}function Bh(){var s=Bc!==0;return Bc=0,s}function qh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Gh(s){if(Fc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Fc=!1}cs=0,kt=rt=ke=null,la=!1,Fl=Bc=0,ua=null}function fn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ke.memoizedState=kt=s:kt=kt.next=s,kt}function Ct(){if(rt===null){var s=ke.alternate;s=s!==null?s.memoizedState:null}else s=rt.next;var r=kt===null?ke.memoizedState:kt.next;if(r!==null)kt=r,rt=s;else{if(s===null)throw ke.alternate===null?Error(i(467)):Error(i(310));rt=s,s={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},kt===null?ke.memoizedState=kt=s:kt=kt.next=s}return kt}function qc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bl(s){var r=Fl;return Fl+=1,ua===null&&(ua=[]),s=h_(ua,s,r),r=ke,(kt===null?r.memoizedState:kt.next)===null&&(r=r.alternate,Q.H=r===null||r.memoizedState===null?sv:ep),s}function Gc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Bl(s);if(s.$$typeof===W)return Wt(s)}throw Error(i(438,String(s)))}function Hh(s){var r=null,l=ke.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=qc(),ke.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=U;return r.index++,l}function ds(s,r){return typeof r=="function"?r(s):r}function Hc(s){var r=Ct();return zh(r,rt,s)}function zh(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,v=c.pending;if(v!==null){if(y!==null){var S=y.next;y.next=v.next,v.next=S}r.baseQueue=y=v,c.pending=null}if(v=s.baseState,y===null)s.memoizedState=v;else{r=y.next;var R=S=null,V=null,K=r,Z=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(Fe&ie)===ie:(cs&ie)===ie){var $=K.revertLane;if($===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===ia&&(Z=!0);else if((cs&$)===$){K=K.next,$===ia&&(Z=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},V===null?(R=V=ie,S=v):V=V.next=ie,ke.lanes|=$,er|=$;ie=K.action,ao&&l(v,ie),v=K.hasEagerState?K.eagerState:l(v,ie)}else $={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},V===null?(R=V=$,S=v):V=V.next=$,ke.lanes|=ie,er|=ie;K=K.next}while(K!==null&&K!==r);if(V===null?S=v:V.next=R,!bn(v,s.memoizedState)&&(Pt=!0,Z&&(l=sa,l!==null)))throw l;s.memoizedState=v,s.baseState=S,s.baseQueue=V,c.lastRenderedState=v}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Kh(s){var r=Ct(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,v=r.memoizedState;if(y!==null){l.pending=null;var S=y=y.next;do v=s(v,S.action),S=S.next;while(S!==y);bn(v,r.memoizedState)||(Pt=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,c]}function C_(s,r,l){var c=ke,y=Ct(),v=ze;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=r();var S=!bn((rt||y).memoizedState,l);if(S&&(y.memoizedState=l,Pt=!0),y=y.queue,Jh(R_.bind(null,c,y,s),[s]),y.getSnapshot!==r||S||kt!==null&&kt.memoizedState.tag&1){if(c.flags|=2048,ca(9,{destroy:void 0},I_.bind(null,c,y,l,r),null),ut===null)throw Error(i(349));v||(cs&127)!==0||w_(c,r,l)}return l}function w_(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=ke.updateQueue,r===null?(r=qc(),ke.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function I_(s,r,l,c){r.value=l,r.getSnapshot=c,b_(r)&&x_(s)}function R_(s,r,l){return l(function(){b_(r)&&x_(s)})}function b_(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!bn(s,l)}catch{return!0}}function x_(s){var r=Zr(s,2);r!==null&&Sn(r,s,2)}function $h(s){var r=fn();if(typeof s=="function"){var l=s;if(s=l(),ao){Ln(!0);try{l()}finally{Ln(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:s},r}function N_(s,r,l,c){return s.baseState=l,zh(s,rt,typeof c=="function"?c:ds)}function ab(s,r,l,c,y){if($c(s))throw Error(i(485));if(s=r.action,s!==null){var v={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};Q.T!==null?l(!0):v.isTransition=!1,c(v),l=r.pending,l===null?(v.next=r.pending=v,D_(r,v)):(v.next=l.next,r.pending=l.next=v)}}function D_(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var v=Q.T,S={};Q.T=S;try{var R=l(y,c),V=Q.S;V!==null&&V(S,R),M_(s,r,R)}catch(K){Yh(s,r,K)}finally{v!==null&&S.types!==null&&(v.types=S.types),Q.T=v}}else try{v=l(y,c),M_(s,r,v)}catch(K){Yh(s,r,K)}}function M_(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){k_(s,r,c)},function(c){return Yh(s,r,c)}):k_(s,r,l)}function k_(s,r,l){r.status="fulfilled",r.value=l,P_(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,D_(s,l)))}function Yh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,P_(r),r=r.next;while(r!==c)}s.action=null}function P_(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function V_(s,r){return r}function U_(s,r){if(ze){var l=ut.formState;if(l!==null){e:{var c=ke;if(ze){if(ft){t:{for(var y=ft,v=$n;y.nodeType!==8;){if(!v){y=null;break t}if(y=Jn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ft=Jn(y.nextSibling),c=y.data==="F!";break e}}Ks(c)}c=!1}c&&(r=l[0])}}return l=fn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:V_,lastRenderedState:r},l.queue=c,l=tv.bind(null,ke,c),c.dispatch=l,c=$h(!1),v=jh.bind(null,ke,!1,c.queue),c=fn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=ab.bind(null,ke,y,v,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function L_(s){var r=Ct();return O_(r,rt,s)}function O_(s,r,l){if(r=zh(s,r,V_)[0],s=Hc(ds)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Bl(r)}catch(S){throw S===ra?kc:S}else c=r;r=Ct();var y=r.queue,v=y.dispatch;return l!==r.memoizedState&&(ke.flags|=2048,ca(9,{destroy:void 0},lb.bind(null,y,l),null)),[c,v,s]}function lb(s,r){s.action=r}function F_(s){var r=Ct(),l=rt;if(l!==null)return O_(r,l,s);Ct(),r=r.memoizedState,l=Ct();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function ca(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=ke.updateQueue,r===null&&(r=qc(),ke.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function B_(){return Ct().memoizedState}function zc(s,r,l,c){var y=fn();ke.flags|=s,y.memoizedState=ca(1|r,{destroy:void 0},l,c===void 0?null:c)}function Kc(s,r,l,c){var y=Ct();c=c===void 0?null:c;var v=y.memoizedState.inst;rt!==null&&c!==null&&Oh(c,rt.memoizedState.deps)?y.memoizedState=ca(r,v,l,c):(ke.flags|=s,y.memoizedState=ca(1|r,v,l,c))}function q_(s,r){zc(8390656,8,s,r)}function Jh(s,r){Kc(2048,8,s,r)}function ub(s){ke.flags|=4;var r=ke.updateQueue;if(r===null)r=qc(),ke.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function G_(s){var r=Ct().memoizedState;return ub({ref:r,nextImpl:s}),function(){if((Ze&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function H_(s,r){return Kc(4,2,s,r)}function z_(s,r){return Kc(4,4,s,r)}function K_(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function $_(s,r,l){l=l!=null?l.concat([s]):null,Kc(4,4,K_.bind(null,r,s),l)}function Qh(){}function Y_(s,r){var l=Ct();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&Oh(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function J_(s,r){var l=Ct();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&Oh(r,c[1]))return c[0];if(c=s(),ao){Ln(!0);try{s()}finally{Ln(!1)}}return l.memoizedState=[c,r],c}function Xh(s,r,l){return l===void 0||(cs&1073741824)!==0&&(Fe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=Qv(),ke.lanes|=s,er|=s,l)}function Q_(s,r,l,c){return bn(l,r)?l:aa.current!==null?(s=Xh(s,l,c),bn(s,r)||(Pt=!0),s):(cs&42)===0||(cs&1073741824)!==0&&(Fe&261930)===0?(Pt=!0,s.memoizedState=l):(s=Qv(),ke.lanes|=s,er|=s,r)}function X_(s,r,l,c,y){var v=re.p;re.p=v!==0&&8>v?v:8;var S=Q.T,R={};Q.T=R,jh(s,!1,r,l);try{var V=y(),K=Q.S;if(K!==null&&K(R,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var Z=sb(V,c);ql(s,r,Z,Pn(s))}else ql(s,r,c,Pn(s))}catch(ie){ql(s,r,{then:function(){},status:"rejected",reason:ie},Pn())}finally{re.p=v,S!==null&&R.types!==null&&(S.types=R.types),Q.T=S}}function cb(){}function Wh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=W_(s).queue;X_(s,y,r,ye,l===null?cb:function(){return Z_(s),l(c)})}function W_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:ye},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function Z_(s){var r=W_(s);r.next===null&&(r=s.alternate.memoizedState),ql(s,r.next.queue,{},Pn())}function Zh(){return Wt(su)}function j_(){return Ct().memoizedState}function ev(){return Ct().memoizedState}function db(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Pn();s=Js(l);var c=Qs(r,s,l);c!==null&&(Sn(c,r,l),Ul(c,r,l)),r={cache:Rh()},s.payload=r;return}r=r.return}}function fb(s,r,l){var c=Pn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},$c(s)?nv(r,l):(l=gh(s,r,l,c),l!==null&&(Sn(l,s,c),iv(l,r,c)))}function tv(s,r,l){var c=Pn();ql(s,r,l,c)}function ql(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if($c(s))nv(r,y);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var S=r.lastRenderedState,R=v(S,l);if(y.hasEagerState=!0,y.eagerState=R,bn(R,S))return Ic(s,r,y,0),ut===null&&wc(),!1}catch{}finally{}if(l=gh(s,r,y,c),l!==null)return Sn(l,s,c),iv(l,r,c),!0}return!1}function jh(s,r,l,c){if(c={lane:2,revertLane:Dp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},$c(s)){if(r)throw Error(i(479))}else r=gh(s,l,c,2),r!==null&&Sn(r,s,2)}function $c(s){var r=s.alternate;return s===ke||r!==null&&r===ke}function nv(s,r){la=Fc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function iv(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,ul(s,l)}}var Gl={readContext:Wt,use:Gc,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};Gl.useEffectEvent=vt;var sv={readContext:Wt,use:Gc,useCallback:function(s,r){return fn().memoizedState=[s,r===void 0?null:r],s},useContext:Wt,useEffect:q_,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,zc(4194308,4,K_.bind(null,r,s),l)},useLayoutEffect:function(s,r){return zc(4194308,4,s,r)},useInsertionEffect:function(s,r){zc(4,2,s,r)},useMemo:function(s,r){var l=fn();r=r===void 0?null:r;var c=s();if(ao){Ln(!0);try{s()}finally{Ln(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=fn();if(l!==void 0){var y=l(r);if(ao){Ln(!0);try{l(r)}finally{Ln(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=fb.bind(null,ke,s),[c.memoizedState,s]},useRef:function(s){var r=fn();return s={current:s},r.memoizedState=s},useState:function(s){s=$h(s);var r=s.queue,l=tv.bind(null,ke,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Qh,useDeferredValue:function(s,r){var l=fn();return Xh(l,s,r)},useTransition:function(){var s=$h(!1);return s=X_.bind(null,ke,s.queue,!0,!1),fn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=ke,y=fn();if(ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),ut===null)throw Error(i(349));(Fe&127)!==0||w_(c,r,l)}y.memoizedState=l;var v={value:l,getSnapshot:r};return y.queue=v,q_(R_.bind(null,c,v,s),[s]),c.flags|=2048,ca(9,{destroy:void 0},I_.bind(null,c,v,l,r),null),l},useId:function(){var s=fn(),r=ut.identifierPrefix;if(ze){var l=Gi,c=qi;l=(c&~(1<<32-Tt(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Bc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=rb++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Zh,useFormState:U_,useActionState:U_,useOptimistic:function(s){var r=fn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=jh.bind(null,ke,!0,l),l.dispatch=r,[s,r]},useMemoCache:Hh,useCacheRefresh:function(){return fn().memoizedState=db.bind(null,ke)},useEffectEvent:function(s){var r=fn(),l={impl:s};return r.memoizedState=l,function(){if((Ze&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},ep={readContext:Wt,use:Gc,useCallback:Y_,useContext:Wt,useEffect:Jh,useImperativeHandle:$_,useInsertionEffect:H_,useLayoutEffect:z_,useMemo:J_,useReducer:Hc,useRef:B_,useState:function(){return Hc(ds)},useDebugValue:Qh,useDeferredValue:function(s,r){var l=Ct();return Q_(l,rt.memoizedState,s,r)},useTransition:function(){var s=Hc(ds)[0],r=Ct().memoizedState;return[typeof s=="boolean"?s:Bl(s),r]},useSyncExternalStore:C_,useId:j_,useHostTransitionStatus:Zh,useFormState:L_,useActionState:L_,useOptimistic:function(s,r){var l=Ct();return N_(l,rt,s,r)},useMemoCache:Hh,useCacheRefresh:ev};ep.useEffectEvent=G_;var rv={readContext:Wt,use:Gc,useCallback:Y_,useContext:Wt,useEffect:Jh,useImperativeHandle:$_,useInsertionEffect:H_,useLayoutEffect:z_,useMemo:J_,useReducer:Kh,useRef:B_,useState:function(){return Kh(ds)},useDebugValue:Qh,useDeferredValue:function(s,r){var l=Ct();return rt===null?Xh(l,s,r):Q_(l,rt.memoizedState,s,r)},useTransition:function(){var s=Kh(ds)[0],r=Ct().memoizedState;return[typeof s=="boolean"?s:Bl(s),r]},useSyncExternalStore:C_,useId:j_,useHostTransitionStatus:Zh,useFormState:F_,useActionState:F_,useOptimistic:function(s,r){var l=Ct();return rt!==null?N_(l,rt,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Hh,useCacheRefresh:ev};rv.useEffectEvent=G_;function tp(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:E({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var np={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Pn(),y=Js(c);y.payload=r,l!=null&&(y.callback=l),r=Qs(s,y,c),r!==null&&(Sn(r,s,c),Ul(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Pn(),y=Js(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=Qs(s,y,c),r!==null&&(Sn(r,s,c),Ul(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Pn(),c=Js(l);c.tag=2,r!=null&&(c.callback=r),r=Qs(s,c,l),r!==null&&(Sn(r,s,l),Ul(r,s,l))}};function ov(s,r,l,c,y,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,S):r.prototype&&r.prototype.isPureReactComponent?!bl(l,c)||!bl(y,v):!0}function av(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&np.enqueueReplaceState(r,r.state,null)}function lo(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=E({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function lv(s){Cc(s)}function uv(s){console.error(s)}function cv(s){Cc(s)}function Yc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function dv(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ip(s,r,l){return l=Js(l),l.tag=3,l.payload={element:null},l.callback=function(){Yc(s,r)},l}function fv(s){return s=Js(s),s.tag=3,s}function hv(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;s.payload=function(){return y(v)},s.callback=function(){dv(r,l,c)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){dv(r,l,c),typeof y!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function hb(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&na(r,l,y,!0),l=Nn.current,l!==null){switch(l.tag){case 31:case 13:return Yn===null?rd():l.alternate===null&&Et===0&&(Et=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Pc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),bp(s,c,y)),!1;case 22:return l.flags|=65536,c===Pc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),bp(s,c,y)),!1}throw Error(i(435,l.tag))}return bp(s,c,y),rd(),!1}if(ze)return r=Nn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==Ah&&(s=Error(i(422),{cause:c}),Dl(Hn(s,l)))):(c!==Ah&&(r=Error(i(423),{cause:c}),Dl(Hn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Hn(c,l),y=ip(s.stateNode,c,y),kh(s,y),Et!==4&&(Et=2)),!1;var v=Error(i(520),{cause:c});if(v=Hn(v,l),Xl===null?Xl=[v]:Xl.push(v),Et!==4&&(Et=2),r===null)return!0;c=Hn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=ip(l.stateNode,c,s),kh(l,s),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(tr===null||!tr.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=fv(y),hv(y,s,l,c),kh(l,y),!1}l=l.return}while(l!==null);return!1}var sp=Error(i(461)),Pt=!1;function Zt(s,r,l,c){r.child=s===null?y_(r,null,l,c):oo(r,s.child,l,c)}function pv(s,r,l,c,y){l=l.render;var v=r.ref;if("ref"in c){var S={};for(var R in c)R!=="ref"&&(S[R]=c[R])}else S=c;return no(r),c=Fh(s,r,l,S,v,y),R=Bh(),s!==null&&!Pt?(qh(s,r,y),fs(s,r,y)):(ze&&R&&Eh(r),r.flags|=1,Zt(s,r,c,y),r.child)}function mv(s,r,l,c,y){if(s===null){var v=l.type;return typeof v=="function"&&!yh(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,gv(s,r,v,c,y)):(s=bc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(v=s.child,!fp(s,y)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:bl,l(S,c)&&s.ref===r.ref)return fs(s,r,y)}return r.flags|=1,s=os(v,c),s.ref=r.ref,s.return=r,r.child=s}function gv(s,r,l,c,y){if(s!==null){var v=s.memoizedProps;if(bl(v,c)&&s.ref===r.ref)if(Pt=!1,r.pendingProps=c=v,fp(s,y))(s.flags&131072)!==0&&(Pt=!0);else return r.lanes=s.lanes,fs(s,r,y)}return rp(s,r,l,c,y)}function yv(s,r,l,c){var y=c.children,v=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,r.child=null;return _v(s,r,v,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Mc(r,v!==null?v.cachePool:null),v!==null?E_(r,v):Vh(),T_(r);else return c=r.lanes=536870912,_v(s,r,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Mc(r,v.cachePool),E_(r,v),Ws(),r.memoizedState=null):(s!==null&&Mc(r,null),Vh(),Ws());return Zt(s,r,y,l),r.child}function Hl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function _v(s,r,l,c,y){var v=xh();return v=v===null?null:{parent:Mt._currentValue,pool:v},r.memoizedState={baseLanes:l,cachePool:v},s!==null&&Mc(r,null),Vh(),T_(r),s!==null&&na(s,r,c,!0),r.childLanes=y,null}function Jc(s,r){return r=Xc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function vv(s,r,l){return oo(r,s.child,null,l),s=Jc(r,r.pendingProps),s.flags|=2,Dn(r),r.memoizedState=null,s}function pb(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(ze){if(c.mode==="hidden")return s=Jc(r,c),r.lanes=536870912,Hl(null,s);if(Lh(r),(s=ft)?(s=D0(s,$n),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Hs!==null?{id:qi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=n_(s),l.return=r,r.child=l,Xt=r,ft=null)):s=null,s===null)throw Ks(r);return r.lanes=536870912,null}return Jc(r,c)}var v=s.memoizedState;if(v!==null){var S=v.dehydrated;if(Lh(r),y)if(r.flags&256)r.flags&=-257,r=vv(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Pt||na(s,r,l,!1),y=(l&s.childLanes)!==0,Pt||y){if(c=ut,c!==null&&(S=cl(c,l),S!==0&&S!==v.retryLane))throw v.retryLane=S,Zr(s,S),Sn(c,s,S),sp;rd(),r=vv(s,r,l)}else s=v.treeContext,ft=Jn(S.nextSibling),Xt=r,ze=!0,zs=null,$n=!1,s!==null&&r_(r,s),r=Jc(r,c),r.flags|=4096;return r}return s=os(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Qc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function rp(s,r,l,c,y){return no(r),l=Fh(s,r,l,c,void 0,y),c=Bh(),s!==null&&!Pt?(qh(s,r,y),fs(s,r,y)):(ze&&c&&Eh(r),r.flags|=1,Zt(s,r,l,y),r.child)}function Ev(s,r,l,c,y,v){return no(r),r.updateQueue=null,l=S_(r,c,l,y),A_(s),c=Bh(),s!==null&&!Pt?(qh(s,r,v),fs(s,r,v)):(ze&&c&&Eh(r),r.flags|=1,Zt(s,r,l,v),r.child)}function Tv(s,r,l,c,y){if(no(r),r.stateNode===null){var v=Zo,S=l.contextType;typeof S=="object"&&S!==null&&(v=Wt(S)),v=new l(c,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=np,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=c,v.state=r.memoizedState,v.refs={},Dh(r),S=l.contextType,v.context=typeof S=="object"&&S!==null?Wt(S):Zo,v.state=r.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(tp(r,l,S,c),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&np.enqueueReplaceState(v,v.state,null),Ol(r,c,v,y),Ll(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){v=r.stateNode;var R=r.memoizedProps,V=lo(l,R);v.props=V;var K=v.context,Z=l.contextType;S=Zo,typeof Z=="object"&&Z!==null&&(S=Wt(Z));var ie=l.getDerivedStateFromProps;Z=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||K!==S)&&av(r,v,c,S),Ys=!1;var $=r.memoizedState;v.state=$,Ol(r,c,v,y),Ll(),K=r.memoizedState,R||$!==K||Ys?(typeof ie=="function"&&(tp(r,l,ie,c),K=r.memoizedState),(V=Ys||ov(r,l,V,c,$,K,S))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),v.props=c,v.state=K,v.context=S,c=V):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,Mh(s,r),S=r.memoizedProps,Z=lo(l,S),v.props=Z,ie=r.pendingProps,$=v.context,K=l.contextType,V=Zo,typeof K=="object"&&K!==null&&(V=Wt(K)),R=l.getDerivedStateFromProps,(K=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==ie||$!==V)&&av(r,v,c,V),Ys=!1,$=r.memoizedState,v.state=$,Ol(r,c,v,y),Ll();var X=r.memoizedState;S!==ie||$!==X||Ys||s!==null&&s.dependencies!==null&&Nc(s.dependencies)?(typeof R=="function"&&(tp(r,l,R,c),X=r.memoizedState),(Z=Ys||ov(r,l,Z,c,$,X,V)||s!==null&&s.dependencies!==null&&Nc(s.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,X,V),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,X,V)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=X),v.props=c,v.state=X,v.context=V,c=Z):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&$===s.memoizedState||(r.flags|=1024),c=!1)}return v=c,Qc(s,r),c=(r.flags&128)!==0,v||c?(v=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,s!==null&&c?(r.child=oo(r,s.child,null,y),r.child=oo(r,null,l,y)):Zt(s,r,l,y),r.memoizedState=v.state,s=r.child):s=fs(s,r,y),s}function Av(s,r,l,c){return eo(),r.flags|=256,Zt(s,r,l,c),r.child}var op={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ap(s){return{baseLanes:s,cachePool:d_()}}function lp(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=kn),s}function Sv(s,r,l){var c=r.pendingProps,y=!1,v=(r.flags&128)!==0,S;if((S=v)||(S=s!==null&&s.memoizedState===null?!1:(St.current&2)!==0),S&&(y=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,s===null){if(ze){if(y?Xs(r):Ws(),(s=ft)?(s=D0(s,$n),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Hs!==null?{id:qi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=n_(s),l.return=r,r.child=l,Xt=r,ft=null)):s=null,s===null)throw Ks(r);return zp(s)?r.lanes=32:r.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(Ws(),y=r.mode,R=Xc({mode:"hidden",children:R},y),c=jr(c,y,l,null),R.return=r,c.return=r,R.sibling=c,r.child=R,c=r.child,c.memoizedState=ap(l),c.childLanes=lp(s,S,l),r.memoizedState=op,Hl(null,c)):(Xs(r),up(r,R))}var V=s.memoizedState;if(V!==null&&(R=V.dehydrated,R!==null)){if(v)r.flags&256?(Xs(r),r.flags&=-257,r=cp(s,r,l)):r.memoizedState!==null?(Ws(),r.child=s.child,r.flags|=128,r=null):(Ws(),R=c.fallback,y=r.mode,c=Xc({mode:"visible",children:c.children},y),R=jr(R,y,l,null),R.flags|=2,c.return=r,R.return=r,c.sibling=R,r.child=c,oo(r,s.child,null,l),c=r.child,c.memoizedState=ap(l),c.childLanes=lp(s,S,l),r.memoizedState=op,r=Hl(null,c));else if(Xs(r),zp(R)){if(S=R.nextSibling&&R.nextSibling.dataset,S)var K=S.dgst;S=K,c=Error(i(419)),c.stack="",c.digest=S,Dl({value:c,source:null,stack:null}),r=cp(s,r,l)}else if(Pt||na(s,r,l,!1),S=(l&s.childLanes)!==0,Pt||S){if(S=ut,S!==null&&(c=cl(S,l),c!==0&&c!==V.retryLane))throw V.retryLane=c,Zr(s,c),Sn(S,s,c),sp;Hp(R)||rd(),r=cp(s,r,l)}else Hp(R)?(r.flags|=192,r.child=s.child,r=null):(s=V.treeContext,ft=Jn(R.nextSibling),Xt=r,ze=!0,zs=null,$n=!1,s!==null&&r_(r,s),r=up(r,c.children),r.flags|=4096);return r}return y?(Ws(),R=c.fallback,y=r.mode,V=s.child,K=V.sibling,c=os(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,K!==null?R=os(K,R):(R=jr(R,y,l,null),R.flags|=2),R.return=r,c.return=r,c.sibling=R,r.child=c,Hl(null,c),c=r.child,R=s.child.memoizedState,R===null?R=ap(l):(y=R.cachePool,y!==null?(V=Mt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=d_(),R={baseLanes:R.baseLanes|l,cachePool:y}),c.memoizedState=R,c.childLanes=lp(s,S,l),r.memoizedState=op,Hl(s.child,c)):(Xs(r),l=s.child,s=l.sibling,l=os(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(S=r.deletions,S===null?(r.deletions=[s],r.flags|=16):S.push(s)),r.child=l,r.memoizedState=null,l)}function up(s,r){return r=Xc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Xc(s,r){return s=xn(22,s,null,r),s.lanes=0,s}function cp(s,r,l){return oo(r,s.child,null,l),s=up(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function Cv(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),wh(s.return,r,l)}function dp(s,r,l,c,y,v){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=l,S.tailMode=y,S.treeForkCount=v)}function wv(s,r,l){var c=r.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var S=St.current,R=(S&2)!==0;if(R?(S=S&1|2,r.flags|=128):S&=1,fe(St,S),Zt(s,r,c,l),c=ze?Nl:0,!R&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Cv(s,l,r);else if(s.tag===19)Cv(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&Oc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),dp(r,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&Oc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}dp(r,!0,l,null,v,c);break;case"together":dp(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function fs(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),er|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(na(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=os(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=os(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function fp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Nc(s)))}function mb(s,r,l){switch(r.tag){case 3:ct(r,r.stateNode.containerInfo),$s(r,Mt,s.memoizedState.cache),eo();break;case 27:case 5:Ai(r);break;case 4:ct(r,r.stateNode.containerInfo);break;case 10:$s(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Lh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Xs(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Sv(s,r,l):(Xs(r),s=fs(s,r,l),s!==null?s.sibling:null);Xs(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(na(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return wv(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(St,St.current),c)break;return null;case 22:return r.lanes=0,yv(s,r,l,r.pendingProps);case 24:$s(r,Mt,s.memoizedState.cache)}return fs(s,r,l)}function Iv(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Pt=!0;else{if(!fp(s,l)&&(r.flags&128)===0)return Pt=!1,mb(s,r,l);Pt=(s.flags&131072)!==0}else Pt=!1,ze&&(r.flags&1048576)!==0&&s_(r,Nl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=so(r.elementType),r.type=s,typeof s=="function")yh(s)?(c=lo(s,c),r.tag=1,r=Tv(null,r,s,c,l)):(r.tag=0,r=rp(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===ae){r.tag=11,r=pv(null,r,s,c,l);break e}else if(y===D){r.tag=14,r=mv(null,r,s,c,l);break e}}throw r=ve(s)||s,Error(i(306,r,""))}}return r;case 0:return rp(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=lo(c,r.pendingProps),Tv(s,r,c,y,l);case 3:e:{if(ct(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var v=r.memoizedState;y=v.element,Mh(s,r),Ol(r,c,null,l);var S=r.memoizedState;if(c=S.cache,$s(r,Mt,c),c!==v.cache&&Ih(r,[Mt],l,!0),Ll(),c=S.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=Av(s,r,c,l);break e}else if(c!==y){y=Hn(Error(i(424)),r),Dl(y),r=Av(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ft=Jn(s.firstChild),Xt=r,ze=!0,zs=null,$n=!0,l=y_(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(eo(),c===y){r=fs(s,r,l);break e}Zt(s,r,c,l)}r=r.child}return r;case 26:return Qc(s,r),s===null?(l=L0(r.type,null,r.pendingProps,null))?r.memoizedState=l:ze||(l=r.type,s=r.pendingProps,c=fd(Te.current).createElement(l),c[xt]=r,c[Ht]=s,jt(c,l,s),Nt(c),r.stateNode=c):r.memoizedState=L0(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Ai(r),s===null&&ze&&(c=r.stateNode=P0(r.type,r.pendingProps,Te.current),Xt=r,$n=!0,y=ft,rr(r.type)?(Kp=y,ft=Jn(c.firstChild)):ft=y),Zt(s,r,r.pendingProps.children,l),Qc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&ze&&((y=c=ft)&&(c=Kb(c,r.type,r.pendingProps,$n),c!==null?(r.stateNode=c,Xt=r,ft=Jn(c.firstChild),$n=!1,y=!0):y=!1),y||Ks(r)),Ai(r),y=r.type,v=r.pendingProps,S=s!==null?s.memoizedProps:null,c=v.children,Bp(y,v)?c=null:S!==null&&Bp(y,S)&&(r.flags|=32),r.memoizedState!==null&&(y=Fh(s,r,ob,null,null,l),su._currentValue=y),Qc(s,r),Zt(s,r,c,l),r.child;case 6:return s===null&&ze&&((s=l=ft)&&(l=$b(l,r.pendingProps,$n),l!==null?(r.stateNode=l,Xt=r,ft=null,s=!0):s=!1),s||Ks(r)),null;case 13:return Sv(s,r,l);case 4:return ct(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=oo(r,null,c,l):Zt(s,r,c,l),r.child;case 11:return pv(s,r,r.type,r.pendingProps,l);case 7:return Zt(s,r,r.pendingProps,l),r.child;case 8:return Zt(s,r,r.pendingProps.children,l),r.child;case 12:return Zt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,$s(r,r.type,c.value),Zt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,no(r),y=Wt(y),c=c(y),r.flags|=1,Zt(s,r,c,l),r.child;case 14:return mv(s,r,r.type,r.pendingProps,l);case 15:return gv(s,r,r.type,r.pendingProps,l);case 19:return wv(s,r,l);case 31:return pb(s,r,l);case 22:return yv(s,r,l,r.pendingProps);case 24:return no(r),c=Wt(Mt),s===null?(y=xh(),y===null&&(y=ut,v=Rh(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),r.memoizedState={parent:c,cache:y},Dh(r),$s(r,Mt,y)):((s.lanes&l)!==0&&(Mh(s,r),Ol(r,null,null,l),Ll()),y=s.memoizedState,v=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),$s(r,Mt,c)):(c=v.cache,$s(r,Mt,c),c!==y.cache&&Ih(r,[Mt],l,!0))),Zt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function hs(s){s.flags|=4}function hp(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(jv())s.flags|=8192;else throw ro=Pc,Nh}else s.flags&=-16777217}function Rv(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!G0(r))if(jv())s.flags|=8192;else throw ro=Pc,Nh}function Wc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?ic():536870912,s.lanes|=r,pa|=r)}function zl(s,r){if(!ze)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ht(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function gb(s,r,l){var c=r.pendingProps;switch(Th(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(r),null;case 1:return ht(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),us(Mt),lt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(ta(r)?hs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Sh())),ht(r),null;case 26:var y=r.type,v=r.memoizedState;return s===null?(hs(r),v!==null?(ht(r),Rv(r,v)):(ht(r),hp(r,y,null,c,l))):v?v!==s.memoizedState?(hs(r),ht(r),Rv(r,v)):(ht(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&hs(r),ht(r),hp(r,y,s,c,l)),null;case 27:if(ko(r),l=Te.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&hs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ht(r),null}s=de.current,ta(r)?o_(r):(s=P0(y,c,l),r.stateNode=s,hs(r))}return ht(r),null;case 5:if(ko(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&hs(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ht(r),null}if(v=de.current,ta(r))o_(r);else{var S=fd(Te.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?S.createElement(y,{is:c.is}):S.createElement(y)}}v[xt]=r,v[Ht]=c;e:for(S=r.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===r)break e;for(;S.sibling===null;){if(S.return===null||S.return===r)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}r.stateNode=v;e:switch(jt(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&hs(r)}}return ht(r),hp(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&hs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Te.current,ta(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=Xt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[xt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||S0(s.nodeValue,l)),s||Ks(r,!0)}else s=fd(s).createTextNode(c),s[xt]=r,r.stateNode=s}return ht(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=ta(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[xt]=r}else eo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ht(r),s=!1}else l=Sh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(Dn(r),r):(Dn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ht(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=ta(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[xt]=r}else eo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ht(r),y=!1}else y=Sh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Dn(r),r):(Dn(r),null)}return Dn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Wc(r,r.updateQueue),ht(r),null);case 4:return lt(),s===null&&Vp(r.stateNode.containerInfo),ht(r),null;case 10:return us(r.type),ht(r),null;case 19:if(ne(St),c=r.memoizedState,c===null)return ht(r),null;if(y=(r.flags&128)!==0,v=c.rendering,v===null)if(y)zl(c,!1);else{if(Et!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(v=Oc(s),v!==null){for(r.flags|=128,zl(c,!1),s=v.updateQueue,r.updateQueue=s,Wc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)t_(l,s),l=l.sibling;return fe(St,St.current&1|2),ze&&as(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&cn()>nd&&(r.flags|=128,y=!0,zl(c,!1),r.lanes=4194304)}else{if(!y)if(s=Oc(v),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Wc(r,s),zl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!ze)return ht(r),null}else 2*cn()-c.renderingStartTime>nd&&l!==536870912&&(r.flags|=128,y=!0,zl(c,!1),r.lanes=4194304);c.isBackwards?(v.sibling=r.child,r.child=v):(s=c.last,s!==null?s.sibling=v:r.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=cn(),s.sibling=null,l=St.current,fe(St,y?l&1|2:l&1),ze&&as(r,c.treeForkCount),s):(ht(r),null);case 22:case 23:return Dn(r),Uh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ht(r),r.subtreeFlags&6&&(r.flags|=8192)):ht(r),l=r.updateQueue,l!==null&&Wc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&ne(io),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),us(Mt),ht(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function yb(s,r){switch(Th(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return us(Mt),lt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ko(r),null;case 31:if(r.memoizedState!==null){if(Dn(r),r.alternate===null)throw Error(i(340));eo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Dn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));eo()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ne(St),null;case 4:return lt(),null;case 10:return us(r.type),null;case 22:case 23:return Dn(r),Uh(),s!==null&&ne(io),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return us(Mt),null;case 25:return null;default:return null}}function bv(s,r){switch(Th(r),r.tag){case 3:us(Mt),lt();break;case 26:case 27:case 5:ko(r);break;case 4:lt();break;case 31:r.memoizedState!==null&&Dn(r);break;case 13:Dn(r);break;case 19:ne(St);break;case 10:us(r.type);break;case 22:case 23:Dn(r),Uh(),s!==null&&ne(io);break;case 24:us(Mt)}}function Kl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var v=l.create,S=l.inst;c=v(),S.destroy=c}l=l.next}while(l!==y)}}catch(R){nt(r,r.return,R)}}function Zs(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&s)===s){var S=c.inst,R=S.destroy;if(R!==void 0){S.destroy=void 0,y=r;var V=l,K=R;try{K()}catch(Z){nt(y,V,Z)}}}c=c.next}while(c!==v)}}catch(Z){nt(r,r.return,Z)}}function xv(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{v_(r,l)}catch(c){nt(s,s.return,c)}}}function Nv(s,r,l){l.props=lo(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){nt(s,r,c)}}function $l(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){nt(s,r,y)}}function Hi(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(s,r,y)}else l.current=null}function Dv(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(s,s.return,y)}}function pp(s,r,l){try{var c=s.stateNode;Fb(c,s.type,l,r),c[Ht]=r}catch(y){nt(s,s.return,y)}}function Mv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&rr(s.type)||s.tag===4}function mp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Mv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&rr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gp(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=oi));else if(c!==4&&(c===27&&rr(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(gp(s,r,l),s=s.sibling;s!==null;)gp(s,r,l),s=s.sibling}function Zc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&rr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Zc(s,r,l),s=s.sibling;s!==null;)Zc(s,r,l),s=s.sibling}function kv(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);jt(r,c,l),r[xt]=s,r[Ht]=l}catch(v){nt(s,s.return,v)}}var ps=!1,Vt=!1,yp=!1,Pv=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function _b(s,r){if(s=s.containerInfo,Op=vd,s=$y(s),ch(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,R=-1,V=-1,K=0,Z=0,ie=s,$=null;t:for(;;){for(var X;ie!==l||y!==0&&ie.nodeType!==3||(R=S+y),ie!==v||c!==0&&ie.nodeType!==3||(V=S+c),ie.nodeType===3&&(S+=ie.nodeValue.length),(X=ie.firstChild)!==null;)$=ie,ie=X;for(;;){if(ie===s)break t;if($===l&&++K===y&&(R=S),$===v&&++Z===c&&(V=S),(X=ie.nextSibling)!==null)break;ie=$,$=ie.parentNode}ie=X}l=R===-1||V===-1?null:{start:R,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Fp={focusedElem:s,selectionRange:l},vd=!1,Kt=r;Kt!==null;)if(r=Kt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,Kt=s;else for(;Kt!==null;){switch(r=Kt,v=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,l=r,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var _e=lo(l.type,y);s=c.getSnapshotBeforeUpdate(_e,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(we){nt(l,l.return,we)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Gp(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Gp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Kt=s;break}Kt=r.return}}function Vv(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:gs(s,l),c&4&&Kl(5,l);break;case 1:if(gs(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(S){nt(l,l.return,S)}else{var y=lo(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(S){nt(l,l.return,S)}}c&64&&xv(l),c&512&&$l(l,l.return);break;case 3:if(gs(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{v_(s,r)}catch(S){nt(l,l.return,S)}}break;case 27:r===null&&c&4&&kv(l);case 26:case 5:gs(s,l),r===null&&c&4&&Dv(l),c&512&&$l(l,l.return);break;case 12:gs(s,l);break;case 31:gs(s,l),c&4&&Ov(s,l);break;case 13:gs(s,l),c&4&&Fv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Rb.bind(null,l),Yb(s,l))));break;case 22:if(c=l.memoizedState!==null||ps,!c){r=r!==null&&r.memoizedState!==null||Vt,y=ps;var v=Vt;ps=c,(Vt=r)&&!v?ys(s,l,(l.subtreeFlags&8772)!==0):gs(s,l),ps=y,Vt=v}break;case 30:break;default:gs(s,l)}}function Uv(s){var r=s.alternate;r!==null&&(s.alternate=null,Uv(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Oo(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var gt=null,vn=!1;function ms(s,r,l){for(l=l.child;l!==null;)Lv(s,r,l),l=l.sibling}function Lv(s,r,l){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(ni,l)}catch{}switch(l.tag){case 26:Vt||Hi(l,r),ms(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Vt||Hi(l,r);var c=gt,y=vn;rr(l.type)&&(gt=l.stateNode,vn=!1),ms(s,r,l),tu(l.stateNode),gt=c,vn=y;break;case 5:Vt||Hi(l,r);case 6:if(c=gt,y=vn,gt=null,ms(s,r,l),gt=c,vn=y,gt!==null)if(vn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(l.stateNode)}catch(v){nt(l,r,v)}else try{gt.removeChild(l.stateNode)}catch(v){nt(l,r,v)}break;case 18:gt!==null&&(vn?(s=gt,x0(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Aa(s)):x0(gt,l.stateNode));break;case 4:c=gt,y=vn,gt=l.stateNode.containerInfo,vn=!0,ms(s,r,l),gt=c,vn=y;break;case 0:case 11:case 14:case 15:Zs(2,l,r),Vt||Zs(4,l,r),ms(s,r,l);break;case 1:Vt||(Hi(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Nv(l,r,c)),ms(s,r,l);break;case 21:ms(s,r,l);break;case 22:Vt=(c=Vt)||l.memoizedState!==null,ms(s,r,l),Vt=c;break;default:ms(s,r,l)}}function Ov(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Aa(s)}catch(l){nt(r,r.return,l)}}}function Fv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Aa(s)}catch(l){nt(r,r.return,l)}}function vb(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Pv),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Pv),r;default:throw Error(i(435,s.tag))}}function jc(s,r){var l=vb(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=bb.bind(null,s,c);c.then(y,y)}})}function En(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=s,S=r,R=S;e:for(;R!==null;){switch(R.tag){case 27:if(rr(R.type)){gt=R.stateNode,vn=!1;break e}break;case 5:gt=R.stateNode,vn=!1;break e;case 3:case 4:gt=R.stateNode.containerInfo,vn=!0;break e}R=R.return}if(gt===null)throw Error(i(160));Lv(v,S,y),gt=null,vn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Bv(r,s),r=r.sibling}var fi=null;function Bv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:En(r,s),Tn(s),c&4&&(Zs(3,s,s.return),Kl(3,s),Zs(5,s,s.return));break;case 1:En(r,s),Tn(s),c&512&&(Vt||l===null||Hi(l,l.return)),c&64&&ps&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=fi;if(En(r,s),Tn(s),c&512&&(Vt||l===null||Hi(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[xi]||v[xt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),jt(v,c,l),v[xt]=s,Nt(v),c=v;break e;case"link":var S=B0("link","href",y).get(c+(l.href||""));if(S){for(var R=0;R<S.length;R++)if(v=S[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(R,1);break t}}v=y.createElement(c),jt(v,c,l),y.head.appendChild(v);break;case"meta":if(S=B0("meta","content",y).get(c+(l.content||""))){for(R=0;R<S.length;R++)if(v=S[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(R,1);break t}}v=y.createElement(c),jt(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[xt]=s,Nt(v),c=v}s.stateNode=c}else q0(y,s.type,s.stateNode);else s.stateNode=F0(y,c,s.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?q0(y,s.type,s.stateNode):F0(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&pp(s,s.memoizedProps,l.memoizedProps)}break;case 27:En(r,s),Tn(s),c&512&&(Vt||l===null||Hi(l,l.return)),l!==null&&c&4&&pp(s,s.memoizedProps,l.memoizedProps);break;case 5:if(En(r,s),Tn(s),c&512&&(Vt||l===null||Hi(l,l.return)),s.flags&32){y=s.stateNode;try{_n(y,"")}catch(_e){nt(s,s.return,_e)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,pp(s,y,l!==null?l.memoizedProps:y)),c&1024&&(yp=!0);break;case 6:if(En(r,s),Tn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(_e){nt(s,s.return,_e)}}break;case 3:if(md=null,y=fi,fi=hd(r.containerInfo),En(r,s),fi=y,Tn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Aa(r.containerInfo)}catch(_e){nt(s,s.return,_e)}yp&&(yp=!1,qv(s));break;case 4:c=fi,fi=hd(s.stateNode.containerInfo),En(r,s),Tn(s),fi=c;break;case 12:En(r,s),Tn(s);break;case 31:En(r,s),Tn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,jc(s,c)));break;case 13:En(r,s),Tn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(td=cn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,jc(s,c)));break;case 22:y=s.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,K=ps,Z=Vt;if(ps=K||y,Vt=Z||V,En(r,s),Vt=Z,ps=K,Tn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||V||ps||Vt||uo(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){V=l=r;try{if(v=V.stateNode,y)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{R=V.stateNode;var ie=V.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;R.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(_e){nt(V,V.return,_e)}}}else if(r.tag===6){if(l===null){V=r;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(_e){nt(V,V.return,_e)}}}else if(r.tag===18){if(l===null){V=r;try{var X=V.stateNode;y?N0(X,!0):N0(V.stateNode,!1)}catch(_e){nt(V,V.return,_e)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,jc(s,l))));break;case 19:En(r,s),Tn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,jc(s,c)));break;case 30:break;case 21:break;default:En(r,s),Tn(s)}}function Tn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(Mv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=mp(s);Zc(s,v,y);break;case 5:var S=l.stateNode;l.flags&32&&(_n(S,""),l.flags&=-33);var R=mp(s);Zc(s,R,S);break;case 3:case 4:var V=l.stateNode.containerInfo,K=mp(s);gp(s,K,V);break;default:throw Error(i(161))}}catch(Z){nt(s,s.return,Z)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function qv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;qv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function gs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Vv(s,r.alternate,r),r=r.sibling}function uo(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Zs(4,r,r.return),uo(r);break;case 1:Hi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Nv(r,r.return,l),uo(r);break;case 27:tu(r.stateNode);case 26:case 5:Hi(r,r.return),uo(r);break;case 22:r.memoizedState===null&&uo(r);break;case 30:uo(r);break;default:uo(r)}s=s.sibling}}function ys(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,v=r,S=v.flags;switch(v.tag){case 0:case 11:case 15:ys(y,v,l),Kl(4,v);break;case 1:if(ys(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){nt(c,c.return,K)}if(c=v,y=c.updateQueue,y!==null){var R=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)__(V[y],R)}catch(K){nt(c,c.return,K)}}l&&S&64&&xv(v),$l(v,v.return);break;case 27:kv(v);case 26:case 5:ys(y,v,l),l&&c===null&&S&4&&Dv(v),$l(v,v.return);break;case 12:ys(y,v,l);break;case 31:ys(y,v,l),l&&S&4&&Ov(y,v);break;case 13:ys(y,v,l),l&&S&4&&Fv(y,v);break;case 22:v.memoizedState===null&&ys(y,v,l),$l(v,v.return);break;case 30:break;default:ys(y,v,l)}r=r.sibling}}function _p(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Ml(l))}function vp(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Ml(s))}function hi(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Gv(s,r,l,c),r=r.sibling}function Gv(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:hi(s,r,l,c),y&2048&&Kl(9,r);break;case 1:hi(s,r,l,c);break;case 3:hi(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Ml(s)));break;case 12:if(y&2048){hi(s,r,l,c),s=r.stateNode;try{var v=r.memoizedProps,S=v.id,R=v.onPostCommit;typeof R=="function"&&R(S,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){nt(r,r.return,V)}}else hi(s,r,l,c);break;case 31:hi(s,r,l,c);break;case 13:hi(s,r,l,c);break;case 23:break;case 22:v=r.stateNode,S=r.alternate,r.memoizedState!==null?v._visibility&2?hi(s,r,l,c):Yl(s,r):v._visibility&2?hi(s,r,l,c):(v._visibility|=2,da(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&_p(S,r);break;case 24:hi(s,r,l,c),y&2048&&vp(r.alternate,r);break;default:hi(s,r,l,c)}}function da(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=s,S=r,R=l,V=c,K=S.flags;switch(S.tag){case 0:case 11:case 15:da(v,S,R,V,y),Kl(8,S);break;case 23:break;case 22:var Z=S.stateNode;S.memoizedState!==null?Z._visibility&2?da(v,S,R,V,y):Yl(v,S):(Z._visibility|=2,da(v,S,R,V,y)),y&&K&2048&&_p(S.alternate,S);break;case 24:da(v,S,R,V,y),y&&K&2048&&vp(S.alternate,S);break;default:da(v,S,R,V,y)}r=r.sibling}}function Yl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Yl(l,c),y&2048&&_p(c.alternate,c);break;case 24:Yl(l,c),y&2048&&vp(c.alternate,c);break;default:Yl(l,c)}r=r.sibling}}var Jl=8192;function fa(s,r,l){if(s.subtreeFlags&Jl)for(s=s.child;s!==null;)Hv(s,r,l),s=s.sibling}function Hv(s,r,l){switch(s.tag){case 26:fa(s,r,l),s.flags&Jl&&s.memoizedState!==null&&r1(l,fi,s.memoizedState,s.memoizedProps);break;case 5:fa(s,r,l);break;case 3:case 4:var c=fi;fi=hd(s.stateNode.containerInfo),fa(s,r,l),fi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Jl,Jl=16777216,fa(s,r,l),Jl=c):fa(s,r,l));break;default:fa(s,r,l)}}function zv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Ql(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Kt=c,$v(c,s)}zv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Kv(s),s=s.sibling}function Kv(s){switch(s.tag){case 0:case 11:case 15:Ql(s),s.flags&2048&&Zs(9,s,s.return);break;case 3:Ql(s);break;case 12:Ql(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,ed(s)):Ql(s);break;default:Ql(s)}}function ed(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];Kt=c,$v(c,s)}zv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Zs(8,r,r.return),ed(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,ed(r));break;default:ed(r)}s=s.sibling}}function $v(s,r){for(;Kt!==null;){var l=Kt;switch(l.tag){case 0:case 11:case 15:Zs(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ml(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Kt=c;else e:for(l=s;Kt!==null;){c=Kt;var y=c.sibling,v=c.return;if(Uv(c),c===l){Kt=null;break e}if(y!==null){y.return=v,Kt=y;break e}Kt=v}}}var Eb={getCacheForType:function(s){var r=Wt(Mt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return Wt(Mt).controller.signal}},Tb=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ut=null,Le=null,Fe=0,tt=0,Mn=null,js=!1,ha=!1,Ep=!1,_s=0,Et=0,er=0,co=0,Tp=0,kn=0,pa=0,Xl=null,An=null,Ap=!1,td=0,Yv=0,nd=1/0,id=null,tr=null,qt=0,nr=null,ma=null,vs=0,Sp=0,Cp=null,Jv=null,Wl=0,wp=null;function Pn(){return(Ze&2)!==0&&Fe!==0?Fe&-Fe:Q.T!==null?Dp():sc()}function Qv(){if(kn===0)if((Fe&536870912)===0||ze){var s=Lr;Lr<<=1,(Lr&3932160)===0&&(Lr=262144),kn=s}else kn=536870912;return s=Nn.current,s!==null&&(s.flags|=32),kn}function Sn(s,r,l){(s===ut&&(tt===2||tt===9)||s.cancelPendingCommit!==null)&&(ga(s,0),ir(s,Fe,kn,!1)),Or(s,l),((Ze&2)===0||s!==ut)&&(s===ut&&((Ze&2)===0&&(co|=l),Et===4&&ir(s,Fe,kn,!1)),zi(s))}function Xv(s,r,l){if((Ze&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||ii(s,r),y=c?Cb(s,r):Rp(s,r,!0),v=c;do{if(y===0){ha&&!c&&ir(s,r,0,!1);break}else{if(l=s.current.alternate,v&&!Ab(l)){y=Rp(s,r,!1),v=!1;continue}if(y===2){if(v=r,s.errorRecoveryDisabledLanes&v)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var R=s;y=Xl;var V=R.current.memoizedState.isDehydrated;if(V&&(ga(R,S).flags|=256),S=Rp(R,S,!1),S!==2){if(Ep&&!V){R.errorRecoveryDisabledLanes|=v,co|=v,y=4;break e}v=An,An=y,v!==null&&(An===null?An=v:An.push.apply(An,v))}y=S}if(v=!1,y!==2)continue}}if(y===1){ga(s,0),ir(s,r,0,!0);break}e:{switch(c=s,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ir(c,r,kn,!js);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=td+300-cn(),10<y)){if(ir(c,r,kn,!js),Ii(c,0,!0)!==0)break e;vs=r,c.timeoutHandle=R0(Wv.bind(null,c,l,An,id,Ap,r,kn,co,pa,js,v,"Throttled",-0,0),y);break e}Wv(c,l,An,id,Ap,r,kn,co,pa,js,v,null,-0,0)}}break}while(!0);zi(s)}function Wv(s,r,l,c,y,v,S,R,V,K,Z,ie,$,X){if(s.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oi},Hv(r,v,ie);var _e=(v&62914560)===v?td-cn():(v&4194048)===v?Yv-cn():0;if(_e=o1(ie,_e),_e!==null){vs=v,s.cancelPendingCommit=_e(r0.bind(null,s,r,v,l,c,y,S,R,V,Z,ie,null,$,X)),ir(s,v,S,!K);return}}r0(s,r,v,l,c,y,S,R,V)}function Ab(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!bn(v(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ir(s,r,l,c){r&=~Tp,r&=~co,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var v=31-Tt(y),S=1<<v;c[v]=-1,y&=~S}l!==0&&Fr(s,l,r)}function sd(){return(Ze&6)===0?(Zl(0),!1):!0}function Ip(){if(Le!==null){if(tt===0)var s=Le.return;else s=Le,ls=to=null,Gh(s),oa=null,Pl=0,s=Le;for(;s!==null;)bv(s.alternate,s),s=s.return;Le=null}}function ga(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Gb(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),vs=0,Ip(),ut=s,Le=l=os(s.current,null),Fe=r,tt=0,Mn=null,js=!1,ha=ii(s,r),Ep=!1,pa=kn=Tp=co=er=Et=0,An=Xl=null,Ap=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-Tt(c),v=1<<y;r|=s[y],c&=~v}return _s=r,wc(),l}function Zv(s,r){ke=null,Q.H=Gl,r===ra||r===kc?(r=p_(),tt=3):r===Nh?(r=p_(),tt=4):tt=r===sp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Mn=r,Le===null&&(Et=1,Yc(s,Hn(r,s.current)))}function jv(){var s=Nn.current;return s===null?!0:(Fe&4194048)===Fe?Yn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?s===Yn:!1}function e0(){var s=Q.H;return Q.H=Gl,s===null?Gl:s}function t0(){var s=Q.A;return Q.A=Eb,s}function rd(){Et=4,js||(Fe&4194048)!==Fe&&Nn.current!==null||(ha=!0),(er&134217727)===0&&(co&134217727)===0||ut===null||ir(ut,Fe,kn,!1)}function Rp(s,r,l){var c=Ze;Ze|=2;var y=e0(),v=t0();(ut!==s||Fe!==r)&&(id=null,ga(s,r)),r=!1;var S=Et;e:do try{if(tt!==0&&Le!==null){var R=Le,V=Mn;switch(tt){case 8:Ip(),S=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(r=!0);var K=tt;if(tt=0,Mn=null,ya(s,R,V,K),l&&ha){S=0;break e}break;default:K=tt,tt=0,Mn=null,ya(s,R,V,K)}}Sb(),S=Et;break}catch(Z){Zv(s,Z)}while(!0);return r&&s.shellSuspendCounter++,ls=to=null,Ze=c,Q.H=y,Q.A=v,Le===null&&(ut=null,Fe=0,wc()),S}function Sb(){for(;Le!==null;)n0(Le)}function Cb(s,r){var l=Ze;Ze|=2;var c=e0(),y=t0();ut!==s||Fe!==r?(id=null,nd=cn()+500,ga(s,r)):ha=ii(s,r);e:do try{if(tt!==0&&Le!==null){r=Le;var v=Mn;t:switch(tt){case 1:tt=0,Mn=null,ya(s,r,v,1);break;case 2:case 9:if(f_(v)){tt=0,Mn=null,i0(r);break}r=function(){tt!==2&&tt!==9||ut!==s||(tt=7),zi(s)},v.then(r,r);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:f_(v)?(tt=0,Mn=null,i0(r)):(tt=0,Mn=null,ya(s,r,v,7));break;case 5:var S=null;switch(Le.tag){case 26:S=Le.memoizedState;case 5:case 27:var R=Le;if(S?G0(S):R.stateNode.complete){tt=0,Mn=null;var V=R.sibling;if(V!==null)Le=V;else{var K=R.return;K!==null?(Le=K,od(K)):Le=null}break t}}tt=0,Mn=null,ya(s,r,v,5);break;case 6:tt=0,Mn=null,ya(s,r,v,6);break;case 8:Ip(),Et=6;break e;default:throw Error(i(462))}}wb();break}catch(Z){Zv(s,Z)}while(!0);return ls=to=null,Q.H=c,Q.A=y,Ze=l,Le!==null?0:(ut=null,Fe=0,wc(),Et)}function wb(){for(;Le!==null&&!ih();)n0(Le)}function n0(s){var r=Iv(s.alternate,s,_s);s.memoizedProps=s.pendingProps,r===null?od(s):Le=r}function i0(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=Ev(l,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=Ev(l,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:Gh(r);default:bv(l,r),r=Le=t_(r,_s),r=Iv(l,r,_s)}s.memoizedProps=s.pendingProps,r===null?od(s):Le=r}function ya(s,r,l,c){ls=to=null,Gh(r),oa=null,Pl=0;var y=r.return;try{if(hb(s,y,r,l,Fe)){Et=1,Yc(s,Hn(l,s.current)),Le=null;return}}catch(v){if(y!==null)throw Le=y,v;Et=1,Yc(s,Hn(l,s.current)),Le=null;return}r.flags&32768?(ze||c===1?s=!0:ha||(Fe&536870912)!==0?s=!1:(js=s=!0,(c===2||c===9||c===3||c===6)&&(c=Nn.current,c!==null&&c.tag===13&&(c.flags|=16384))),s0(r,s)):od(r)}function od(s){var r=s;do{if((r.flags&32768)!==0){s0(r,js);return}s=r.return;var l=gb(r.alternate,r,_s);if(l!==null){Le=l;return}if(r=r.sibling,r!==null){Le=r;return}Le=r=s}while(r!==null);Et===0&&(Et=5)}function s0(s,r){do{var l=yb(s.alternate,s);if(l!==null){l.flags&=32767,Le=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Le=s;return}Le=s=l}while(s!==null);Et=6,Le=null}function r0(s,r,l,c,y,v,S,R,V){s.cancelPendingCommit=null;do ad();while(qt!==0);if((Ze&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(v=r.lanes|r.childLanes,v|=mh,oh(s,l,v,S,R,V),s===ut&&(Le=ut=null,Fe=0),ma=r,nr=s,vs=l,Sp=v,Cp=y,Jv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,xb(ks,function(){return c0(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,y=re.p,re.p=2,S=Ze,Ze|=4;try{_b(s,r,l)}finally{Ze=S,re.p=y,Q.T=c}}qt=1,o0(),a0(),l0()}}function o0(){if(qt===1){qt=0;var s=nr,r=ma,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null;var c=re.p;re.p=2;var y=Ze;Ze|=4;try{Bv(r,s);var v=Fp,S=$y(s.containerInfo),R=v.focusedElem,V=v.selectionRange;if(S!==R&&R&&R.ownerDocument&&Ky(R.ownerDocument.documentElement,R)){if(V!==null&&ch(R)){var K=V.start,Z=V.end;if(Z===void 0&&(Z=K),"selectionStart"in R)R.selectionStart=K,R.selectionEnd=Math.min(Z,R.value.length);else{var ie=R.ownerDocument||document,$=ie&&ie.defaultView||window;if($.getSelection){var X=$.getSelection(),_e=R.textContent.length,we=Math.min(V.start,_e),at=V.end===void 0?we:Math.min(V.end,_e);!X.extend&&we>at&&(S=at,at=we,we=S);var G=zy(R,we),B=zy(R,at);if(G&&B&&(X.rangeCount!==1||X.anchorNode!==G.node||X.anchorOffset!==G.offset||X.focusNode!==B.node||X.focusOffset!==B.offset)){var z=ie.createRange();z.setStart(G.node,G.offset),X.removeAllRanges(),we>at?(X.addRange(z),X.extend(B.node,B.offset)):(z.setEnd(B.node,B.offset),X.addRange(z))}}}}for(ie=[],X=R;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ie.length;R++){var j=ie[R];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}vd=!!Op,Fp=Op=null}finally{Ze=y,re.p=c,Q.T=l}}s.current=r,qt=2}}function a0(){if(qt===2){qt=0;var s=nr,r=ma,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Q.T,Q.T=null;var c=re.p;re.p=2;var y=Ze;Ze|=4;try{Vv(s,r.alternate,r)}finally{Ze=y,re.p=c,Q.T=l}}qt=3}}function l0(){if(qt===4||qt===3){qt=0,Wu();var s=nr,r=ma,l=vs,c=Jv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?qt=5:(qt=0,ma=nr=null,u0(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(tr=null),ns(l),r=r.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(ni,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Q.T,y=re.p,re.p=2,Q.T=null;try{for(var v=s.onRecoverableError,S=0;S<c.length;S++){var R=c[S];v(R.value,{componentStack:R.stack})}}finally{Q.T=r,re.p=y}}(vs&3)!==0&&ad(),zi(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===wp?Wl++:(Wl=0,wp=s):Wl=0,Zl(0)}}function u0(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Ml(r)))}function ad(){return o0(),a0(),l0(),c0()}function c0(){if(qt!==5)return!1;var s=nr,r=Sp;Sp=0;var l=ns(vs),c=Q.T,y=re.p;try{re.p=32>l?32:l,Q.T=null,l=Cp,Cp=null;var v=nr,S=vs;if(qt=0,ma=nr=null,vs=0,(Ze&6)!==0)throw Error(i(331));var R=Ze;if(Ze|=4,Kv(v.current),Gv(v,v.current,S,l),Ze=R,Zl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(ni,v)}catch{}return!0}finally{re.p=y,Q.T=c,u0(s,r)}}function d0(s,r,l){r=Hn(l,r),r=ip(s.stateNode,r,2),s=Qs(s,r,2),s!==null&&(Or(s,2),zi(s))}function nt(s,r,l){if(s.tag===3)d0(s,s,l);else for(;r!==null;){if(r.tag===3){d0(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(tr===null||!tr.has(c))){s=Hn(l,s),l=fv(2),c=Qs(r,l,2),c!==null&&(hv(l,c,r,s),Or(c,2),zi(c));break}}r=r.return}}function bp(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new Tb;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(Ep=!0,y.add(l),s=Ib.bind(null,s,r,l),r.then(s,s))}function Ib(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,ut===s&&(Fe&l)===l&&(Et===4||Et===3&&(Fe&62914560)===Fe&&300>cn()-td?(Ze&2)===0&&ga(s,0):Tp|=l,pa===Fe&&(pa=0)),zi(s)}function f0(s,r){r===0&&(r=ic()),s=Zr(s,r),s!==null&&(Or(s,r),zi(s))}function Rb(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),f0(s,l)}function bb(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),f0(s,l)}function xb(s,r){return Bt(s,r)}var ld=null,_a=null,xp=!1,ud=!1,Np=!1,sr=0;function zi(s){s!==_a&&s.next===null&&(_a===null?ld=_a=s:_a=_a.next=s),ud=!0,xp||(xp=!0,Db())}function Zl(s,r){if(!Np&&ud){Np=!0;do for(var l=!1,c=ld;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var S=c.suspendedLanes,R=c.pingedLanes;v=(1<<31-Tt(42|s)+1)-1,v&=y&~(S&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,g0(c,v))}else v=Fe,v=Ii(c,c===ut?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||ii(c,v)||(l=!0,g0(c,v));c=c.next}while(l);Np=!1}}function Nb(){h0()}function h0(){ud=xp=!1;var s=0;sr!==0&&qb()&&(s=sr);for(var r=cn(),l=null,c=ld;c!==null;){var y=c.next,v=p0(c,r);v===0?(c.next=null,l===null?ld=y:l.next=y,y===null&&(_a=l)):(l=c,(s!==0||(v&3)!==0)&&(ud=!0)),c=y}qt!==0&&qt!==5||Zl(s),sr!==0&&(sr=0)}function p0(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var S=31-Tt(v),R=1<<S,V=y[S];V===-1?((R&l)===0||(R&c)!==0)&&(y[S]=rh(R,r)):V<=r&&(s.expiredLanes|=R),v&=~R}if(r=ut,l=Fe,l=Ii(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(tt===2||tt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Ms(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||ii(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Ms(c),ns(l)){case 2:case 8:l=ll;break;case 32:l=ks;break;case 268435456:l=Zu;break;default:l=ks}return c=m0.bind(null,s),l=Bt(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Ms(c),s.callbackPriority=2,s.callbackNode=null,2}function m0(s,r){if(qt!==0&&qt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(ad()&&s.callbackNode!==l)return null;var c=Fe;return c=Ii(s,s===ut?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(Xv(s,c,r),p0(s,cn()),s.callbackNode!=null&&s.callbackNode===l?m0.bind(null,s):null)}function g0(s,r){if(ad())return null;Xv(s,r,!0)}function Db(){Hb(function(){(Ze&6)!==0?Bt(al,Nb):h0()})}function Dp(){if(sr===0){var s=ia;s===0&&(s=Ci,Ci<<=1,(Ci&261888)===0&&(Ci=256)),sr=s}return sr}function y0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Go(""+s)}function _0(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function Mb(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var v=y0((y[Ht]||null).action),S=c.submitter;S&&(r=(r=S[Ht]||null)?y0(r.formAction):S.getAttribute("formAction"),r!==null&&(v=r,S=null));var R=new Li("action","action",null,c,y);s.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(sr!==0){var V=S?_0(y,S):new FormData(y);Wh(l,{pending:!0,data:V,method:y.method,action:v},null,V)}}else typeof v=="function"&&(R.preventDefault(),V=S?_0(y,S):new FormData(y),Wh(l,{pending:!0,data:V,method:y.method,action:v},v,V))},currentTarget:y}]})}}for(var Mp=0;Mp<ph.length;Mp++){var kp=ph[Mp],kb=kp.toLowerCase(),Pb=kp[0].toUpperCase()+kp.slice(1);di(kb,"on"+Pb)}di(Qy,"onAnimationEnd"),di(Xy,"onAnimationIteration"),di(Wy,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(XR,"onTransitionRun"),di(WR,"onTransitionStart"),di(ZR,"onTransitionCancel"),di(Zy,"onTransitionEnd"),ki("onMouseEnter",["mouseout","mouseover"]),ki("onMouseLeave",["mouseout","mouseover"]),ki("onPointerEnter",["pointerout","pointerover"]),ki("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function v0(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var v=void 0;if(r)for(var S=c.length-1;0<=S;S--){var R=c[S],V=R.instance,K=R.currentTarget;if(R=R.listener,V!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=K;try{v(y)}catch(Z){Cc(Z)}y.currentTarget=null,v=V}else for(S=0;S<c.length;S++){if(R=c[S],V=R.instance,K=R.currentTarget,R=R.listener,V!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=K;try{v(y)}catch(Z){Cc(Z)}y.currentTarget=null,v=V}}}}function Oe(s,r){var l=r[Lo];l===void 0&&(l=r[Lo]=new Set);var c=s+"__bubble";l.has(c)||(E0(r,s,2,!1),l.add(c))}function Pp(s,r,l){var c=0;r&&(c|=4),E0(l,s,c,r)}var cd="_reactListening"+Math.random().toString(36).slice(2);function Vp(s){if(!s[cd]){s[cd]=!0,dl.forEach(function(l){l!=="selectionchange"&&(Vb.has(l)||Pp(l,!1,s),Pp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[cd]||(r[cd]=!0,Pp("selectionchange",!1,r))}}function E0(s,r,l,c){switch(Q0(r)){case 2:var y=u1;break;case 8:y=c1;break;default:y=Xp}l=y.bind(null,r,l,s),y=void 0,!zr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function Up(s,r,l,c,y){var v=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var R=c.stateNode.containerInfo;if(R===y)break;if(S===4)for(S=c.return;S!==null;){var V=S.tag;if((V===3||V===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;R!==null;){if(S=Ni(R),S===null)return;if(V=S.tag,V===5||V===6||V===26||V===27){c=v=S;continue e}R=R.parentNode}}c=c.return}Fs(function(){var K=v,Z=Fn(l),ie=[];e:{var $=jy.get(s);if($!==void 0){var X=Li,_e=s;switch(s){case"keypress":if($r(l)===0)break e;case"keydown":case"keyup":X=Tc;break;case"focusin":_e="focus",X=Jr;break;case"focusout":_e="blur",X=Jr;break;case"beforeblur":case"afterblur":X=Jr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=fc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=A;break;case Qy:case Xy:case Wy:X=pc;break;case Zy:X=b;break;case"scroll":case"scrollend":X=Sl;break;case"wheel":X=J;break;case"copy":case"cut":case"paste":X=mc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=rs;break;case"toggle":case"beforetoggle":X=Me}var we=(r&4)!==0,at=!we&&(s==="scroll"||s==="scrollend"),G=we?$!==null?$+"Capture":null:$;we=[];for(var B=K,z;B!==null;){var j=B;if(z=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||z===null||G===null||(j=ai(B,G),j!=null&&we.push(eu(B,j,z))),at)break;B=B.return}0<we.length&&($=new X($,_e,null,l,Z),ie.push({event:$,listeners:we}))}}if((r&7)===0){e:{if($=s==="mouseover"||s==="pointerover",X=s==="mouseout"||s==="pointerout",$&&l!==El&&(_e=l.relatedTarget||l.fromElement)&&(Ni(_e)||_e[bi]))break e;if((X||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,X?(_e=l.relatedTarget||l.toElement,X=K,_e=_e?Ni(_e):null,_e!==null&&(at=a(_e),we=_e.tag,_e!==at||we!==5&&we!==27&&we!==6)&&(_e=null)):(X=null,_e=K),X!==_e)){if(we=Cl,j="onMouseLeave",G="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(we=rs,j="onPointerLeave",G="onPointerEnter",B="pointer"),at=X==null?$:In(X),z=_e==null?$:In(_e),$=new we(j,B+"leave",X,l,Z),$.target=at,$.relatedTarget=z,j=null,Ni(Z)===K&&(we=new we(G,B+"enter",_e,l,Z),we.target=z,we.relatedTarget=at,j=we),at=j,X&&_e)t:{for(we=Ub,G=X,B=_e,z=0,j=G;j;j=we(j))z++;j=0;for(var Se=B;Se;Se=we(Se))j++;for(;0<z-j;)G=we(G),z--;for(;0<j-z;)B=we(B),j--;for(;z--;){if(G===B||B!==null&&G===B.alternate){we=G;break t}G=we(G),B=we(B)}we=null}else we=null;X!==null&&T0(ie,$,X,we,!1),_e!==null&&at!==null&&T0(ie,at,_e,we,!0)}}e:{if($=K?In(K):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var Ye=Oy;else if(Uy($))if(Fy)Ye=YR;else{Ye=KR;var Ee=zR}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&qo(K.elementType)&&(Ye=Oy):Ye=$R;if(Ye&&(Ye=Ye(s,K))){Ly(ie,Ye,l,Z);break e}Ee&&Ee(s,$,K),s==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&yl($,"number",$.value)}switch(Ee=K?In(K):window,s){case"focusin":(Uy(Ee)||Ee.contentEditable==="true")&&(Qo=Ee,dh=K,xl=null);break;case"focusout":xl=dh=Qo=null;break;case"mousedown":fh=!0;break;case"contextmenu":case"mouseup":case"dragend":fh=!1,Yy(ie,l,Z);break;case"selectionchange":if(QR)break;case"keydown":case"keyup":Yy(ie,l,Z)}var Pe;if(We)e:{switch(s){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Jo?Qr(s,l)&&(Be="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Be="onCompositionStart");Be&&(Bi&&l.locale!=="ko"&&(Jo||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Jo&&(Pe=Al()):(Ui=Z,Tl="value"in Ui?Ui.value:Ui.textContent,Jo=!0)),Ee=dd(K,Be),0<Ee.length&&(Be=new Fi(Be,s,null,l,Z),ie.push({event:Be,listeners:Ee}),Pe?Be.data=Pe:(Pe=Yo(l),Pe!==null&&(Be.data=Pe)))),(Pe=qn?BR(s,l):qR(s,l))&&(Be=dd(K,"onBeforeInput"),0<Be.length&&(Ee=new Fi("onBeforeInput","beforeinput",null,l,Z),ie.push({event:Ee,listeners:Be}),Ee.data=Pe)),Mb(ie,s,K,l,Z)}v0(ie,r)})}function eu(s,r,l){return{instance:s,listener:r,currentTarget:l}}function dd(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=ai(s,l),y!=null&&c.unshift(eu(s,y,v)),y=ai(s,r),y!=null&&c.push(eu(s,y,v))),s.tag===3)return c;s=s.return}return[]}function Ub(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function T0(s,r,l,c,y){for(var v=r._reactName,S=[];l!==null&&l!==c;){var R=l,V=R.alternate,K=R.stateNode;if(R=R.tag,V!==null&&V===c)break;R!==5&&R!==26&&R!==27||K===null||(V=K,y?(K=ai(l,v),K!=null&&S.unshift(eu(l,K,V))):y||(K=ai(l,v),K!=null&&S.push(eu(l,K,V)))),l=l.return}S.length!==0&&s.push({event:r,listeners:S})}var Lb=/\r\n?/g,Ob=/\u0000|\uFFFD/g;function A0(s){return(typeof s=="string"?s:""+s).replace(Lb,`
`).replace(Ob,"")}function S0(s,r){return r=A0(r),A0(s)===r}function ot(s,r,l,c,y,v){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||_n(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&_n(s,""+c);break;case"className":Rn(s,"class",c);break;case"tabIndex":Rn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(s,l,c);break;case"style":vl(s,c,v);break;case"data":if(r!=="object"){Rn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Go(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&ot(s,r,"name",y.name,y,null),ot(s,r,"formEncType",y.formEncType,y,null),ot(s,r,"formMethod",y.formMethod,y,null),ot(s,r,"formTarget",y.formTarget,y,null)):(ot(s,r,"encType",y.encType,y,null),ot(s,r,"method",y.method,y,null),ot(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Go(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=oi);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Go(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Oe("beforetoggle",s),Oe("toggle",s),Fo(s,"popover",c);break;case"xlinkActuate":Dt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Dt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Dt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Dt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Dt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Dt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Dt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Dt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Dt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Fo(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=dc.get(l)||l,Fo(s,l,c))}}function Lp(s,r,l,c,y,v){switch(l){case"style":vl(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?_n(s,c):(typeof c=="number"||typeof c=="bigint")&&_n(s,""+c);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),v=s[Ht]||null,v=v!=null?v[l]:null,typeof v=="function"&&s.removeEventListener(r,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Fo(s,l,c)}}}function jt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",s),Oe("load",s);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var S=l[v];if(S!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(s,r,v,S,l,null)}}y&&ot(s,r,"srcSet",l.srcSet,l,null),c&&ot(s,r,"src",l.src,l,null);return;case"input":Oe("invalid",s);var R=v=S=y=null,V=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var Z=l[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":S=Z;break;case"checked":V=Z;break;case"defaultChecked":K=Z;break;case"value":v=Z;break;case"defaultValue":R=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:ot(s,r,c,Z,l,null)}}lc(s,v,R,V,K,S,y,!1);return;case"select":Oe("invalid",s),c=S=v=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":v=R;break;case"defaultValue":S=R;break;case"multiple":c=R;default:ot(s,r,y,R,l,null)}r=v,l=S,s.multiple=!!c,r!=null?Vs(s,!!c,r,!1):l!=null&&Vs(s,!!c,l,!0);return;case"textarea":Oe("invalid",s),v=y=c=null;for(S in l)if(l.hasOwnProperty(S)&&(R=l[S],R!=null))switch(S){case"value":c=R;break;case"defaultValue":y=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:ot(s,r,S,R,l,null)}Us(s,c,y,v);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(c=l[V],c!=null))switch(V){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(s,r,V,c,l,null)}return;case"dialog":Oe("beforetoggle",s),Oe("toggle",s),Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":Oe("load",s);break;case"video":case"audio":for(c=0;c<jl.length;c++)Oe(jl[c],s);break;case"image":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"embed":case"source":case"link":Oe("error",s),Oe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:ot(s,r,K,c,l,null)}return;default:if(qo(r)){for(Z in l)l.hasOwnProperty(Z)&&(c=l[Z],c!==void 0&&Lp(s,r,Z,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&ot(s,r,R,c,l,null))}function Fb(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,S=null,R=null,V=null,K=null,Z=null;for(X in l){var ie=l[X];if(l.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":V=ie;default:c.hasOwnProperty(X)||ot(s,r,X,null,c,ie)}}for(var $ in c){var X=c[$];if(ie=l[$],c.hasOwnProperty($)&&(X!=null||ie!=null))switch($){case"type":v=X;break;case"name":y=X;break;case"checked":K=X;break;case"defaultChecked":Z=X;break;case"value":S=X;break;case"defaultValue":R=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,r));break;default:X!==ie&&ot(s,r,$,X,c,ie)}}Bo(s,S,R,V,K,Z,v,y);return;case"select":X=S=R=$=null;for(v in l)if(V=l[v],l.hasOwnProperty(v)&&V!=null)switch(v){case"value":break;case"multiple":X=V;default:c.hasOwnProperty(v)||ot(s,r,v,null,c,V)}for(y in c)if(v=c[y],V=l[y],c.hasOwnProperty(y)&&(v!=null||V!=null))switch(y){case"value":$=v;break;case"defaultValue":R=v;break;case"multiple":S=v;default:v!==V&&ot(s,r,y,v,c,V)}r=R,l=S,c=X,$!=null?Vs(s,!!l,$,!1):!!c!=!!l&&(r!=null?Vs(s,!!l,r,!0):Vs(s,!!l,l?[]:"",!1));return;case"textarea":X=$=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:ot(s,r,R,null,c,y)}for(S in c)if(y=c[S],v=l[S],c.hasOwnProperty(S)&&(y!=null||v!=null))switch(S){case"value":$=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&ot(s,r,S,y,c,v)}uc(s,$,X);return;case"option":for(var _e in l)if($=l[_e],l.hasOwnProperty(_e)&&$!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":s.selected=!1;break;default:ot(s,r,_e,null,c,$)}for(V in c)if($=c[V],X=l[V],c.hasOwnProperty(V)&&$!==X&&($!=null||X!=null))switch(V){case"selected":s.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ot(s,r,V,$,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in l)$=l[we],l.hasOwnProperty(we)&&$!=null&&!c.hasOwnProperty(we)&&ot(s,r,we,null,c,$);for(K in c)if($=c[K],X=l[K],c.hasOwnProperty(K)&&$!==X&&($!=null||X!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,r));break;default:ot(s,r,K,$,c,X)}return;default:if(qo(r)){for(var at in l)$=l[at],l.hasOwnProperty(at)&&$!==void 0&&!c.hasOwnProperty(at)&&Lp(s,r,at,void 0,c,$);for(Z in c)$=c[Z],X=l[Z],!c.hasOwnProperty(Z)||$===X||$===void 0&&X===void 0||Lp(s,r,Z,$,c,X);return}}for(var G in l)$=l[G],l.hasOwnProperty(G)&&$!=null&&!c.hasOwnProperty(G)&&ot(s,r,G,null,c,$);for(ie in c)$=c[ie],X=l[ie],!c.hasOwnProperty(ie)||$===X||$==null&&X==null||ot(s,r,ie,$,c,X)}function C0(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Bb(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,S=y.initiatorType,R=y.duration;if(v&&R&&C0(S)){for(S=0,R=y.responseEnd,c+=1;c<l.length;c++){var V=l[c],K=V.startTime;if(K>R)break;var Z=V.transferSize,ie=V.initiatorType;Z&&C0(ie)&&(V=V.responseEnd,S+=Z*(V<R?1:(R-K)/(V-K)))}if(--c,r+=8*(v+S)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Op=null,Fp=null;function fd(s){return s.nodeType===9?s:s.ownerDocument}function w0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function I0(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Bp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var qp=null;function qb(){var s=window.event;return s&&s.type==="popstate"?s===qp?!1:(qp=s,!0):(qp=null,!1)}var R0=typeof setTimeout=="function"?setTimeout:void 0,Gb=typeof clearTimeout=="function"?clearTimeout:void 0,b0=typeof Promise=="function"?Promise:void 0,Hb=typeof queueMicrotask=="function"?queueMicrotask:typeof b0<"u"?function(s){return b0.resolve(null).then(s).catch(zb)}:R0;function zb(s){setTimeout(function(){throw s})}function rr(s){return s==="head"}function x0(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),Aa(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")tu(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,tu(l);for(var v=l.firstChild;v;){var S=v.nextSibling,R=v.nodeName;v[xi]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=S}}else l==="body"&&tu(s.ownerDocument.body);l=y}while(l);Aa(r)}function N0(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Gp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Gp(l),Oo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function Kb(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[xi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Jn(s.nextSibling),s===null)break}return null}function $b(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Jn(s.nextSibling),s===null))return null;return s}function D0(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Jn(s.nextSibling),s===null))return null;return s}function Hp(s){return s.data==="$?"||s.data==="$~"}function zp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Yb(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Jn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Kp=null;function M0(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Jn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function k0(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function P0(s,r,l){switch(r=fd(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function tu(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Oo(s)}var Qn=new Map,V0=new Set;function hd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Es=re.d;re.d={f:Jb,r:Qb,D:Xb,C:Wb,L:Zb,m:jb,X:t1,S:e1,M:n1};function Jb(){var s=Es.f(),r=sd();return s||r}function Qb(s){var r=On(s);r!==null&&r.tag===5&&r.type==="form"?Z_(r):Es.r(s)}var va=typeof document>"u"?null:document;function U0(s,r,l){var c=va;if(c&&typeof r=="string"&&r){var y=yn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),V0.has(y)||(V0.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),jt(r,"link",s),Nt(r),c.head.appendChild(r)))}}function Xb(s){Es.D(s),U0("dns-prefetch",s,null)}function Wb(s,r){Es.C(s,r),U0("preconnect",s,r)}function Zb(s,r,l){Es.L(s,r,l);var c=va;if(c&&s&&r){var y='link[rel="preload"][as="'+yn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+yn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+yn(l.imageSizes)+'"]')):y+='[href="'+yn(s)+'"]';var v=y;switch(r){case"style":v=Ea(s);break;case"script":v=Ta(s)}Qn.has(v)||(s=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Qn.set(v,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(nu(v))||r==="script"&&c.querySelector(iu(v))||(r=c.createElement("link"),jt(r,"link",s),Nt(r),c.head.appendChild(r)))}}function jb(s,r){Es.m(s,r);var l=va;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+yn(c)+'"][href="'+yn(s)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ta(s)}if(!Qn.has(v)&&(s=E({rel:"modulepreload",href:s},r),Qn.set(v,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(iu(v)))return}c=l.createElement("link"),jt(c,"link",s),Nt(c),l.head.appendChild(c)}}}function e1(s,r,l){Es.S(s,r,l);var c=va;if(c&&s){var y=Di(c).hoistableStyles,v=Ea(s);r=r||"default";var S=y.get(v);if(!S){var R={loading:0,preload:null};if(S=c.querySelector(nu(v)))R.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Qn.get(v))&&$p(s,l);var V=S=c.createElement("link");Nt(V),jt(V,"link",s),V._p=new Promise(function(K,Z){V.onload=K,V.onerror=Z}),V.addEventListener("load",function(){R.loading|=1}),V.addEventListener("error",function(){R.loading|=2}),R.loading|=4,pd(S,r,c)}S={type:"stylesheet",instance:S,count:1,state:R},y.set(v,S)}}}function t1(s,r){Es.X(s,r);var l=va;if(l&&s){var c=Di(l).hoistableScripts,y=Ta(s),v=c.get(y);v||(v=l.querySelector(iu(y)),v||(s=E({src:s,async:!0},r),(r=Qn.get(y))&&Yp(s,r),v=l.createElement("script"),Nt(v),jt(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function n1(s,r){Es.M(s,r);var l=va;if(l&&s){var c=Di(l).hoistableScripts,y=Ta(s),v=c.get(y);v||(v=l.querySelector(iu(y)),v||(s=E({src:s,async:!0,type:"module"},r),(r=Qn.get(y))&&Yp(s,r),v=l.createElement("script"),Nt(v),jt(v,"link",s),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function L0(s,r,l,c){var y=(y=Te.current)?hd(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Ea(l.href),l=Di(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Ea(l.href);var v=Di(y).hoistableStyles,S=v.get(s);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,S),(v=y.querySelector(nu(s)))&&!v._p&&(S.instance=v,S.state.loading=5),Qn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qn.set(s,l),v||i1(y,s,l,S.state))),r&&c===null)throw Error(i(528,""));return S}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ta(l),l=Di(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ea(s){return'href="'+yn(s)+'"'}function nu(s){return'link[rel="stylesheet"]['+s+"]"}function O0(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function i1(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),jt(r,"link",l),Nt(r),s.head.appendChild(r))}function Ta(s){return'[src="'+yn(s)+'"]'}function iu(s){return"script[async]"+s}function F0(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+yn(l.href)+'"]');if(c)return r.instance=c,Nt(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Nt(c),jt(c,"style",y),pd(c,l.precedence,s),r.instance=c;case"stylesheet":y=Ea(l.href);var v=s.querySelector(nu(y));if(v)return r.state.loading|=4,r.instance=v,Nt(v),v;c=O0(l),(y=Qn.get(y))&&$p(c,y),v=(s.ownerDocument||s).createElement("link"),Nt(v);var S=v;return S._p=new Promise(function(R,V){S.onload=R,S.onerror=V}),jt(v,"link",c),r.state.loading|=4,pd(v,l.precedence,s),r.instance=v;case"script":return v=Ta(l.src),(y=s.querySelector(iu(v)))?(r.instance=y,Nt(y),y):(c=l,(y=Qn.get(v))&&(c=E({},l),Yp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),Nt(y),jt(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,pd(c,l.precedence,s));return r.instance}function pd(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,S=0;S<c.length;S++){var R=c[S];if(R.dataset.precedence===r)v=R;else if(v!==y)break}v?v.parentNode.insertBefore(s,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function $p(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Yp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var md=null;function B0(s,r,l){if(md===null){var c=new Map,y=md=new Map;y.set(l,c)}else y=md,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var v=l[y];if(!(v[xi]||v[xt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(r)||"";S=s+S;var R=c.get(S);R?R.push(v):c.set(S,[v])}}return c}function q0(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function s1(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function G0(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function r1(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=Ea(c.href),v=r.querySelector(nu(y));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=gd.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=v,Nt(v);return}v=r.ownerDocument||r,c=O0(c),(y=Qn.get(y))&&$p(c,y),v=v.createElement("link"),Nt(v);var S=v;S._p=new Promise(function(R,V){S.onload=R,S.onerror=V}),jt(v,"link",c),l.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=gd.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Jp=0;function o1(s,r){return s.stylesheets&&s.count===0&&_d(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&_d(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+r);0<s.imgBytes&&Jp===0&&(Jp=62500*Bb());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&_d(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>Jp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function gd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_d(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var yd=null;function _d(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,yd=new Map,r.forEach(a1,s),yd=null,gd.call(s))}function a1(s,r){if(!(r.state.loading&4)){var l=yd.get(s);if(l)var c=l.get(null);else{l=new Map,yd.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var S=y[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),c=S)}c&&l.set(null,c)}y=r.instance,S=y.getAttribute("data-precedence"),v=l.get(S)||c,v===c&&l.set(null,y),l.set(S,y),this.count++,c=gd.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var su={$$typeof:W,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function l1(s,r,l,c,y,v,S,R,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.hiddenUpdates=Ri(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function H0(s,r,l,c,y,v,S,R,V,K,Z,ie){return s=new l1(s,r,l,S,V,K,Z,ie,R),r=1,v===!0&&(r|=24),v=xn(3,null,null,r),s.current=v,v.stateNode=s,r=Rh(),r.refCount++,s.pooledCache=r,r.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:r},Dh(v),s}function z0(s){return s?(s=Zo,s):Zo}function K0(s,r,l,c,y,v){y=z0(y),c.context===null?c.context=y:c.pendingContext=y,c=Js(r),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Qs(s,c,r),l!==null&&(Sn(l,s,r),Ul(l,s,r))}function $0(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Qp(s,r){$0(s,r),(s=s.alternate)&&$0(s,r)}function Y0(s){if(s.tag===13||s.tag===31){var r=Zr(s,67108864);r!==null&&Sn(r,s,67108864),Qp(s,67108864)}}function J0(s){if(s.tag===13||s.tag===31){var r=Pn();r=Br(r);var l=Zr(s,r);l!==null&&Sn(l,s,r),Qp(s,r)}}var vd=!0;function u1(s,r,l,c){var y=Q.T;Q.T=null;var v=re.p;try{re.p=2,Xp(s,r,l,c)}finally{re.p=v,Q.T=y}}function c1(s,r,l,c){var y=Q.T;Q.T=null;var v=re.p;try{re.p=8,Xp(s,r,l,c)}finally{re.p=v,Q.T=y}}function Xp(s,r,l,c){if(vd){var y=Wp(c);if(y===null)Up(s,r,c,Ed,l),X0(s,c);else if(f1(y,s,r,l,c))c.stopPropagation();else if(X0(s,c),r&4&&-1<d1.indexOf(s)){for(;y!==null;){var v=On(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=wi(v.pendingLanes);if(S!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;S;){var V=1<<31-Tt(S);R.entanglements[1]|=V,S&=~V}zi(v),(Ze&6)===0&&(nd=cn()+500,Zl(0))}}break;case 31:case 13:R=Zr(v,2),R!==null&&Sn(R,v,2),sd(),Qp(v,2)}if(v=Wp(c),v===null&&Up(s,r,c,Ed,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else Up(s,r,c,null,l)}}function Wp(s){return s=Fn(s),Zp(s)}var Ed=null;function Zp(s){if(Ed=null,s=Ni(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=d(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Ed=s,null}function Q0(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ur()){case al:return 2;case ll:return 8;case ks:case sh:return 32;case Zu:return 268435456;default:return 32}default:return 32}}var jp=!1,or=null,ar=null,lr=null,ru=new Map,ou=new Map,ur=[],d1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X0(s,r){switch(s){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":ru.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ou.delete(r.pointerId)}}function au(s,r,l,c,y,v){return s===null||s.nativeEvent!==v?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},r!==null&&(r=On(r),r!==null&&Y0(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function f1(s,r,l,c,y){switch(r){case"focusin":return or=au(or,s,r,l,c,y),!0;case"dragenter":return ar=au(ar,s,r,l,c,y),!0;case"mouseover":return lr=au(lr,s,r,l,c,y),!0;case"pointerover":var v=y.pointerId;return ru.set(v,au(ru.get(v)||null,s,r,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,ou.set(v,au(ou.get(v)||null,s,r,l,c,y)),!0}return!1}function W0(s){var r=Ni(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,si(s.priority,function(){J0(l)});return}}else if(r===31){if(r=d(l),r!==null){s.blockedOn=r,si(s.priority,function(){J0(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Td(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=Wp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);El=c,l.target.dispatchEvent(c),El=null}else return r=On(l),r!==null&&Y0(r),s.blockedOn=l,!1;r.shift()}return!0}function Z0(s,r,l){Td(s)&&l.delete(r)}function h1(){jp=!1,or!==null&&Td(or)&&(or=null),ar!==null&&Td(ar)&&(ar=null),lr!==null&&Td(lr)&&(lr=null),ru.forEach(Z0),ou.forEach(Z0)}function Ad(s,r){s.blockedOn===r&&(s.blockedOn=null,jp||(jp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,h1)))}var Sd=null;function j0(s){Sd!==s&&(Sd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Sd===s&&(Sd=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Zp(c||l)===null)continue;break}var v=On(l);v!==null&&(s.splice(r,3),r-=3,Wh(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Aa(s){function r(V){return Ad(V,s)}or!==null&&Ad(or,s),ar!==null&&Ad(ar,s),lr!==null&&Ad(lr,s),ru.forEach(r),ou.forEach(r);for(var l=0;l<ur.length;l++){var c=ur[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<ur.length&&(l=ur[0],l.blockedOn===null);)W0(l),l.blockedOn===null&&ur.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],S=y[Ht]||null;if(typeof v=="function")S||j0(l);else if(S){var R=null;if(v&&v.hasAttribute("formAction")){if(y=v,S=v[Ht]||null)R=S.formAction;else if(Zp(y)!==null)continue}else R=S.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),j0(l)}}}function eE(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function em(s){this._internalRoot=s}Cd.prototype.render=em.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Pn();K0(l,c,s,r,null,null)},Cd.prototype.unmount=em.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;K0(s.current,2,null,s,null,null),sd(),r[bi]=null}};function Cd(s){this._internalRoot=s}Cd.prototype.unstable_scheduleHydration=function(s){if(s){var r=sc();s={blockedOn:null,target:s,priority:r};for(var l=0;l<ur.length&&r!==0&&r<ur[l].priority;l++);ur.splice(l,0,s),l===0&&W0(s)}};var tE=e.version;if(tE!=="19.2.3")throw Error(i(527,tE,"19.2.3"));re.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var p1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{ni=wd.inject(p1),Jt=wd}catch{}}return uu.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=lv,v=uv,S=cv;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),r=H0(s,1,!1,null,null,l,c,null,y,v,S,eE),s[bi]=r.current,Vp(s),new em(r)},uu.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",v=lv,S=uv,R=cv,V=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),r=H0(s,1,!0,r,l??null,c,y,V,v,S,R,eE),r.context=z0(null),l=r.current,c=Pn(),c=Br(c),y=Js(c),y.callback=null,Qs(l,y,c),l=c,r.current.lanes=l,Or(r,l),zi(r),s[bi]=r.current,Vp(s),new Cd(r)},uu.version="19.2.3",uu}var dE;function w1(){if(dE)return im.exports;dE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),im.exports=C1(),im.exports}var I1=w1();const R1=PS(I1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),x1=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),fE=n=>{const e=x1(n);return e.charAt(0).toUpperCase()+e.slice(1)},VS=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),N1=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=me.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...d},p)=>me.createElement("svg",{ref:p,...D1,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:VS("lucide",o),...!a&&!N1(d)&&{"aria-hidden":"true"},...d},[...u.map(([h,_])=>me.createElement(h,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=(n,e)=>{const t=me.forwardRef(({className:i,...o},a)=>me.createElement(M1,{ref:a,iconNode:e,className:VS(`lucide-${b1(fE(n))}`,`lucide-${n}`,i),...o}));return t.displayName=fE(n),t};/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],P1=Ve("arrow-left",k1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fd=Ve("arrow-right",V1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],US=Ve("book-open",U1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Rm=Ve("book",L1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],LS=Ve("bookmark",O1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],OS=Ve("camera",F1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],q1=Ve("chevron-right",B1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],H1=Ve("chevron-left",G1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],K1=Ve("circle-alert",z1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Zd=Ve("circle-check-big",$1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],hE=Ve("circle-check",Y1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Q1=Ve("circle-user",J1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],W1=Ve("circle-x",X1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],j1=Ve("download",Z1);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],tx=Ve("graduation-cap",ex);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],jd=Ve("key",nx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],sx=Ve("layers",ix);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],pE=Ve("library",rx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gr=Ve("loader-circle",ox);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],lx=Ve("lock",ax);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],cx=Ve("log-in",ux);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fx=Ve("log-out",dx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],px=Ve("mail",hx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],gx=Ve("moon",mx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],mE=Ve("play",yx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],am=Ve("plus",_x);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],Ex=Ve("quote",vx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ax=Ve("refresh-cw",Tx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cx=Ve("save",Sx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],FS=Ve("settings",wx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],BS=Ve("shield-check",Ix);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],bx=Ve("skip-forward",Rx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],qS=Ve("sparkles",xx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Dx=Ve("sun",Nx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_g=Ve("trash-2",Mx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],gE=Ve("upload",kx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Vx=Ve("user-plus",Px);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],GS=Ve("user",Ux);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Id=Ve("volume-2",Lx);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fx=Ve("x",Ox);var it=(n=>(n.HOME="HOME",n.ANALYZE="ANALYZE",n.VOCAB="VOCAB",n.LIBRARY="LIBRARY",n.HISTORY="HISTORY",n.SETTINGS="SETTINGS",n))(it||{});const Bx=()=>{};var yE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},qx=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],p=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},zS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,p=o+2<n.length,h=p?n[o+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let T=(d&15)<<2|h>>6,I=h&63;p||(I=64,u||(T=64)),i.push(t[_],t[E],t[T],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(HS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||h==null||E==null)throw new Gx;const T=a<<2|d>>4;if(i.push(T),h!==64){const I=d<<4&240|h>>2;if(i.push(I),E!==64){const k=h<<6&192|E;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Gx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hx=function(n){const e=HS(n);return zS.encodeByteArray(e,!0)},ef=function(n){return Hx(n).replace(/\./g,"")},KS=function(n){try{return zS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=()=>zx().__FIREBASE_DEFAULTS__,$x=()=>{if(typeof process>"u"||typeof yE>"u")return;const n=yE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Yx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&KS(n[1]);return e&&JSON.parse(e)},If=()=>{try{return Bx()||Kx()||$x()||Yx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$S=n=>{var e,t;return(t=(e=If())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Jx=n=>{const e=$S(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},YS=()=>{var n;return(n=If())==null?void 0:n.config},JS=n=>{var e;return(e=If())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ef(JSON.stringify(t)),ef(JSON.stringify(u)),""].join(".")}const _u={};function Wx(){const n={prod:[],emulator:[]};for(const e of Object.keys(_u))_u[e]?n.emulator.push(e):n.prod.push(e);return n}function Zx(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let _E=!1;function XS(n,e){if(typeof window>"u"||typeof document>"u"||!Ya(window.location.host)||_u[n]===e||_u[n]||_E)return;_u[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=Wx().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{_E=!0,u()},T}function _(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=Zx(i),I=t("text"),k=document.getElementById(I)||document.createElement("span"),F=t("learnmore"),L=document.getElementById(F)||document.createElement("a"),Y=t("preprendIcon"),ee=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const W=T.element;d(W),_(L,F);const ae=h();p(ee,Y),W.append(ee,k,L,ae),document.body.appendChild(W)}a?(k.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function eN(){var e;const n=(e=If())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iN(){const n=un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sN(){return!eN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZS(){try{return typeof indexedDB=="object"}catch{return!1}}function jS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}function rN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="FirebaseError";class Ei extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=oN,Object.setPrototypeOf(this,Ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Co.prototype.create)}}class Co{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?aN(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Ei(o,d,i)}}function aN(n,e){return n.replace(lN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const lN=/\{\$([^}]+)}/g;function uN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Sr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(vE(a)&&vE(u)){if(!Sr(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function vE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function fu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function hu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function cN(n,e){const t=new dN(n,e);return t.subscribe.bind(t)}class dN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");fN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=lm),o.error===void 0&&(o.error=lm),o.complete===void 0&&(o.complete=lm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=1e3,pN=2,mN=14400*1e3,gN=.5;function EE(n,e=hN,t=pN){const i=e*Math.pow(t,n),o=Math.round(gN*i*(Math.random()-.5)*2);return Math.min(mN,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(n){return n&&n._delegate?n._delegate:n}class yi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Qx;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vN(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_N(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _N(n){return n===fo?void 0:n}function vN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const TN={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},AN=qe.INFO,SN={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},CN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=SN[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rf{constructor(e){this.name=e,this._logLevel=AN,this._logHandler=CN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const wN=(n,e)=>e.some(t=>n instanceof t);let TE,AE;function IN(){return TE||(TE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RN(){return AE||(AE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eC=new WeakMap,bm=new WeakMap,tC=new WeakMap,um=new WeakMap,vg=new WeakMap;function bN(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(_r(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&eC.set(t,n)}).catch(()=>{}),vg.set(e,n),e}function xN(n){if(bm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});bm.set(n,e)}let xm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _r(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function NN(n){xm=n(xm)}function DN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(cm(this),e,...t);return tC.set(i,e.sort?e.sort():[e]),_r(i)}:RN().includes(n)?function(...e){return n.apply(cm(this),e),_r(eC.get(this))}:function(...e){return _r(n.apply(cm(this),e))}}function MN(n){return typeof n=="function"?DN(n):(n instanceof IDBTransaction&&xN(n),wN(n,IN())?new Proxy(n,xm):n)}function _r(n){if(n instanceof IDBRequest)return bN(n);if(um.has(n))return um.get(n);const e=MN(n);return e!==n&&(um.set(n,e),vg.set(e,n)),e}const cm=n=>vg.get(n);function nC(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=_r(u);return i&&u.addEventListener("upgradeneeded",p=>{i(_r(u.result),p.oldVersion,p.newVersion,_r(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const kN=["get","getKey","getAll","getAllKeys","count"],PN=["put","add","delete","clear"],dm=new Map;function SE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dm.get(e))return dm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=PN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||kN.includes(t)))return;const a=async function(u,...d){const p=this.transaction(u,o?"readwrite":"readonly");let h=p.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&p.done]))[0]};return dm.set(e,a),a}NN(n=>({...n,get:(e,t,i)=>SE(e,t)||n.get(e,t,i),has:(e,t)=>!!SE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function UN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nm="@firebase/app",CE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new Rf("@firebase/app"),LN="@firebase/app-compat",ON="@firebase/analytics-compat",FN="@firebase/analytics",BN="@firebase/app-check-compat",qN="@firebase/app-check",GN="@firebase/auth",HN="@firebase/auth-compat",zN="@firebase/database",KN="@firebase/data-connect",$N="@firebase/database-compat",YN="@firebase/functions",JN="@firebase/functions-compat",QN="@firebase/installations",XN="@firebase/installations-compat",WN="@firebase/messaging",ZN="@firebase/messaging-compat",jN="@firebase/performance",e2="@firebase/performance-compat",t2="@firebase/remote-config",n2="@firebase/remote-config-compat",i2="@firebase/storage",s2="@firebase/storage-compat",r2="@firebase/firestore",o2="@firebase/ai",a2="@firebase/firestore-compat",l2="firebase",u2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="[DEFAULT]",c2={[Nm]:"fire-core",[LN]:"fire-core-compat",[FN]:"fire-analytics",[ON]:"fire-analytics-compat",[qN]:"fire-app-check",[BN]:"fire-app-check-compat",[GN]:"fire-auth",[HN]:"fire-auth-compat",[zN]:"fire-rtdb",[KN]:"fire-data-connect",[$N]:"fire-rtdb-compat",[YN]:"fire-fn",[JN]:"fire-fn-compat",[QN]:"fire-iid",[XN]:"fire-iid-compat",[WN]:"fire-fcm",[ZN]:"fire-fcm-compat",[jN]:"fire-perf",[e2]:"fire-perf-compat",[t2]:"fire-rc",[n2]:"fire-rc-compat",[i2]:"fire-gcs",[s2]:"fire-gcs-compat",[r2]:"fire-fst",[a2]:"fire-fst-compat",[o2]:"fire-vertex","fire-js":"fire-js",[l2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new Map,d2=new Map,Mm=new Map;function wE(n,e){try{n.container.addComponent(e)}catch(t){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zi(n){const e=n.name;if(Mm.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;Mm.set(e,n);for(const t of tf.values())wE(t,n);for(const t of d2.values())wE(t,n);return!0}function wo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new Co("app","Firebase",f2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=u2;function iC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Dm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw vr.create("bad-app-name",{appName:String(o)});if(t||(t=YS()),!t)throw vr.create("no-options");const a=tf.get(o);if(a){if(Sr(t,a.options)&&Sr(i,a.config))return a;throw vr.create("duplicate-app",{appName:o})}const u=new EN(o);for(const p of Mm.values())u.addComponent(p);const d=new h2(t,i,u);return tf.set(o,d),d}function Eg(n=Dm){const e=tf.get(n);if(!e&&n===Dm&&YS())return iC();if(!e)throw vr.create("no-app",{appName:n});return e}function Zn(n,e,t){let i=c2[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(u.join(" "));return}Zi(new yi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="firebase-heartbeat-database",m2=1,Cu="firebase-heartbeat-store";let fm=null;function sC(){return fm||(fm=nC(p2,m2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cu)}catch(t){console.warn(t)}}}}).catch(n=>{throw vr.create("idb-open",{originalErrorMessage:n.message})})),fm}async function g2(n){try{const t=(await sC()).transaction(Cu),i=await t.objectStore(Cu).get(rC(n));return await t.done,i}catch(e){if(e instanceof Ei)Cs.warn(e.message);else{const t=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cs.warn(t.message)}}}async function IE(n,e){try{const i=(await sC()).transaction(Cu,"readwrite");await i.objectStore(Cu).put(e,rC(n)),await i.done}catch(t){if(t instanceof Ei)Cs.warn(t.message);else{const i=vr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cs.warn(i.message)}}}function rC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=1024,_2=30;class v2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new T2(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=RE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>_2){const u=A2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Cs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=RE(),{heartbeatsToSend:i,unsentEntries:o}=E2(this._heartbeatsCache.heartbeats),a=ef(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Cs.warn(t),""}}}function RE(){return new Date().toISOString().substring(0,10)}function E2(n,e=y2){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),bE(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),bE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class T2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZS()?jS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await g2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return IE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return IE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bE(n){return ef(JSON.stringify({version:2,heartbeats:n})).length}function A2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(n){Zi(new yi("platform-logger",e=>new VN(e),"PRIVATE")),Zi(new yi("heartbeat",e=>new v2(e),"PRIVATE")),Zn(Nm,CE,n),Zn(Nm,CE,"esm2020"),Zn("fire-js","")}S2("");var C2="firebase",w2="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(C2,w2,"app");var xE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Er,oC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,M){function N(){}N.prototype=M.prototype,D.F=M.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(U,P,O){for(var x=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)x[ve-2]=arguments[ve];return M.prototype[P].apply(U,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,M,N){N||(N=0);const U=Array(16);if(typeof M=="string")for(var P=0;P<16;++P)U[P]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(P=0;P<16;++P)U[P]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=D.g[0],N=D.g[1],P=D.g[2];let O=D.g[3],x;x=M+(O^N&(P^O))+U[0]+3614090360&4294967295,M=N+(x<<7&4294967295|x>>>25),x=O+(P^M&(N^P))+U[1]+3905402710&4294967295,O=M+(x<<12&4294967295|x>>>20),x=P+(N^O&(M^N))+U[2]+606105819&4294967295,P=O+(x<<17&4294967295|x>>>15),x=N+(M^P&(O^M))+U[3]+3250441966&4294967295,N=P+(x<<22&4294967295|x>>>10),x=M+(O^N&(P^O))+U[4]+4118548399&4294967295,M=N+(x<<7&4294967295|x>>>25),x=O+(P^M&(N^P))+U[5]+1200080426&4294967295,O=M+(x<<12&4294967295|x>>>20),x=P+(N^O&(M^N))+U[6]+2821735955&4294967295,P=O+(x<<17&4294967295|x>>>15),x=N+(M^P&(O^M))+U[7]+4249261313&4294967295,N=P+(x<<22&4294967295|x>>>10),x=M+(O^N&(P^O))+U[8]+1770035416&4294967295,M=N+(x<<7&4294967295|x>>>25),x=O+(P^M&(N^P))+U[9]+2336552879&4294967295,O=M+(x<<12&4294967295|x>>>20),x=P+(N^O&(M^N))+U[10]+4294925233&4294967295,P=O+(x<<17&4294967295|x>>>15),x=N+(M^P&(O^M))+U[11]+2304563134&4294967295,N=P+(x<<22&4294967295|x>>>10),x=M+(O^N&(P^O))+U[12]+1804603682&4294967295,M=N+(x<<7&4294967295|x>>>25),x=O+(P^M&(N^P))+U[13]+4254626195&4294967295,O=M+(x<<12&4294967295|x>>>20),x=P+(N^O&(M^N))+U[14]+2792965006&4294967295,P=O+(x<<17&4294967295|x>>>15),x=N+(M^P&(O^M))+U[15]+1236535329&4294967295,N=P+(x<<22&4294967295|x>>>10),x=M+(P^O&(N^P))+U[1]+4129170786&4294967295,M=N+(x<<5&4294967295|x>>>27),x=O+(N^P&(M^N))+U[6]+3225465664&4294967295,O=M+(x<<9&4294967295|x>>>23),x=P+(M^N&(O^M))+U[11]+643717713&4294967295,P=O+(x<<14&4294967295|x>>>18),x=N+(O^M&(P^O))+U[0]+3921069994&4294967295,N=P+(x<<20&4294967295|x>>>12),x=M+(P^O&(N^P))+U[5]+3593408605&4294967295,M=N+(x<<5&4294967295|x>>>27),x=O+(N^P&(M^N))+U[10]+38016083&4294967295,O=M+(x<<9&4294967295|x>>>23),x=P+(M^N&(O^M))+U[15]+3634488961&4294967295,P=O+(x<<14&4294967295|x>>>18),x=N+(O^M&(P^O))+U[4]+3889429448&4294967295,N=P+(x<<20&4294967295|x>>>12),x=M+(P^O&(N^P))+U[9]+568446438&4294967295,M=N+(x<<5&4294967295|x>>>27),x=O+(N^P&(M^N))+U[14]+3275163606&4294967295,O=M+(x<<9&4294967295|x>>>23),x=P+(M^N&(O^M))+U[3]+4107603335&4294967295,P=O+(x<<14&4294967295|x>>>18),x=N+(O^M&(P^O))+U[8]+1163531501&4294967295,N=P+(x<<20&4294967295|x>>>12),x=M+(P^O&(N^P))+U[13]+2850285829&4294967295,M=N+(x<<5&4294967295|x>>>27),x=O+(N^P&(M^N))+U[2]+4243563512&4294967295,O=M+(x<<9&4294967295|x>>>23),x=P+(M^N&(O^M))+U[7]+1735328473&4294967295,P=O+(x<<14&4294967295|x>>>18),x=N+(O^M&(P^O))+U[12]+2368359562&4294967295,N=P+(x<<20&4294967295|x>>>12),x=M+(N^P^O)+U[5]+4294588738&4294967295,M=N+(x<<4&4294967295|x>>>28),x=O+(M^N^P)+U[8]+2272392833&4294967295,O=M+(x<<11&4294967295|x>>>21),x=P+(O^M^N)+U[11]+1839030562&4294967295,P=O+(x<<16&4294967295|x>>>16),x=N+(P^O^M)+U[14]+4259657740&4294967295,N=P+(x<<23&4294967295|x>>>9),x=M+(N^P^O)+U[1]+2763975236&4294967295,M=N+(x<<4&4294967295|x>>>28),x=O+(M^N^P)+U[4]+1272893353&4294967295,O=M+(x<<11&4294967295|x>>>21),x=P+(O^M^N)+U[7]+4139469664&4294967295,P=O+(x<<16&4294967295|x>>>16),x=N+(P^O^M)+U[10]+3200236656&4294967295,N=P+(x<<23&4294967295|x>>>9),x=M+(N^P^O)+U[13]+681279174&4294967295,M=N+(x<<4&4294967295|x>>>28),x=O+(M^N^P)+U[0]+3936430074&4294967295,O=M+(x<<11&4294967295|x>>>21),x=P+(O^M^N)+U[3]+3572445317&4294967295,P=O+(x<<16&4294967295|x>>>16),x=N+(P^O^M)+U[6]+76029189&4294967295,N=P+(x<<23&4294967295|x>>>9),x=M+(N^P^O)+U[9]+3654602809&4294967295,M=N+(x<<4&4294967295|x>>>28),x=O+(M^N^P)+U[12]+3873151461&4294967295,O=M+(x<<11&4294967295|x>>>21),x=P+(O^M^N)+U[15]+530742520&4294967295,P=O+(x<<16&4294967295|x>>>16),x=N+(P^O^M)+U[2]+3299628645&4294967295,N=P+(x<<23&4294967295|x>>>9),x=M+(P^(N|~O))+U[0]+4096336452&4294967295,M=N+(x<<6&4294967295|x>>>26),x=O+(N^(M|~P))+U[7]+1126891415&4294967295,O=M+(x<<10&4294967295|x>>>22),x=P+(M^(O|~N))+U[14]+2878612391&4294967295,P=O+(x<<15&4294967295|x>>>17),x=N+(O^(P|~M))+U[5]+4237533241&4294967295,N=P+(x<<21&4294967295|x>>>11),x=M+(P^(N|~O))+U[12]+1700485571&4294967295,M=N+(x<<6&4294967295|x>>>26),x=O+(N^(M|~P))+U[3]+2399980690&4294967295,O=M+(x<<10&4294967295|x>>>22),x=P+(M^(O|~N))+U[10]+4293915773&4294967295,P=O+(x<<15&4294967295|x>>>17),x=N+(O^(P|~M))+U[1]+2240044497&4294967295,N=P+(x<<21&4294967295|x>>>11),x=M+(P^(N|~O))+U[8]+1873313359&4294967295,M=N+(x<<6&4294967295|x>>>26),x=O+(N^(M|~P))+U[15]+4264355552&4294967295,O=M+(x<<10&4294967295|x>>>22),x=P+(M^(O|~N))+U[6]+2734768916&4294967295,P=O+(x<<15&4294967295|x>>>17),x=N+(O^(P|~M))+U[13]+1309151649&4294967295,N=P+(x<<21&4294967295|x>>>11),x=M+(P^(N|~O))+U[4]+4149444226&4294967295,M=N+(x<<6&4294967295|x>>>26),x=O+(N^(M|~P))+U[11]+3174756917&4294967295,O=M+(x<<10&4294967295|x>>>22),x=P+(M^(O|~N))+U[2]+718787259&4294967295,P=O+(x<<15&4294967295|x>>>17),x=N+(O^(P|~M))+U[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(P+(x<<21&4294967295|x>>>11))&4294967295,D.g[2]=D.g[2]+P&4294967295,D.g[3]=D.g[3]+O&4294967295}i.prototype.v=function(D,M){M===void 0&&(M=D.length);const N=M-this.blockSize,U=this.C;let P=this.h,O=0;for(;O<M;){if(P==0)for(;O<=N;)o(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<M;)if(U[P++]=D.charCodeAt(O++),P==this.blockSize){o(this,U),P=0;break}}else for(;O<M;)if(U[P++]=D[O++],P==this.blockSize){o(this,U),P=0;break}}this.h=P,this.o+=M},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;M=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=M&255,M/=256;for(this.v(D),D=Array(16),M=0,N=0;N<4;++N)for(let U=0;U<32;U+=8)D[M++]=this.g[N]>>>U&255;return D};function a(D,M){var N=d;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=M(D)}function u(D,M){this.h=M;const N=[];let U=!0;for(let P=D.length-1;P>=0;P--){const O=D[P]|0;U&&O==M||(N[P]=O,U=!1)}this.g=N}var d={};function p(D){return-128<=D&&D<128?a(D,function(M){return new u([M|0],M<0?-1:0)}):new u([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return L(h(-D));const M=[];let N=1;for(let U=0;D>=N;U++)M[U]=D/N|0,N*=4294967296;return new u(M,0)}function _(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return L(_(D.substring(1),M));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(M,8));let U=E;for(let O=0;O<D.length;O+=8){var P=Math.min(8,D.length-O);const x=parseInt(D.substring(O,O+P),M);P<8?(P=h(Math.pow(M,P)),U=U.j(P).add(h(x))):(U=U.j(N),U=U.add(h(x)))}return U}var E=p(0),T=p(1),I=p(16777216);n=u.prototype,n.m=function(){if(F(this))return-L(this).m();let D=0,M=1;for(let N=0;N<this.g.length;N++){const U=this.i(N);D+=(U>=0?U:4294967296+U)*M,M*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(F(this))return"-"+L(this).toString(D);const M=h(Math.pow(D,6));var N=this;let U="";for(;;){const P=ae(N,M).g;N=Y(N,P.j(M));let O=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=P,k(N))return O+U;for(;O.length<6;)O="0"+O;U=O+U}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(let M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function F(D){return D.h==-1}n.l=function(D){return D=Y(this,D),F(D)?-1:k(D)?0:1};function L(D){const M=D.g.length,N=[];for(let U=0;U<M;U++)N[U]=~D.g[U];return new u(N,~D.h).add(T)}n.abs=function(){return F(this)?L(this):this},n.add=function(D){const M=Math.max(this.g.length,D.g.length),N=[];let U=0;for(let P=0;P<=M;P++){let O=U+(this.i(P)&65535)+(D.i(P)&65535),x=(O>>>16)+(this.i(P)>>>16)+(D.i(P)>>>16);U=x>>>16,O&=65535,x&=65535,N[P]=x<<16|O}return new u(N,N[N.length-1]&-2147483648?-1:0)};function Y(D,M){return D.add(L(M))}n.j=function(D){if(k(this)||k(D))return E;if(F(this))return F(D)?L(this).j(L(D)):L(L(this).j(D));if(F(D))return L(this.j(L(D)));if(this.l(I)<0&&D.l(I)<0)return h(this.m()*D.m());const M=this.g.length+D.g.length,N=[];for(var U=0;U<2*M;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(let P=0;P<D.g.length;P++){const O=this.i(U)>>>16,x=this.i(U)&65535,ve=D.i(P)>>>16,Xe=D.i(P)&65535;N[2*U+2*P]+=x*Xe,ee(N,2*U+2*P),N[2*U+2*P+1]+=O*Xe,ee(N,2*U+2*P+1),N[2*U+2*P+1]+=x*ve,ee(N,2*U+2*P+1),N[2*U+2*P+2]+=O*ve,ee(N,2*U+2*P+2)}for(D=0;D<M;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=M;D<2*M;D++)N[D]=0;return new u(N,0)};function ee(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function W(D,M){this.g=D,this.h=M}function ae(D,M){if(k(M))throw Error("division by zero");if(k(D))return new W(E,E);if(F(D))return M=ae(L(D),M),new W(L(M.g),L(M.h));if(F(M))return M=ae(D,L(M)),new W(L(M.g),M.h);if(D.g.length>30){if(F(D)||F(M))throw Error("slowDivide_ only works with positive integers.");for(var N=T,U=M;U.l(D)<=0;)N=oe(N),U=oe(U);var P=le(N,1),O=le(U,1);for(U=le(U,2),N=le(N,2);!k(U);){var x=O.add(U);x.l(D)<=0&&(P=P.add(N),O=x),U=le(U,1),N=le(N,1)}return M=Y(D,P.j(M)),new W(P,M)}for(P=E;D.l(M)>=0;){for(N=Math.max(1,Math.floor(D.m()/M.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),O=h(N),x=O.j(M);F(x)||x.l(D)>0;)N-=U,O=h(N),x=O.j(M);k(O)&&(O=T),P=P.add(O),D=Y(D,x)}return new W(P,D)}n.B=function(D){return ae(this,D).h},n.and=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let U=0;U<M;U++)N[U]=this.i(U)&D.i(U);return new u(N,this.h&D.h)},n.or=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let U=0;U<M;U++)N[U]=this.i(U)|D.i(U);return new u(N,this.h|D.h)},n.xor=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let U=0;U<M;U++)N[U]=this.i(U)^D.i(U);return new u(N,this.h^D.h)};function oe(D){const M=D.g.length+1,N=[];for(let U=0;U<M;U++)N[U]=D.i(U)<<1|D.i(U-1)>>>31;return new u(N,D.h)}function le(D,M){const N=M>>5;M%=32;const U=D.g.length-N,P=[];for(let O=0;O<U;O++)P[O]=M>0?D.i(O+N)>>>M|D.i(O+N+1)<<32-M:D.i(O+N);return new u(P,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,oC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,Er=u}).apply(typeof xE<"u"?xE:typeof self<"u"?self:typeof window<"u"?window:{});var Rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aC,pu,lC,Bd,km,uC,cC,dC;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rd=="object"&&Rd];for(var A=0;A<g.length;++A){var C=g[A];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(g,A){if(A)e:{var C=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var H=g[b];if(!(H in C))break e;C=C[H]}g=g[g.length-1],b=C[g],A=A(b),A!=b&&A!=null&&e(C,g,{configurable:!0,writable:!0,value:A})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(A){var C=[],b;for(b in A)Object.prototype.hasOwnProperty.call(A,b)&&C.push([b,A[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function p(g,A,C){return g.call.apply(g.bind,arguments)}function h(g,A,C){return h=p,h.apply(null,arguments)}function _(g,A){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function E(g,A){function C(){}C.prototype=A.prototype,g.Z=A.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(b,H,J){for(var ce=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ce[Me-2]=arguments[Me];return A.prototype[H].apply(b,ce)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const A=g.length;if(A>0){const C=Array(A);for(let b=0;b<A;b++)C[b]=g[b];return C}return[]}function k(g,A){for(let b=1;b<arguments.length;b++){const H=arguments[b];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=g.length||0;const J=H.length||0;g.length=C+J;for(let ce=0;ce<J;ce++)g[C+ce]=H[ce]}else g.push(H)}}class F{constructor(A,C){this.i=A,this.j=C,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function L(g){u.setTimeout(()=>{throw g},0)}function Y(){var g=D;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class ee{constructor(){this.h=this.g=null}add(A,C){const b=W.get();b.set(A,C),this.h?this.h.next=b:this.g=b,this.h=b}}var W=new F(()=>new ae,g=>g.reset());class ae{constructor(){this.next=this.g=this.h=null}set(A,C){this.h=A,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,le=!1,D=new ee,M=()=>{const g=Promise.resolve(void 0);oe=()=>{g.then(N)}};function N(){for(var g;g=Y();){try{g.h.call(g.g)}catch(C){L(C)}var A=W;A.j(g),A.h<100&&(A.h++,g.next=A.g,A.g=g)}le=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,A),u.removeEventListener("test",C,A)}catch{}return g})();function x(g){return/^[\s\xa0]*$/.test(g)}function ve(g,A){P.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,A)}E(ve,P),ve.prototype.init=function(g,A){const C=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget,A||(C=="mouseover"?A=g.fromElement:C=="mouseout"&&(A=g.toElement)),this.relatedTarget=A,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),Q=0;function re(g,A,C,b,H){this.listener=g,this.proxy=null,this.src=A,this.type=C,this.capture=!!b,this.ha=H,this.key=++Q,this.da=this.fa=!1}function ye(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ue(g,A,C){for(const b in g)A.call(C,g[b],b,g)}function $e(g,A){for(const C in g)A.call(void 0,g[C],C,g)}function q(g){const A={};for(const C in g)A[C]=g[C];return A}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(g,A){let C,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(C in b)g[C]=b[C];for(let J=0;J<ne.length;J++)C=ne[J],Object.prototype.hasOwnProperty.call(b,C)&&(g[C]=b[C])}}function de(g){this.src=g,this.g={},this.h=0}de.prototype.add=function(g,A,C,b,H){const J=g.toString();g=this.g[J],g||(g=this.g[J]=[],this.h++);const ce=Te(g,A,b,H);return ce>-1?(A=g[ce],C||(A.fa=!1)):(A=new re(A,this.src,J,!!b,H),A.fa=C,g.push(A)),A};function ue(g,A){const C=A.type;if(C in g.g){var b=g.g[C],H=Array.prototype.indexOf.call(b,A,void 0),J;(J=H>=0)&&Array.prototype.splice.call(b,H,1),J&&(ye(A),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Te(g,A,C,b){for(let H=0;H<g.length;++H){const J=g[H];if(!J.da&&J.listener==A&&J.capture==!!C&&J.ha==b)return H}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),ct={};function lt(g,A,C,b,H){if(Array.isArray(A)){for(let J=0;J<A.length;J++)lt(g,A[J],C,b,H);return null}return C=ol(C),g&&g[Xe]?g.J(A,C,d(b)?!!b.capture:!1,H):Ai(g,A,C,!1,b,H)}function Ai(g,A,C,b,H,J){if(!A)throw Error("Invalid event type");const ce=d(H)?!!H.capture:!!H;let Me=Vr(g);if(Me||(g[Ae]=Me=new de(g)),C=Me.add(A,C,b,ce,J),C.proxy)return C;if(b=ko(),C.proxy=b,b.src=g,b.listener=C,g.addEventListener)O||(H=ce),H===void 0&&(H=!1),g.addEventListener(A.toString(),b,H);else if(g.attachEvent)g.attachEvent(Si(A.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function ko(){function g(C){return A.call(g.src,g.listener,C)}const A=sl;return g}function Po(g,A,C,b,H){if(Array.isArray(A))for(var J=0;J<A.length;J++)Po(g,A[J],C,b,H);else b=d(b)?!!b.capture:!!b,C=ol(C),g&&g[Xe]?(g=g.i,J=String(A).toString(),J in g.g&&(A=g.g[J],C=Te(A,C,b,H),C>-1&&(ye(A[C]),Array.prototype.splice.call(A,C,1),A.length==0&&(delete g.g[J],g.h--)))):g&&(g=Vr(g))&&(A=g.g[A.toString()],g=-1,A&&(g=Te(A,C,b,H)),(C=g>-1?A[g]:null)&&Vo(C))}function Vo(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[Xe])ue(A.i,g);else{var C=g.type,b=g.proxy;A.removeEventListener?A.removeEventListener(C,b,g.capture):A.detachEvent?A.detachEvent(Si(C),b):A.addListener&&A.removeListener&&A.removeListener(b),(C=Vr(A))?(ue(C,g),C.h==0&&(C.src=null,A[Ae]=null)):ye(g)}}}function Si(g){return g in ct?ct[g]:ct[g]="on"+g}function sl(g,A){if(g.da)g=!0;else{A=new ve(A,this);const C=g.listener,b=g.ha||g.src;g.fa&&Vo(g),g=C.call(b,A)}return g}function Vr(g){return g=g[Ae],g instanceof de?g:null}var rl="__closure_events_fn_"+(Math.random()*1e9>>>0);function ol(g){return typeof g=="function"?g:(g[rl]||(g[rl]=function(A){return g.handleEvent(A)}),g[rl])}function Rt(){U.call(this),this.i=new de(this),this.M=this,this.G=null}E(Rt,U),Rt.prototype[Xe]=!0,Rt.prototype.removeEventListener=function(g,A,C,b){Po(this,g,A,C,b)};function Bt(g,A){var C,b=g.G;if(b)for(C=[];b;b=b.G)C.push(b);if(g=g.M,b=A.type||A,typeof A=="string")A=new P(A,g);else if(A instanceof P)A.target=A.target||g;else{var H=A;A=new P(b,g),fe(A,H)}H=!0;let J,ce;if(C)for(ce=C.length-1;ce>=0;ce--)J=A.g=C[ce],H=Ms(J,b,!0,A)&&H;if(J=A.g=g,H=Ms(J,b,!0,A)&&H,H=Ms(J,b,!1,A)&&H,C)for(ce=0;ce<C.length;ce++)J=A.g=C[ce],H=Ms(J,b,!1,A)&&H}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var g=this.i;for(const A in g.g){const C=g.g[A];for(let b=0;b<C.length;b++)ye(C[b]);delete g.g[A],g.h--}}this.G=null},Rt.prototype.J=function(g,A,C,b){return this.i.add(String(g),A,!1,C,b)},Rt.prototype.K=function(g,A,C,b){return this.i.add(String(g),A,!0,C,b)};function Ms(g,A,C,b){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();let H=!0;for(let J=0;J<A.length;++J){const ce=A[J];if(ce&&!ce.da&&ce.capture==C){const Me=ce.listener,At=ce.ha||ce.src;ce.fa&&ue(g.i,ce),H=Me.call(At,b)!==!1&&H}}return H&&!b.defaultPrevented}function ih(g,A){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:u.setTimeout(g,A||0)}function Wu(g){g.g=ih(()=>{g.g=null,g.i&&(g.i=!1,Wu(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class cn extends U{constructor(A,C){super(),this.m=A,this.l=C,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Wu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(g){U.call(this),this.h=g,this.g={}}E(Ur,U);var al=[];function ll(g){Ue(g.g,function(A,C){this.g.hasOwnProperty(C)&&Vo(A)},g),g.g={}}Ur.prototype.N=function(){Ur.Z.N.call(this),ll(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ks=u.JSON.stringify,sh=u.JSON.parse,Zu=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function ju(){}function ec(){}var ni={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){P.call(this,"d")}E(Jt,P);function Ln(){P.call(this,"c")}E(Ln,P);var Tt={},tc=null;function Uo(){return tc=tc||new Rt}Tt.Ia="serverreachability";function nc(g){P.call(this,Tt.Ia,g)}E(nc,P);function Ci(g){const A=Uo();Bt(A,new nc(A))}Tt.STAT_EVENT="statevent";function Lr(g,A){P.call(this,Tt.STAT_EVENT,g),this.stat=A}E(Lr,P);function bt(g){const A=Uo();Bt(A,new Lr(A,g))}Tt.Ja="timingevent";function wi(g,A){P.call(this,Tt.Ja,g),this.size=A}E(wi,P);function Ii(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},A)}function ii(){this.g=!0}ii.prototype.ua=function(){this.g=!1};function rh(g,A,C,b,H,J){g.info(function(){if(g.g)if(J){var ce="",Me=J.split("&");for(let We=0;We<Me.length;We++){var At=Me[We].split("=");if(At.length>1){const mt=At[0];At=At[1];const qn=mt.split("_");ce=qn.length>=2&&qn[1]=="type"?ce+(mt+"="+At+"&"):ce+(mt+"=redacted&")}}}else ce=null;else ce=J;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+A+`
`+C+`
`+ce})}function ic(g,A,C,b,H,J,ce){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+A+`
`+C+`
`+J+" "+ce})}function Ri(g,A,C,b){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+oh(g,C)+(b?" "+b:"")})}function Or(g,A){g.info(function(){return"TIMEOUT: "+A})}ii.prototype.info=function(){};function oh(g,A){if(!g.g)return A;if(!A)return null;try{const J=JSON.parse(A);if(J){for(g=0;g<J.length;g++)if(Array.isArray(J[g])){var C=J[g];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ce=1;ce<b.length;ce++)b[ce]=""}}}}return ks(J)}catch{return A}}var Fr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ul={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cl;function Br(){}E(Br,ju),Br.prototype.g=function(){return new XMLHttpRequest},cl=new Br;function ns(g){return encodeURIComponent(String(g))}function sc(g){var A=1;g=g.split(":");const C=[];for(;A>0&&g.length;)C.push(g.shift()),A--;return g.length&&C.push(g.join(":")),C}function si(g,A,C,b){this.j=g,this.i=A,this.l=C,this.S=b||1,this.V=new Ur(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var xt={},Ht={};function bi(g,A,C){g.M=1,g.A=qr(Dt(A)),g.u=C,g.R=!0,Lo(g,null)}function Lo(g,A){g.F=Date.now(),xi(g),g.B=Dt(g.A);var C=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),qo(C.i,"t",b),g.C=0,C=g.j.L,g.h=new ri,g.g=vc(g.j,C?A:null,!g.u),g.P>0&&(g.O=new cn(h(g.Y,g,g.g),g.P)),A=g.V,C=g.g,b=g.ba;var H="readystatechange";Array.isArray(H)||(H&&(al[0]=H.toString()),H=al);for(let J=0;J<H.length;J++){const ce=lt(C,H[J],b||A.handleEvent,!1,A.h||A);if(!ce)break;A.g[ce.key]=ce}A=g.J?q(g.J):{},g.u?(g.v||(g.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,A)):(g.v="GET",g.g.ea(g.B,g.v,null,A)),Ci(),rh(g.i,g.v,g.B,g.l,g.S,g.u)}si.prototype.ba=function(g){g=g.target;const A=this.O;A&&li(g)==3?A.j():this.Y(g)},si.prototype.Y=function(g){try{if(g==this.g)e:{const Me=li(this.g),At=this.g.ya(),We=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Qt(this.g)))){this.K||Me!=4||At==7||(At==8||We<=0?Ci(3):Ci(2)),Ni(this);var A=this.g.ca();this.X=A;var C=ah(this);if(this.o=A==200,ic(this.i,this.v,this.B,this.l,this.S,Me,A),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(b)){var J=b;break t}}J=null}if(g=J)Ri(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Di(this,g);else{this.o=!1,this.m=3,bt(12),In(this),On(this);break e}}if(this.R){g=!0;let mt;for(;!this.K&&this.C<C.length;)if(mt=oc(this,C),mt==Ht){Me==4&&(this.m=4,bt(14),g=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==xt){this.m=4,bt(15),Ri(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ri(this.i,this.l,mt,null),Di(this,mt);if(rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||C.length!=0||this.h.h||(this.m=1,bt(16),g=!1),this.o=this.o&&g,!g)Ri(this.i,this.l,C,"[Invalid Chunked Response]"),In(this),On(this);else if(C.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),wl(ce),ce.P=!0,bt(11))}}else Ri(this.i,this.l,C,null),Di(this,C);Me==4&&In(this),this.o&&!this.K&&(Me==4?mc(this.j,this):(this.o=!1,xi(this)))}else ss(this.g),A==400&&C.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),In(this),On(this)}}}catch{}finally{}};function ah(g){if(!rc(g))return g.g.la();const A=Qt(g.g);if(A==="")return"";let C="";const b=A.length,H=li(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return In(g),On(g),"";g.h.i=new u.TextDecoder}for(let J=0;J<b;J++)g.h.h=!0,C+=g.h.i.decode(A[J],{stream:!(H&&J==b-1)});return A.length=0,g.h.g+=C,g.C=0,g.h.g}function rc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function oc(g,A){var C=g.C,b=A.indexOf(`
`,C);return b==-1?Ht:(C=Number(A.substring(C,b)),isNaN(C)?xt:(b+=1,b+C>A.length?Ht:(A=A.slice(b,b+C),g.C=b+C,A)))}si.prototype.cancel=function(){this.K=!0,In(this)};function xi(g){g.T=Date.now()+g.H,Oo(g,g.H)}function Oo(g,A){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Ii(h(g.aa,g),A)}function Ni(g){g.D&&(u.clearTimeout(g.D),g.D=null)}si.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Or(this.i,this.B),this.M!=2&&(Ci(),bt(17)),In(this),this.m=2,On(this)):Oo(this,this.T-g)};function On(g){g.j.I==0||g.K||mc(g.j,g)}function In(g){Ni(g);var A=g.O;A&&typeof A.dispose=="function"&&A.dispose(),g.O=null,ll(g.V),g.g&&(A=g.g,g.g=null,A.abort(),A.dispose())}function Di(g,A){try{var C=g.j;if(C.I!=0&&(C.g==g||ki(C.h,g))){if(!g.L&&ki(C.h,g)&&C.I==3){try{var b=C.Ba.g.parse(A)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)$o(C),qs(C);else break e;Jr(C),bt(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Ii(h(C.Va,C),6e3));Mi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Fi(C,11)}else if((g.L||C.g==g)&&$o(C),!x(A))for(H=C.Ba.g.parse(A),A=0;A<H.length;A++){let We=H[A];const mt=We[0];if(!(mt<=C.K))if(C.K=mt,We=We[1],C.I==2)if(We[0]=="c"){C.M=We[1],C.ba=We[2];const qn=We[3];qn!=null&&(C.ka=qn,C.j.info("VER="+C.ka));const Bi=We[4];Bi!=null&&(C.za=Bi,C.j.info("SVER="+C.za));const ui=We[5];ui!=null&&typeof ui=="number"&&ui>0&&(b=1.5*ui,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const ci=g.g;if(ci){const Qr=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qr){var J=b.h;J.g||Qr.indexOf("spdy")==-1&&Qr.indexOf("quic")==-1&&Qr.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(hl(J,J.h),J.h=null))}if(b.G){const Yo=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Yo&&(b.wa=Yo,et(b.J,b.G,Yo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var ce=g;if(b.na=_c(b,b.L?b.ba:null,b.W),ce.L){pl(b.h,ce);var Me=ce,At=b.O;At&&(Me.H=At),Me.D&&(Ni(Me),xi(Me)),b.g=ce}else hc(b);C.i.length>0&&Oi(C)}else We[0]!="stop"&&We[0]!="close"||Fi(C,7);else C.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Fi(C,7):Sl(C):We[0]!="noop"&&C.l&&C.l.qa(We),C.A=0)}}Ci(4)}catch{}}var Nt=class{constructor(g,A){this.g=g,this.map=A}};function dl(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Mi(g){return g.h?1:g.g?g.g.size:0}function ki(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function hl(g,A){g.g?g.g.add(A):g.h=A}function pl(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}dl.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ml(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const C of g.g.values())A=A.concat(C.G);return A}return I(g.i)}var ac=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fo(g,A){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const b=g[C].indexOf("=");let H,J=null;b>=0?(H=g[C].substring(0,b),J=g[C].substring(b+1)):H=g[C],A(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Rn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;g instanceof Rn?(this.l=g.l,zt(this,g.j),this.o=g.o,this.g=g.g,Ps(this,g.u),this.h=g.h,gl(this,dc(g.i)),this.m=g.m):g&&(A=String(g).match(ac))?(this.l=!1,zt(this,A[1]||"",!0),this.o=Pi(A[2]||""),this.g=Pi(A[3]||"",!0),Ps(this,A[4]),this.h=Pi(A[5]||"",!0),gl(this,A[6]||"",!0),this.m=Pi(A[7]||"")):(this.l=!1,this.i=new Us(null,this.l))}Rn.prototype.toString=function(){const g=[];var A=this.j;A&&g.push(Gr(A,Bo,!0),":");var C=this.g;return(C||A=="file")&&(g.push("//"),(A=this.o)&&g.push(Gr(A,Bo,!0),"@"),g.push(ns(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(Gr(C,C.charAt(0)=="/"?yl:lc,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",Gr(C,uc)),g.join("")},Rn.prototype.resolve=function(g){const A=Dt(this);let C=!!g.j;C?zt(A,g.j):C=!!g.o,C?A.o=g.o:C=!!g.g,C?A.g=g.g:C=g.u!=null;var b=g.h;if(C)Ps(A,g.u);else if(C=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=A.h.lastIndexOf("/");H!=-1&&(b=A.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let ce=0;ce<H.length;){const Me=H[ce++];Me=="."?b&&ce==H.length&&J.push(""):Me==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),b&&ce==H.length&&J.push("")):(J.push(Me),b=!0)}b=J.join("/")}else b=H}return C?A.h=b:C=g.i.toString()!=="",C?gl(A,dc(g.i)):C=!!g.m,C&&(A.m=g.m),A};function Dt(g){return new Rn(g)}function zt(g,A,C){g.j=C?Pi(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function Ps(g,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);g.u=A}else g.u=null}function gl(g,A,C){A instanceof Us?(g.i=A,Go(g.i,g.l)):(C||(A=Gr(A,Vs)),g.i=new Us(A,g.l))}function et(g,A,C){g.i.set(A,C)}function qr(g){return et(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Pi(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Gr(g,A,C){return typeof g=="string"?(g=encodeURI(g).replace(A,yn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function yn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Bo=/[#\/\?@]/g,lc=/[#\?:]/g,yl=/[#\?]/g,Vs=/[#\?@]/g,uc=/#/g;function Us(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function _n(g){g.g||(g.g=new Map,g.h=0,g.i&&Fo(g.i,function(A,C){g.add(decodeURIComponent(A.replace(/\+/g," ")),C)}))}n=Us.prototype,n.add=function(g,A){_n(this),this.i=null,g=Ls(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(A),this.h+=1,this};function cc(g,A){_n(g),A=Ls(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function _l(g,A){return _n(g),A=Ls(g,A),g.g.has(A)}n.forEach=function(g,A){_n(this),this.g.forEach(function(C,b){C.forEach(function(H){g.call(A,H,b,this)},this)},this)};function vl(g,A){_n(g);let C=[];if(typeof A=="string")_l(g,A)&&(C=C.concat(g.g.get(Ls(g,A))));else for(g=Array.from(g.g.values()),A=0;A<g.length;A++)C=C.concat(g[A]);return C}n.set=function(g,A){return _n(this),this.i=null,g=Ls(this,g),_l(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},n.get=function(g,A){return g?(g=vl(this,g),g.length>0?String(g[0]):A):A};function qo(g,A,C){cc(g,A),C.length>0&&(g.i=null,g.g.set(Ls(g,A),I(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(let b=0;b<A.length;b++){var C=A[b];const H=ns(C);C=vl(this,C);for(let J=0;J<C.length;J++){let ce=H;C[J]!==""&&(ce+="="+ns(C[J])),g.push(ce)}}return this.i=g.join("&")};function dc(g){const A=new Us;return A.i=g.i,g.g&&(A.g=new Map(g.g),A.h=g.h),A}function Ls(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Go(g,A){A&&!g.j&&(_n(g),g.i=null,g.g.forEach(function(C,b){const H=b.toLowerCase();b!=H&&(cc(this,b),qo(this,H,C))},g)),g.j=A}function oi(g,A){const C=new ii;if(u.Image){const b=new Image;b.onload=_(Fn,C,"TestLoadImage: loaded",!0,A,b),b.onerror=_(Fn,C,"TestLoadImage: error",!1,A,b),b.onabort=_(Fn,C,"TestLoadImage: abort",!1,A,b),b.ontimeout=_(Fn,C,"TestLoadImage: timeout",!1,A,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else A(!1)}function El(g,A){const C=new ii,b=new AbortController,H=setTimeout(()=>{b.abort(),Fn(C,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:b.signal}).then(J=>{clearTimeout(H),J.ok?Fn(C,"TestPingServer: ok",!0,A):Fn(C,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(H),Fn(C,"TestPingServer: error",!1,A)})}function Fn(g,A,C,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(C)}catch{}}function Os(){this.g=new Zu}function Vi(g){this.i=g.Sb||null,this.h=g.ab||!1}E(Vi,ju),Vi.prototype.g=function(){return new Hr(this.i,this.h)};function Hr(g,A){Rt.call(this),this.H=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Hr,Rt),n=Hr.prototype,n.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=A,this.readyState=1,ai(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(A.body=g),(this.H||u).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fs(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ho(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ho(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?Fs(this):ai(this),this.readyState==3&&Ho(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Fs(this))},n.Na=function(g){this.g&&(this.response=g,Fs(this))},n.ga=function(){this.g&&Fs(this)};function Fs(g){g.readyState=4,g.l=null,g.j=null,g.B=null,ai(g)}n.setRequestHeader=function(g,A){this.A.append(g,A)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var C=A.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=A.next();return g.join(`\r
`)};function ai(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Hr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Bn(g){let A="";return Ue(g,function(C,b){A+=b,A+=":",A+=C,A+=`\r
`}),A}function zr(g,A,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=Bn(C),typeof g=="string"?C!=null&&ns(C):et(g,A,C))}function st(g){Rt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(st,Rt);var Ui=/^https?$/i,Tl=["POST","PUT"];n=st.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,A,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cl.g(),this.g.onreadystatechange=T(h(this.Ca,this));try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(J){Kr(this,J);return}if(g=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)C.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const J of b.keys())C.set(J,b.get(J));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(J=>J.toLowerCase()=="content-type"),H=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Tl,A,void 0)>=0)||b||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ce]of C)this.g.setRequestHeader(J,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(J){Kr(this,J)}};function Kr(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.o=5,Al(g),is(g)}function Al(g){g.A||(g.A=!0,Bt(g,"complete"),Bt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Bt(this,"complete"),Bt(this,"abort"),is(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),is(this,!0)),st.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?$r(this):this.Xa())},n.Xa=function(){$r(this)};function $r(g){if(g.h&&typeof a<"u"){if(g.v&&li(g)==4)setTimeout(g.Ca.bind(g),0);else if(Bt(g,"readystatechange"),li(g)==4){g.h=!1;try{const J=g.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var C;if(!(C=A)){var b;if(b=J===0){let ce=String(g.D).match(ac)[1]||null;!ce&&u.self&&u.self.location&&(ce=u.self.location.protocol.slice(0,-1)),b=!Ui.test(ce?ce.toLowerCase():"")}C=b}if(C)Bt(g,"complete"),Bt(g,"success");else{g.o=6;try{var H=li(g)>2?g.g.statusText:""}catch{H=""}g.l=H+" ["+g.ca()+"]",Al(g)}}finally{is(g)}}}}function is(g,A){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,A||Bt(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function li(g){return g.g?g.g.readyState:0}n.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),sh(A)}};function Qt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function ss(g){const A={};g=(g.g&&li(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(x(g[b]))continue;var C=sc(g[b]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const J=A[H]||[];A[H]=J,J.push(C)}$e(A,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Li(g,A,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||A}function Bs(g){this.za=0,this.i=[],this.j=new ii,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Li("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Li("baseRetryDelayMs",5e3,g),this.Za=Li("retryDelaySeedMs",1e4,g),this.Ta=Li("forwardChannelMaxRetries",2,g),this.va=Li("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new dl(g&&g.concurrentRequestLimit),this.Ba=new Os,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Bs.prototype,n.ka=8,n.I=1,n.connect=function(g,A,C,b){bt(0),this.W=g,this.H=A||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=_c(this,null,this.W),Oi(this)};function Sl(g){if(zo(g),g.I==3){var A=g.V++,C=Dt(g.J);if(et(C,"SID",g.M),et(C,"RID",A),et(C,"TYPE","terminate"),Yr(g,C),A=new si(g,g.j,A),A.M=2,A.A=qr(Dt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(A.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=A.A,C=!0),C||(A.g=vc(A.j,null),A.g.ea(A.A)),A.F=Date.now(),xi(A)}yc(g)}function qs(g){g.g&&(wl(g),g.g.cancel(),g.g=null)}function zo(g){qs(g),g.v&&(u.clearTimeout(g.v),g.v=null),$o(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Oi(g){if(!fl(g.h)&&!g.m){g.m=!0;var A=g.Ea;oe||M(),le||(oe(),le=!0),D.add(A,g),g.D=0}}function Ko(g,A){return Mi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=A.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Ii(h(g.Ea,g,A),gc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const H=new si(this,this.j,g);let J=this.o;if(this.U&&(J?(J=q(J),fe(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var A=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(A+=b,A>4096){A=C;break e}if(A===4096||C===this.i.length-1){A=C+1;break e}}A=1e3}else A=1e3;A=fc(this,H,A),C=Dt(this.J),et(C,"RID",g),et(C,"CVER",22),this.G&&et(C,"X-HTTP-Session-Id",this.G),Yr(this,C),J&&(this.R?A="headers="+ns(Bn(J))+"&"+A:this.u&&zr(C,this.u,J)),hl(this.h,H),this.Ra&&et(C,"TYPE","init"),this.S?(et(C,"$req",A),et(C,"SID","null"),H.U=!0,bi(H,C,null)):bi(H,C,A),this.I=2}}else this.I==3&&(g?Cl(this,g):this.i.length==0||fl(this.h)||Cl(this))};function Cl(g,A){var C;A?C=A.l:C=g.V++;const b=Dt(g.J);et(b,"SID",g.M),et(b,"RID",C),et(b,"AID",g.K),Yr(g,b),g.u&&g.o&&zr(b,g.u,g.o),C=new si(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),A&&(g.i=A.G.concat(g.i)),A=fc(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),hl(g.h,C),bi(C,b,A)}function Yr(g,A){g.H&&Ue(g.H,function(C,b){et(A,b,C)}),g.l&&Ue({},function(C,b){et(A,b,C)})}function fc(g,A,C){C=Math.min(g.i.length,C);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var H=g.i;let Me=-1;for(;;){const At=["count="+C];Me==-1?C>0?(Me=H[0].g,At.push("ofs="+Me)):Me=0:At.push("ofs="+Me);let We=!0;for(let mt=0;mt<C;mt++){var J=H[mt].g;const qn=H[mt].map;if(J-=Me,J<0)Me=Math.max(0,H[mt].g-100),We=!1;else try{J="req"+J+"_"||"";try{var ce=qn instanceof Map?qn:Object.entries(qn);for(const[Bi,ui]of ce){let ci=ui;d(ui)&&(ci=ks(ui)),At.push(J+Bi+"="+encodeURIComponent(ci))}}catch(Bi){throw At.push(J+"type="+encodeURIComponent("_badmap")),Bi}}catch{b&&b(qn)}}if(We){ce=At.join("&");break e}}ce=void 0}return g=g.i.splice(0,C),A.G=g,ce}function hc(g){if(!g.g&&!g.v){g.Y=1;var A=g.Da;oe||M(),le||(oe(),le=!0),D.add(A,g),g.A=0}}function Jr(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Ii(h(g.Da,g),gc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,pc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Ii(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),qs(this),pc(this))};function wl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function pc(g){g.g=new si(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var A=Dt(g.na);et(A,"RID","rpc"),et(A,"SID",g.M),et(A,"AID",g.K),et(A,"CI",g.F?"0":"1"),!g.F&&g.ia&&et(A,"TO",g.ia),et(A,"TYPE","xmlhttp"),Yr(g,A),g.u&&g.o&&zr(A,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=qr(Dt(A)),C.u=null,C.R=!0,Lo(C,g)}n.Va=function(){this.C!=null&&(this.C=null,qs(this),Jr(this),bt(19))};function $o(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function mc(g,A){var C=null;if(g.g==A){$o(g),wl(g),g.g=null;var b=2}else if(ki(g.h,A))C=A.G,pl(g.h,A),b=1;else return;if(g.I!=0){if(A.o)if(b==1){C=A.u?A.u.length:0,A=Date.now()-A.F;var H=g.D;b=Uo(),Bt(b,new wi(b,C)),Oi(g)}else hc(g);else if(H=A.m,H==3||H==0&&A.X>0||!(b==1&&Ko(g,A)||b==2&&Jr(g)))switch(C&&C.length>0&&(A=g.h,A.i=A.i.concat(C)),H){case 1:Fi(g,5);break;case 4:Fi(g,10);break;case 3:Fi(g,6);break;default:Fi(g,2)}}}function gc(g,A){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*A}function Fi(g,A){if(g.j.info("Error code "+A),A==2){var C=h(g.bb,g),b=g.Ua;const H=!b;b=new Rn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||zt(b,"https"),qr(b),H?oi(b.toString(),C):El(b.toString(),C)}else bt(2);g.I=0,g.l&&g.l.pa(A),yc(g),zo(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function yc(g){if(g.I=0,g.ja=[],g.l){const A=ml(g.h);(A.length!=0||g.i.length!=0)&&(k(g.ja,A),k(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function _c(g,A,C){var b=C instanceof Rn?Dt(C):new Rn(C);if(b.g!="")A&&(b.g=A+"."+b.g),Ps(b,b.u);else{var H=u.location;b=H.protocol,A=A?A+"."+H.hostname:H.hostname,H=+H.port;const J=new Rn(null);b&&zt(J,b),A&&(J.g=A),H&&Ps(J,H),C&&(J.h=C),b=J}return C=g.G,A=g.wa,C&&A&&et(b,C,A),et(b,"VER",g.ka),Yr(g,b),b}function vc(g,A,C){if(A&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Aa&&!g.ma?new st(new Vi({ab:C})):new st(g.ma),A.Fa(g.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ec(){}n=Ec.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Gs(){}Gs.prototype.g=function(g,A){return new dn(g,A)};function dn(g,A){Rt.call(this),this.g=new Bs(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(g?g["X-WebChannel-Client-Profile"]=A.sa:g={"X-WebChannel-Client-Profile":A.sa}),this.g.U=g,(g=A&&A.Qb)&&!x(g)&&(this.g.u=g),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!x(A)&&(this.g.G=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new rs(this)}E(dn,Rt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Sl(this.g)},dn.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=ks(g),g=C);A.i.push(new Nt(A.Ya++,g)),A.I==3&&Oi(A)},dn.prototype.N=function(){this.g.l=null,delete this.j,Sl(this.g),delete this.g,dn.Z.N.call(this)};function Tc(g){Jt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const C in A){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}E(Tc,Jt);function Ac(){Ln.call(this),this.status=1}E(Ac,Ln);function rs(g){this.g=g}E(rs,Ec),rs.prototype.ra=function(){Bt(this.g,"a")},rs.prototype.qa=function(g){Bt(this.g,new Tc(g))},rs.prototype.pa=function(g){Bt(this.g,new Ac)},rs.prototype.oa=function(){Bt(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,dC=function(){return new Gs},cC=function(){return Uo()},uC=Tt,km={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,Bd=Fr,ul.COMPLETE="complete",lC=ul,ec.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,pu=ec,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,aC=st}).apply(typeof Rd<"u"?Rd:typeof self<"u"?self:typeof window<"u"?window:{});const NE="@firebase/firestore",DE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qa="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new Rf("@firebase/firestore");function Sa(){return yo.logLevel}function ge(n,...e){if(yo.logLevel<=qe.DEBUG){const t=e.map(Tg);yo.debug(`Firestore (${Qa}): ${n}`,...t)}}function ws(n,...e){if(yo.logLevel<=qe.ERROR){const t=e.map(Tg);yo.error(`Firestore (${Qa}): ${n}`,...t)}}function Ba(n,...e){if(yo.logLevel<=qe.WARN){const t=e.map(Tg);yo.warn(`Firestore (${Qa}): ${n}`,...t)}}function Tg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,fC(n,i,t)}function fC(n,e,t){let i=`FIRESTORE (${Qa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ws(i),new Error(i)}function je(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||fC(e,o,i)}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ei{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class R2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class b2{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Tr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const p=a;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Tr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(je(typeof i.accessToken=="string",31837,{l:i}),new hC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class x2{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class N2{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new x2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ME{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const i=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ME(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ME(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=M2(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Ge(n,e){return n<e?-1:n>e?1:0}function Pm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return hm(o)===hm(a)?Ge(o,a):hm(o)?1:-1}return Ge(n.length,e.length)}const k2=55296,P2=57343;function hm(n){const e=n.charCodeAt(0);return e>=k2&&e<=P2}function qa(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="__name__";class Ki{constructor(e,t,i){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Re(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Ki.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Ge(e.length,t.length)}static compareSegments(e,t){const i=Ki.isNumericId(e),o=Ki.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Ki.extractNumericId(e).compare(Ki.extractNumericId(t)):Pm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}}class dt extends Ki{construct(e,t,i){return new dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const V2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Ki{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return V2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kE}static keyField(){return new tn([kE])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(dt.fromString(e))}static fromName(e){return new Ce(dt.fromString(e).popFirst(5))}static empty(){return new Ce(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(n,e,t){if(!t)throw new pe(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function U2(n,e,t,i){if(e===!0&&i===!0)throw new pe(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PE(n){if(!Ce.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VE(n){if(Ce.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function bf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function ji(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bf(n);throw new pe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(n,e){const t={typeString:n};return e&&(t.value=e),t}function Uu(n,e){if(!mC(n))throw new pe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new pe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=-62135596800,LE=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*LE);return new pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<UE)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LE}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Uu(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-UE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Ot("string",pt._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new pt(0,0))}static max(){return new xe(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=-1;function L2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(i===1e9?new pt(t+1,0):new pt(t,i));return new Cr(o,Ce.empty(),e)}function O2(n){return new Cr(n.readTime,n.key,wu)}class Cr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Cr(xe.min(),Ce.empty(),wu)}static max(){return new Cr(xe.max(),Ce.empty(),wu)}}function F2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==B2)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(p=>i(p)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let p=0;p<a;p++){const h=p;t(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function G2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=-1;function Nf(n){return n==null}function nf(n){return n===0&&1/n==-1/0}function H2(n){return typeof n=="number"&&Number.isInteger(n)&&!nf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="";function z2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OE(e)),e=K2(n.get(t),e);return OE(e)}function K2(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case gC:t+="";break;default:t+=a}}return t}function OE(n){return n+gC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new _t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bd(this.root,e,this.comparator,!0)}}class bd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??en.RED,this.left=o??en.EMPTY,this.right=a??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new en(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return en.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new BE(this.data.getIterator())}getIteratorFrom(e){return new BE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class BE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new Gt(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new _C("Invalid base64 string: "+a):a}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const $2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wr(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=$2.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ir(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="server_timestamp",EC="__type__",TC="__previous_value__",AC="__local_write_time__";function Cg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[EC])==null?void 0:i.stringValue)===vC}function Df(n){const e=n.mapValue.fields[TC];return Cg(e)?Df(e):e}function Iu(n){const e=wr(n.mapValue.fields[AC].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,t,i,o,a,u,d,p,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=h,this.isUsingEmulator=_}}const sf="(default)";class Ru{constructor(e,t){this.projectId=e,this.database=t||sf}static empty(){return new Ru("","")}get isDefaultDatabase(){return this.database===sf}isEqual(e){return e instanceof Ru&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="__type__",J2="__max__",xd={mapValue:{}},CC="__vector__",rf="value";function Rr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cg(n)?4:X2(n)?9007199254740991:Q2(n)?10:11:Re(28295,{value:n})}function es(n,e){if(n===e)return!0;const t=Rr(n);if(t!==Rr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Iu(n).isEqual(Iu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=wr(o.timestampValue),d=wr(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return Ir(o.bytesValue).isEqual(Ir(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return It(o.geoPointValue.latitude)===It(a.geoPointValue.latitude)&&It(o.geoPointValue.longitude)===It(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return It(o.integerValue)===It(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=It(o.doubleValue),d=It(a.doubleValue);return u===d?nf(u)===nf(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],es);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(FE(u)!==FE(d))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(d[p]===void 0||!es(u[p],d[p])))return!1;return!0})(n,e);default:return Re(52216,{left:n})}}function bu(n,e){return(n.values||[]).find((t=>es(t,e)))!==void 0}function Ga(n,e){if(n===e)return 0;const t=Rr(n),i=Rr(e);if(t!==i)return Ge(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=It(a.integerValue||a.doubleValue),p=It(u.integerValue||u.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return qE(n.timestampValue,e.timestampValue);case 4:return qE(Iu(n),Iu(e));case 5:return Pm(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=Ir(a),p=Ir(u);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),p=u.split("/");for(let h=0;h<d.length&&h<p.length;h++){const _=Ge(d[h],p[h]);if(_!==0)return _}return Ge(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Ge(It(a.latitude),It(u.latitude));return d!==0?d:Ge(It(a.longitude),It(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return GE(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var T,I,k,F;const d=a.fields||{},p=u.fields||{},h=(T=d[rf])==null?void 0:T.arrayValue,_=(I=p[rf])==null?void 0:I.arrayValue,E=Ge(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((F=_==null?void 0:_.values)==null?void 0:F.length)||0);return E!==0?E:GE(h,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===xd.mapValue&&u===xd.mapValue)return 0;if(a===xd.mapValue)return 1;if(u===xd.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),h=u.fields||{},_=Object.keys(h);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const T=Pm(p[E],_[E]);if(T!==0)return T;const I=Ga(d[p[E]],h[_[E]]);if(I!==0)return I}return Ge(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Re(23264,{he:t})}}function qE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);const t=wr(n),i=wr(e),o=Ge(t.seconds,i.seconds);return o!==0?o:Ge(t.nanos,i.nanos)}function GE(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Ga(t[o],i[o]);if(a)return a}return Ge(t.length,i.length)}function Ha(n){return Vm(n)}function Vm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=wr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ir(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Vm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Vm(t.fields[u])}`;return o+"}"})(n.mapValue):Re(61005,{value:n})}function qd(n){switch(Rr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Df(n);return e?16+qd(e):16;case 5:return 2*n.stringValue.length;case 6:return Ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+qd(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Dr(i.fields,((a,u)=>{o+=a.length+qd(u)})),o})(n.mapValue);default:throw Re(13486,{value:n})}}function HE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Um(n){return!!n&&"integerValue"in n}function wg(n){return!!n&&"arrayValue"in n}function zE(n){return!!n&&"nullValue"in n}function KE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gd(n){return!!n&&"mapValue"in n}function Q2(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[SC])==null?void 0:i.stringValue)===CC}function vu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Dr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=vu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vu(n.arrayValue.values[t]);return e}return{...n}}function X2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===J2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(t)}setAll(e){let t=tn.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=vu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return es(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Gd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Dr(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new wn(vu(this.value))}}function wC(n){const e=[];return Dr(n.fields,((t,i)=>{const o=new tn([t]);if(Gd(i)){const a=wC(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new an(e,0,xe.min(),xe.min(),xe.min(),wn.empty(),0)}static newFoundDocument(e,t,i,o){return new an(e,1,t,xe.min(),i,o,0)}static newNoDocument(e,t){return new an(e,2,t,xe.min(),xe.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,xe.min(),xe.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.position=e,this.inclusive=t}}function $E(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Ce.comparator(Ce.fromName(u.referenceValue),t.key):i=Ga(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function YE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!es(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t="asc"){this.field=e,this.dir=t}}function W2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{}class Lt extends IC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new j2(e,t,i):t==="array-contains"?new nD(e,i):t==="in"?new iD(e,i):t==="not-in"?new sD(e,i):t==="array-contains-any"?new rD(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new eD(e,i):new tD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ga(t,this.value)):t!==null&&Rr(this.value)===Rr(t)&&this.matchesComparison(Ga(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _i extends IC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _i(e,t)}matches(e){return RC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function RC(n){return n.op==="and"}function bC(n){return Z2(n)&&RC(n)}function Z2(n){for(const e of n.filters)if(e instanceof _i)return!1;return!0}function Lm(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+Ha(n.value);if(bC(n))return n.filters.map((e=>Lm(e))).join(",");{const e=n.filters.map((t=>Lm(t))).join(",");return`${n.op}(${e})`}}function xC(n,e){return n instanceof Lt?(function(i,o){return o instanceof Lt&&i.op===o.op&&i.field.isEqual(o.field)&&es(i.value,o.value)})(n,e):n instanceof _i?(function(i,o){return o instanceof _i&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&xC(u,o.filters[d])),!0):!1})(n,e):void Re(19439)}function NC(n){return n instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ha(t.value)}`})(n):n instanceof _i?(function(t){return t.op.toString()+" {"+t.getFilters().map(NC).join(" ,")+"}"})(n):"Filter"}class j2 extends Lt{constructor(e,t,i){super(e,t,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class eD extends Lt{constructor(e,t){super(e,"in",t),this.keys=DC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tD extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=DC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function DC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ce.fromName(i.referenceValue)))}class nD extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wg(t)&&bu(t.arrayValue,this.value)}}class iD extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bu(this.value.arrayValue,t)}}class sD extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bu(this.value.arrayValue,t)}}class rD extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>bu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function JE(n,e=null,t=[],i=[],o=null,a=null,u=null){return new oD(n,e,t,i,o,a,u)}function Ig(n){const e=De(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Lm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ha(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ha(i))).join(",")),e.Te=t}return e.Te}function Rg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!W2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!YE(n.startAt,e.startAt)&&YE(n.endAt,e.endAt)}function Om(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aD(n,e,t,i,o,a,u,d){return new Za(n,e,t,i,o,a,u,d)}function MC(n){return new Za(n)}function QE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kC(n){return n.collectionGroup!==null}function Eu(n){const e=De(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Gt(tn.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new xu(a,i))})),t.has(tn.keyField().canonicalString())||e.Ie.push(new xu(tn.keyField(),i))}return e.Ie}function $i(n){const e=De(n);return e.Ee||(e.Ee=lD(e,Eu(n))),e.Ee}function lD(n,e){if(n.limitType==="F")return JE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new xu(o.field,a)}));const t=n.endAt?new of(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new of(n.startAt.position,n.startAt.inclusive):null;return JE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Fm(n,e){const t=n.filters.concat([e]);return new Za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bm(n,e,t){return new Za(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mf(n,e){return Rg($i(n),$i(e))&&n.limitType===e.limitType}function PC(n){return`${Ig($i(n))}|lt:${n.limitType}`}function Ca(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>NC(o))).join(", ")}]`),Nf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ha(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ha(o))).join(",")),`Target(${i})`})($i(n))}; limitType=${n.limitType})`}function kf(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ce.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of Eu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,p){const h=$E(u,d,p);return u.inclusive?h<=0:h<0})(i.startAt,Eu(i),o)||i.endAt&&!(function(u,d,p){const h=$E(u,d,p);return u.inclusive?h>=0:h>0})(i.endAt,Eu(i),o))})(n,e)}function uD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VC(n){return(e,t)=>{let i=!1;for(const o of Eu(n)){const a=cD(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function cD(n,e,t){const i=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(a,u,d){const p=u.data.field(a),h=d.data.field(a);return p!==null&&h!==null?Ga(p,h):Re(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Dr(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return yC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new _t(Ce.comparator);function Is(){return dD}const UC=new _t(Ce.comparator);function mu(...n){let e=UC;for(const t of n)e=e.insert(t.key,t);return e}function LC(n){let e=UC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function po(){return Tu()}function OC(){return Tu()}function Tu(){return new Io((n=>n.toString()),((n,e)=>n.isEqual(e)))}const fD=new _t(Ce.comparator),hD=new Gt(Ce.comparator);function He(...n){let e=hD;for(const t of n)e=e.add(t);return e}const pD=new Gt(Ge);function mD(){return pD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nf(e)?"-0":e}}function FC(n){return{integerValue:""+n}}function BC(n,e){return H2(e)?FC(e):bg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this._=void 0}}function gD(n,e,t){return n instanceof af?(function(o,a){const u={fields:{[EC]:{stringValue:vC},[AC]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Cg(a)&&(a=Df(a)),a&&(u.fields[TC]=a),{mapValue:u}})(t,e):n instanceof Nu?GC(n,e):n instanceof Du?HC(n,e):(function(o,a){const u=qC(o,a),d=XE(u)+XE(o.Ae);return Um(u)&&Um(o.Ae)?FC(d):bg(o.serializer,d)})(n,e)}function yD(n,e,t){return n instanceof Nu?GC(n,e):n instanceof Du?HC(n,e):t}function qC(n,e){return n instanceof Mu?(function(i){return Um(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class af extends Pf{}class Nu extends Pf{constructor(e){super(),this.elements=e}}function GC(n,e){const t=zC(e);for(const i of n.elements)t.some((o=>es(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Du extends Pf{constructor(e){super(),this.elements=e}}function HC(n,e){let t=zC(e);for(const i of n.elements)t=t.filter((o=>!es(o,i)));return{arrayValue:{values:t}}}class Mu extends Pf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function XE(n){return It(n.integerValue||n.doubleValue)}function zC(n){return wg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,t){this.field=e,this.transform=t}}function vD(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof Nu&&o instanceof Nu||i instanceof Du&&o instanceof Du?qa(i.elements,o.elements,es):i instanceof Mu&&o instanceof Mu?es(i.Ae,o.Ae):i instanceof af&&o instanceof af})(n.transform,e.transform)}class ED{constructor(e,t){this.version=e,this.transformResults=t}}class pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Vf{}function KC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Uf(n.key,pn.none()):new Lu(n.key,n.data,pn.none());{const t=n.data,i=wn.empty();let o=new Gt(tn.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Mr(n.key,i,new Vn(o.toArray()),pn.none())}}function TD(n,e,t){n instanceof Lu?(function(o,a,u){const d=o.value.clone(),p=ZE(o.fieldTransforms,a,u.transformResults);d.setAll(p),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Mr?(function(o,a,u){if(!Hd(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=ZE(o.fieldTransforms,a,u.transformResults),p=a.data;p.setAll($C(o)),p.setAll(d),a.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Au(n,e,t,i){return n instanceof Lu?(function(a,u,d,p){if(!Hd(a.precondition,u))return d;const h=a.value.clone(),_=jE(a.fieldTransforms,p,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Mr?(function(a,u,d,p){if(!Hd(a.precondition,u))return d;const h=jE(a.fieldTransforms,p,u),_=u.data;return _.setAll($C(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,d){return Hd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function AD(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=qC(i.transform,o||null);a!=null&&(t===null&&(t=wn.empty()),t.set(i.field,a))}return t||null}function WE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&qa(i,o,((a,u)=>vD(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Lu extends Vf{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Mr extends Vf{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $C(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function ZE(n,e,t){const i=new Map;je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,yD(u,d,t[o]))}return i}function jE(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,gD(a,u,e))}return i}class Uf extends Vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SD extends Vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&TD(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Au(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Au(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=OC();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const p=KC(u,d);p!==null&&i.set(o.key,p),u.isValidDocument()||u.convertToNoDocument(xe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,((t,i)=>WE(t,i)))&&qa(this.baseMutations,e.baseMutations,((t,i)=>WE(t,i)))}}class xg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){je(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return fD})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new xg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut,Ke;function RD(n){switch(n){case te.OK:return Re(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function YC(n){if(n===void 0)return ws("GRPC error has no .code"),te.UNKNOWN;switch(n){case Ut.OK:return te.OK;case Ut.CANCELLED:return te.CANCELLED;case Ut.UNKNOWN:return te.UNKNOWN;case Ut.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Ut.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Ut.INTERNAL:return te.INTERNAL;case Ut.UNAVAILABLE:return te.UNAVAILABLE;case Ut.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Ut.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Ut.NOT_FOUND:return te.NOT_FOUND;case Ut.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Ut.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Ut.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Ut.ABORTED:return te.ABORTED;case Ut.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Ut.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Ut.DATA_LOSS:return te.DATA_LOSS;default:return Re(39323,{code:n})}}(Ke=Ut||(Ut={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new Er([4294967295,4294967295],0);function eT(n){const e=bD().encode(n),t=new oC;return t.update(e),new Uint8Array(t.digest())}function tT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Er([t,i],0),new Er([o,a],0)]}class Ng{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new gu(`Invalid padding: ${t}`);if(i<0)throw new gu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new gu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new gu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Er.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Er.fromNumber(i)));return o.compare(xD)===1&&(o=new Er([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eT(e),[i,o]=tT(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Ng(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=eT(e),[i,o]=tT(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Lf(xe.min(),o,new _t(Ge),Is(),He())}}class Ou{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ou(i,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class JC{constructor(e,t){this.targetId=e,this.Ce=t}}class QC{constructor(e,t,i=nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class nT{constructor(){this.ve=0,this.Fe=iT(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),i=He();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Re(38017,{changeType:a})}})),new Ou(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=iT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ND{constructor(e){this.Ge=e,this.ze=new Map,this.je=Is(),this.Je=Nd(),this.He=Nd(),this.Ye=new _t(Ge)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(Om(a))if(i===0){const u=new Ce(a.path);this.et(t,u,an.newNoDocument(u,xe.min()))}else je(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),p=d?this.ct(d,e,u):1;if(p!==0){this.it(t);const h=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=Ir(i).toUint8Array()}catch(p){if(p instanceof _C)return Ba("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Ng(u,o,a)}catch(p){return Ba(p instanceof gu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&Om(d.target)){const p=new Ce(d.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,an.newNoDocument(p,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=He();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((p=>{const h=this.ot(p);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Lf(e,t,this.Ye,this.je,i);return this.je=Is(),this.Je=Nd(),this.He=Nd(),this.Ye=new _t(Ge),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Gt(Ge),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Gt(Ge),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nd(){return new _t(Ce.comparator)}function iT(){return new _t(Ce.comparator)}const DD={asc:"ASCENDING",desc:"DESCENDING"},MD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kD={and:"AND",or:"OR"};class PD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qm(n,e){return n.useProto3Json||Nf(e)?e:{value:e}}function lf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function VD(n,e){return lf(n,e.toTimestamp())}function Yi(n){return je(!!n,49232),xe.fromTimestamp((function(t){const i=wr(t);return new pt(i.seconds,i.nanos)})(n))}function Dg(n,e){return Gm(n,e).canonicalString()}function Gm(n,e){const t=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function WC(n){const e=dt.fromString(n);return je(nw(e),10190,{key:e.toString()}),e}function Hm(n,e){return Dg(n.databaseId,e.path)}function pm(n,e){const t=WC(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(jC(t))}function ZC(n,e){return Dg(n.databaseId,e)}function UD(n){const e=WC(n);return e.length===4?dt.emptyPath():jC(e)}function zm(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jC(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sT(n,e,t){return{name:Hm(n,e),fields:t.value.mapValue.fields}}function LD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(je(_===void 0||typeof _=="string",58123),nn.fromBase64String(_||"")):(je(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),nn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?te.UNKNOWN:YC(h.code);return new pe(_,h.message||"")})(u);t=new QC(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=pm(n,i.document.name),a=Yi(i.document.updateTime),u=i.document.createTime?Yi(i.document.createTime):xe.min(),d=new wn({mapValue:{fields:i.document.fields}}),p=an.newFoundDocument(o,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];t=new zd(h,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=pm(n,i.document),a=i.readTime?Yi(i.readTime):xe.min(),u=an.newNoDocument(o,a),d=i.removedTargetIds||[];t=new zd([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=pm(n,i.document),a=i.removedTargetIds||[];t=new zd([],a,o,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new ID(o,a),d=i.targetId;t=new JC(d,u)}}return t}function OD(n,e){let t;if(e instanceof Lu)t={update:sT(n,e.key,e.value)};else if(e instanceof Uf)t={delete:Hm(n,e.key)};else if(e instanceof Mr)t={update:sT(n,e.key,e.data),updateMask:YD(e.fieldMask)};else{if(!(e instanceof SD))return Re(16599,{Vt:e.type});t={verify:Hm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof af)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Nu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Du)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Mu)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Re(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:VD(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re(27497)})(n,e.precondition)),t}function FD(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Yi(o.updateTime):Yi(a);return u.isEqual(xe.min())&&(u=Yi(a)),new ED(u,o.transformResults||[])})(t,e)))):[]}function BD(n,e){return{documents:[ZC(n,e.path)]}}function qD(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=ZC(n,o);const a=(function(h){if(h.length!==0)return tw(_i.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(T){return{field:wa(T.field),direction:zD(T.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=qm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function GD(n){let e=UD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){je(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const T=ew(E);return T instanceof _i&&bC(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((T=>(function(k){return new xu(Ia(k.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let T;return T=typeof E=="object"?E.value:E,Nf(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(E){const T=!!E.before,I=E.values||[];return new of(I,T)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const T=!E.before,I=E.values||[];return new of(I,T)})(t.endAt)),aD(e,o,u,a,d,"F",p,h)}function HD(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ew(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ia(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ia(t.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ia(t.unaryFilter.field);return Lt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ia(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Lt.create(Ia(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return _i.create(t.compositeFilter.filters.map((i=>ew(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(t.compositeFilter.op))})(n):Re(30097,{filter:n})}function zD(n){return DD[n]}function KD(n){return MD[n]}function $D(n){return kD[n]}function wa(n){return{fieldPath:n.canonicalString()}}function Ia(n){return tn.fromServerFormat(n.fieldPath)}function tw(n){return n instanceof Lt?(function(t){if(t.op==="=="){if(KE(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NAN"}};if(zE(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(KE(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NOT_NAN"}};if(zE(t.value))return{unaryFilter:{field:wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wa(t.field),op:KD(t.op),value:t.value}}})(n):n instanceof _i?(function(t){const i=t.getFilters().map((o=>tw(o)));return i.length===1?i[0]:{compositeFilter:{op:$D(t.op),filters:i}}})(n):Re(54877,{filter:n})}function YD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function nw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t,i,o,a=xe.min(),u=xe.min(),d=nn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.yt=e}}function QD(n){const e=GD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.Cn=new WD}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Cr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class WD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Gt(dt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Gt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iw=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(iw,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new za(0)}static cr(){return new za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="LruGarbageCollector",ZD=1048576;function aT([n,e],[t,i]){const o=Ge(n,t);return o===0?Ge(e,i):o}class jD{constructor(e){this.Ir=e,this.buffer=new Gt(aT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();aT(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(oT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wa(t)?ge(oT,"Ignoring IndexedDB error during garbage collection: ",t):await Xa(t)}await this.Vr(3e5)}))}}class tM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(xf.ce);const i=new jD(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(rT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,d,p,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,u=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(i=E,d=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),Sa()<=qe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(h-p)+`ms
Total Duration: ${h-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:E}))))}}function nM(n,e){return new tM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(){this.changes=new Io((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Au(i.mutation,o,Vn.empty(),pt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,He()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=He()){const o=po();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=mu();return a.forEach(((d,p)=>{u=u.insert(d,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=po();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,He())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Is();const u=Tu(),d=(function(){return Tu()})();return t.forEach(((p,h)=>{const _=i.get(h.key);o.has(h.key)&&(_===void 0||_.mutation instanceof Mr)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),Au(_.mutation,h,_.mutation.getFieldMask(),pt.now())):u.set(h.key,Vn.empty())})),this.recalculateAndSaveOverlays(e,a).next((p=>(p.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>d.set(h,new sM(_,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Tu();let o=new _t(((u,d)=>u-d)),a=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((p=>{const h=t.get(p);if(h===null)return;let _=i.get(p)||Vn.empty();_=d.applyToLocalView(h,_),i.set(p,_);const E=(o.get(d.batchId)||He()).add(p);o=o.insert(d.batchId,E)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),h=p.key,_=p.value,E=OC();_.forEach((T=>{if(!a.has(T)){const I=KC(t.get(T),i.get(T));I!==null&&E.set(T,I),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,E))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Ce.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(po());let d=wu,p=a;return u.next((h=>se.forEach(h,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{p=p.insert(_,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,p,h,He()))).next((_=>({batchId:d,changes:LC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((i=>{let o=mu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=mu();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(p=>{const h=(function(E,T){return new Za(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((_=>{_.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((p,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,an.newInvalidDocument(_)))}));let d=mu();return u.forEach(((p,h)=>{const _=a.get(p);_!==void 0&&Au(_.mutation,h,Vn.empty(),pt.now()),kf(t,h)&&(d=d.insert(p,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Yi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:QD(o.bundledQuery),readTime:Yi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.overlays=new _t(Ce.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=po();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=po(),a=t.length+1,u=new Ce(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,h=p.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new _t(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=po(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=po(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=o)););return se.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new wD(t,i));let a=this.qr.get(t);a===void 0&&(a=He(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.Qr=new Gt($t.$r),this.Ur=new Gt($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new $t(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new $t(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ce(new dt([])),i=new $t(t,e),o=new $t(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new dt([])),i=new $t(t,e),o=new $t(t,e+1);let a=He();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new $t(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||Ge(e.Yr,t.Yr)}static Kr(e,t){return Ge(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Gt($t.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new CD(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new $t(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Sg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),o=new $t(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const d=this.Xr(u.Yr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Gt(Ge);return t.forEach((o=>{const a=new $t(o,0),u=new $t(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Ce.isDocumentKey(a)||(a=a.child(""));const u=new $t(new Ce(a),0);let d=new Gt(Ge);return this.Zr.forEachWhile((p=>{const h=p.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(p.Yr)),!0)}),u),se.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(o=>{const a=new $t(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new $t(t,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.ri=e,this.docs=(function(){return new _t(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let i=Is();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():an.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Is();const u=t.path,d=new Ce(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:h,value:{document:_}}=p.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||F2(O2(_),i)<=0||(o.has(_.key)||kf(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Re(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new dM(this)}getSize(e){return se.resolve(this.size)}}class dM extends iM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.persistence=e,this.si=new Io((t=>Ig(t)),Rg),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Mg,this.targetCount=0,this.ai=za.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new za(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.ui={},this.overlays={},this.ci=new xf(0),this.li=!1,this.li=!0,this.hi=new lM,this.referenceDelegate=e(this),this.Pi=new fM(this),this.indexManager=new XD,this.remoteDocumentCache=(function(o){return new cM(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new JD(t),this.Ii=new oM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new uM(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ge("MemoryPersistence","Starting transaction:",e);const o=new hM(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class hM extends q2{constructor(e){super(),this.currentSequenceNumber=e}}class kg{constructor(e){this.persistence=e,this.Ri=new Mg,this.Vi=null}static mi(e){return new kg(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=Ce.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,xe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class uf{constructor(e,t){this.persistence=e,this.pi=new Io((i=>z2(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=nM(this,t)}static mi(e,t){return new uf(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,a.removeEntry(u,xe.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qd(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=He(),o=He();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Pg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return sN()?8:G2(un())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new pM;return this.Ss(e,t,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Sa()<=qe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ca(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Sa()<=qe.DEBUG&&ge("QueryEngine","Query:",Ca(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Sa()<=qe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ca(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$i(t))):se.resolve())}ys(e,t){if(QE(t))return se.resolve(null);let i=$i(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Bm(t,null,"F"),i=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=He(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const h=this.Ds(t,d);return this.Cs(t,h,u,p.readTime)?this.ys(e,Bm(t,null,"F")):this.vs(e,h,t,p)}))))})))))}ws(e,t,i,o){return QE(t)||o.isEqual(xe.min())?se.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?se.resolve(null):(Sa()<=qe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ca(t)),this.vs(e,u,t,L2(o,wu)).next((d=>d)))}))}Ds(e,t){let i=new Gt(VC(e));return t.forEach(((o,a)=>{kf(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return Sa()<=qe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ca(t)),this.ps.getDocumentsMatchingQuery(e,t,Cr.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="LocalStore",gM=3e8;class yM{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new _t(Ge),this.xs=new Io((a=>Ig(a)),Rg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function _M(n,e,t,i){return new yM(n,e,t,i)}async function rw(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let p=He();for(const h of o){u.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function vM(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,h,_){const E=h.batch,T=E.keys();let I=se.resolve();return T.forEach((k=>{I=I.next((()=>_.getEntry(p,k))).next((F=>{const L=h.docVersions.get(k);je(L!==null,48541),F.version.compareTo(L)<0&&(E.applyToRemoteDocument(F,h),F.isValidDocument()&&(F.setReadTime(h.commitVersion),_.addEntry(F)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=He();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(p=p.add(d.batch.mutations[h].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function ow(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function EM(n,e){const t=De(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;d.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,E))));let I=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(nn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,i)),o=o.insert(E,I),(function(F,L,Y){return F.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=gM?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(T,I,_)&&d.push(t.Pi.updateTargetData(a,I))}));let p=Is(),h=He();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(TM(a,u,e.documentUpdates).next((_=>{p=_.ks,h=_.qs}))),!i.isEqual(xe.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,p,h))).next((()=>p))})).then((a=>(t.Ms=o,a)))}function TM(n,e,t){let i=He(),o=He();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Is();return t.forEach(((d,p)=>{const h=a.get(d);p.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!h.isValidDocument()||p.version.compareTo(h.version)>0||p.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):ge(Vg,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",p.version)})),{ks:u,qs:o}}))}function AM(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Sg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function SM(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new yr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Km(n,e,t){const i=De(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!Wa(u))throw u;ge(Vg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function lT(n,e,t){const i=De(n);let o=xe.min(),a=He();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,h,_){const E=De(p),T=E.xs.get(_);return T!==void 0?se.resolve(E.Ms.get(T)):E.Pi.getTargetData(h,_)})(i,u,$i(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((p=>{a=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:xe.min(),t?a:He()))).next((d=>(CM(i,uD(e),d),{documents:d,Qs:a})))))}function CM(n,e,t){let i=n.Os.get(e)||xe.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class uT{constructor(){this.activeTargetIds=mD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wM{constructor(){this.Mo=new uT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new uT,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="ConnectivityMonitor";class dT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(cT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(cT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dd=null;function $m(){return Dd===null?Dd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dd++,"0x"+Dd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="RestConnection",RM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===sf?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=$m(),d=this.zo(e,t.toUriEncodedString());ge(mm,`Sending RPC '${e}' ${u}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,a);const{host:h}=new URL(d),_=Ya(h);return this.Jo(e,d,p,i,_).then((E=>(ge(mm,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Ba(mm,`RPC '${e}' ${u} failed with error: `,E,"url: ",d,"request:",i),E}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=RM[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class NM extends bM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=$m();return new Promise(((d,p)=>{const h=new aC;h.setWithCredentials(!0),h.listenOnce(lC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Bd.NO_ERROR:const E=h.getResponseJson();ge(rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),d(E);break;case Bd.TIMEOUT:ge(rn,`RPC '${e}' ${u} timed out`),p(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Bd.HTTP_ERROR:const T=h.getStatus();if(ge(rn,`RPC '${e}' ${u} failed with status:`,T,"response text:",h.getResponseText()),T>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const F=(function(Y){const ee=Y.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(ee)>=0?ee:te.UNKNOWN})(k.status);p(new pe(F,k.message))}else p(new pe(te.UNKNOWN,"Server responded with status "+h.getStatus()))}else p(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ge(rn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);ge(rn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=$m(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=dC(),d=cC(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(p.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=a.join("");ge(rn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=u.createWebChannel(_,p);this.I_(E);let T=!1,I=!1;const k=new xM({Yo:L=>{I?ge(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(T||(ge(rn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),ge(rn,`RPC '${e}' stream ${o} sending:`,L),E.send(L))},Zo:()=>E.close()}),F=(L,Y,ee)=>{L.listen(Y,(W=>{try{ee(W)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return F(E,pu.EventType.OPEN,(()=>{I||(ge(rn,`RPC '${e}' stream ${o} transport opened.`),k.o_())})),F(E,pu.EventType.CLOSE,(()=>{I||(I=!0,ge(rn,`RPC '${e}' stream ${o} transport closed`),k.a_(),this.E_(E))})),F(E,pu.EventType.ERROR,(L=>{I||(I=!0,Ba(rn,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),k.a_(new pe(te.UNAVAILABLE,"The operation could not be completed")))})),F(E,pu.EventType.MESSAGE,(L=>{var Y;if(!I){const ee=L.data[0];je(!!ee,16349);const W=ee,ae=(W==null?void 0:W.error)||((Y=W[0])==null?void 0:Y.error);if(ae){ge(rn,`RPC '${e}' stream ${o} received error:`,ae);const oe=ae.status;let le=(function(N){const U=Ut[N];if(U!==void 0)return YC(U)})(oe),D=ae.message;le===void 0&&(le=te.INTERNAL,D="Unknown error status: "+oe+" with message "+ae.message),I=!0,k.a_(new pe(le,D)),E.close()}else ge(rn,`RPC '${e}' stream ${o} received:`,ee),k.u_(ee)}})),F(d,uC.STAT_EVENT,(L=>{L.stat===km.PROXY?ge(rn,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===km.NOPROXY&&ge(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(n){return new PD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="PersistentStream";class lw{constructor(e,t,i,o,a,u,d,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new aw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(ws(t.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new pe(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(fT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(fT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class DM extends lw{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=LD(this.serializer,e),i=(function(a){if(!("targetChange"in a))return xe.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?xe.min():u.readTime?Yi(u.readTime):xe.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=zm(this.serializer),t.addTarget=(function(a,u){let d;const p=u.target;if(d=Om(p)?{documents:BD(a,p)}:{query:qD(a,p).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=XC(a,u.resumeToken);const h=qm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(xe.min())>0){d.readTime=lf(a,u.snapshotVersion.toTimestamp());const h=qm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=HD(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=zm(this.serializer),t.removeTarget=e,this.q_(t)}}class MM extends lw{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=FD(e.writeResults,e.commitTime),i=Yi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=zm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>OD(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{}class PM extends kM{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Gm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pe(te.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Gm(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(te.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class VM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ws(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class UM{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Ro(this)&&(ge(_o,"Restarting streams for network reachability change."),await(async function(p){const h=De(p);h.Ea.add(4),await Fu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Ff(h)})(this))}))})),this.Ra=new VM(i,o)}}async function Ff(n){if(Ro(n))for(const e of n.da)await e(!0)}async function Fu(n){for(const e of n.da)await e(!1)}function uw(n,e){const t=De(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fg(t)?Og(t):ja(t).O_()&&Lg(t,e))}function Ug(n,e){const t=De(n),i=ja(t);t.Ia.delete(e),i.O_()&&cw(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ro(t)&&t.Ra.set("Unknown"))}function Lg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ja(n).Y_(e)}function cw(n,e){n.Va.Ue(e),ja(n).Z_(e)}function Og(n){n.Va=new ND({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ja(n).start(),n.Ra.ua()}function Fg(n){return Ro(n)&&!ja(n).x_()&&n.Ia.size>0}function Ro(n){return De(n).Ea.size===0}function dw(n){n.Va=void 0}async function LM(n){n.Ra.set("Online")}async function OM(n){n.Ia.forEach(((e,t)=>{Lg(n,e)}))}async function FM(n,e){dw(n),Fg(n)?(n.Ra.ha(e),Og(n)):n.Ra.set("Unknown")}async function BM(n,e,t){if(n.Ra.set("Online"),e instanceof QC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){ge(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cf(n,i)}else if(e instanceof zd?n.Va.Ze(e):e instanceof JC?n.Va.st(e):n.Va.tt(e),!t.isEqual(xe.min()))try{const i=await ow(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((p,h)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(p.resumeToken,u))}})),d.targetMismatches.forEach(((p,h)=>{const _=a.Ia.get(p);if(!_)return;a.Ia.set(p,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),cw(a,p);const E=new yr(_.target,p,h,_.sequenceNumber);Lg(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ge(_o,"Failed to raise snapshot:",i),await cf(n,i)}}async function cf(n,e,t){if(!Wa(e))throw e;n.Ea.add(1),await Fu(n),n.Ra.set("Offline"),t||(t=()=>ow(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(_o,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ff(n)}))}function fw(n,e){return e().catch((t=>cf(n,t,e)))}async function Bf(n){const e=De(n),t=br(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sg;for(;qM(e);)try{const o=await AM(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,GM(e,o)}catch(o){await cf(e,o)}hw(e)&&pw(e)}function qM(n){return Ro(n)&&n.Ta.length<10}function GM(n,e){n.Ta.push(e);const t=br(n);t.O_()&&t.X_&&t.ea(e.mutations)}function hw(n){return Ro(n)&&!br(n).x_()&&n.Ta.length>0}function pw(n){br(n).start()}async function HM(n){br(n).ra()}async function zM(n){const e=br(n);for(const t of n.Ta)e.ea(t.mutations)}async function KM(n,e,t){const i=n.Ta.shift(),o=xg.from(i,e,t);await fw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Bf(n)}async function $M(n,e){e&&br(n).X_&&await(async function(i,o){if((function(u){return RD(u)&&u!==te.ABORTED})(o.code)){const a=i.Ta.shift();br(i).B_(),await fw(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Bf(i)}})(n,e),hw(n)&&pw(n)}async function hT(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),ge(_o,"RemoteStore received new credentials");const i=Ro(t);t.Ea.add(3),await Fu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ff(t)}async function YM(n,e){const t=De(n);e?(t.Ea.delete(2),await Ff(t)):e||(t.Ea.add(2),await Fu(t),t.Ra.set("Unknown"))}function ja(n){return n.ma||(n.ma=(function(t,i,o){const a=De(t);return a.sa(),new DM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:LM.bind(null,n),t_:OM.bind(null,n),r_:FM.bind(null,n),H_:BM.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Fg(n)?Og(n):n.Ra.set("Unknown")):(await n.ma.stop(),dw(n))}))),n.ma}function br(n){return n.fa||(n.fa=(function(t,i,o){const a=De(t);return a.sa(),new MM(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:HM.bind(null,n),r_:$M.bind(null,n),ta:zM.bind(null,n),na:KM.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Bf(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(_o,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Bg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qg(n,e){if(ws("AsyncQueue",`${e}: ${n}`),Wa(n))return new pe(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(e){return new Da(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ce.comparator(t.key,i.key):(t,i)=>Ce.comparator(t.key,i.key),this.keyedMap=mu(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Da;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.ga=new _t(Ce.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ka{constructor(e,t,i,o,a,u,d,p,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ka(e,t,Da.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class QM{constructor(){this.queries=mT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=De(t),a=o.queries;o.queries=mT(),a.forEach(((u,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function mT(){return new Io((n=>PC(n)),Mf)}async function XM(n,e){const t=De(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new JM,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=qg(u,`Initialization of query '${Ca(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Gg(t)}async function WM(n,e){const t=De(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ZM(n,e){const t=De(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.Sa)d.Fa(o)&&(i=!0);u.wa=o}}i&&Gg(t)}function jM(n,e,t){const i=De(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function Gg(n){n.Ca.forEach((e=>{e.next()}))}var Ym,gT;(gT=Ym||(Ym={})).Ma="default",gT.Cache="cache";class ek{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ka(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.key=e}}class gw{constructor(e){this.key=e}}class tk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=VC(e),this.tu=new Da(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new pT,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),I=kf(this.query,E)?E:null,k=!!T&&this.mutatedKeys.has(T.key),F=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let L=!1;T&&I?T.data.isEqual(I.data)?k!==F&&(i.track({type:3,doc:I}),L=!0):this.su(T,I)||(i.track({type:2,doc:I}),L=!0,(p&&this.eu(I,p)>0||h&&this.eu(I,h)<0)&&(d=!0)):!T&&I?(i.track({type:0,doc:I}),L=!0):T&&!I&&(i.track({type:1,doc:T}),L=!0,(p||h)&&(d=!0)),L&&(I?(u=u.add(I),a=F?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,E)=>(function(I,k){const F=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:L})}};return F(I)-F(k)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,h=p!==this.Za;return this.Za=p,u.length!==0||h?{snapshot:new Ka(this.query,e.tu,a,u,e.mutatedKeys,p===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new pT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new gw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new mw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ka.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hg="SyncEngine";class nk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ik{constructor(e){this.key=e,this.hu=!1}}class sk{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Io((d=>PC(d)),Mf),this.Iu=new Map,this.Eu=new Set,this.du=new _t(Ce.comparator),this.Au=new Map,this.Ru=new Mg,this.Vu={},this.mu=new Map,this.fu=za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rk(n,e,t=!0){const i=Aw(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await yw(i,e,t,!0),o}async function ok(n,e){const t=Aw(n);await yw(t,e,!0,!1)}async function yw(n,e,t,i){const o=await SM(n.localStore,$i(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await ak(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&uw(n.remoteStore,o),d}async function ak(n,e,t,i,o){n.pu=(E,T,I)=>(async function(F,L,Y,ee){let W=L.view.ru(Y);W.Cs&&(W=await lT(F.localStore,L.query,!1).then((({documents:D})=>L.view.ru(D,W))));const ae=ee&&ee.targetChanges.get(L.targetId),oe=ee&&ee.targetMismatches.get(L.targetId)!=null,le=L.view.applyChanges(W,F.isPrimaryClient,ae,oe);return _T(F,L.targetId,le.au),le.snapshot})(n,E,T,I);const a=await lT(n.localStore,e,!0),u=new tk(e,a.Qs),d=u.ru(a.documents),p=Ou.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(d,n.isPrimaryClient,p);_T(n,t,h.au);const _=new nk(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function lk(n,e,t){const i=De(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!Mf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Km(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Ug(i.remoteStore,o.targetId),Jm(i,o.targetId)})).catch(Xa)):(Jm(i,o.targetId),await Km(i.localStore,o.targetId,!0))}async function uk(n,e){const t=De(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ug(t.remoteStore,i.targetId))}async function ck(n,e,t){const i=yk(n);try{const o=await(function(u,d){const p=De(u),h=pt.now(),_=d.reduce(((I,k)=>I.add(k.key)),He());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let k=Is(),F=He();return p.Ns.getEntries(I,_).next((L=>{k=L,k.forEach(((Y,ee)=>{ee.isValidDocument()||(F=F.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,k))).next((L=>{E=L;const Y=[];for(const ee of d){const W=AD(ee,E.get(ee.key).overlayedDocument);W!=null&&Y.push(new Mr(ee.key,W,wC(W.value.mapValue),pn.exists(!0)))}return p.mutationQueue.addMutationBatch(I,h,Y,d)})).next((L=>{T=L;const Y=L.applyToLocalDocumentSet(E,F);return p.documentOverlayCache.saveOverlays(I,L.batchId,Y)}))})).then((()=>({batchId:T.batchId,changes:LC(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,p){let h=u.Vu[u.currentUser.toKey()];h||(h=new _t(Ge)),h=h.insert(d,p),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await Bu(i,o.changes),await Bf(i.remoteStore)}catch(o){const a=qg(o,"Failed to persist write");t.reject(a)}}async function _w(n,e){const t=De(n);try{const i=await EM(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?je(u.hu,14607):o.removedDocuments.size>0&&(je(u.hu,42227),u.hu=!1))})),await Bu(t,i,e)}catch(i){await Xa(i)}}function yT(n,e,t){const i=De(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const p=De(u);p.onlineState=d;let h=!1;p.queries.forEach(((_,E)=>{for(const T of E.Sa)T.va(d)&&(h=!0)})),h&&Gg(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dk(n,e,t){const i=De(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new _t(Ce.comparator);u=u.insert(a,an.newNoDocument(a,xe.min()));const d=He().add(a),p=new Lf(xe.min(),new Map,new _t(Ge),u,d);await _w(i,p),i.du=i.du.remove(a),i.Au.delete(e),zg(i)}else await Km(i.localStore,e,!1).then((()=>Jm(i,e,t))).catch(Xa)}async function fk(n,e){const t=De(n),i=e.batch.batchId;try{const o=await vM(t.localStore,e);Ew(t,i,null),vw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Bu(t,o)}catch(o){await Xa(o)}}async function hk(n,e,t){const i=De(n);try{const o=await(function(u,d){const p=De(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return p.mutationQueue.lookupMutationBatch(h,d).next((E=>(je(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(h,E)))).next((()=>p.mutationQueue.performConsistencyCheck(h))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>p.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);Ew(i,e,t),vw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Bu(i,o)}catch(o){await Xa(o)}}function vw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Ew(n,e,t){const i=De(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Tw(n,i)}))}function Tw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ug(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),zg(n))}function _T(n,e,t){for(const i of t)i instanceof mw?(n.Ru.addReference(i.key,e),pk(n,i)):i instanceof gw?(ge(Hg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Tw(n,i.key)):Re(19791,{wu:i})}function pk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ge(Hg,"New document in limbo: "+t),n.Eu.add(i),zg(n))}function zg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ce(dt.fromString(e)),i=n.fu.next();n.Au.set(i,new ik(t)),n.du=n.du.insert(t,i),uw(n.remoteStore,new yr($i(MC(t.path)),i,"TargetPurposeLimboResolution",xf.ce))}}async function Bu(n,e,t){const i=De(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{u.push(i.pu(p,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const E=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(h){o.push(h);const E=Pg.As(p.targetId,h);a.push(E)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(p,h){const _=De(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(h,(T=>se.forEach(T.Es,(I=>_.persistence.referenceDelegate.addReference(E,T.targetId,I))).next((()=>se.forEach(T.ds,(I=>_.persistence.referenceDelegate.removeReference(E,T.targetId,I)))))))))}catch(E){if(!Wa(E))throw E;ge(Vg,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const I=_.Ms.get(T),k=I.snapshotVersion,F=I.withLastLimboFreeSnapshotVersion(k);_.Ms=_.Ms.insert(T,F)}}})(i.localStore,a))}async function mk(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){ge(Hg,"User change. New user:",e.toKey());const i=await rw(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((p=>{p.reject(new pe(te.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bu(t,i.Ls)}}function gk(n,e){const t=De(n),i=t.Au.get(e);if(i&&i.hu)return He().add(i.key);{let o=He();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function Aw(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_w.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dk.bind(null,e),e.Pu.H_=ZM.bind(null,e.eventManager),e.Pu.yu=jM.bind(null,e.eventManager),e}function yk(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hk.bind(null,e),e}class df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Of(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _M(this.persistence,new mM,e.initialUser,this.serializer)}Cu(e){return new sw(kg.mi,this.serializer)}Du(e){return new wM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}df.provider={build:()=>new df};class _k extends df{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){je(this.persistence.referenceDelegate instanceof uf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new eM(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new sw((i=>uf.mi(i,t)),this.serializer)}}class Qm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,this.syncEngine),await YM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new QM})()}createDatastore(e){const t=Of(e.databaseInfo.databaseId),i=(function(a){return new NM(a)})(e.databaseInfo);return(function(a,u,d,p){return new PM(a,u,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new UM(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>yT(this.syncEngine,t,0)),(function(){return dT.v()?new dT:new IM})())}createSyncEngine(e,t){return(function(o,a,u,d,p,h,_){const E=new sk(o,a,u,d,p,h);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=De(o);ge(_o,"RemoteStore shutting down."),a.Ea.add(5),await Fu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Qm.provider={build:()=>new Qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="FirestoreClient";class Ek{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=Ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ge(xr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ge(xr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=qg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ym(n,e){n.asyncQueue.verifyOperationInProgress(),ge(xr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await rw(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function vT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Tk(n);ge(xr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>hT(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>hT(e.remoteStore,o))),n._onlineComponents=e}async function Tk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(xr,"Using user provided OfflineComponentProvider");try{await ym(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ba("Error using user provided cache. Falling back to memory cache: "+t),await ym(n,new df)}}else ge(xr,"Using default OfflineComponentProvider"),await ym(n,new _k(void 0));return n._offlineComponents}async function Sw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(xr,"Using user provided OnlineComponentProvider"),await vT(n,n._uninitializedComponentsProvider._online)):(ge(xr,"Using default OnlineComponentProvider"),await vT(n,new Qm))),n._onlineComponents}function Ak(n){return Sw(n).then((e=>e.syncEngine))}async function Sk(n){const e=await Sw(n),t=e.eventManager;return t.onListen=rk.bind(null,e.syncEngine),t.onUnlisten=lk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ok.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uk.bind(null,e.syncEngine),t}function Ck(n,e,t={}){const i=new Tr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,p,h){const _=new vk({next:T=>{_.Nu(),u.enqueueAndForget((()=>WM(a,E))),T.fromCache&&p.source==="server"?h.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(T)},error:T=>h.reject(T)}),E=new ek(d,_,{includeMetadataChanges:!0,qa:!0});return XM(a,E)})(await Sk(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="firestore.googleapis.com",TT=!0;class AT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ww,this.ssl=TT}else this.host=e.host,this.ssl=e.ssl??TT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZD)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new I2;switch(i.type){case"firstParty":return new N2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=ET.get(t);i&&(ge("ComponentProvider","Removing Datastore"),ET.delete(t),i.terminate())})(this),Promise.resolve()}}function wk(n,e,t,i={}){var h;n=ji(n,qf);const o=Ya(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(QS(`https://${d}`),XS("Firestore",!0)),a.host!==ww&&a.host!==d&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...a,host:d,ssl:o,emulatorOptions:i};if(!Sr(p,u)&&(n._setSettings(p),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=on.MOCK_USER;else{_=Xx(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(T)}n._authCredentials=new R2(new hC(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new bo(this.firestore,e,this._query)}}class Ft{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Uu(t,Ft._jsonSchema))return new Ft(e,i||null,new Ce(dt.fromString(t.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Ot("string",Ft._jsonSchemaVersion),referencePath:Ot("string")};class Ar extends bo{constructor(e,t,i){super(e,t,MC(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Ce(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function qu(n,e,...t){if(n=yt(n),pC("collection","path",e),n instanceof qf){const i=dt.fromString(e,...t);return VE(i),new Ar(n,null,i)}{if(!(n instanceof Ft||n instanceof Ar))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dt.fromString(e,...t));return VE(i),new Ar(n.firestore,null,i)}}function xo(n,e,...t){if(n=yt(n),arguments.length===1&&(e=Ag.newId()),pC("doc","path",e),n instanceof qf){const i=dt.fromString(e,...t);return PE(i),new Ft(n,null,new Ce(i))}{if(!(n instanceof Ft||n instanceof Ar))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(dt.fromString(e,...t));return PE(i),new Ft(n.firestore,n instanceof Ar?n.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="AsyncQueue";class CT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new aw(this,"async_queue_retry"),this._c=()=>{const i=gm();i&&ge(ST,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=gm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Tr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wa(e))throw e;ge(ST,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ws("INTERNAL UNHANDLED ERROR: ",wT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Bg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Re(47125,{Pc:wT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function wT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class No extends qf{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new CT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CT(e),this._firestoreClient=void 0,await e}}}function Ik(n,e){const t=typeof n=="object"?n:Eg(),i=typeof n=="string"?n:sf,o=wo(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=Jx("firestore");a&&wk(o,...a)}return o}function Kg(n){if(n._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Rk(n),n._firestoreClient}function Rk(n){var i,o,a;const e=n._freezeSettings(),t=(function(d,p,h,_){return new Y2(d,p,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Cw(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Ek(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(nn.fromBase64String(e))}catch(t){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wn(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Uu(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:Ot("string",Wn._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ji._jsonSchemaVersion}}static fromJSON(e){if(Uu(e,Ji._jsonSchema))return new Ji(e.latitude,e.longitude)}}Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:Ot("string",Ji._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Uu(e,Qi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Qi(e.vectorValues);throw new pe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qi._jsonSchemaVersion="firestore/vectorValue/1.0",Qi._jsonSchema={type:Ot("string",Qi._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=/^__.*__$/;class xk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lu(e,this.data,t,this.fieldTransforms)}}class Iw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:n})}}class $g{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ff(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rw(this.Ac)&&bk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Nk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Of(e)}Cc(e,t,i,o=!1){return new $g({Ac:e,methodName:t,Dc:i,path:tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hu(n){const e=n._freezeSettings(),t=Of(n._databaseId);return new Nk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yg(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);Qg("Data must be an object, but it was:",u,i);const d=Nw(i,u);let p,h;if(a.merge)p=new Vn(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const T=Xm(e,E,t);if(!u.contains(T))throw new pe(te.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Mw(_,T)||_.push(T)}p=new Vn(_),h=u.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,h=u.fieldTransforms;return new xk(new wn(d),p,h)}class Hf extends Gf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hf}}class Jg extends Gf{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Mu(e.serializer,BC(e.serializer,this.Fc));return new _D(e.path,t)}isEqual(e){return e instanceof Jg&&this.Fc===e.Fc}}function bw(n,e,t,i){const o=n.Cc(1,e,t);Qg("Data must be an object, but it was:",o,i);const a=[],u=wn.empty();Dr(i,((p,h)=>{const _=Xg(e,p,t);h=yt(h);const E=o.yc(_);if(h instanceof Hf)a.push(_);else{const T=zu(h,E);T!=null&&(a.push(_),u.set(_,T))}}));const d=new Vn(a);return new Iw(u,d,o.fieldTransforms)}function xw(n,e,t,i,o,a){const u=n.Cc(1,e,t),d=[Xm(e,i,t)],p=[o];if(a.length%2!=0)throw new pe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(Xm(e,a[T])),p.push(a[T+1]);const h=[],_=wn.empty();for(let T=d.length-1;T>=0;--T)if(!Mw(h,d[T])){const I=d[T];let k=p[T];k=yt(k);const F=u.yc(I);if(k instanceof Hf)h.push(I);else{const L=zu(k,F);L!=null&&(h.push(I),_.set(I,L))}}const E=new Vn(h);return new Iw(_,E,u.fieldTransforms)}function Dk(n,e,t,i=!1){return zu(t,n.Cc(i?4:3,e))}function zu(n,e){if(Dw(n=yt(n)))return Qg("Unsupported field value:",e,n),Nw(n,e);if(n instanceof Gf)return(function(i,o){if(!Rw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let p=zu(d,o.wc(u));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=yt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=pt.fromDate(i);return{timestampValue:lf(o.serializer,a)}}if(i instanceof pt){const a=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:lf(o.serializer,a)}}if(i instanceof Ji)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wn)return{bytesValue:XC(o.serializer,i._byteString)};if(i instanceof Ft){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Dg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Qi)return(function(u,d){return{mapValue:{fields:{[SC]:{stringValue:CC},[rf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return bg(d.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${bf(i)}`)})(n,e)}function Nw(n,e){const t={};return yC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dr(n,((i,o)=>{const a=zu(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function Dw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof Ji||n instanceof Wn||n instanceof Ft||n instanceof Gf||n instanceof Qi)}function Qg(n,e,t){if(!Dw(t)||!mC(t)){const i=bf(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Xm(n,e,t){if((e=yt(e))instanceof Gu)return e._internalPath;if(typeof e=="string")return Xg(n,e);throw ff("Field path arguments must be of type string or ",n,!1,void 0,t)}const Mk=new RegExp("[~\\*/\\[\\]]");function Xg(n,e,t){if(e.search(Mk)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gu(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ff(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||u)&&(p+=" (found",a&&(p+=` in field ${i}`),u&&(p+=` in document ${o}`),p+=")"),new pe(te.INVALID_ARGUMENT,d+n+p)}function Mw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class kk extends kw{data(){return super.data()}}function Wg(n,e){return typeof e=="string"?Xg(n,e):e instanceof Gu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zg{}class Pw extends Zg{}function jg(n,e,...t){let i=[];e instanceof Zg&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((p=>p instanceof ty)).length,d=a.filter((p=>p instanceof ey)).length;if(u>1||u>0&&d>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class ey extends Pw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ey(e,t,i)}_apply(e){const t=this._parse(e);return Vw(e._query,t),new bo(e.firestore,e.converter,Fm(e._query,t))}_parse(e){const t=Hu(e.firestore);return(function(a,u,d,p,h,_,E){let T;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){RT(E,_);const k=[];for(const F of E)k.push(IT(p,a,F));T={arrayValue:{values:k}}}else T=IT(p,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||RT(E,_),T=Dk(d,u,E,_==="in"||_==="not-in");return Lt.create(h,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class ty extends Zg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ty(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:_i.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const p of d)Vw(u,p),u=Fm(u,p)})(e._query,t),new bo(e.firestore,e.converter,Fm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ny extends Pw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ny(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xu(a,u)})(e._query,this._field,this._direction);return new bo(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Za(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function iy(n,e="asc"){const t=e,i=Wg("orderBy",n);return ny._create(i,t)}function IT(n,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kC(e)&&t.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(dt.fromString(t));if(!Ce.isDocumentKey(i))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return HE(n,new Ce(i))}if(t instanceof Ft)return HE(n,t._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bf(t)}.`)}function RT(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vw(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Vk{convertValue(e,t="none"){switch(Rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Dr(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[rf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>It(u.doubleValue)));return new Qi(t)}convertGeoPoint(e){return new Ji(It(e.latitude),It(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Df(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const t=wr(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dt.fromString(e);je(nw(i),9688,{name:e});const o=new Ru(i.get(1),i.get(3)),a=new Ce(i.popFirst(5));return o.isEqual(t)||ws(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Md{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ma extends kw{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Wg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ma._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ma._jsonSchema={type:Ot("string",Ma._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Kd extends Ma{data(e={}){return super.data(e)}}class ka{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Md(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Kd(this._firestore,this._userDataWriter,i.key,i,new Md(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const p=new Kd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Md(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const p=new Kd(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Md(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,_=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:Uk(d.type),doc:p,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ka._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ag.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Uk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}ka._jsonSchemaVersion="firestore/querySnapshot/1.0",ka._jsonSchema={type:Ot("string",ka._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Lk extends Vk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}}function ry(n){n=ji(n,bo);const e=ji(n.firestore,No),t=Kg(e),i=new Lk(e);return Pk(n._query),Ck(t,n._query).then((o=>new ka(e,i,n,o)))}function Ok(n,e,t){n=ji(n,Ft);const i=ji(n.firestore,No),o=sy(n.converter,e,t);return Ku(i,[Yg(Hu(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,pn.none())])}function Fk(n,e,t,...i){n=ji(n,Ft);const o=ji(n.firestore,No),a=Hu(o);let u;return u=typeof(e=yt(e))=="string"||e instanceof Gu?xw(a,"updateDoc",n._key,e,t,i):bw(a,"updateDoc",n._key,e),Ku(o,[u.toMutation(n._key,pn.exists(!0))])}function Uw(n){return Ku(ji(n.firestore,No),[new Uf(n._key,pn.none())])}function Lw(n,e){const t=ji(n.firestore,No),i=xo(n),o=sy(n.converter,e);return Ku(t,[Yg(Hu(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,pn.exists(!1))]).then((()=>i))}function Ku(n,e){return(function(i,o){const a=new Tr;return i.asyncQueue.enqueueAndForget((async()=>ck(await Ak(i),o,a))),a.promise})(Kg(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hu(e)}set(e,t,i){this._verifyNotCommitted();const o=_m(e,this._firestore),a=sy(o.converter,t,i),u=Yg(this._dataReader,"WriteBatch.set",o._key,a,o.converter!==null,i);return this._mutations.push(u.toMutation(o._key,pn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const a=_m(e,this._firestore);let u;return u=typeof(t=yt(t))=="string"||t instanceof Gu?xw(this._dataReader,"WriteBatch.update",a._key,t,i,o):bw(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_m(e,this._firestore);return this._mutations=this._mutations.concat(new Uf(t._key,pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _m(n,e){if((n=yt(n)).firestore!==e)throw new pe(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function qk(n){return new Jg("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(n){return Kg(n=ji(n,No)),new Bk(n,(e=>Ku(n,e)))}(function(e,t=!0){(function(o){Qa=o})(Ja),Zi(new yi("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new No(new b2(i.getProvider("auth-internal")),new D2(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ru(h.options.projectId,_)})(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Zn(NE,DE,e),Zn(NE,DE,"esm2020")})();function Fw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gk=Fw,Bw=new Co("auth","Firebase",Fw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=new Rf("@firebase/auth");function Hk(n,...e){hf.logLevel<=qe.WARN&&hf.warn(`Auth (${Ja}): ${n}`,...e)}function $d(n,...e){hf.logLevel<=qe.ERROR&&hf.error(`Auth (${Ja}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(n,...e){throw oy(n,...e)}function Xi(n,...e){return oy(n,...e)}function qw(n,e,t){const i={...Gk(),[e]:t};return new Co("auth","Firebase",i).create(e,{appName:n.name})}function Ss(n){return qw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Bw.create(n,...e)}function Ie(n,e,...t){if(!n)throw oy(e,...t)}function Ts(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $d(e),new Error(e)}function Rs(n,e){n||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function zk(){return bT()==="http:"||bT()==="https:"}function bT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zk()||WS()||"connection"in navigator)?navigator.onLine:!0}function $k(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rs(t>e,"Short delay should be less than long delay!"),this.isMobile=jx()||nN()}get(){return Kk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(n,e){Rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qk=new $u(3e4,6e4);function kr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function xs(n,e,t,i,o={}){return Hw(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Vu({key:n.config.apiKey,...u}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:p,...a};return tN()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Ya(n.emulatorConfig.host)&&(h.credentials="include"),Gw.fetch()(await zw(n,n.config.apiHost,t,d),h)})}async function Hw(n,e,t){n._canInitEmulator=!1;const i={...Yk,...e};try{const o=new Wk(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw kd(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[p,h]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw kd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw kd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw kd(n,"user-disabled",u);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw qw(n,_,h);vi(n,_)}}catch(o){if(o instanceof Ei)throw o;vi(n,"network-request-failed",{message:String(o)})}}async function Yu(n,e,t,i,o={}){const a=await xs(n,e,t,i,o);return"mfaPendingCredential"in a&&vi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function zw(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?ay(n.config,o):`${n.config.apiScheme}://${o}`;return Jk.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function Xk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Xi(this.auth,"network-request-failed")),Qk.get())})}}function kd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Xi(n,e,i);return o.customData._tokenResponse=t,o}function xT(n){return n!==void 0&&n.enterprise!==void 0}class Zk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Xk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jk(n,e){return xs(n,"GET","/v2/recaptchaConfig",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eP(n,e){return xs(n,"POST","/v1/accounts:delete",e)}async function pf(n,e){return xs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tP(n,e=!1){const t=yt(n),i=await t.getIdToken(e),o=ly(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:Su(vm(o.auth_time)),issuedAtTime:Su(vm(o.iat)),expirationTime:Su(vm(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function vm(n){return Number(n)*1e3}function ly(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{const o=KS(t);return o?JSON.parse(o):($d("Failed to decode base64 JWT payload"),null)}catch(o){return $d("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function NT(n){const e=ly(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ei&&nP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function nP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mf(n){var E;const e=n.auth,t=await n.getIdToken(),i=await $a(n,pf(e,{idToken:t}));Ie(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(E=o.providerUserInfo)!=null&&E.length?Kw(o.providerUserInfo):[],u=rP(n.providerData,a),d=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=d?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function sP(n){const e=yt(n);await mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rP(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Kw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(n,e){const t=await Hw(n,{},async()=>{const i=Vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await zw(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Ya(n.emulatorConfig.host)&&(p.credentials="include"),Gw.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aP(n,e){return xs(n,"POST","/v2/accounts:revokeToken",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=NT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await oP(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Pa;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pa,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new iP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await $a(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return tP(this,e)}reload(){return sP(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await mf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await $a(this,eP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:I,providerData:k,stsTokenManager:F}=t;Ie(E&&F,e,"internal-error");const L=Pa.fromJSON(this.name,F);Ie(typeof E=="string",e,"internal-error"),dr(i,e.name),dr(o,e.name),Ie(typeof T=="boolean",e,"internal-error"),Ie(typeof I=="boolean",e,"internal-error"),dr(a,e.name),dr(u,e.name),dr(d,e.name),dr(p,e.name),dr(h,e.name),dr(_,e.name);const Y=new pi({uid:E,auth:e,email:o,emailVerified:T,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:L,createdAt:h,lastLoginAt:_});return k&&Array.isArray(k)&&(Y.providerData=k.map(ee=>({...ee}))),p&&(Y._redirectEventId=p),Y}static async _fromIdTokenResponse(e,t,i=!1){const o=new Pa;o.updateFromServerResponse(t);const a=new pi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await mf(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?Kw(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Pa;d.updateFromIdToken(i);const p=new pi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Zm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,h),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Map;function As(n){Rs(n instanceof Function,"Expected a class definition");let e=DT.get(n);return e?(Rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,DT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$w.type="NONE";const MT=$w;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(n,e,t){return`firebase:${n}:${e}:${t}`}class Va{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=Yd(this.userKey,o.apiKey,a),this.fullPersistenceKey=Yd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await pf(this.auth,{idToken:e}).catch(()=>{});return t?pi._fromGetAccountInfoResponse(this.auth,t,e):null}return pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Va(As(MT),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||As(MT);const u=Yd(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const _=await h._get(u);if(_){let E;if(typeof _=="string"){const T=await pf(e,{idToken:_}).catch(()=>{});if(!T)break;E=await pi._fromGetAccountInfoResponse(e,T,_)}else E=pi._fromJSON(e,_);h!==a&&(d=E),a=h;break}}catch{}const p=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Va(a,e,i):(a=p[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new Va(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zw(e))return"Blackberry";if(jw(e))return"Webos";if(Jw(e))return"Safari";if((e.includes("chrome/")||Qw(e))&&!e.includes("edge/"))return"Chrome";if(Ww(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Yw(n=un()){return/firefox\//i.test(n)}function Jw(n=un()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qw(n=un()){return/crios\//i.test(n)}function Xw(n=un()){return/iemobile/i.test(n)}function Ww(n=un()){return/android/i.test(n)}function Zw(n=un()){return/blackberry/i.test(n)}function jw(n=un()){return/webos/i.test(n)}function uy(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lP(n=un()){var e;return uy(n)&&!!((e=window.navigator)!=null&&e.standalone)}function uP(){return iN()&&document.documentMode===10}function eI(n=un()){return uy(n)||Ww(n)||jw(n)||Zw(n)||/windows phone/i.test(n)||Xw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n,e=[]){let t;switch(n){case"Browser":t=kT(un());break;case"Worker":t=`${kT(un())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ja}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const p=e(a);u(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(n,e={}){return xs(n,"GET","/v2/passwordPolicy",kr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=6;class hP{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??fP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new PT(this),this.idTokenSubscription=new PT(this),this.beforeStateQueue=new cP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=As(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Va.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pf(this,{idToken:e}),i=await pi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Xn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&(p!=null&&p.user)&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$k()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Ss(this));const t=e?yt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dP(this),t=new hP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Co("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await aP(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&As(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Va.create(this,[As(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&Hk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Do(n){return yt(n)}class PT{constructor(e){this.auth=e,this.observer=null,this.addObserver=cN(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mP(n){zf=n}function nI(n){return zf.loadJS(n)}function gP(){return zf.recaptchaEnterpriseScript}function yP(){return zf.gapiScript}function _P(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class vP{constructor(){this.enterprise=new EP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class EP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const TP="recaptcha-enterprise",iI="NO_RECAPTCHA";class AP{constructor(e){this.type=TP,this.auth=Do(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{jk(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new Zk(p);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(p=>{d(p)})})}function o(a,u,d){const p=window.grecaptcha;xT(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(iI)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vP().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&xT(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=gP();p.length!==0&&(p+=d),nI(p).then(()=>{o(d,a,u)}).catch(h=>{u(h)})}}).catch(d=>{u(d)})})}}async function VT(n,e,t,i=!1,o=!1){const a=new AP(n);let u;if(o)u=iI;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function jm(n,e,t,i,o){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await VT(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await VT(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n,e){const t=wo(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Sr(a,e??{}))return o;vi(o,"already-initialized")}return t.initialize({options:e})}function CP(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(As);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function wP(n,e,t){const i=Do(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=sI(e),{host:u,port:d}=IP(e),p=d===null?"":`:${d}`,h={url:`${a}//${u}${p}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(Sr(h,i.config.emulator)&&Sr(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ya(u)?(QS(`${a}//${u}${p}`),XS("Auth",!0)):RP()}function sI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function IP(n){const e=sI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:UT(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:UT(u)}}}function UT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function RP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,t){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function bP(n,e){return xs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(n,e){return Yu(n,"POST","/v1/accounts:signInWithPassword",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(n,e){return Yu(n,"POST","/v1/accounts:signInWithEmailLink",kr(n,e))}async function DP(n,e){return Yu(n,"POST","/v1/accounts:signInWithEmailLink",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends cy{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ku(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ku(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jm(e,t,"signInWithPassword",xP);case"emailLink":return NP(e,{email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jm(e,i,"signUpPassword",bP);case"emailLink":return DP(e,{idToken:t,email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(n,e){return Yu(n,"POST","/v1/accounts:signInWithIdp",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="http://localhost";class vo extends cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new vo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ua(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ua(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ua(e,t)}buildRequest(){const e={requestUri:MP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PP(n){const e=fu(hu(n)).link,t=e?fu(hu(e)).deep_link_id:null,i=fu(hu(n)).deep_link_id;return(i?fu(hu(i)).link:null)||i||t||e||n}class dy{constructor(e){const t=fu(hu(e)),i=t.apiKey??null,o=t.oobCode??null,a=kP(t.mode??null);Ie(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=PP(e);try{return new dy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.providerId=el.PROVIDER_ID}static credential(e,t){return ku._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=dy.parseLink(t);return Ie(i,"argument-error"),ku._fromEmailAndCode(e,i.code,i.tenantId)}}el.PROVIDER_ID="password";el.EMAIL_PASSWORD_SIGN_IN_METHOD="password";el.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends rI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Ju{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vo._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return hr.credential(t,i)}catch{return null}}}hr.GOOGLE_SIGN_IN_METHOD="google.com";hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Ju{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Ju{constructor(){super("twitter.com")}static credential(e,t){return vo._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return mr.credential(t,i)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(n,e){return Yu(n,"POST","/v1/accounts:signUp",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await pi._fromIdTokenResponse(e,i,o),u=LT(i);return new Eo({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=LT(i);return new Eo({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function LT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends Ei{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new gf(e,t,i,o)}}function oI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(n,a,e,i):a})}async function UP(n,e,t=!1){const i=await $a(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Eo._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(n,e,t=!1){const{auth:i}=n;if(Xn(i.app))return Promise.reject(Ss(i));const o="reauthenticate";try{const a=await $a(n,oI(i,o,e,n),t);Ie(a.idToken,i,"internal-error");const u=ly(a.idToken);Ie(u,i,"internal-error");const{sub:d}=u;return Ie(n.uid===d,i,"user-mismatch"),Eo._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&vi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(n,e,t=!1){if(Xn(n.app))return Promise.reject(Ss(n));const i="signIn",o=await oI(n,i,e),a=await Eo._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function OP(n,e){return aI(Do(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(n){const e=Do(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FP(n,e,t){if(Xn(n.app))return Promise.reject(Ss(n));const i=Do(n),u=await jm(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VP).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&lI(n),p}),d=await Eo._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function BP(n,e,t){return Xn(n.app)?Promise.reject(Ss(n)):OP(yt(n),el.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&lI(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(n,e){return xs(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=yt(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await $a(i,qP(i.auth,a));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const d=i.providerData.find(({providerId:p})=>p==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function HP(n,e,t,i){return yt(n).onIdTokenChanged(e,t,i)}function zP(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function uI(n,e,t,i){return yt(n).onAuthStateChanged(e,t,i)}function KP(n){return yt(n).signOut()}const yf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yf,"1"),this.storage.removeItem(yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=1e3,YP=10;class dI extends cI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);uP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,YP):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},$P)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dI.type="LOCAL";const JP=dI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI extends cI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fI.type="SESSION";const hI=fI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Kf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(t.origin,a)),p=await QP(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,p)=>{const h=fy("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(){return window}function WP(n){Wi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){return typeof Wi().WorkerGlobalScope<"u"&&typeof Wi().importScripts=="function"}async function ZP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function e4(){return pI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="firebaseLocalStorageDb",t4=1,_f="firebaseLocalStorage",gI="fbase_key";class Qu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $f(n,e){return n.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function n4(){const n=indexedDB.deleteDatabase(mI);return new Qu(n).toPromise()}function eg(){const n=indexedDB.open(mI,t4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(_f,{keyPath:gI})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(_f)?e(i):(i.close(),await n4(),e(await eg()))})})}async function OT(n,e,t){const i=$f(n,!0).put({[gI]:e,value:t});return new Qu(i).toPromise()}async function i4(n,e){const t=$f(n,!1).get(e),i=await new Qu(t).toPromise();return i===void 0?null:i.value}function FT(n,e){const t=$f(n,!0).delete(e);return new Qu(t).toPromise()}const s4=800,r4=3;class yI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>r4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kf._getInstance(e4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await ZP(),!this.activeServiceWorker)return;this.sender=new XP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await eg();return await OT(e,yf,"1"),await FT(e,yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>OT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>i4(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>FT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=$f(o,!1).getAll();return new Qu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),s4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yI.type="LOCAL";const o4=yI;new $u(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n,e){return e?As(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy extends cy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ua(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ua(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function l4(n){return aI(n.auth,new hy(n),n.bypassAuthState)}function u4(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),LP(t,new hy(n),n.bypassAuthState)}async function c4(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),UP(t,new hy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return l4;case"linkViaPopup":case"linkViaRedirect":return c4;case"reauthViaPopup":case"reauthViaRedirect":return u4;default:vi(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new $u(2e3,1e4);class ba extends _I{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,ba.currentPopupAction&&ba.currentPopupAction.cancel(),ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=fy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,d4.get())};e()}}ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="pendingRedirect",Jd=new Map;class h4 extends _I{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Jd.get(this.auth._key());if(!e){try{const i=await p4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Jd.set(this.auth._key(),e)}return this.bypassAuthState||Jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function p4(n,e){const t=y4(e),i=g4(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function m4(n,e){Jd.set(n._key(),e)}function g4(n){return As(n._redirectPersistence)}function y4(n){return Yd(f4,n.config.apiKey,n.name)}async function _4(n,e,t=!1){if(Xn(n.app))return Promise.reject(Ss(n));const i=Do(n),o=a4(i,e),u=await new h4(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=600*1e3;class E4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!T4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!vI(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Xi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=v4&&this.cachedEventUids.clear(),this.cachedEventUids.has(BT(e))}saveEventToCache(e){this.cachedEventUids.add(BT(e)),this.lastProcessedEventTime=Date.now()}}function BT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function vI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function T4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(n,e={}){return xs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,C4=/^https?/;async function w4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await A4(n);for(const t of e)try{if(I4(t))return}catch{}vi(n,"unauthorized-domain")}function I4(n){const e=Wm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!C4.test(t))return!1;if(S4.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=new $u(3e4,6e4);function qT(){const n=Wi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function b4(n){return new Promise((e,t)=>{var o,a,u;function i(){qT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qT(),t(Xi(n,"network-request-failed"))},timeout:R4.get()})}if((a=(o=Wi().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Wi().gapi)!=null&&u.load)i();else{const d=_P("iframefcb");return Wi()[d]=()=>{gapi.load?i():t(Xi(n,"network-request-failed"))},nI(`${yP()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw Qd=null,e})}let Qd=null;function x4(n){return Qd=Qd||b4(n),Qd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=new $u(5e3,15e3),D4="__/auth/iframe",M4="emulator/auth/iframe",k4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V4(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ay(e,M4):`https://${n.config.authDomain}/${D4}`,i={apiKey:e.apiKey,appName:n.name,v:Ja},o=P4.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Vu(i).slice(1)}`}async function U4(n){const e=await x4(n),t=Wi().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:V4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k4,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=Xi(n,"network-request-failed"),d=Wi().setTimeout(()=>{a(u)},N4.get());function p(){Wi().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},O4=500,F4=600,B4="_blank",q4="http://localhost";class GT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G4(n,e,t,i=O4,o=F4){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...L4,width:i.toString(),height:o.toString(),top:a,left:u},h=un().toLowerCase();t&&(d=Qw(h)?B4:t),Yw(h)&&(e=e||q4,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[I,k])=>`${T}${I}=${k},`,"");if(lP(h)&&d!=="_self")return H4(e||"",d),new GT(null);const E=window.open(e||"",d,_);Ie(E,n,"popup-blocked");try{E.focus()}catch{}return new GT(E)}function H4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4="__/auth/handler",K4="emulator/auth/handler",$4=encodeURIComponent("fac");async function HT(n,e,t,i,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ja,eventId:o};if(e instanceof rI){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",uN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Ju){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),h=p?`#${$4}=${encodeURIComponent(p)}`:"";return`${Y4(n)}?${Vu(d).slice(1)}${h}`}function Y4({config:n}){return n.emulator?ay(n,K4):`https://${n.authDomain}/${z4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="webStorageSupport";class J4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hI,this._completeRedirectFn=_4,this._overrideRedirectResult=m4}async _openPopup(e,t,i,o){var u;Rs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await HT(e,t,i,Wm(),o);return G4(e,a,fy())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await HT(e,t,i,Wm(),o);return WP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Rs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await U4(e),i=new E4(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Em,{type:Em},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[Em];a!==void 0&&t(!!a),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=w4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eI()||Jw()||uy()}}const Q4=J4;var zT="@firebase/auth",KT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z4(n){Zi(new yi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tI(n)},h=new pP(i,o,a,p);return CP(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Zi(new yi("auth-internal",e=>{const t=Do(e.getProvider("auth").getImmediate());return(i=>new X4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(zT,KT,W4(n)),Zn(zT,KT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=300,eV=JS("authIdTokenMaxAge")||j4;let $T=null;const tV=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>eV)return;const o=t==null?void 0:t.token;$T!==o&&($T=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function nV(n=Eg()){const e=wo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=SP(n,{popupRedirectResolver:Q4,persistence:[o4,JP,hI]}),i=JS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=tV(a.toString());zP(t,u,()=>u(t.currentUser)),HP(t,d=>u(d))}}const o=$S("auth");return o&&wP(t,`http://${o}`),t}function iV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}mP({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=Xi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",iV().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z4("Browser");const EI="@firebase/installations",py="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=1e4,AI=`w:${py}`,SI="FIS_v2",sV="https://firebaseinstallations.googleapis.com/v1",rV=3600*1e3,oV="installations",aV="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},To=new Co(oV,aV,lV);function CI(n){return n instanceof Ei&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI({projectId:n}){return`${sV}/projects/${n}/installations`}function II(n){return{token:n.token,requestStatus:2,expiresIn:cV(n.expiresIn),creationTime:Date.now()}}async function RI(n,e){const i=(await e.json()).error;return To.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function bI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function uV(n,{refreshToken:e}){const t=bI(n);return t.append("Authorization",dV(e)),t}async function xI(n){const e=await n();return e.status>=500&&e.status<600?n():e}function cV(n){return Number(n.replace("s","000"))}function dV(n){return`${SI} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fV({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=wI(n),o=bI(n),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const u={fid:t,authVersion:SI,appId:n.appId,sdkVersion:AI},d={method:"POST",headers:o,body:JSON.stringify(u)},p=await xI(()=>fetch(i,d));if(p.ok){const h=await p.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:II(h.authToken)}}else throw await RI("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=/^[cdef][\w-]{21}$/,tg="";function mV(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=gV(n);return pV.test(t)?t:tg}catch{return tg}}function gV(n){return hV(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=new Map;function MI(n,e){const t=Yf(n);kI(t,e),yV(t,e)}function kI(n,e){const t=DI.get(n);if(t)for(const i of t)i(e)}function yV(n,e){const t=_V();t&&t.postMessage({key:n,fid:e}),vV()}let mo=null;function _V(){return!mo&&"BroadcastChannel"in self&&(mo=new BroadcastChannel("[Firebase] FID Change"),mo.onmessage=n=>{kI(n.data.key,n.data.fid)}),mo}function vV(){DI.size===0&&mo&&(mo.close(),mo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="firebase-installations-database",TV=1,Ao="firebase-installations-store";let Tm=null;function my(){return Tm||(Tm=nC(EV,TV,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ao)}}})),Tm}async function vf(n,e){const t=Yf(n),o=(await my()).transaction(Ao,"readwrite"),a=o.objectStore(Ao),u=await a.get(t);return await a.put(e,t),await o.done,(!u||u.fid!==e.fid)&&MI(n,e.fid),e}async function PI(n){const e=Yf(n),i=(await my()).transaction(Ao,"readwrite");await i.objectStore(Ao).delete(e),await i.done}async function Jf(n,e){const t=Yf(n),o=(await my()).transaction(Ao,"readwrite"),a=o.objectStore(Ao),u=await a.get(t),d=e(u);return d===void 0?await a.delete(t):await a.put(d,t),await o.done,d&&(!u||u.fid!==d.fid)&&MI(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gy(n){let e;const t=await Jf(n.appConfig,i=>{const o=AV(i),a=SV(n,o);return e=a.registrationPromise,a.installationEntry});return t.fid===tg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function AV(n){const e=n||{fid:mV(),registrationStatus:0};return VI(e)}function SV(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(To.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=CV(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:wV(n)}:{installationEntry:e}}async function CV(n,e){try{const t=await fV(n,e);return vf(n.appConfig,t)}catch(t){throw CI(t)&&t.customData.serverCode===409?await PI(n.appConfig):await vf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function wV(n){let e=await YT(n.appConfig);for(;e.registrationStatus===1;)await NI(100),e=await YT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await gy(n);return i||t}return e}function YT(n){return Jf(n,e=>{if(!e)throw To.create("installation-not-found");return VI(e)})}function VI(n){return IV(n)?{fid:n.fid,registrationStatus:0}:n}function IV(n){return n.registrationStatus===1&&n.registrationTime+TI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV({appConfig:n,heartbeatServiceProvider:e},t){const i=bV(n,t),o=uV(n,t),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}const u={installation:{sdkVersion:AI,appId:n.appId}},d={method:"POST",headers:o,body:JSON.stringify(u)},p=await xI(()=>fetch(i,d));if(p.ok){const h=await p.json();return II(h)}else throw await RI("Generate Auth Token",p)}function bV(n,{fid:e}){return`${wI(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yy(n,e=!1){let t;const i=await Jf(n.appConfig,a=>{if(!UI(a))throw To.create("not-registered");const u=a.authToken;if(!e&&DV(u))return a;if(u.requestStatus===1)return t=xV(n,e),a;{if(!navigator.onLine)throw To.create("app-offline");const d=kV(a);return t=NV(n,d),d}});return t?await t:i.authToken}async function xV(n,e){let t=await JT(n.appConfig);for(;t.authToken.requestStatus===1;)await NI(100),t=await JT(n.appConfig);const i=t.authToken;return i.requestStatus===0?yy(n,e):i}function JT(n){return Jf(n,e=>{if(!UI(e))throw To.create("not-registered");const t=e.authToken;return PV(t)?{...e,authToken:{requestStatus:0}}:e})}async function NV(n,e){try{const t=await RV(n,e),i={...e,authToken:t};return await vf(n.appConfig,i),t}catch(t){if(CI(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await PI(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await vf(n.appConfig,i)}throw t}}function UI(n){return n!==void 0&&n.registrationStatus===2}function DV(n){return n.requestStatus===2&&!MV(n)}function MV(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+rV}function kV(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function PV(n){return n.requestStatus===1&&n.requestTime+TI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VV(n){const e=n,{installationEntry:t,registrationPromise:i}=await gy(e);return i?i.catch(console.error):yy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(n,e=!1){const t=n;return await LV(t),(await yy(t,e)).token}async function LV(n){const{registrationPromise:e}=await gy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(n){if(!n||!n.options)throw Am("App Configuration");if(!n.name)throw Am("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Am(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Am(n){return To.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="installations",FV="installations-internal",BV=n=>{const e=n.getProvider("app").getImmediate(),t=OV(e),i=wo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},qV=n=>{const e=n.getProvider("app").getImmediate(),t=wo(e,LI).getImmediate();return{getId:()=>VV(t),getToken:o=>UV(t,o)}};function GV(){Zi(new yi(LI,BV,"PUBLIC")),Zi(new yi(FV,qV,"PRIVATE"))}GV();Zn(EI,py);Zn(EI,py,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="analytics",HV="firebase_id",zV="origin",KV=60*1e3,$V="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_y="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=new Rf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Un=new Co("analytics","Analytics",YV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(n){if(!n.startsWith(_y)){const e=Un.create("invalid-gtag-resource",{gtagURL:n});return mn.warn(e.message),""}return n}function OI(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function QV(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function XV(n,e){const t=QV("firebase-js-sdk-policy",{createScriptURL:JV}),i=document.createElement("script"),o=`${_y}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function WV(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function ZV(n,e,t,i,o,a){const u=i[o];try{if(u)await e[u];else{const p=(await OI(t)).find(h=>h.measurementId===o);p&&await e[p.appId]}}catch(d){mn.error(d)}n("config",o,a)}async function jV(n,e,t,i,o){try{let a=[];if(o&&o.send_to){let u=o.send_to;Array.isArray(u)||(u=[u]);const d=await OI(t);for(const p of u){const h=d.find(E=>E.measurementId===p),_=h&&e[h.appId];if(_)a.push(_);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",i,o||{})}catch(a){mn.error(a)}}function eU(n,e,t,i){async function o(a,...u){try{if(a==="event"){const[d,p]=u;await jV(n,e,t,d,p)}else if(a==="config"){const[d,p]=u;await ZV(n,e,t,i,d,p)}else if(a==="consent"){const[d,p]=u;n("consent",d,p)}else if(a==="get"){const[d,p,h]=u;n("get",d,p,h)}else if(a==="set"){const[d]=u;n("set",d)}else n(a,...u)}catch(d){mn.error(d)}}return o}function tU(n,e,t,i,o){let a=function(...u){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(a=window[o]),window[o]=eU(a,n,e,t),{gtagCore:a,wrappedGtag:window[o]}}function nU(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(_y)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU=30,sU=1e3;class rU{constructor(e={},t=sU){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const FI=new rU;function oU(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function aU(n){var u;const{appId:e,apiKey:t}=n,i={method:"GET",headers:oU(t)},o=$V.replace("{app-id}",e),a=await fetch(o,i);if(a.status!==200&&a.status!==304){let d="";try{const p=await a.json();(u=p.error)!=null&&u.message&&(d=p.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:a.status,responseMessage:d})}return a.json()}async function lU(n,e=FI,t){const{appId:i,apiKey:o,measurementId:a}=n.options;if(!i)throw Un.create("no-app-id");if(!o){if(a)return{measurementId:a,appId:i};throw Un.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new dU;return setTimeout(async()=>{d.abort()},KV),BI({appId:i,apiKey:o,measurementId:a},u,d,e)}async function BI(n,{throttleEndTimeMillis:e,backoffCount:t},i,o=FI){var d;const{appId:a,measurementId:u}=n;try{await uU(i,e)}catch(p){if(u)return mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:a,measurementId:u};throw p}try{const p=await aU(n);return o.deleteThrottleMetadata(a),p}catch(p){const h=p;if(!cU(h)){if(o.deleteThrottleMetadata(a),u)return mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:u};throw p}const _=Number((d=h==null?void 0:h.customData)==null?void 0:d.httpStatus)===503?EE(t,o.intervalMillis,iU):EE(t,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return o.setThrottleMetadata(a,E),mn.debug(`Calling attemptFetch again in ${_} millis`),BI(n,E,i,o)}}function uU(n,e){return new Promise((t,i)=>{const o=Math.max(e-Date.now(),0),a=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(a),i(Un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function cU(n){if(!(n instanceof Ei)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class dU{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function fU(n,e,t,i,o){if(o&&o.global){n("event",t,i);return}else{const a=await e,u={...i,send_to:a};n("event",t,u)}}async function hU(n,e,t,i){if(i&&i.global){const o={};for(const a of Object.keys(t))o[`user_properties.${a}`]=t[a];return n("set",o),Promise.resolve()}else{const o=await e;n("config",o,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pU(){if(ZS())try{await jS()}catch(n){return mn.warn(Un.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return mn.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function mU(n,e,t,i,o,a,u){const d=lU(n);d.then(T=>{t[T.measurementId]=T.appId,n.options.measurementId&&T.measurementId!==n.options.measurementId&&mn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>mn.error(T)),e.push(d);const p=pU().then(T=>{if(T)return i.getId()}),[h,_]=await Promise.all([d,p]);nU(a)||XV(a,h.measurementId),o("js",new Date);const E=(u==null?void 0:u.config)??{};return E[zV]="firebase",E.update=!0,_!=null&&(E[HV]=_),o("config",h.measurementId,E),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.app=e}_delete(){return delete La[this.app.options.appId],Promise.resolve()}}let La={},QT=[];const XT={};let Sm="dataLayer",yU="gtag",WT,vy,ZT=!1;function _U(){const n=[];if(WS()&&n.push("This is a browser extension environment."),rN()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,o)=>`(${o+1}) ${i}`).join(" "),t=Un.create("invalid-analytics-context",{errorInfo:e});mn.warn(t.message)}}function vU(n,e,t){_U();const i=n.options.appId;if(!i)throw Un.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Un.create("no-api-key");if(La[i]!=null)throw Un.create("already-exists",{id:i});if(!ZT){WV(Sm);const{wrappedGtag:a,gtagCore:u}=tU(La,QT,XT,Sm,yU);vy=a,WT=u,ZT=!0}return La[i]=mU(n,QT,XT,e,WT,Sm,t),new gU(n)}function EU(n=Eg()){n=yt(n);const e=wo(n,Ef);return e.isInitialized()?e.getImmediate():TU(n)}function TU(n,e={}){const t=wo(n,Ef);if(t.isInitialized()){const o=t.getImmediate();if(Sr(e,t.getOptions()))return o;throw Un.create("already-initialized")}return t.initialize({options:e})}function AU(n,e,t){n=yt(n),hU(vy,La[n.app.options.appId],e,t).catch(i=>mn.error(i))}function SU(n,e,t,i){n=yt(n),fU(vy,La[n.app.options.appId],e,t,i).catch(o=>mn.error(o))}const jT="@firebase/analytics",eA="0.10.19";function CU(){Zi(new yi(Ef,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return vU(i,o,t)},"PUBLIC")),Zi(new yi("analytics-internal",n,"PRIVATE")),Zn(jT,eA),Zn(jT,eA,"esm2020");function n(e){try{const t=e.getProvider(Ef).getImmediate();return{logEvent:(i,o,a)=>SU(t,i,o,a),setUserProperties:(i,o)=>AU(t,i,o)}}catch(t){throw Un.create("interop-component-reg-failed",{reason:t})}}}CU();const wU={apiKey:"AIzaSyDAbQWI8JJJZxi4u2m3CpXoVXo_tfV9idQ",authDomain:"spanish-reading-7f2f6.firebaseapp.com",projectId:"spanish-reading-7f2f6",storageBucket:"spanish-reading-7f2f6.firebasestorage.app",messagingSenderId:"199552752380",appId:"1:199552752380:web:7f00e4d764d4cefcde5579",measurementId:"G-B41M23QF87"},Ey=iC(wU);if(typeof window<"u")try{EU(Ey)}catch(n){console.warn("Analytics initialization failed",n)}const ts=Ik(Ey),go=nV(Ey),IU=({currentView:n,onChangeView:e,children:t,theme:i,onToggleTheme:o,isGuest:a,onLogoutGuest:u})=>{var h,_,E;const d=async()=>{if(window.confirm("Mchten Sie sich wirklich abmelden?"))if(a)u==null||u();else try{await KP(go)}catch(T){console.error("Logout failed:",T)}},p=a?"Gast":((h=go.currentUser)==null?void 0:h.displayName)||((E=(_=go.currentUser)==null?void 0:_.email)==null?void 0:E.split("@")[0]);return w.jsxs("div",{className:"min-h-screen flex flex-col bg-[#FDFBF7] dark:bg-[#12100E]",children:[w.jsx("header",{className:"bg-[#FDFBF7]/90 dark:bg-[#12100E]/90 backdrop-blur-xl border-b border-[#EAE2D6] dark:border-[#2C2420] sticky top-0 z-50 transition-colors",children:w.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-20 flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",onClick:()=>e(it.HOME),children:[w.jsx("div",{className:"bg-[#2C2420] dark:bg-[#D4A373] p-2 rounded-xl text-[#FDFBF7] dark:text-[#12100E] shadow-md group-hover:bg-[#B26B4A] dark:group-hover:bg-[#B26B4A] transition-colors duration-500",children:w.jsx(Rm,{className:"w-4 h-4"})}),w.jsxs("div",{className:"hidden sm:block",children:[w.jsx("h1",{className:"text-lg font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] tracking-tight",children:"Leseassistent"}),w.jsx("p",{className:"text-[8px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-[0.2em] -mt-1 opacity-60",children:"Tu compaero"})]})]}),w.jsxs("nav",{className:"flex items-center bg-[#2C2420]/5 dark:bg-white/5 p-1.5 rounded-2xl border border-[#2C2420]/5 dark:border-white/5 mx-2",children:[w.jsxs("button",{onClick:()=>e(it.HOME),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===it.HOME?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[w.jsx(Rm,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Lesen"})]}),w.jsxs("button",{onClick:()=>e(it.ANALYZE),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===it.ANALYZE?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[w.jsx(OS,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Scan"})]}),w.jsxs("button",{onClick:()=>e(it.VOCAB),className:`flex items-center gap-2 py-2 px-4 rounded-xl transition-all duration-300 ${n===it.VOCAB?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7]"}`,children:[w.jsx(LS,{className:"w-4 h-4"}),w.jsx("span",{className:"hidden md:inline text-[10px] font-bold uppercase tracking-wider",children:"Lernen"})]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("div",{className:"hidden lg:flex items-center gap-2 px-3 py-1.5 bg-[#FDFBF7] dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-xl mr-2",children:[w.jsx(GS,{className:"w-3.5 h-3.5 text-[#B26B4A] dark:text-[#D4A373]"}),w.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D]",children:p})]}),w.jsx("button",{onClick:o,className:"p-2.5 rounded-xl bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-[#B26B4A] dark:hover:text-[#D4A373] transition-all",title:"Design ndern",children:i==="dark"?w.jsx(Dx,{className:"w-4 h-4"}):w.jsx(gx,{className:"w-4 h-4"})}),w.jsx("button",{onClick:()=>e(it.SETTINGS),className:`p-2.5 rounded-xl transition-colors shadow-sm ${n===it.SETTINGS?"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E]":"bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-[#B26B4A] dark:hover:text-[#D4A373]"}`,title:"Einstellungen",children:w.jsx(FS,{className:"w-4 h-4"})}),w.jsx("button",{onClick:d,className:"p-2.5 rounded-xl bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] hover:text-red-500 transition-all",title:"Abmelden",children:w.jsx(fx,{className:"w-4 h-4"})})]})]})}),w.jsx("main",{className:`flex-grow p-6 w-full mx-auto ${n===it.ANALYZE?"max-w-6xl":"max-w-4xl"} transition-colors`,children:t})]})};var RU={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let bU,xU;function NU(){return{geminiUrl:bU,vertexUrl:xU}}function DU(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=NU();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ns{}function he(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let h=0;h<p.length;h++){const _=p[h];m(_,e.slice(a+1),t[h])}else for(const h of p)m(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];m(p[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function MU(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let p=0;p<o.length;p++)if(o[p]==="*"){d=p;break}if(d!==-1&&a.length>d)for(let p=d;p<a.length;p++){const h=a[p];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}ng(n,o,a,0,u)}}function ng(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const p of d[u])ng(p,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),p={};for(const h of d)p[h]=u[h];for(const[h,_]of Object.entries(p)){const E=[];for(const T of t.slice(i))T==="*"?E.push(h):E.push(T);m(u,E,_)}for(const h of d)delete u[h]}}else{const u=n;a in u&&ng(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ty(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kU(n){const e={},t=f(n,["operationName"]);t!=null&&m(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function PU(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],UU(u)),e}function VU(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],LU(u)),e}function UU(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>OU(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function LU(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>FU(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function OU(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],KU(t)),e}function FU(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],$U(t)),e}function BU(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function qU(n){const e={},t=f(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function GU(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],HU(u)),e}function HU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function qI(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],zU(u)),e}function zU(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function KU(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Ty(i));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function $U(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Ty(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var tA;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(tA||(tA={}));var nA;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(nA||(nA={}));var iA;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(iA||(iA={}));var wt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(wt||(wt={}));var sA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(sA||(sA={}));var rA;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(rA||(rA={}));var oA;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(oA||(oA={}));var aA;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(aA||(aA={}));var lA;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(lA||(lA={}));var uA;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(uA||(uA={}));var cA;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(cA||(cA={}));var dA;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(dA||(dA={}));var fA;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(fA||(fA={}));var hA;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(hA||(hA={}));var pA;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(pA||(pA={}));var mA;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(mA||(mA={}));var gA;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(gA||(gA={}));var yA;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(yA||(yA={}));var _A;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_A||(_A={}));var Pu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Pu||(Pu={}));var vA;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vA||(vA={}));var EA;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(EA||(EA={}));var TA;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(TA||(TA={}));var ig;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ig||(ig={}));var AA;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(AA||(AA={}));var SA;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(SA||(SA={}));var CA;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(CA||(CA={}));var wA;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(wA||(wA={}));var IA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(IA||(IA={}));var RA;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(RA||(RA={}));var bA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(bA||(bA={}));var xA;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(xA||(xA={}));var NA;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(NA||(NA={}));var DA;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(DA||(DA={}));var MA;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(MA||(MA={}));var kA;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kA||(kA={}));var PA;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(PA||(PA={}));var VA;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(VA||(VA={}));var UA;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(UA||(UA={}));var LA;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(LA||(LA={}));var OA;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(OA||(OA={}));var FA;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(FA||(FA={}));var BA;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(BA||(BA={}));var qA;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(qA||(qA={}));var GA;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(GA||(GA={}));var HA;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(HA||(HA={}));var zA;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zA||(zA={}));var KA;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(KA||(KA={}));var $A;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})($A||($A={}));var YA;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(YA||(YA={}));var JA;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(JA||(JA={}));var QA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(QA||(QA={}));var XA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(XA||(XA={}));var WA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(WA||(WA={}));var ZA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(ZA||(ZA={}));var xa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(xa||(xa={}));class sg{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class cu{get text(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const E=[];for(const T of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[I,k]of Object.entries(T))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(k!==null||k!==void 0)&&E.push(I);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;_=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const E of(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[T,I]of Object.entries(E))T!=="inlineData"&&(I!==null||I!==void 0)&&_.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,d,p;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,d,p,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,d,p,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(p=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class jA{}class eS{}class YU{}class JU{}class QU{}class XU{}class tS{}class nS{}class iS{}class WU{}class Tf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Tf;let o;const a=e;return t?o=VU(a):o=PU(a),Object.assign(i,o),i}}class sS{}class rS{}class oS{}class aS{}class ZU{}class jU{}class eL{}class Ay{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ay,a=GU(e);return Object.assign(i,a),i}}class tL{}class nL{}class iL{}class lS{}class sL{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[p,h]of Object.entries(d))p!=="text"&&p!=="thought"&&h!==null&&u.push(p);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,p]of Object.entries(u))d!=="inlineData"&&p!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class rL{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Sy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Sy,a=qI(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function GI(n,e){const t=Qe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function HI(n){return Array.isArray(n)?n.map(e=>Af(e)):[Af(n)]}function Af(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function zI(n){const e=Af(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function KI(n){const e=Af(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function uS(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function $I(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>uS(e)):[uS(n)]}function rg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function cS(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function dS(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ln(n){if(n==null)throw new Error("ContentUnion is required");return rg(n)?n:{role:"user",parts:$I(n)}}function Cy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=ln(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=ln(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ln(t)):[ln(e)]}function jn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(cS(n)||dS(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ln(n)]}const e=[],t=[],i=rg(n[0]);for(const o of n){const a=rg(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(cS(o)||dS(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:$I(t)}),e}function oL(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(wt).includes(t[0].toUpperCase())?t[0].toUpperCase():wt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(wt).includes(i.toUpperCase())?i.toUpperCase():wt.TYPE_UNSPECIFIED})}}function Oa(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&oL(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(wt).includes(d.toUpperCase())?d.toUpperCase():wt.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Oa(d);else if(i.includes(u)){const p=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}p.push(Oa(h))}e[u]=p}else if(o.includes(u)){const p={};for(const[h,_]of Object.entries(d))p[h]=Oa(_);e[u]=p}else{if(u==="additionalProperties")continue;e[u]=d}return e}function wy(n){return Oa(n)}function Iy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Ry(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function tl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Oa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Oa(e.response));return n}function nl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function aL(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ds(n,e){if(typeof e!="string")throw new Error("name must be a string");return aL(n,e,"cachedContents")}function YI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Pr(n){return Ty(n)}function lL(n){return n!=null&&typeof n=="object"&&"name"in n}function uL(n){return n!=null&&typeof n=="object"&&"video"in n}function cL(n){return n!=null&&typeof n=="object"&&"uri"in n}function JI(n){var e;let t;if(lL(n)&&(t=n.name),!(cL(n)&&(t=n.uri,t===void 0))&&!(uL(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function QI(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function XI(n){for(const e of["models","tunedModels","publisherModels"])if(dL(n,e))return n[e];return[]}function dL(n,e){return n!==null&&typeof n=="object"&&e in n}function fL(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function hL(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=fL(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function WI(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function pL(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ZI(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const p=u.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function il(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function jI(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mL(n){const e={},t=f(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>QL(u))),m(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["inlinedEmbedContentResponses"],a)}return e}function gL(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function yL(n){const e={},t=f(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Xd(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&m(e,["state"],jI(o));const a=f(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&m(e,["updateTime"],d);const p=f(n,["metadata","model"]);p!=null&&m(e,["model"],p);const h=f(n,["metadata","output"]);return h!=null&&m(e,["dest"],mL(ZI(h))),e}function og(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["state"]);o!=null&&m(e,["state"],jI(o));const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["createTime"]);u!=null&&m(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(e,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(e,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(e,["updateTime"],h);const _=f(n,["model"]);_!=null&&m(e,["model"],_);const E=f(n,["inputConfig"]);E!=null&&m(e,["src"],_L(E));const T=f(n,["outputConfig"]);T!=null&&m(e,["dest"],gL(ZI(T)));const I=f(n,["completionStats"]);return I!=null&&m(e,["completionStats"],I),e}function _L(n){const e={},t=f(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function vL(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&m(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>JL(n,u))),m(t,["requests","requests"],a)}return t}function EL(n){const e={},t=f(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function TL(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function AL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function SL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function CL(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],wL(i));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const h=f(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),m(e,["safetyRatings"],T)}const E=f(n,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function wL(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function eR(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>nO(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function IL(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function RL(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],yL(pL(o))),t}function fS(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],vL(n,WI(n,o)));const a=f(e,["config"]);return a!=null&&IL(a,t),t}function bL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],Qe(n,i));const o=f(e,["src"]);o!=null&&m(t,["inputConfig"],EL(WI(n,o)));const a=f(e,["config"]);return a!=null&&RL(a,t),t}function xL(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),t}function NL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["src"]);o!=null&&m(t,["batch","inputConfig"],LL(n,o));const a=f(e,["config"]);return a!=null&&xL(a,t),t}function DL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function ML(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function kL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function PL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function VL(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=Cy(n,i);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(m(t,["_self"],UL(o,t)),MU(t,{"requests[].*":"requests[].request.*"})),t}function UL(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function LL(n,e){const t={},i=f(e,["fileName"]);i!=null&&m(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&m(t,["requests"],VL(n,o)),t}function OL(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function FL(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BL(n){const e={},t=f(n,["mode"]);t!=null&&m(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qL(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],eR(ln(o)));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=f(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=f(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=f(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const F=f(e,["seed"]);F!=null&&m(i,["seed"],F);const L=f(e,["responseMimeType"]);L!=null&&m(i,["responseMimeType"],L);const Y=f(e,["responseSchema"]);Y!=null&&m(i,["responseSchema"],wy(Y));const ee=f(e,["responseJsonSchema"]);if(ee!=null&&m(i,["responseJsonSchema"],ee),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let x=W;Array.isArray(x)&&(x=x.map(ve=>iO(ve))),m(t,["safetySettings"],x)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let x=nl(ae);Array.isArray(x)&&(x=x.map(ve=>rO(tl(ve)))),m(t,["tools"],x)}const oe=f(e,["toolConfig"]);if(t!==void 0&&oe!=null&&m(t,["toolConfig"],sO(oe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&m(t,["cachedContent"],Ds(n,le));const D=f(e,["responseModalities"]);D!=null&&m(i,["responseModalities"],D);const M=f(e,["mediaResolution"]);M!=null&&m(i,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&m(i,["speechConfig"],Iy(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&m(i,["thinkingConfig"],U);const P=f(e,["imageConfig"]);P!=null&&m(i,["imageConfig"],YL(P));const O=f(e,["enableEnhancedCivicAnswers"]);return O!=null&&m(i,["enableEnhancedCivicAnswers"],O),i}function GL(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>CL(h))),m(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function HL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function zL(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function KL(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function $L(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function YL(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function JL(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["request","model"],Qe(n,i));const o=f(e,["contents"]);if(o!=null){let d=jn(o);Array.isArray(d)&&(d=d.map(p=>eR(p))),m(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&m(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&m(t,["request","generationConfig"],qL(n,u,f(t,["request"],{}))),t}function QL(n){const e={},t=f(n,["response"]);t!=null&&m(e,["response"],GL(t));const i=f(n,["error"]);return i!=null&&m(e,["error"],i),e}function XL(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function WL(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function ZL(n){const e={},t=f(n,["config"]);return t!=null&&XL(t,e),e}function jL(n){const e={},t=f(n,["config"]);return t!=null&&WL(t,e),e}function eO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Xd(u))),m(e,["batchJobs"],a)}return e}function tO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>og(u))),m(e,["batchJobs"],a)}return e}function nO(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],OL(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],FL(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],TL(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function iO(n){const e={},t=f(n,["category"]);if(t!=null&&m(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function sO(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],BL(t));const i=f(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function rO(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],KL(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],$L(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(bs||(bs={}));class Mo{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oO extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(bs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=fS(this.apiClient,e),i=t._url,o=he("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,p=d.requests,h=[];for(const _ of p){const E=Object.assign({},_);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=T,E.request=I}h.push(E)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=bL(this.apiClient,e);return d=he("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>og(_))}else{const h=fS(this.apiClient,e);return d=he("{model}:batchGenerateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Xd(_))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NL(this.apiClient,e);return a=he("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>Xd(p))}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=zL(this.apiClient,e);return d=he("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>og(_))}else{const h=HL(this.apiClient,e);return d=he("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Xd(_))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const p=SL(this.apiClient,e);u=he("batchPredictionJobs/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=AL(this.apiClient,e);u=he("batches/{name}:cancel",p._url),d=p._query,delete p._url,delete p._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=jL(e);return d=he("batchPredictionJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=tO(_),T=new lS;return Object.assign(T,E),T})}else{const h=ZL(e);return d=he("batches",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=eO(_),T=new lS;return Object.assign(T,E),T})}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=ML(this.apiClient,e);return d=he("batchPredictionJobs/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>PL(_))}else{const h=DL(this.apiClient,e);return d=he("batches/{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>kL(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aO(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function hS(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>NO(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function lO(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=jn(u);Array.isArray(_)&&(_=_.map(E=>hS(E))),m(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],hS(ln(d)));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let _=p;Array.isArray(_)&&(_=_.map(E=>MO(E))),m(e,["tools"],_)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],DO(h)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function uO(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let E=jn(u);Array.isArray(E)&&(E=E.map(T=>T)),m(e,["contents"],E)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&m(e,["systemInstruction"],ln(d));const p=f(n,["tools"]);if(e!==void 0&&p!=null){let E=p;Array.isArray(E)&&(E=E.map(T=>kO(T))),m(e,["tools"],E)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),t}function cO(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],GI(n,i));const o=f(e,["config"]);return o!=null&&lO(o,t),t}function dO(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["model"],GI(n,i));const o=f(e,["config"]);return o!=null&&uO(o,t),t}function fO(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Ds(n,i)),t}function hO(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Ds(n,i)),t}function pO(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function mO(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function gO(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function yO(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _O(n){const e={},t=f(n,["mode"]);t!=null&&m(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function vO(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function EO(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Ds(n,i)),t}function TO(n,e){const t={},i=f(e,["name"]);return i!=null&&m(t,["_url","name"],Ds(n,i)),t}function AO(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function SO(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function CO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function wO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function IO(n){const e={},t=f(n,["config"]);return t!=null&&CO(t,e),e}function RO(n){const e={},t=f(n,["config"]);return t!=null&&wO(t,e),e}function bO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function xO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function NO(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],gO(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],yO(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],aO(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function DO(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],_O(t));const i=f(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function MO(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],AO(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],SO(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function kO(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>vO(T))),m(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function PO(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function VO(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),t}function UO(n,e){const t={},i=f(e,["name"]);i!=null&&m(t,["_url","name"],Ds(n,i));const o=f(e,["config"]);return o!=null&&PO(o,t),t}function LO(n,e){const t={},i=f(e,["name"]);i!=null&&m(t,["_url","name"],Ds(n,i));const o=f(e,["config"]);return o!=null&&VO(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OO extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(bs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=dO(this.apiClient,e);return d=he("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=cO(this.apiClient,e);return d=he("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=TO(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=EO(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=hO(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=mO(_),T=new oS;return Object.assign(T,E),T})}else{const h=fO(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=pO(_),T=new oS;return Object.assign(T,E),T})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=LO(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=UO(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=RO(e);return d=he("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=xO(_),T=new aS;return Object.assign(T,E),T})}else{const h=IO(e);return d=he("cachedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=bO(_),T=new aS;return Object.assign(T,E),T})}}}function Sf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function pS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(n){return this instanceof be?(this.v=n,this):new be(n)}function mi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(I){return function(k){return Promise.resolve(k).then(I,E)}}function d(I,k){i[I]&&(o[I]=function(F){return new Promise(function(L,Y){a.push([I,F,L,Y])>1||p(I,F)})},k&&(o[I]=k(o[I])))}function p(I,k){try{h(i[I](k))}catch(F){T(a[0][3],F)}}function h(I){I.value instanceof be?Promise.resolve(I.value.v).then(_,E):T(a[0][2],I)}function _(I){p("next",I)}function E(I){p("throw",I)}function T(I,k){I(k),a.shift(),a.length&&p(a[0][0],a[0][1])}}function gi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pS=="function"?pS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,p){u=n[a](u),o(d,p,u.done,u.value)})}}function o(a,u,d,p){Promise.resolve(p).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FO(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:tR(t)}function tR(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function BO(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function mS(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!tR(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class qO{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new GO(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class GO{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),BO(a)}async sendMessage(e){var t;await this.sendPromise;const i=ln(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const p=await o,h=(u=(a=p.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=p.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];_!=null&&(T=(d=_.slice(E))!==null&&d!==void 0?d:[]);const I=h?[h]:[];this.recordHistory(i,I,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=ln(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?mS(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return mi(this,arguments,function*(){var o,a,u,d,p,h;const _=[];try{for(var E=!0,T=gi(e),I;I=yield be(T.next()),o=I.done,!o;E=!0){d=I.value,E=!1;const k=d;if(FO(k)){const F=(h=(p=k.candidates)===null||p===void 0?void 0:p[0])===null||h===void 0?void 0:h.content;F!==void 0&&_.push(F)}yield yield be(k)}}catch(k){a={error:k}}finally{try{!E&&!o&&(u=T.return)&&(yield be(u.call(T)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...mS(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Qf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HO(n){const e={},t=f(n,["file"]);return t!=null&&m(e,["file"],t),e}function zO(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function KO(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],JI(t)),e}function $O(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function YO(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","file"],JI(t)),e}function JO(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function QO(n){const e={},t=f(n,["config"]);return t!=null&&JO(t,e),e}function XO(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WO extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(bs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=QO(e);return a=he("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=XO(p),_=new tL;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=HO(e);return a=he("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=zO(p),_=new nL;return Object.assign(_,h),_})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=YO(e);return a=he("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=KO(e);return a=he("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=$O(p),_=new iL;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wd(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function ZO(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>p6(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function jO(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function e6(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function t6(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function n6(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const E=f(n,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const T=f(n,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const I=f(n,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const k=f(n,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const F=f(n,["responseSchema"]);F!=null&&m(e,["responseSchema"],F);const L=f(n,["routingConfig"]);L!=null&&m(e,["routingConfig"],L);const Y=f(n,["seed"]);Y!=null&&m(e,["seed"],Y);const ee=f(n,["speechConfig"]);ee!=null&&m(e,["speechConfig"],ee);const W=f(n,["stopSequences"]);W!=null&&m(e,["stopSequences"],W);const ae=f(n,["temperature"]);ae!=null&&m(e,["temperature"],ae);const oe=f(n,["thinkingConfig"]);oe!=null&&m(e,["thinkingConfig"],oe);const le=f(n,["topK"]);le!=null&&m(e,["topK"],le);const D=f(n,["topP"]);if(D!=null&&m(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function i6(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function s6(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function r6(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Ry(E));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],ZO(ln(k)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let le=nl(F);Array.isArray(le)&&(le=le.map(D=>g6(tl(D)))),m(e,["setup","tools"],le)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],m6(L));const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&m(e,["setup","inputAudioTranscription"],Y);const ee=f(n,["outputAudioTranscription"]);e!==void 0&&ee!=null&&m(e,["setup","outputAudioTranscription"],ee);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&m(e,["setup","realtimeInputConfig"],W);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&m(e,["setup","contextWindowCompression"],ae);const oe=f(n,["proactivity"]);if(e!==void 0&&oe!=null&&m(e,["setup","proactivity"],oe),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function o6(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],n6(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Ry(E));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],ln(k));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let D=nl(F);Array.isArray(D)&&(D=D.map(M=>y6(tl(M)))),m(e,["setup","tools"],D)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],L);const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&m(e,["setup","inputAudioTranscription"],Y);const ee=f(n,["outputAudioTranscription"]);e!==void 0&&ee!=null&&m(e,["setup","outputAudioTranscription"],ee);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&m(e,["setup","realtimeInputConfig"],W);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&m(e,["setup","contextWindowCompression"],ae);const oe=f(n,["proactivity"]);e!==void 0&&oe!=null&&m(e,["setup","proactivity"],oe);const le=f(n,["explicitVadSignal"]);return e!==void 0&&le!=null&&m(e,["setup","explicitVadSignal"],le),t}function a6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],Qe(n,i));const o=f(e,["config"]);return o!=null&&m(t,["config"],r6(o,t)),t}function l6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],Qe(n,i));const o=f(e,["config"]);return o!=null&&m(t,["config"],o6(o,t)),t}function u6(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function c6(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["weightedPrompts"],i)}return e}function d6(n){const e={},t=f(n,["media"]);if(t!=null){let h=HI(t);Array.isArray(h)&&(h=h.map(_=>Wd(_))),m(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&m(e,["audio"],Wd(KI(i)));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&m(e,["video"],Wd(zI(a)));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function f6(n){const e={},t=f(n,["media"]);if(t!=null){let h=HI(t);Array.isArray(h)&&(h=h.map(_=>_)),m(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&m(e,["audio"],KI(i));const o=f(n,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&m(e,["video"],zI(a));const u=f(n,["text"]);u!=null&&m(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&m(e,["activityStart"],d);const p=f(n,["activityEnd"]);return p!=null&&m(e,["activityEnd"],p),e}function h6(n){const e={},t=f(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&m(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&m(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],_6(u));const d=f(n,["goAway"]);d!=null&&m(e,["goAway"],d);const p=f(n,["sessionResumptionUpdate"]);p!=null&&m(e,["sessionResumptionUpdate"],p);const h=f(n,["voiceActivityDetectionSignal"]);return h!=null&&m(e,["voiceActivityDetectionSignal"],h),e}function p6(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],jO(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],e6(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],Wd(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function m6(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function g6(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],i6(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],s6(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function y6(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>t6(T))),m(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function _6(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&m(e,["totalTokenCount"],d);const p=f(n,["promptTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["promptTokensDetails"],I)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["cacheTokensDetails"],I)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["responseTokensDetails"],I)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(k=>k)),m(e,["toolUsePromptTokensDetails"],I)}const T=f(n,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v6(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function E6(n){const e={},t=f(n,["content"]);t!=null&&m(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],T6(i));const o=f(n,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&m(e,["groundingMetadata"],d);const p=f(n,["index"]);p!=null&&m(e,["index"],p);const h=f(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),m(e,["safetyRatings"],T)}const E=f(n,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function T6(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["citations"],i)}return e}function A6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["contents"]);if(o!=null){let a=jn(o);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["contents"],a)}return t}function S6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["tokensInfo"],o)}return e}function C6(n){const e={},t=f(n,["values"]);t!=null&&m(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&m(e,["statistics"],w6(i)),e}function w6(n){const e={},t=f(n,["truncated"]);t!=null&&m(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&m(e,["tokenCount"],i),e}function Xf(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>P3(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function I6(n){const e={},t=f(n,["controlType"]);t!=null&&m(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&m(e,["computeControl"],i),e}function R6(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function b6(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&m(e,["systemInstruction"],ln(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>rR(d))),m(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&m(e,["generationConfig"],v3(a)),t}function x6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["contents"]);if(o!=null){let u=jn(o);Array.isArray(u)&&(u=u.map(d=>Xf(d))),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&R6(a),t}function N6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["contents"]);if(o!=null){let u=jn(o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&b6(a,t),t}function D6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&m(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function M6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&m(e,["totalTokens"],i),e}function k6(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],Qe(n,i)),t}function P6(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],Qe(n,i)),t}function V6(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function U6(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function L6(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const T=f(n,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const I=f(n,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&m(e,["parameters","outputOptions","compressionQuality"],F);const L=f(n,["addWatermark"]);e!==void 0&&L!=null&&m(e,["parameters","addWatermark"],L);const Y=f(n,["labels"]);e!==void 0&&Y!=null&&m(e,["labels"],Y);const ee=f(n,["editMode"]);e!==void 0&&ee!=null&&m(e,["parameters","editMode"],ee);const W=f(n,["baseSteps"]);return e!==void 0&&W!=null&&m(e,["parameters","editConfig","baseSteps"],W),t}function O6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>B3(p))),m(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&L6(u,t),t}function F6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Wf(a))),m(e,["generatedImages"],o)}return e}function B6(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function q6(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&m(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&m(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&m(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&m(e,["parameters","autoTruncate"],d),t}function G6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["contents"]);if(o!=null){let d=Cy(n,o);Array.isArray(d)&&(d=d.map(p=>p)),m(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&B6(a,t);const u=f(e,["model"]);return u!==void 0&&m(t,["requests[]","model"],Qe(n,u)),t}function H6(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["contents"]);if(o!=null){let u=Cy(n,o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&q6(a,t),t}function z6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function K6(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>C6(u))),m(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function $6(n){const e={},t=f(n,["endpoint"]);t!=null&&m(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&m(e,["deployedModelId"],i),e}function Y6(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function J6(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Q6(n){const e={},t=f(n,["mode"]);t!=null&&m(e,["mode"],t);const i=f(n,["allowedFunctionNames"]);if(i!=null&&m(e,["allowedFunctionNames"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function X6(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&m(e,["description"],t);const i=f(n,["name"]);i!=null&&m(e,["name"],i);const o=f(n,["parameters"]);o!=null&&m(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&m(e,["response"],u);const d=f(n,["responseJsonSchema"]);return d!=null&&m(e,["responseJsonSchema"],d),e}function W6(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],Xf(ln(o)));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=f(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=f(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=f(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const F=f(e,["seed"]);F!=null&&m(i,["seed"],F);const L=f(e,["responseMimeType"]);L!=null&&m(i,["responseMimeType"],L);const Y=f(e,["responseSchema"]);Y!=null&&m(i,["responseSchema"],wy(Y));const ee=f(e,["responseJsonSchema"]);if(ee!=null&&m(i,["responseJsonSchema"],ee),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let x=W;Array.isArray(x)&&(x=x.map(ve=>q3(ve))),m(t,["safetySettings"],x)}const ae=f(e,["tools"]);if(t!==void 0&&ae!=null){let x=nl(ae);Array.isArray(x)&&(x=x.map(ve=>J3(tl(ve)))),m(t,["tools"],x)}const oe=f(e,["toolConfig"]);if(t!==void 0&&oe!=null&&m(t,["toolConfig"],Y3(oe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&m(t,["cachedContent"],Ds(n,le));const D=f(e,["responseModalities"]);D!=null&&m(i,["responseModalities"],D);const M=f(e,["mediaResolution"]);M!=null&&m(i,["mediaResolution"],M);const N=f(e,["speechConfig"]);if(N!=null&&m(i,["speechConfig"],Iy(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=f(e,["thinkingConfig"]);U!=null&&m(i,["thinkingConfig"],U);const P=f(e,["imageConfig"]);P!=null&&m(i,["imageConfig"],C3(P));const O=f(e,["enableEnhancedCivicAnswers"]);return O!=null&&m(i,["enableEnhancedCivicAnswers"],O),i}function Z6(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&m(t,["systemInstruction"],ln(o));const a=f(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&m(i,["topP"],u);const d=f(e,["topK"]);d!=null&&m(i,["topK"],d);const p=f(e,["candidateCount"]);p!=null&&m(i,["candidateCount"],p);const h=f(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=f(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=f(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=f(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const k=f(e,["frequencyPenalty"]);k!=null&&m(i,["frequencyPenalty"],k);const F=f(e,["seed"]);F!=null&&m(i,["seed"],F);const L=f(e,["responseMimeType"]);L!=null&&m(i,["responseMimeType"],L);const Y=f(e,["responseSchema"]);Y!=null&&m(i,["responseSchema"],wy(Y));const ee=f(e,["responseJsonSchema"]);ee!=null&&m(i,["responseJsonSchema"],ee);const W=f(e,["routingConfig"]);W!=null&&m(i,["routingConfig"],W);const ae=f(e,["modelSelectionConfig"]);ae!=null&&m(i,["modelConfig"],ae);const oe=f(e,["safetySettings"]);if(t!==void 0&&oe!=null){let Q=oe;Array.isArray(Q)&&(Q=Q.map(re=>re)),m(t,["safetySettings"],Q)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let Q=nl(le);Array.isArray(Q)&&(Q=Q.map(re=>rR(tl(re)))),m(t,["tools"],Q)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&m(t,["toolConfig"],D);const M=f(e,["labels"]);t!==void 0&&M!=null&&m(t,["labels"],M);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&m(t,["cachedContent"],Ds(n,N));const U=f(e,["responseModalities"]);U!=null&&m(i,["responseModalities"],U);const P=f(e,["mediaResolution"]);P!=null&&m(i,["mediaResolution"],P);const O=f(e,["speechConfig"]);O!=null&&m(i,["speechConfig"],Iy(O));const x=f(e,["audioTimestamp"]);x!=null&&m(i,["audioTimestamp"],x);const ve=f(e,["thinkingConfig"]);ve!=null&&m(i,["thinkingConfig"],ve);const Xe=f(e,["imageConfig"]);if(Xe!=null&&m(i,["imageConfig"],w3(Xe)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function gS(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["contents"]);if(o!=null){let u=jn(o);Array.isArray(u)&&(u=u.map(d=>Xf(d))),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&m(t,["generationConfig"],W6(n,a,t)),t}function yS(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["contents"]);if(o!=null){let u=jn(o);Array.isArray(u)&&(u=u.map(d=>d)),m(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&m(t,["generationConfig"],Z6(n,a,t)),t}function _S(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(h=>E6(h))),m(e,["candidates"],p)}const o=f(n,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&m(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&m(e,["usageMetadata"],d),e}function vS(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),m(e,["candidates"],h)}const o=f(n,["createTime"]);o!=null&&m(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&m(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&m(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&m(e,["responseId"],d);const p=f(n,["usageMetadata"]);return p!=null&&m(e,["usageMetadata"],p),e}function j6(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&m(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const p=f(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const h=f(n,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const _=f(n,["language"]);e!==void 0&&_!=null&&m(e,["parameters","language"],_);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const T=f(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(e!==void 0&&I!=null&&m(e,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function e3(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d);const p=f(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const T=f(n,["includeRaiReason"]);e!==void 0&&T!=null&&m(e,["parameters","includeRaiReason"],T);const I=f(n,["language"]);e!==void 0&&I!=null&&m(e,["parameters","language"],I);const k=f(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&m(e,["parameters","outputOptions","compressionQuality"],F);const L=f(n,["addWatermark"]);e!==void 0&&L!=null&&m(e,["parameters","addWatermark"],L);const Y=f(n,["labels"]);e!==void 0&&Y!=null&&m(e,["labels"],Y);const ee=f(n,["imageSize"]);e!==void 0&&ee!=null&&m(e,["parameters","sampleImageSize"],ee);const W=f(n,["enhancePrompt"]);return e!==void 0&&W!=null&&m(e,["parameters","enhancePrompt"],W),t}function t3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&j6(a,t),t}function n3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&e3(a,t),t}function i3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>m3(u))),m(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],iR(o)),e}function s3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Wf(u))),m(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],sR(o)),e}function r3(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(n,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const h=f(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(n,["lastFrame"]);e!==void 0&&_!=null&&m(e,["instances[0]","lastFrame"],Zf(_));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(I=>a5(I))),m(e,["instances[0]","referenceImages"],T)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function o3(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&m(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&m(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&m(e,["parameters","seed"],d);const p=f(n,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const h=f(n,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&m(e,["parameters","personGeneration"],_);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&m(e,["parameters","pubsubTopic"],E);const T=f(n,["negativePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","negativePrompt"],T);const I=f(n,["enhancePrompt"]);e!==void 0&&I!=null&&m(e,["parameters","enhancePrompt"],I);const k=f(n,["generateAudio"]);e!==void 0&&k!=null&&m(e,["parameters","generateAudio"],k);const F=f(n,["lastFrame"]);e!==void 0&&F!=null&&m(e,["instances[0]","lastFrame"],Ti(F));const L=f(n,["referenceImages"]);if(e!==void 0&&L!=null){let W=L;Array.isArray(W)&&(W=W.map(ae=>l5(ae))),m(e,["instances[0]","referenceImages"],W)}const Y=f(n,["mask"]);e!==void 0&&Y!=null&&m(e,["instances[0]","mask"],o5(Y));const ee=f(n,["compressionQuality"]);return e!==void 0&&ee!=null&&m(e,["parameters","compressionQuality"],ee),t}function a3(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],d3(u)),e}function l3(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],f3(u)),e}function u3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&m(t,["instances[0]","image"],Zf(a));const u=f(e,["video"]);u!=null&&m(t,["instances[0]","video"],oR(u));const d=f(e,["source"]);d!=null&&h3(d,t);const p=f(e,["config"]);return p!=null&&r3(p,t),t}function c3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["prompt"]);o!=null&&m(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&m(t,["instances[0]","image"],Ti(a));const u=f(e,["video"]);u!=null&&m(t,["instances[0]","video"],aR(u));const d=f(e,["source"]);d!=null&&p3(d,t);const p=f(e,["config"]);return p!=null&&o3(p,t),t}function d3(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>y3(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function f3(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>_3(u))),m(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function h3(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Zf(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],oR(a)),t}function p3(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ti(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&m(e,["instances[0]","video"],aR(a)),t}function m3(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],I3(t));const i=f(n,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&m(e,["safetyAttributes"],iR(o)),e}function Wf(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["image"],nR(t));const i=f(n,["raiFilteredReason"]);i!=null&&m(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&m(e,["safetyAttributes"],sR(o));const a=f(n,["prompt"]);return a!=null&&m(e,["enhancedPrompt"],a),e}function g3(n){const e={},t=f(n,["_self"]);t!=null&&m(e,["mask"],nR(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["labels"],o)}return e}function y3(n){const e={},t=f(n,["video"]);return t!=null&&m(e,["video"],s5(t)),e}function _3(n){const e={},t=f(n,["_self"]);return t!=null&&m(e,["video"],r5(t)),e}function v3(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&m(e,["frequencyPenalty"],d);const p=f(n,["logprobs"]);p!=null&&m(e,["logprobs"],p);const h=f(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const E=f(n,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const T=f(n,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const I=f(n,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const k=f(n,["responseModalities"]);k!=null&&m(e,["responseModalities"],k);const F=f(n,["responseSchema"]);F!=null&&m(e,["responseSchema"],F);const L=f(n,["routingConfig"]);L!=null&&m(e,["routingConfig"],L);const Y=f(n,["seed"]);Y!=null&&m(e,["seed"],Y);const ee=f(n,["speechConfig"]);ee!=null&&m(e,["speechConfig"],ee);const W=f(n,["stopSequences"]);W!=null&&m(e,["stopSequences"],W);const ae=f(n,["temperature"]);ae!=null&&m(e,["temperature"],ae);const oe=f(n,["thinkingConfig"]);oe!=null&&m(e,["thinkingConfig"],oe);const le=f(n,["topK"]);le!=null&&m(e,["topK"],le);const D=f(n,["topP"]);if(D!=null&&m(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function E3(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],Qe(n,i)),t}function T3(n,e){const t={},i=f(e,["model"]);return i!=null&&m(t,["_url","name"],Qe(n,i)),t}function A3(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function S3(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function C3(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function w3(n){const e={},t=f(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=f(n,["imageSize"]);i!=null&&m(e,["imageSize"],i);const o=f(n,["outputMimeType"]);o!=null&&m(e,["imageOutputOptions","mimeType"],o);const a=f(n,["outputCompressionQuality"]);return a!=null&&m(e,["imageOutputOptions","compressionQuality"],a),e}function I3(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&m(e,["imageBytes"],Pr(t));const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function nR(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],Pr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function Zf(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&m(e,["bytesBase64Encoded"],Pr(t));const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Ti(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Pr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function R3(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&m(t,["_url","models_url"],QI(n,d)),i}function b3(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&m(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&m(t,["_url","models_url"],QI(n,d)),i}function x3(n,e){const t={},i=f(e,["config"]);return i!=null&&R3(n,i,t),t}function N3(n,e){const t={},i=f(e,["config"]);return i!=null&&b3(n,i,t),t}function D3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=XI(o);Array.isArray(a)&&(a=a.map(u=>ag(u))),m(e,["models"],a)}return e}function M3(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=XI(o);Array.isArray(a)&&(a=a.map(u=>lg(u))),m(e,["models"],a)}return e}function k3(n){const e={},t=f(n,["maskMode"]);t!=null&&m(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&m(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function ag(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["version"]);a!=null&&m(e,["version"],a);const u=f(n,["_self"]);u!=null&&m(e,["tunedModelInfo"],Q3(u));const d=f(n,["inputTokenLimit"]);d!=null&&m(e,["inputTokenLimit"],d);const p=f(n,["outputTokenLimit"]);p!=null&&m(e,["outputTokenLimit"],p);const h=f(n,["supportedGenerationMethods"]);h!=null&&m(e,["supportedActions"],h);const _=f(n,["temperature"]);_!=null&&m(e,["temperature"],_);const E=f(n,["maxTemperature"]);E!=null&&m(e,["maxTemperature"],E);const T=f(n,["topP"]);T!=null&&m(e,["topP"],T);const I=f(n,["topK"]);I!=null&&m(e,["topK"],I);const k=f(n,["thinking"]);return k!=null&&m(e,["thinking"],k),e}function lg(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["displayName"]);i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["versionId"]);a!=null&&m(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>$6(T))),m(e,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&m(e,["labels"],d);const p=f(n,["_self"]);p!=null&&m(e,["tunedModelInfo"],X3(p));const h=f(n,["defaultCheckpointId"]);h!=null&&m(e,["defaultCheckpointId"],h);const _=f(n,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(T=>T)),m(e,["checkpoints"],E)}return e}function P3(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],Y6(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],J6(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],v6(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function V3(n){const e={},t=f(n,["productImage"]);return t!=null&&m(e,["image"],Ti(t)),e}function U3(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&m(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&m(e,["parameters","safetySetting"],d);const p=f(n,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const h=f(n,["addWatermark"]);e!==void 0&&h!=null&&m(e,["parameters","addWatermark"],h);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&m(e,["parameters","outputOptions","mimeType"],_);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","compressionQuality"],E);const T=f(n,["enhancePrompt"]);e!==void 0&&T!=null&&m(e,["parameters","enhancePrompt"],T);const I=f(n,["labels"]);return e!==void 0&&I!=null&&m(e,["labels"],I),t}function L3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["source"]);o!=null&&F3(o,t);const a=f(e,["config"]);return a!=null&&U3(a,t),t}function O3(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>Wf(o))),m(e,["generatedImages"],i)}return e}function F3(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],Ti(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>V3(d))),m(e,["instances[0]","productImages"],u)}return t}function B3(n){const e={},t=f(n,["referenceImage"]);t!=null&&m(e,["referenceImage"],Ti(t));const i=f(n,["referenceId"]);i!=null&&m(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&m(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&m(e,["maskImageConfig"],k3(a));const u=f(n,["controlImageConfig"]);u!=null&&m(e,["controlImageConfig"],I6(u));const d=f(n,["styleImageConfig"]);d!=null&&m(e,["styleImageConfig"],d);const p=f(n,["subjectImageConfig"]);return p!=null&&m(e,["subjectImageConfig"],p),e}function iR(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function sR(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&m(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&m(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function q3(n){const e={},t=f(n,["category"]);if(t!=null&&m(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function G3(n){const e={},t=f(n,["image"]);return t!=null&&m(e,["image"],Ti(t)),e}function H3(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&m(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&m(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&m(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","binaryColorThreshold"],d);const p=f(n,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),t}function z3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["source"]);o!=null&&$3(o,t);const a=f(e,["config"]);return a!=null&&H3(a,t),t}function K3(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>g3(o))),m(e,["generatedMasks"],i)}return e}function $3(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&m(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],Ti(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&m(e,["instances[0]","scribble"],G3(a)),t}function Y3(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&m(e,["functionCallingConfig"],Q6(t));const i=f(n,["retrievalConfig"]);return i!=null&&m(e,["retrievalConfig"],i),e}function J3(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],A3(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],S3(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function rR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(T=>X6(T))),m(e,["functionDeclarations"],E)}const i=f(n,["retrieval"]);i!=null&&m(e,["retrieval"],i);const o=f(n,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const a=f(n,["computerUse"]);if(a!=null&&m(e,["computerUse"],a),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(n,["codeExecution"]);u!=null&&m(e,["codeExecution"],u);const d=f(n,["enterpriseWebSearch"]);d!=null&&m(e,["enterpriseWebSearch"],d);const p=f(n,["googleMaps"]);p!=null&&m(e,["googleMaps"],p);const h=f(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function Q3(n){const e={},t=f(n,["baseModel"]);t!=null&&m(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function X3(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&m(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&m(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function W3(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function Z3(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&m(e,["defaultCheckpointId"],a),t}function j3(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","name"],Qe(n,i));const o=f(e,["config"]);return o!=null&&W3(o,t),t}function e5(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["config"]);return o!=null&&Z3(o,t),t}function t5(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&m(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const p=f(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const h=f(n,["enhanceInputImage"]);e!==void 0&&h!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=f(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=f(n,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const T=f(n,["numberOfImages"]);e!==void 0&&T!=null&&m(e,["parameters","sampleCount"],T);const I=f(n,["mode"]);return e!==void 0&&I!=null&&m(e,["parameters","mode"],I),t}function n5(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["_url","model"],Qe(n,i));const o=f(e,["image"]);o!=null&&m(t,["instances[0]","image"],Ti(o));const a=f(e,["upscaleFactor"]);a!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&t5(u,t),t}function i5(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Wf(a))),m(e,["generatedImages"],o)}return e}function s5(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],Pr(i));const o=f(n,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function r5(n){const e={},t=f(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],Pr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function o5(n){const e={},t=f(n,["image"]);t!=null&&m(e,["_self"],Ti(t));const i=f(n,["maskMode"]);return i!=null&&m(e,["maskMode"],i),e}function a5(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],Zf(t));const i=f(n,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function l5(n){const e={},t=f(n,["image"]);t!=null&&m(e,["image"],Ti(t));const i=f(n,["referenceType"]);return i!=null&&m(e,["referenceType"],i),e}function oR(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&m(e,["encodedVideo"],Pr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function aR(n){const e={},t=f(n,["uri"]);t!=null&&m(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&m(e,["bytesBase64Encoded"],Pr(i));const o=f(n,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u5(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),t}function c5(n){const e={},t=f(n,["config"]);return t!=null&&u5(t,e),e}function d5(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function f5(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&d5(i,e),e}function h5(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function p5(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),t}function m5(n){const e={},t=f(n,["name"]);t!=null&&m(e,["name"],t);const i=f(n,["metadata"]);i!=null&&m(e,["metadata"],i);const o=f(n,["done"]);o!=null&&m(e,["done"],o);const a=f(n,["error"]);a!=null&&m(e,["error"],a);const u=f(n,["response"]);return u!=null&&m(e,["response"],y5(u)),e}function g5(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&m(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&p5(o,e),e}function y5(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&m(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function _5(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function v5(n){const e={},t=f(n,["config"]);return t!=null&&_5(t,e),e}function E5(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["fileSearchStores"],a)}return e}function lR(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>p)),m(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),t}function T5(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&lR(i,e),e}function A5(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S5="Content-Type",C5="X-Server-Timeout",w5="User-Agent",ug="x-goog-api-client",I5="1.34.0",R5=`google-genai-sdk/${I5}`,b5="v1beta1",x5="v1beta";class N5{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:b5,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:x5,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&D5(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await ES(o),new sg(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await ES(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return mi(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const d="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield be(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(_,{stream:!0});try{const k=JSON.parse(E);if("error"in k){const F=JSON.parse(JSON.stringify(k.error)),L=F.status,Y=F.code,ee=`got status: ${L}. ${JSON.stringify(k)}`;if(Y>=400&&Y<600)throw new Qf({message:ee,status:Y})}}catch(k){if(k.name==="ApiError")throw k}u+=E;let T=-1,I=0;for(;;){T=-1,I=0;for(const L of p){const Y=u.indexOf(L);Y!==-1&&(T===-1||Y<T)&&(T=Y,I=L.length)}if(T===-1)break;const k=u.substring(0,T);u=u.substring(T+I);const F=k.trim();if(F.startsWith(d)){const L=F.substring(d.length).trim();try{const Y=new Response(L,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield be(new sg(Y))}catch(Y){throw new Error(`exception parsing stream chunk ${L}. ${Y}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=R5+" "+this.clientOptions.userAgentExtra;return e[w5]=t,e[ug]=t,e[S5]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(C5,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const p={file:o},h=this.getFileName(e),_=he("upload/v1beta/files",p._url),E=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,p,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),p=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),E={};i!=null&&lR(i,E);const T=await this.fetchUploadUrl(h,d,p,_,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let p={};u?p=u:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:p});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function ES(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new Qf({message:o,status:t}):new Error(o)}}function D5(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const p in u)if(Object.prototype.hasOwnProperty.call(u,p)){const h=u[p],_=d[p];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[p]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[p]=h)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M5="mcp_used/unknown";let k5=!1;function uR(n){for(const e of n)if(P5(e)||typeof e=="object"&&"inputSchema"in e)return!0;return k5}function cR(n){var e;const t=(e=n[ug])!==null&&e!==void 0?e:"";n[ug]=(t+` ${M5}`).trimStart()}function P5(n){return n!==null&&typeof n=="object"&&n instanceof by}function V5(n){return mi(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield be(t.listTools({cursor:o}));for(const d of u.tools)yield yield be(d),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class by{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new by(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,p=(t=void 0,gi(V5(_))),h;h=await p.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const E=o;u.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=_}}catch(E){t={error:E}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),hL(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function U5(n,e,t){const i=new rL;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class L5{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=B5(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),p=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(W=>{h=W}),E=e.callbacks,T=function(){h({})},I=this.apiClient,k={onopen:T,onmessage:W=>{U5(I,E.onmessage,W)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(W){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(W){}},F=this.webSocketFactory.create(p,F5(u),k);F.connect(),await _;const ee={setup:{model:Qe(this.apiClient,e.model)}};return F.send(JSON.stringify(ee)),new O5(F,this.apiClient)}}class O5{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=c6(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=u6(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(xa.PLAY)}pause(){this.sendPlaybackControl(xa.PAUSE)}stop(){this.sendPlaybackControl(xa.STOP)}resetContext(){this.sendPlaybackControl(xa.RESET_CONTEXT)}close(){this.conn.close()}}function F5(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function B5(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function G5(n,e,t){const i=new sL;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=h6(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class H5{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new L5(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&uR(e.config.tools)&&cR(E);const T=Y5(E);if(this.apiClient.isVertexAI())_=`${p}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,_);else{const N=this.apiClient.getApiKey();let U="BidiGenerateContent",P="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",P="access_token"),_=`${p}/ws/google.ai.generativelanguage.${h}.GenerativeService.${U}?${P}=${N}`}let I=()=>{};const k=new Promise(N=>{I=N}),F=e.callbacks,L=function(){var N;(N=F==null?void 0:F.onopen)===null||N===void 0||N.call(F),I({})},Y=this.apiClient,ee={onopen:L,onmessage:N=>{G5(Y,F.onmessage,N)},onerror:(t=F==null?void 0:F.onerror)!==null&&t!==void 0?t:function(N){},onclose:(i=F==null?void 0:F.onclose)!==null&&i!==void 0?i:function(N){}},W=this.webSocketFactory.create(_,$5(T),ee);W.connect(),await k;let ae=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const N=this.apiClient.getProject(),U=this.apiClient.getLocation();ae=`projects/${N}/locations/${U}/`+ae}let oe={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Pu.AUDIO]}:e.config.responseModalities=[Pu.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],D=[];for(const N of le)if(this.isCallableTool(N)){const U=N;D.push(await U.tool())}else D.push(N);D.length>0&&(e.config.tools=D);const M={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?oe=l6(this.apiClient,M):oe=a6(this.apiClient,M),delete oe.config,W.send(JSON.stringify(oe)),new K5(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const z5={turnComplete:!0};class K5{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=jn(t.turns),e.isVertexAI()||(i=i.map(o=>Xf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(q5)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},z5),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:f6(e)}:t={realtimeInput:d6(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function $5(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function Y5(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TS=10;function AS(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Fa(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Fa(n){return"callTool"in n&&typeof n.callTool=="function"}function J5(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Fa(o)))!==null&&i!==void 0?i:!1}function SS(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Fa(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function CS(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q5 extends Ns{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const p=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!J5(t)||AS(t.config))return await this.generateContentInternal(p);const h=SS(t);if(h.length>0){const F=h.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${F}.`)}let _,E;const T=jn(p.contents),I=(a=(o=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:TS;let k=0;for(;k<I&&(_=await this.generateContentInternal(p),!(!_.functionCalls||_.functionCalls.length===0));){const F=_.candidates[0].content,L=[];for(const Y of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(Fa(Y)){const W=await Y.callTool(_.functionCalls);L.push(...W)}k++,E={role:"user",parts:L},p.contents=jn(p.contents),p.contents.push(F),p.contents.push(E),CS(p.config)&&(T.push(F),T.push(E))}return CS(p.config)&&(_.automaticFunctionCallingHistory=T),_},this.generateContentStream=async t=>{var i,o,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),AS(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const p=SS(t);if(p.length>0){const E=p.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((o=p==null?void 0:p.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=p==null?void 0:p.safetyAttributes:u.push(p);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Mo(bs.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,p;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((p=(d=t.source)===null||d===void 0?void 0:d.video)===null||p===void 0)&&p.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async p=>Fa(p)?await p.tool():p)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&uR(e.config.tools)){const p=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},p);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),cR(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Fa(u)){const d=u,p=await d.tool();for(const h of(o=p.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:TS;let u=!1,d=0;const p=await this.initAfcToolsMap(e);return(function(h,_,E){return mi(this,arguments,function*(){for(var T,I,k,F,L,Y;d<a;){u&&(d++,u=!1);const oe=yield be(h.processParamsMaybeAddMcpUsage(E)),le=yield be(h.generateContentStreamInternal(oe)),D=[],M=[];try{for(var ee=!0,W=(I=void 0,gi(le)),ae;ae=yield be(W.next()),T=ae.done,!T;ee=!0){F=ae.value,ee=!1;const N=F;if(yield yield be(N),N.candidates&&(!((L=N.candidates[0])===null||L===void 0)&&L.content)){M.push(N.candidates[0].content);for(const U of(Y=N.candidates[0].content.parts)!==null&&Y!==void 0?Y:[])if(d<a&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(U.functionCall.name)){const P=yield be(_.get(U.functionCall.name).callTool([U.functionCall]));D.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(N){I={error:N}}finally{try{!ee&&!T&&(k=W.return)&&(yield be(k.call(W)))}finally{if(I)throw I.error}}if(D.length>0){u=!0;const N=new cu;N.candidates=[{content:{role:"user",parts:D}}],yield yield be(N);const U=[];U.push(...M),U.push({role:"user",parts:D});const P=jn(E.contents).concat(U);E.contents=P}else break}})})(this,p,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=yS(this.apiClient,e);return d=he("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=vS(_),T=new cu;return Object.assign(T,E),T})}else{const h=gS(this.apiClient,e);return d=he("{model}:generateContent",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=_S(_),T=new cu;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=yS(this.apiClient,e);return d=he("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return mi(this,arguments,function*(){var T,I,k,F;try{for(var L=!0,Y=gi(E),ee;ee=yield be(Y.next()),T=ee.done,!T;L=!0){F=ee.value,L=!1;const W=F,ae=vS(yield be(W.json()));ae.sdkHttpResponse={headers:W.headers};const oe=new cu;Object.assign(oe,ae),yield yield be(oe)}}catch(W){I={error:W}}finally{try{!L&&!T&&(k=Y.return)&&(yield be(k.call(Y)))}finally{if(I)throw I.error}}})})}else{const h=gS(this.apiClient,e);return d=he("{model}:streamGenerateContent?alt=sse",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return mi(this,arguments,function*(){var T,I,k,F;try{for(var L=!0,Y=gi(E),ee;ee=yield be(Y.next()),T=ee.done,!T;L=!0){F=ee.value,L=!1;const W=F,ae=_S(yield be(W.json()));ae.sdkHttpResponse={headers:W.headers};const oe=new cu;Object.assign(oe,ae),yield yield be(oe)}}catch(W){I={error:W}}finally{try{!L&&!T&&(k=Y.return)&&(yield be(k.call(Y)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=H6(this.apiClient,e);return d=he("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=K6(_),T=new jA;return Object.assign(T,E),T})}else{const h=G6(this.apiClient,e);return d=he("{model}:batchEmbedContents",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=z6(_),T=new jA;return Object.assign(T,E),T})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=n3(this.apiClient,e);return d=he("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=s3(_),T=new eS;return Object.assign(T,E),T})}else{const h=t3(this.apiClient,e);return d=he("{model}:predict",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=i3(_),T=new eS;return Object.assign(T,E),T})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=O6(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=F6(p),_=new YU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=n5(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=i5(p),_=new JU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=L3(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=O3(p),_=new QU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=z3(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=K3(p),_=new XU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=T3(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>lg(_))}else{const h=E3(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>ag(_))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=N3(this.apiClient,e);return d=he("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=M3(_),T=new tS;return Object.assign(T,E),T})}else{const h=x3(this.apiClient,e);return d=he("{models_url}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=D3(_),T=new tS;return Object.assign(T,E),T})}}async update(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=e5(this.apiClient,e);return d=he("{model}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>lg(_))}else{const h=j3(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>ag(_))}}async delete(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=P6(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=U6(_),T=new nS;return Object.assign(T,E),T})}else{const h=k6(this.apiClient,e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=V6(_),T=new nS;return Object.assign(T,E),T})}}async countTokens(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=N6(this.apiClient,e);return d=he("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=M6(_),T=new iS;return Object.assign(T,E),T})}else{const h=x6(this.apiClient,e);return d=he("{model}:countTokens",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=D6(_),T=new iS;return Object.assign(T,E),T})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=A6(this.apiClient,e);return a=he("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>{const h=S6(p),_=new WU;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=c3(this.apiClient,e);return d=he("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const E=l3(_),T=new Tf;return Object.assign(T,E),T})}else{const h=u3(this.apiClient,e);return d=he("{model}:predictLongRunning",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const E=a3(_),T=new Tf;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X5 extends Ns{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=qU(e);return d=he("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=BU(e);return d=he("{operationName}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=kU(e);return a=he("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W5(n){const e={},t=f(n,["data"]);if(t!=null&&m(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Z5(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>aF(a))),m(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&m(e,["role"],i),e}function j5(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&m(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&m(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&m(t,["bidiGenerateContentSetup"],oF(n,d));const p=f(e,["lockAdditionalFields"]);return t!==void 0&&p!=null&&m(t,["fieldMask"],p),i}function eF(n,e){const t={},i=f(e,["config"]);return i!=null&&m(t,["config"],j5(n,i,t)),t}function tF(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function nF(n){const e={},t=f(n,["id"]);t!=null&&m(e,["id"],t);const i=f(n,["args"]);i!=null&&m(e,["args"],i);const o=f(n,["name"]);if(o!=null&&m(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iF(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function sF(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function rF(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","topK"],d);const p=f(n,["maxOutputTokens"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","maxOutputTokens"],p);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Ry(E));const T=f(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=f(n,["systemInstruction"]);e!==void 0&&k!=null&&m(e,["setup","systemInstruction"],Z5(ln(k)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let le=nl(F);Array.isArray(le)&&(le=le.map(D=>uF(tl(D)))),m(e,["setup","tools"],le)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],lF(L));const Y=f(n,["inputAudioTranscription"]);e!==void 0&&Y!=null&&m(e,["setup","inputAudioTranscription"],Y);const ee=f(n,["outputAudioTranscription"]);e!==void 0&&ee!=null&&m(e,["setup","outputAudioTranscription"],ee);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&m(e,["setup","realtimeInputConfig"],W);const ae=f(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&m(e,["setup","contextWindowCompression"],ae);const oe=f(n,["proactivity"]);if(e!==void 0&&oe!=null&&m(e,["setup","proactivity"],oe),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function oF(n,e){const t={},i=f(e,["model"]);i!=null&&m(t,["setup","model"],Qe(n,i));const o=f(e,["config"]);return o!=null&&m(t,["config"],rF(o,t)),t}function aF(n){const e={},t=f(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&m(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&m(e,["fileData"],tF(a));const u=f(n,["functionCall"]);u!=null&&m(e,["functionCall"],nF(u));const d=f(n,["functionResponse"]);d!=null&&m(e,["functionResponse"],d);const p=f(n,["inlineData"]);p!=null&&m(e,["inlineData"],W5(p));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const E=f(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=f(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function lF(n){const e={},t=f(n,["handle"]);if(t!=null&&m(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uF(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(n,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=f(n,["computerUse"]);o!=null&&m(e,["computerUse"],o);const a=f(n,["fileSearch"]);a!=null&&m(e,["fileSearch"],a);const u=f(n,["codeExecution"]);if(u!=null&&m(e,["codeExecution"],u),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(n,["googleMaps"]);d!=null&&m(e,["googleMaps"],iF(d));const p=f(n,["googleSearch"]);p!=null&&m(e,["googleSearch"],sF(p));const h=f(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cF(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function dF(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=cF(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const p=[];a&&p.push(a),d.length>0&&p.push(...d),p.length>0?n.fieldMask=p.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class fF extends Ns{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=eF(this.apiClient,e);a=he("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const p=dF(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hF(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function pF(n){const e={},t=f(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&hF(i,e),e}function mF(n){const e={},t=f(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function gF(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),t}function yF(n){const e={},t=f(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&gF(i,e),e}function _F(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vF extends Ns{constructor(e){super(),this.apiClient=e,this.list=async t=>new Mo(bs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mF(e);return a=he("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=pF(e);o=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=yF(e);return a=he("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=_F(p),_=new ZU;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EF extends Ns{constructor(e,t=new vF(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Mo(bs.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=c5(e);return a=he("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h5(e);return a=he("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=f5(e);o=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=v5(e);return a=he("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=E5(p),_=new jU;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=T5(e);return a=he("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=A5(p),_=new eL;return Object.assign(_,h),_})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=g5(e);return a=he("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),o.then(p=>{const h=m5(p),_=new Ay;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dR=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return dR=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const TF=()=>dR();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cg(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const dg=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ei extends Error{}class gn extends ei{constructor(e,t,i,o){super(`${gn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new jf({message:i,cause:dg(t)});const a=t;return e===400?new hR(e,a,i,o):e===401?new pR(e,a,i,o):e===403?new mR(e,a,i,o):e===404?new gR(e,a,i,o):e===409?new yR(e,a,i,o):e===422?new _R(e,a,i,o):e===429?new vR(e,a,i,o):e>=500?new ER(e,a,i,o):new gn(e,a,i,o)}}class fg extends gn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class jf extends gn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class fR extends jf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class hR extends gn{}class pR extends gn{}class mR extends gn{}class gR extends gn{}class yR extends gn{}class _R extends gn{}class vR extends gn{}class ER extends gn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AF=/^[a-z][a-z0-9+.-]*:/i,SF=n=>AF.test(n);let hg=n=>(hg=Array.isArray,hg(n));const CF=hg;let wF=CF;const wS=wF;function IF(n){if(!n)return!0;for(const e in n)return!1;return!0}function RF(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const bF=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ei(`${n} must be an integer`);if(e<0)throw new ei(`${n} must be a positive integer`);return e},xF=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NF=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ra="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DF(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const MF=()=>{var n,e,t,i,o;const a=DF();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":RS(Deno.build.os),"X-Stainless-Arch":IS(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":RS((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":IS((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=kF();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ra,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function kF(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const IS=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",RS=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Pd;const PF=()=>Pd??(Pd=MF());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VF(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function TR(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function UF(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return TR({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function AR(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function LF(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OF=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SR=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Cm(n,e,t){return SR(),new File(n,e??"unknown_file",t)}function FF(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const BF=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CR=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",qF=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&CR(n),GF=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function HF(n,e,t){if(SR(),n=await n,qF(n))return n instanceof File?n:Cm([await n.arrayBuffer()],n.name);if(GF(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Cm(await pg(o),e,t)}const i=await pg(n);if(e||(e=FF(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return Cm(i,e,t)}async function pg(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(CR(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(BF(n))try{for(var d=!0,p=gi(n),h;h=await p.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const _=o;u.push(...await pg(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(i=p.return)&&await i.call(p)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${zF(n)}`)}return u}function zF(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wR{constructor(e){this._client=e}}wR._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IR(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const bS=Object.freeze(Object.create(null)),KF=(n=IR)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((_,E,T)=>{var I,k,F;/[?#]/.test(E)&&(o=!0);const L=i[T];let Y=(o?encodeURIComponent:n)(""+L);return T!==i.length&&(L==null||typeof L=="object"&&L.toString===((F=Object.getPrototypeOf((k=Object.getPrototypeOf((I=L.hasOwnProperty)!==null&&I!==void 0?I:bS))!==null&&k!==void 0?k:bS))===null||F===void 0?void 0:F.toString))&&(Y=L+"",a.push({start:_.length+E.length,length:Y.length,error:`Value of type ${Object.prototype.toString.call(L).slice(8,-1)} is not a valid path parameter`})),_+E+(T===i.length?"":Y)},""),d=u.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=p.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,E)=>_.start-E.start),a.length>0){let _=0;const E=a.reduce((T,I)=>{const k=" ".repeat(I.start-_),F="^".repeat(I.length);return _=I.start+I.length,T+k+F},"");throw new ei(`Path parameters result in path with invalid segments:
${a.map(T=>T.error).join(`
`)}
${u}
${E}`)}return u}),Vd=KF(IR);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RR extends wR{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=Sf(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new ei("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ei("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Vd`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(Vd`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(Vd`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=Sf(a,["api_version"]);return this._client.get(Vd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}RR._key=Object.freeze(["interactions"]);class bR extends RR{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $F(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let Ud;function xy(n){let e;return(Ud??(e=new globalThis.TextEncoder,Ud=e.encode.bind(e)))(n)}let Ld;function xS(n){let e;return(Ld??(e=new globalThis.TextDecoder,Ld=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xy(e):e;this.buffer=$F([this.buffer,t]);const i=[];let o;for(;(o=YF(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(xS(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=xS(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}eh.NEWLINE_CHARS=new Set([`
`,"\r"]);eh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function YF(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function JF(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cf={off:0,error:200,warn:300,info:400,debug:500},NS=(n,e,t)=>{if(n){if(RF(Cf,n))return n;hn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Cf))}`)}};function yu(){}function Od(n,e,t){return!e||Cf[n]>Cf[t]?yu:e[n].bind(e)}const QF={error:yu,warn:yu,info:yu,debug:yu};let DS=new WeakMap;function hn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return QF;const o=DS.get(t);if(o&&o[0]===i)return o[1];const a={error:Od("error",t,i),warn:Od("warn",t,i),info:Od("info",t,i),debug:Od("debug",t,i)};return DS.set(t,[i,a]),a}const ho=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Na{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?hn(i):console;function u(){return mi(this,arguments,function*(){var p,h,_,E;if(o)throw new ei("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let T=!1;try{try{for(var I=!0,k=gi(XF(e,t)),F;F=yield be(k.next()),p=F.done,!p;I=!0){E=F.value,I=!1;const L=E;if(!T)if(L.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield be(JSON.parse(L.data))}catch(Y){throw a.error("Could not parse message into JSON:",L.data),a.error("From chunk:",L.raw),Y}}}catch(L){h={error:L}}finally{try{!I&&!p&&(_=k.return)&&(yield be(_.call(k)))}finally{if(h)throw h.error}}T=!0}catch(L){if(cg(L))return yield be(void 0);throw L}finally{T||t.abort()}})}return new Na(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return mi(this,arguments,function*(){var p,h,_,E;const T=new eh,I=AR(e);try{for(var k=!0,F=gi(I),L;L=yield be(F.next()),p=L.done,!p;k=!0){E=L.value,k=!1;const Y=E;for(const ee of T.decode(Y))yield yield be(ee)}}catch(Y){h={error:Y}}finally{try{!k&&!p&&(_=F.return)&&(yield be(_.call(F)))}finally{if(h)throw h.error}}for(const Y of T.flush())yield yield be(Y)})}function u(){return mi(this,arguments,function*(){var p,h,_,E;if(o)throw new ei("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let T=!1;try{try{for(var I=!0,k=gi(a()),F;F=yield be(k.next()),p=F.done,!p;I=!0){E=F.value,I=!1;const L=E;T||L&&(yield yield be(JSON.parse(L)))}}catch(L){h={error:L}}finally{try{!I&&!p&&(_=k.return)&&(yield be(_.call(k)))}finally{if(h)throw h.error}}T=!0}catch(L){if(cg(L))return yield be(void 0);throw L}finally{T||t.abort()}})}return new Na(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Na(()=>o(e),this.controller,this.client),new Na(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return TR({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=xy(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function XF(n,e){return mi(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ei("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ei("Attempted to iterate over a response with no body");const d=new ZF,p=new eh,h=AR(n.body);try{for(var _=!0,E=gi(WF(h)),T;T=yield be(E.next()),i=T.done,!i;_=!0){u=T.value,_=!1;const I=u;for(const k of p.decode(I)){const F=d.decode(k);F&&(yield yield be(F))}}}catch(I){o={error:I}}finally{try{!_&&!i&&(a=E.return)&&(yield be(a.call(E)))}finally{if(o)throw o.error}}for(const I of p.flush()){const k=d.decode(I);k&&(yield yield be(k))}})}function WF(n){return mi(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var d=!0,p=gi(n),h;h=yield be(p.next()),t=h.done,!t;d=!0){a=h.value,d=!1;const _=a;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?xy(_):_;let T=new Uint8Array(u.length+E.length);T.set(u),T.set(E,u.length),u=T;let I;for(;(I=JF(u))!==-1;)yield yield be(u.slice(0,I)),u=u.slice(I)}}catch(_){i={error:_}}finally{try{!d&&!t&&(o=p.return)&&(yield be(o.call(p)))}finally{if(i)throw i.error}}u.length>0&&(yield yield be(u))})}class ZF{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=jF(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function jF(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function eB(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return hn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Na.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const p=t.headers.get("content-type"),h=(d=p==null?void 0:p.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return hn(n).debug(`[${i}] response parsed`,ho({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ny extends Promise{constructor(e,t,i=eB){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Ny(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xR=Symbol("brand.privateNullableHeaders");function*tB(n){if(!n)return;if(xR in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():wS(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=wS(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,d])}}const du=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of tB(i)){const d=a.toLowerCase();o.has(d)||(e.delete(a),o.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[xR]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wm=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=RU)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var NR;class th{constructor(e){var t,i,o,a,u,d,p,{baseURL:h=wm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=wm("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,T=Sf(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:_,apiVersion:E},T),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(i=I.timeout)!==null&&i!==void 0?i:th.DEFAULT_TIMEOUT,this.logger=(o=I.logger)!==null&&o!==void 0?o:console;const k="warn";this.logLevel=k,this.logLevel=(u=(a=NS(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:NS(wm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:k,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(p=I.fetch)!==null&&p!==void 0?p:VF(),this.encoder=OF,this._options=I,this.apiKey=_,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=du([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return du([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return du([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new ei(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ra}`}defaultIdempotencyKey(){return`stainless-node-retry-${TF()}`}makeStatusError(e,t,i,o){return gn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=SF(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return IF(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new Ny(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const d=await e,p=(o=d.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=p),await this.prepareOptions(d);const{req:h,url:_,timeout:E}=await this.buildRequest(d,{retryCount:p-t});await this.prepareRequest(h,{url:_,options:d});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=i===void 0?"":`, retryOf: ${i}`,k=Date.now();if(hn(this).debug(`[${T}] sending request`,ho({retryOfRequestLogID:i,method:d.method,url:_,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new fg;const F=new AbortController,L=await this.fetchWithTimeout(_,h,E,F).catch(dg),Y=Date.now();if(L instanceof globalThis.Error){const W=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new fg;const ae=cg(L)||/timed? ?out/i.test(String(L)+("cause"in L?String(L.cause):""));if(t)return hn(this).info(`[${T}] connection ${ae?"timed out":"failed"} - ${W}`),hn(this).debug(`[${T}] connection ${ae?"timed out":"failed"} (${W})`,ho({retryOfRequestLogID:i,url:_,durationMs:Y-k,message:L.message})),this.retryRequest(d,t,i??T);throw hn(this).info(`[${T}] connection ${ae?"timed out":"failed"} - error; no more retries left`),hn(this).debug(`[${T}] connection ${ae?"timed out":"failed"} (error; no more retries left)`,ho({retryOfRequestLogID:i,url:_,durationMs:Y-k,message:L.message})),ae?new fR:new jf({cause:L})}const ee=`[${T}${I}] ${h.method} ${_} ${L.ok?"succeeded":"failed"} with status ${L.status} in ${Y-k}ms`;if(!L.ok){const W=await this.shouldRetry(L);if(t&&W){const N=`retrying, ${t} attempts remaining`;return await LF(L.body),hn(this).info(`${ee} - ${N}`),hn(this).debug(`[${T}] response error (${N})`,ho({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:Y-k})),this.retryRequest(d,t,i??T,L.headers)}const ae=W?"error; no more retries left":"error; not retryable";hn(this).info(`${ee} - ${ae}`);const oe=await L.text().catch(N=>dg(N).message),le=xF(oe),D=le?void 0:oe;throw hn(this).debug(`[${T}] response error (${ae})`,ho({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,message:D,durationMs:Date.now()-k})),this.makeStatusError(L.status,le,D,L.headers)}return hn(this).info(ee),hn(this).debug(`[${T}] response start`,ho({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:Y-k})),{response:L,options:d,controller:F,requestLogID:T,retryOfRequestLogID:i,startTime:k}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:d}=a,p=Sf(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),_=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,E=Object.assign(Object.assign(Object.assign({signal:o.signal},_?{duplex:"half"}:{}),{method:"GET"}),p);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const d=o==null?void 0:o.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const p=o==null?void 0:o.get("retry-after");if(p&&!u){const h=parseFloat(p);Number.isNaN(h)?u=Date.parse(p)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await NF(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:d,path:p,query:h,defaultBaseURL:_}=u,E=this.buildURL(p,h,_);"timeout"in u&&bF("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:T,body:I}=this.buildBody({options:u}),k=await this.buildHeaders({options:e,method:d,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:k},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=du([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),PF()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=du([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:UF(e)}:this.encoder({body:e,headers:i})}}th.DEFAULT_TIMEOUT=6e4;class Yt extends th{constructor(){super(...arguments),this.interactions=new bR(this)}}NR=Yt;Yt.GeminiNextGenAPIClient=NR;Yt.GeminiNextGenAPIClientError=ei;Yt.APIError=gn;Yt.APIConnectionError=jf;Yt.APIConnectionTimeoutError=fR;Yt.APIUserAbortError=fg;Yt.NotFoundError=gR;Yt.ConflictError=yR;Yt.RateLimitError=vR;Yt.BadRequestError=hR;Yt.AuthenticationError=pR;Yt.InternalServerError=ER;Yt.PermissionDeniedError=mR;Yt.UnprocessableEntityError=_R;Yt.toFile=HF;Yt.Interactions=bR;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nB(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function iB(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function sB(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function rB(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function oB(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","batchSize"],d);const p=f(n,["learningRate"]);if(e!==void 0&&p!=null&&m(e,["tuningTask","hyperparameters","learningRate"],p),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function aB(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec"],MS(I))}else if(o==="PREFERENCE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec"],MS(I))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let p=f(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(p==="PREFERENCE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(h==="PREFERENCE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(_==="PREFERENCE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const T=f(n,["beta"]);return e!==void 0&&T!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),i}function lB(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&vB(a);const u=f(n,["config"]);return u!=null&&oB(u,t),t}function uB(n,e){const t={},i=f(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&m(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&EB(a,t,e);const u=f(n,["config"]);return u!=null&&aB(u,t,e),t}function cB(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function dB(n,e){const t={},i=f(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function fB(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function hB(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function pB(n,e){const t={},i=f(n,["config"]);return i!=null&&fB(i,t),t}function mB(n,e){const t={},i=f(n,["config"]);return i!=null&&hB(i,t),t}function gB(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>DR(d))),m(t,["tuningJobs"],u)}return t}function yB(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&m(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>mg(d))),m(t,["tuningJobs"],u)}return t}function _B(n,e){const t={},i=f(n,["name"]);i!=null&&m(t,["model"],i);const o=f(n,["name"]);return o!=null&&m(t,["endpoint"],o),t}function vB(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(t,["examples","examples"],o)}return t}function EB(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function DR(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const a=f(n,["state"]);a!=null&&m(t,["state"],YI(a));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["tuningTask","completeTime"]);p!=null&&m(t,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=f(n,["description"]);_!=null&&m(t,["description"],_);const E=f(n,["baseModel"]);E!=null&&m(t,["baseModel"],E);const T=f(n,["_self"]);return T!=null&&m(t,["tunedModel"],_B(T)),t}function mg(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const a=f(n,["state"]);a!=null&&m(t,["state"],YI(a));const u=f(n,["createTime"]);u!=null&&m(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&m(t,["startTime"],d);const p=f(n,["endTime"]);p!=null&&m(t,["endTime"],p);const h=f(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const _=f(n,["error"]);_!=null&&m(t,["error"],_);const E=f(n,["description"]);E!=null&&m(t,["description"],E);const T=f(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const I=f(n,["tunedModel"]);I!=null&&m(t,["tunedModel"],I);const k=f(n,["preTunedModel"]);k!=null&&m(t,["preTunedModel"],k);const F=f(n,["supervisedTuningSpec"]);F!=null&&m(t,["supervisedTuningSpec"],F);const L=f(n,["preferenceOptimizationSpec"]);L!=null&&m(t,["preferenceOptimizationSpec"],L);const Y=f(n,["tuningDataStats"]);Y!=null&&m(t,["tuningDataStats"],Y);const ee=f(n,["encryptionSpec"]);ee!=null&&m(t,["encryptionSpec"],ee);const W=f(n,["partnerModelTuningSpec"]);W!=null&&m(t,["partnerModelTuningSpec"],W);const ae=f(n,["customBaseModel"]);ae!=null&&m(t,["customBaseModel"],ae);const oe=f(n,["experiment"]);oe!=null&&m(t,["experiment"],oe);const le=f(n,["labels"]);le!=null&&m(t,["labels"],le);const D=f(n,["outputUri"]);D!=null&&m(t,["outputUri"],D);const M=f(n,["pipelineJob"]);M!=null&&m(t,["pipelineJob"],M);const N=f(n,["serviceAccount"]);N!=null&&m(t,["serviceAccount"],N);const U=f(n,["tunedModelDisplayName"]);U!=null&&m(t,["tunedModelDisplayName"],U);const P=f(n,["veoTuningSpec"]);return P!=null&&m(t,["veoTuningSpec"],P),t}function TB(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&m(t,["name"],o);const a=f(n,["metadata"]);a!=null&&m(t,["metadata"],a);const u=f(n,["done"]);u!=null&&m(t,["done"],u);const d=f(n,["error"]);return d!=null&&m(t,["error"],d),t}function MS(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&m(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&m(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AB extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Mo(bs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:ig.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=dB(e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>mg(_))}else{const h=cB(e);return d=he("{name}",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>DR(_))}}async listInternal(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=mB(e);return d=he("tuningJobs",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=yB(_),T=new sS;return Object.assign(T,E),T})}else{const h=pB(e);return d=he("tunedModels",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=gB(_),T=new sS;return Object.assign(T,E),T})}}async cancel(e){var t,i,o,a;let u,d="",p={};if(this.apiClient.isVertexAI()){const h=iB(e);return d=he("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=rB(_),T=new rS;return Object.assign(T,E),T})}else{const h=nB(e);return d=he("{name}:cancel",h._url),p=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=sB(_),T=new rS;return Object.assign(T,E),T})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=uB(e,e);return a=he("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>mg(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lB(e);return a=he("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:p.headers},_})),o.then(p=>TB(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SB{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const CB=1024*1024*8,wB=3,IB=1e3,RB=2,wf="x-goog-upload-status";async function bB(n,e,t){var i;const o=await MR(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[wf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function xB(n,e,t){var i;const o=await MR(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[wf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=qI(a),d=new Sy;return Object.assign(d,u),d}async function MR(n,e,t){var i,o;let a=0,u=0,d=new sg(new Response),p="upload";for(a=n.size;u<a;){const h=Math.min(CB,a-u),_=n.slice(u,u+h);u+h>=a&&(p+=", finalize");let E=0,T=IB;for(;E<wB&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[wf]));)E++,await DB(T),T=T*RB;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[wf])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function NB(n){return{size:n.size,type:n.type}}function DB(n){return new Promise(e=>setTimeout(e,n))}class MB{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bB(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xB(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await NB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kB{create(e,t,i){return new PB(e,t,i)}}class PB{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kS="x-goog-api-key";class VB{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(kS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(kS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UB="gl-node/";class LB{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=DU(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new VB(this.apiKey);this.apiClient=new N5({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:UB+"web",uploader:new MB,downloader:new SB}),this.models=new Q5(this.apiClient),this.live=new H5(this.apiClient,o,new kB),this.batches=new oO(this.apiClient),this.chats=new qO(this.models,this.apiClient),this.caches=new OO(this.apiClient),this.files=new WO(this.apiClient),this.operations=new X5(this.apiClient),this.authTokens=new fF(this.apiClient),this.tunings=new AB(this.apiClient),this.fileSearchStores=new EF(this.apiClient)}}const Xu="spanish_assistant_vocab",Dy="spanish_assistant_last_analysis",kR="spanish_assistant_history",PR="spanish_assistant_theme",My="spanish_assistant_session_key",So="spanish_assistant_books";let ti=null;uI(go,n=>{ti=n});const ky=n=>{const e={};return Object.keys(n).forEach(t=>{n[t]!==void 0&&(e[t]=n[t])}),e},VR=n=>{sessionStorage.setItem(My,n)},Py=()=>sessionStorage.getItem(My),OB=()=>{sessionStorage.removeItem(My)},Vy=()=>{const n=ti;return n?qu(ts,"users",n.uid,"vocabulary"):null},Nr=async()=>{if(ti)try{const e=Vy();if(!e)return[];const t=jg(e,iy("addedAt","desc"));return(await ry(t)).docs.map(o=>o.data())}catch(e){return console.error("Failed to load vocab from Firestore",e),[]}try{const e=localStorage.getItem(Xu);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load vocab from LocalStorage",e),[]}},FB=async n=>{const e=ti,t=Date.now();let i=0;const o=await Nr(),a=new Set(o.map(d=>d.word.toLowerCase()));if(e)try{const d=Ow(ts),p=Vy();if(!p)return 0;for(const h of n){const _=h.word.toLowerCase();if(!a.has(_)){const E=crypto.randomUUID(),T={...h,id:E,addedAt:t,mastered:!1},I=xo(p,E);d.set(I,ky(T)),i++,a.add(_)}}return i>0&&await d.commit(),i}catch(d){return console.error("Batch add failed in Firestore",d),0}const u=[...o];return n.forEach(d=>{const p=d.word.toLowerCase();a.has(p)||(u.unshift({...d,id:crypto.randomUUID(),addedAt:t,mastered:!1}),i++,a.add(p))}),i>0&&localStorage.setItem(Xu,JSON.stringify(u)),i},BB=async n=>{const e=ti;let t=0;if(e)try{const u=Ow(ts),d=Vy();if(!d)return 0;const p=await Nr(),h=new Set(p.map(_=>_.word.toLowerCase()));for(const _ of n)if(!h.has(_.word.toLowerCase())){const E=_.id||crypto.randomUUID(),T=xo(d,E),I={..._,id:E};u.set(T,ky(I)),t++,h.add(_.word.toLowerCase())}return await u.commit(),t}catch(u){return console.error("Import failed in Firestore",u),0}const i=await Nr(),o=[...i],a=new Set(i.map(u=>u.word.toLowerCase()));return n.forEach(u=>{a.has(u.word.toLowerCase())||(o.unshift({...u,id:u.id||crypto.randomUUID()}),t++,a.add(u.word.toLowerCase()))}),t>0&&localStorage.setItem(Xu,JSON.stringify(o)),t},qB=async n=>{const e=ti;if(e)try{const o=xo(ts,"users",e.uid,"vocabulary",n);await Uw(o);return}catch(o){console.error("Failed to delete from Firestore",o)}const i=(await Nr()).filter(o=>o.id!==n);localStorage.setItem(Xu,JSON.stringify(i))},GB=async n=>{const e=ti,t=await Nr(),i=t.find(u=>u.id===n);if(!i)return;const o={...i,mastered:!i.mastered};if(e)try{const u=xo(ts,"users",e.uid,"vocabulary",n);await Ok(u,ky(o),{merge:!0});return}catch(u){console.error("Failed to update Firestore",u)}const a=t.map(u=>u.id===n?o:u);localStorage.setItem(Xu,JSON.stringify(a))},HB=async n=>(await Nr()).some(t=>t.word.toLowerCase()===n.toLowerCase()),zB=(n,e)=>{const t={data:n,image:e,timestamp:Date.now()};localStorage.setItem(Dy,JSON.stringify(t));const i=KB(),o=[t,...i].slice(0,10);localStorage.setItem(kR,JSON.stringify(o))},UR=()=>{const n=localStorage.getItem(Dy);return n?JSON.parse(n):null},Im=()=>{localStorage.removeItem(Dy)},KB=()=>{const n=localStorage.getItem(kR);return n?JSON.parse(n):[]},$B=()=>localStorage.getItem(PR)||"light",YB=n=>{localStorage.setItem(PR,n)},nh=async()=>{const n=ti;if(n)try{const t=qu(ts,"users",n.uid,"books"),i=jg(t,iy("createdAt","desc"));return(await ry(i)).docs.map(a=>({id:a.id,...a.data()}))}catch(t){return console.error("Failed to load books",t),[]}const e=localStorage.getItem(So);return e?JSON.parse(e):[]},JB=async(n,e)=>{const t=ti,i={title:n,author:e,createdAt:Date.now(),pageCount:0,coverStyle:["bg-emerald-800","bg-amber-900","bg-slate-800","bg-indigo-900"][Math.floor(Math.random()*4)]};if(t)try{const d=qu(ts,"users",t.uid,"books");return(await Lw(d,i)).id}catch(d){throw console.error("Failed to create book",d),d}const o=await nh(),a=crypto.randomUUID(),u={...i,id:a};return localStorage.setItem(So,JSON.stringify([u,...o])),a},QB=async n=>{const e=ti;if(e)try{await Uw(xo(ts,"users",e.uid,"books",n));return}catch(o){console.error(o)}const i=(await nh()).filter(o=>o.id!==n);localStorage.setItem(So,JSON.stringify(i)),localStorage.removeItem(`${So}_pages_${n}`)},gg=async n=>{const e=ti;if(e)try{const i=qu(ts,"users",e.uid,"books",n,"pages"),o=jg(i,iy("pageNumber","asc"));return(await ry(o)).docs.map(u=>({id:u.id,...u.data()}))}catch(i){return console.error("Failed to load pages",i),[]}const t=localStorage.getItem(`${So}_pages_${n}`);return t?JSON.parse(t):[]},XB=async(n,e,t)=>{const i=ti,a=(await gg(n)).length+1,u={bookId:n,pageNumber:a,image:e,analysis:t,createdAt:Date.now()};if(i)try{const T=xo(ts,"users",i.uid,"books",n),I=qu(T,"pages");await Lw(I,u),await Fk(T,{pageCount:qk(1)});return}catch(T){throw console.error("Failed to add page",T),T}const d=crypto.randomUUID(),p={...u,id:d},h=await gg(n);h.push(p),localStorage.setItem(`${So}_pages_${n}`,JSON.stringify(h));const _=await nh(),E=_.findIndex(T=>T.id===n);E>=0&&(_[E].pageCount=(_[E].pageCount||0)+1,localStorage.setItem(So,JSON.stringify(_)))};function WB(n){const e=atob(n),t=e.length,i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=e.charCodeAt(o);return i}async function ZB(n,e,t,i){const o=new Int16Array(n.buffer),a=o.length/i,u=e.createBuffer(i,a,t);for(let d=0;d<i;d++){const p=u.getChannelData(d);for(let h=0;h<a;h++)p[h]=o[h*i+d]/32768}return u}const jB={type:wt.OBJECT,properties:{sentences:{type:wt.ARRAY,items:{type:wt.OBJECT,properties:{original:{type:wt.STRING,description:"The EXACT verbatim sentence from the image. No omissions."},translation:{type:wt.STRING,description:"Natural German translation of the full sentence."},words:{type:wt.ARRAY,items:{type:wt.OBJECT,properties:{word:{type:wt.STRING,description:"The word, phrase, punctuation, or space."},type:{type:wt.STRING,enum:["word","punctuation"],description:"Use 'word' for lexical units/phrases, 'punctuation' for symbols/spaces."},translation:{type:wt.STRING,description:"German translation (required if type='word')."},explanation:{type:wt.STRING,description:"German Grammar/context explanation (required if type='word')."},category:{type:wt.STRING,enum:["noun","verb","adjective","function"],description:"Grammatical category."},baseForm:{type:wt.STRING,description:"Lemma/Infinitiv."}},required:["word","type"]}}},required:["original","translation","words"]}}},required:["sentences"]},LR=()=>{const t=Py()||void 0;if(!t)throw new Error("Kein API Key gefunden. Bitte geben Sie einen in den Einstellungen ein.");return new LB({apiKey:t})},e9=async n=>{const e=LR(),t=`
    Analyze the attached Spanish book page. You are an expert Spanish teacher.
    
    CRITICAL INSTRUCTIONS:
    1. COMPLETE TRANSCRIPTION: You MUST process EVERY SINGLE SENTENCE visible on the page. Do not skip any sentences.
    2. PHRASE BINDING: Combine words that belong together (reflexive verbs like "se levant", idioms like "tener que") into a SINGLE 'word' object.
    3. FULL CHARACTER COVERAGE: Reconstruct the 'original' string perfectly including spaces.
    4. Provide the result in German.
  `;try{const o=(await e.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:n}},{text:t}]},config:{responseMimeType:"application/json",responseSchema:jB,systemInstruction:"You are a professional Spanish-to-German translator. Extract all text and provide linguistic analysis for learners."}})).text;if(!o)throw new Error("No response text from Gemini.");return JSON.parse(o)}catch(i){throw console.error("Analysis failed:",i),i}},OR=async n=>{var t,i,o,a,u,d;const e=LR();try{const h=(d=(u=(a=(o=(i=(t=(await e.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:n}]}],config:{responseModalities:[Pu.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:"Puck"}}}}})).candidates)==null?void 0:t[0])==null?void 0:i.content)==null?void 0:o.parts)==null?void 0:a[0])==null?void 0:u.inlineData)==null?void 0:d.data;if(!h)throw new Error("No audio data returned");const _=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),E=_.createGain();E.connect(_.destination);const T=await ZB(WB(h),_,24e3,1),I=_.createBufferSource();I.buffer=T,I.connect(E),I.start()}catch(p){throw console.error("TTS failed:",p),p}},t9=({onChangeView:n,initialData:e,targetBookId:t,onSaveComplete:i})=>{const[o,a]=me.useState(null),[u,d]=me.useState(!1),[p,h]=me.useState(null),[_,E]=me.useState(0),[T,I]=me.useState("sentence"),[k,F]=me.useState(0),[L,Y]=me.useState(null),[ee,W]=me.useState(!1),[ae,oe]=me.useState(0),[le,D]=me.useState(new Set),[M,N]=me.useState(!1),[U,P]=me.useState(!1),O=me.useRef(null);me.useEffect(()=>{if(e)a(e.image),h(e.analysis);else{const ue=UR();ue&&!p&&!t&&(h(ue.data),a(ue.image))}},[e,t]);const x=me.useCallback(async()=>{if(!p)return;const ue=new Set;for(const Te of p.sentences)for(const Ae of Te.words)Ae.type==="word"&&await HB(Ae.word)&&ue.add(Ae.word.toLowerCase());D(ue)},[p]);me.useEffect(()=>{x()},[p,x]);const ve=async ue=>{d(!0),h(null),W(!1),E(0),I("sentence"),F(0),oe(0);try{const Te=await e9(ue);h(Te),t||zB(Te,ue)}catch(Te){console.error(Te),a(null)}finally{d(!1)}},Xe=ue=>{var Ae;const Te=(Ae=ue.target.files)==null?void 0:Ae[0];if(Te){const ct=new FileReader;ct.onloadend=()=>{const Ai=ct.result.split(",")[1];a(Ai),ve(Ai)},ct.readAsDataURL(Te)}},Q=async(ue,Te)=>{if(!L){Y(Te);try{await OR(ue)}catch(Ae){console.error(Ae)}finally{Y(null)}}},re=p==null?void 0:p.sentences[_],ye=(re==null?void 0:re.words.filter(ue=>ue.type==="word"))||[],Ue=me.useCallback(async()=>{if(!(!p||!re)){if(T==="sentence")ye.length>0?(I("words"),F(0)):I("translation");else if(T==="words")k<ye.length-1?F(ue=>ue+1):I("translation");else if(T==="translation"){const ue=ye.map(Ae=>({word:Ae.word,translation:Ae.translation||"",explanation:Ae.explanation||"",category:Ae.category,baseForm:Ae.baseForm,contextSentence:re.original})),Te=await FB(ue);oe(Ae=>Ae+Te),D(Ae=>{const ct=new Set(Ae);return ue.forEach(lt=>ct.add(lt.word.toLowerCase())),ct}),_<p.sentences.length-1?(E(Ae=>Ae+1),I("sentence"),F(0)):(W(!0),t||Im(),t&&!U&&p&&o&&$e())}}},[p,T,k,_,ye,re,t,U,o]),$e=async()=>{if(!(!t||!p||!o)){N(!0);try{await XB(t,o,p),P(!0)}catch(ue){console.error(ue),alert("Fehler beim Speichern der Seite.")}finally{N(!1)}}},q=me.useCallback(()=>{!p||!re||(_<p.sentences.length-1?(E(ue=>ue+1),I("sentence"),F(0)):(W(!0),t||Im(),t&&!U&&p&&o&&$e()))},[p,re,_,t,U,o]),ne=()=>{T==="translation"?ye.length>0?(I("words"),F(ye.length-1)):I("sentence"):T==="words"?k>0?F(ue=>ue-1):I("sentence"):T==="sentence"&&_>0&&(E(ue=>ue-1),I("translation"))},fe=()=>{t||e?i==null||i():(a(null),h(null),W(!1),Im())};if(me.useEffect(()=>{const ue=Te=>{Te.code==="Space"&&p&&!ee&&(Te.preventDefault(),Ue())};return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[p,ee,Ue]),u)return w.jsxs("div",{className:"fixed inset-0 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col items-center justify-center text-center p-6 z-50",children:[w.jsx(gr,{className:"w-12 h-12 animate-spin text-[#6B705C] dark:text-[#D4A373] mb-4"}),w.jsx("h2",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Verarbeite Seite..."}),w.jsx("p",{className:"text-sm text-[#6B705C] dark:text-[#A5A58D] font-serif italic mt-2",children:"Die KI analysiert Grammatik und Vokabeln."})]});if(!p&&!o)return w.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-6 animate-fade-in text-center px-6",children:[w.jsx("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] p-4 rounded-full mb-2",children:w.jsx(Id,{className:"w-8 h-8 text-[#FDFBF7] dark:text-[#D4A373]"})}),w.jsxs("div",{children:[w.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:t?"Neue Seite hinzufgen":"Bereit zum Lesen?"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:t?"Scanne die nchste Seite deines Buches.":"Scanne eine Seite deines spanischen Buches."})]}),w.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:O,className:"hidden",onChange:Xe}),w.jsxs("div",{className:"flex flex-col gap-3",children:[w.jsx("button",{onClick:()=>{var ue;return(ue=O.current)==null?void 0:ue.click()},className:"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 px-10 rounded-2xl shadow-xl font-bold uppercase text-[10px] tracking-widest active:scale-95 transition-transform",children:"Kamera starten"}),t&&w.jsx("button",{onClick:fe,className:"text-[#6B705C] dark:text-[#A5A58D] font-bold uppercase text-[10px] tracking-widest p-2 hover:text-[#2C2420]",children:"Abbrechen"})]})]});if(ee)return w.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-center px-6 animate-fade-in bg-[#FDFBF7] dark:bg-[#12100E]",children:[w.jsx("div",{className:"w-16 h-16 bg-[#E9EDC9] dark:bg-[#2C2420] rounded-2xl flex items-center justify-center text-[#6B705C] dark:text-[#D4A373] mb-6",children:w.jsx(Zd,{className:"w-8 h-8"})}),w.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"Seite beendet!"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic mb-8",children:ae>0?`Du hast ${ae} neue Fundstcke in deine Sammlung aufgenommen.`:"Alle Wrter dieser Seite sind bereits in deiner Sammlung."}),w.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-xs",children:[t?w.jsx("button",{onClick:i,className:"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] px-8 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest shadow-md",children:"Zurck zum Buch"}):w.jsx("button",{onClick:fe,className:"bg-[#6B705C] dark:bg-[#2C2420] text-white px-8 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest border dark:border-[#2C2420] shadow-md",children:"Nchste Seite"}),!t&&!e&&w.jsx("button",{onClick:()=>n==null?void 0:n(it.LIBRARY),className:"bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] px-8 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest shadow-md",children:"In Buch speichern"}),w.jsx("button",{onClick:()=>n==null?void 0:n(it.VOCAB),className:"text-[#6B705C] dark:text-[#A5A58D] px-8 py-2 font-bold uppercase text-[10px] tracking-widest hover:text-[#2C2420] dark:hover:text-[#FDFBF7]",children:"Zum Lernbereich"})]})]});const de=ye[k];return w.jsxs("div",{className:"fixed inset-0 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col z-50 transition-colors",children:[w.jsxs("div",{className:"px-6 pt-4 pb-2 flex justify-between items-center bg-[#FDFBF7] dark:bg-[#12100E] shrink-0 border-b border-[#EAE2D6] dark:border-[#2C2420] z-20",children:[w.jsxs("div",{className:"flex flex-col gap-1 w-full max-w-[150px]",children:[w.jsxs("span",{className:"text-[9px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-widest",children:["Satz ",_+1," / ",p==null?void 0:p.sentences.length]}),w.jsx("div",{className:"h-1 bg-[#EAE2D6] dark:bg-[#2C2420] rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-[#B26B4A] dark:bg-[#D4A373] transition-all duration-500",style:{width:`${(_+1)/((p==null?void 0:p.sentences.length)||1)*100}%`}})})]}),w.jsx("button",{onClick:fe,className:"p-2 text-[#A5A58D] dark:text-[#2C2420] hover:text-[#B26B4A] dark:hover:text-[#D4A373]",children:w.jsx(W1,{className:"w-5 h-5"})})]}),w.jsx("div",{className:"flex-grow overflow-y-auto px-6 py-6 pb-32",children:w.jsxs("div",{className:"max-w-2xl mx-auto flex flex-col justify-center min-h-[50vh]",children:[T==="sentence"&&w.jsxs("div",{className:"animate-fade-in flex flex-col items-center gap-6",children:[w.jsx("p",{className:"text-2xl sm:text-3xl font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed text-center italic",children:re==null?void 0:re.original}),w.jsx("button",{onClick:()=>Q((re==null?void 0:re.original)||"",`s-${_}`),className:"w-12 h-12 bg-[#FDFBF7] dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-full flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] shadow-sm hover:scale-105 transition-transform",children:L===`s-${_}`?w.jsx(gr,{className:"w-5 h-5 animate-spin"}):w.jsx(Id,{className:"w-5 h-5"})})]}),T==="words"&&re&&w.jsxs("div",{className:"animate-fade-in flex flex-col gap-8",children:[w.jsx("div",{className:"bg-white dark:bg-[#1C1917] p-6 rounded-3xl border border-[#EAE2D6] dark:border-[#2C2420] shadow-sm",children:w.jsx("p",{className:"text-xl font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed",children:re.words.map((ue,Te)=>{const Ae=de&&ue.word===de.word;return w.jsx("span",{className:`transition-colors duration-300 ${Ae?"bg-[#FEFAE0] dark:bg-[#B26B4A]/20 text-[#B26B4A] dark:text-[#D4A373] font-bold px-1 rounded mx-0.5":"opacity-40"}`,children:ue.word},Te)})})}),de&&w.jsxs("div",{className:"relative w-full bg-[#2C2420] dark:bg-[#1C1917] text-[#FDFBF7] p-8 rounded-[2.5rem] shadow-xl border border-transparent dark:border-[#2C2420] flex flex-col animate-fade-in",children:[w.jsx("button",{onClick:()=>Q(de.word,`w-${_}-${k}`),className:"absolute top-6 right-6 w-10 h-10 bg-[#B26B4A] dark:bg-[#D4A373] rounded-full flex items-center justify-center shadow-lg hover:scale-105 transition-transform z-10",children:L===`w-${_}-${k}`?w.jsx(gr,{className:"w-4 h-4 animate-spin text-white dark:text-[#12100E]"}):w.jsx(Id,{className:"w-4 h-4 text-white dark:text-[#12100E]"})}),w.jsxs("div",{className:"mb-6",children:[w.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[w.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-[#B26B4A] dark:text-[#D4A373]",children:de.category||"Vokabel"}),le.has(de.word.toLowerCase())&&w.jsxs("div",{className:"flex items-center gap-1.5 bg-[#E9EDC9]/20 px-2 py-1 rounded-full",children:[w.jsx(Zd,{className:"w-3 h-3 text-[#E9EDC9]"}),w.jsx("span",{className:"text-[7px] font-bold uppercase tracking-widest text-[#E9EDC9]",children:"Gespeichert"})]})]}),w.jsx("h3",{className:"text-4xl font-serif font-bold text-[#FEFAE0] dark:text-[#D4A373] mb-2",children:de.word}),w.jsx("p",{className:"text-2xl font-serif italic text-[#FDFBF7]/90",children:de.translation})]}),de.explanation&&w.jsx("div",{className:"bg-white/5 dark:bg-black/20 p-5 rounded-2xl border border-white/10 dark:border-white/5",children:w.jsx("p",{className:"text-base font-serif leading-relaxed text-[#FDFBF7]/80",children:de.explanation})}),de.baseForm&&de.baseForm!==de.word&&w.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10",children:[w.jsx("p",{className:"text-[10px] uppercase tracking-widest opacity-50 mb-1",children:"Grundform"}),w.jsx("p",{className:"font-serif italic text-lg",children:de.baseForm})]})]})]}),T==="translation"&&re&&w.jsxs("div",{className:"animate-fade-in flex flex-col gap-10 text-center pb-8",children:[w.jsxs("div",{className:"space-y-4",children:[w.jsx("span",{className:"text-[9px] font-bold text-[#6B705C] dark:text-[#A5A58D] uppercase tracking-widest block",children:"Original"}),w.jsx("p",{className:"text-2xl font-serif text-[#2C2420] dark:text-[#FDFBF7] leading-relaxed italic",children:re.original}),w.jsx("button",{onClick:()=>Q(re.original,`s-${_}-trans`),className:"mx-auto w-10 h-10 mt-2 bg-[#FDFBF7] dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-full flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] hover:bg-[#FEFAE0] dark:hover:bg-[#2C2420] transition-colors",children:L===`s-${_}-trans`?w.jsx(gr,{className:"w-4 h-4 animate-spin"}):w.jsx(Id,{className:"w-4 h-4 fill-current"})})]}),w.jsx("div",{className:"w-16 h-[1px] bg-[#EAE2D6] dark:bg-[#2C2420] mx-auto"}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("span",{className:"text-[9px] font-bold text-[#B26B4A] dark:text-[#D4A373] uppercase tracking-widest block",children:"bersetzung"}),w.jsx("p",{className:"text-xl font-serif text-[#6B705C] dark:text-[#A5A58D] leading-relaxed",children:re.translation})]})]})]})}),w.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-6 py-6 bg-[#FDFBF7] dark:bg-[#12100E] border-t border-[#EAE2D6] dark:border-[#2C2420] z-30 transition-colors",children:w.jsxs("div",{className:"flex gap-3 max-w-lg mx-auto",children:[w.jsx("button",{onClick:ne,disabled:T==="sentence"&&_===0,className:"w-14 h-14 flex items-center justify-center bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl text-[#6B705C] dark:text-[#A5A58D] disabled:opacity-20 active:scale-95 transition-all shadow-sm",children:w.jsx(H1,{className:"w-6 h-6"})}),w.jsxs("button",{onClick:Ue,className:`flex-grow h-14 rounded-2xl flex items-center justify-center gap-3 font-bold text-[10px] uppercase tracking-[0.2em] shadow-lg active:scale-95 transition-all ${T==="translation"?"bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E]":"bg-[#2C2420] dark:bg-white text-white dark:text-[#12100E]"}`,children:[T==="sentence"?"Wrter analysieren":T==="words"&&k<ye.length-1?"Nchstes Wort":T==="words"?"Zur bersetzung":"Nchster Satz",w.jsx(q1,{className:"w-4 h-4"})]}),T==="sentence"&&w.jsx("button",{onClick:q,className:"w-14 h-14 flex items-center justify-center bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl text-[#6B705C] dark:text-[#A5A58D] active:scale-95 transition-all shadow-sm",title:"Satz berspringen",children:w.jsx(bx,{className:"w-6 h-6"})})]})})]})},n9=()=>{const[n,e]=me.useState([]),[t,i]=me.useState(!0),[o,a]=me.useState("list"),[u,d]=me.useState("all"),[p,h]=me.useState([]),[_,E]=me.useState(0),[T,I]=me.useState(!1),[k,F]=me.useState(!1),L=me.useRef(null);me.useEffect(()=>{Y()},[]);const Y=async()=>{i(!0);const O=await Nr();e(O.sort((x,ve)=>ve.addedAt-x.addedAt)),i(!1)},ee=()=>u==="all"?n:n.filter(O=>(O.category||"function")===u),W=async O=>{window.confirm("Dieses Wort aus deiner Sammlung lschen?")&&(await qB(O),Y())},ae=()=>{const O=JSON.stringify(n,null,2),x="data:application/json;charset=utf-8,"+encodeURIComponent(O),ve=`spanish-vocab-${new Date().toISOString().split("T")[0]}.json`,Xe=document.createElement("a");Xe.setAttribute("href",x),Xe.setAttribute("download",ve),Xe.click()},oe=()=>{var O;(O=L.current)==null||O.click()},le=async O=>{var Xe;const x=(Xe=O.target.files)==null?void 0:Xe[0];if(!x)return;F(!0);const ve=new FileReader;ve.onload=async Q=>{var re;try{const ye=JSON.parse((re=Q.target)==null?void 0:re.result);if(Array.isArray(ye)){const Ue=await BB(ye);alert(`${Ue} neue Vokabeln importiert!`),await Y()}else alert("Ungltiges JSON-Format. Erwartet wird ein Array von Vokabeln.")}catch(ye){console.error("Import failed:",ye),alert("Import fehlgeschlagen. Bitte berprfen Sie die Datei.")}finally{F(!1),L.current&&(L.current.value="")}},ve.readAsText(x)},D=()=>{const O=ee().filter(ve=>!ve.mastered);if(O.length===0){alert("Keine offenen Vokabeln in dieser Kategorie!");return}const x=[...O].sort(()=>Math.random()-.5);h(x),E(0),I(!1),a("train")},M=async O=>{const x=p[_];O==="good"?await GB(x.id):h(ve=>[...ve,x]),I(!1),_<p.length-1?E(ve=>ve+1):(alert("Sitzung abgeschlossen! Gut gemacht."),a("list"),Y())},N=async()=>{if(o==="train"&&p[_])try{await OR(p[_].word)}catch(O){console.error(O)}},U=()=>w.jsx("div",{className:"flex overflow-x-auto gap-3 pb-3 mb-6 scrollbar-hide px-1",children:["all","noun","verb","adjective","function"].map(O=>w.jsx("button",{onClick:()=>d(O),className:`px-5 py-2.5 rounded-2xl whitespace-nowrap text-xs font-bold uppercase tracking-widest transition-all duration-300 ${u===O?"bg-[#B26B4A] dark:bg-[#D4A373] text-[#FDFBF7] dark:text-[#12100E] shadow-lg":"bg-white dark:bg-[#1C1917] text-[#6B705C] dark:text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420]"}`,children:O==="all"?"Alle":O==="noun"?"Nomen":O==="verb"?"Verben":O==="adjective"?"Adjektive":"Andere"},O))});if(t)return w.jsx("div",{className:"flex flex-col items-center justify-center h-[50vh] animate-fade-in",children:w.jsx(gr,{className:"w-10 h-10 animate-spin text-[#B26B4A] dark:text-[#D4A373]"})});if(n.length===0&&!k)return w.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] text-center p-8 animate-fade-in",children:[w.jsx("div",{className:"w-20 h-20 bg-white dark:bg-[#1C1917] rounded-full flex items-center justify-center mb-6 text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420]",children:w.jsx(tx,{className:"w-10 h-10"})}),w.jsx("h3",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Deine Sammlung ist leer"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] mt-3 font-serif italic mb-6",children:"Scanne ein Buch, um neue Vokabeln automatisch hierher zu speichern."}),w.jsx("input",{type:"file",accept:".json",ref:L,className:"hidden",onChange:le}),w.jsxs("button",{onClick:oe,className:"bg-white dark:bg-[#1C1917] text-[#6B705C] dark:text-[#A5A58D] border border-[#EAE2D6] dark:border-[#2C2420] px-6 py-3 rounded-2xl flex items-center gap-2 font-bold uppercase text-[10px] tracking-widest shadow-sm hover:bg-[#FDFBF7] transition-all",children:[w.jsx(gE,{className:"w-4 h-4"}),"JSON Importieren"]})]});if(o==="list"){const O=ee(),x=O.filter(ve=>!ve.mastered).length;return w.jsxs("div",{className:"space-y-6 pb-24 animate-fade-in",children:[w.jsxs("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] rounded-[2.5rem] p-8 text-[#FDFBF7] shadow-2xl mb-8 relative overflow-hidden border border-transparent dark:border-[#2C2420]",children:[w.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#B26B4A]/10 dark:bg-[#D4A373]/5 rounded-full -mr-16 -mt-16"}),w.jsxs("div",{className:"relative z-10",children:[w.jsxs("div",{className:"flex justify-between items-start mb-4",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-4xl font-serif font-bold",children:x}),w.jsx("p",{className:"text-[#FDFBF7]/60 text-sm font-serif italic tracking-wide",children:"offene Fundstcke"})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"file",accept:".json",ref:L,className:"hidden",onChange:le}),w.jsx("button",{onClick:oe,disabled:k,className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl text-[#FDFBF7] transition-all border border-white/10",title:"Vokabeln importieren",children:k?w.jsx(gr,{className:"w-5 h-5 animate-spin"}):w.jsx(gE,{className:"w-5 h-5"})}),w.jsx("button",{onClick:ae,className:"p-3 bg-white/10 hover:bg-white/20 rounded-2xl text-[#FDFBF7] transition-all border border-white/10",title:"Vokabeln exportieren",children:w.jsx(j1,{className:"w-5 h-5"})}),w.jsx(sx,{className:"w-8 h-8 text-[#B26B4A] dark:text-[#D4A373] ml-2"})]})]}),w.jsx("button",{onClick:D,disabled:x===0,className:"w-full bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] font-bold py-4 rounded-2xl shadow-xl hover:bg-[#9E5A3B] transition-all disabled:opacity-30 mt-4 uppercase text-xs tracking-[0.2em]",children:"Sitzung starten"})]})]}),U(),w.jsx("div",{className:"grid gap-4",children:O.length===0?w.jsx("p",{className:"text-center text-[#A5A58D] py-12 font-serif italic",children:"In dieser Kategorie hast du noch keine Wrter gesammelt."}):O.map(ve=>w.jsxs("div",{className:"bg-white dark:bg-[#1C1917] p-5 rounded-3xl border border-[#EAE2D6] dark:border-[#2C2420] shadow-sm flex justify-between items-center group transition-all hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30",children:[w.jsxs("div",{className:"flex-grow",children:[w.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[w.jsx("p",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] text-xl",children:ve.word}),ve.mastered&&w.jsx(Zd,{className:"w-4 h-4 text-[#6B705C] dark:text-[#D4A373]"}),ve.category&&w.jsx("span",{className:"text-[7px] font-bold uppercase tracking-widest text-[#B26B4A] dark:text-[#D4A373] bg-[#B26B4A]/10 px-1.5 py-0.5 rounded",children:ve.category})]}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] text-sm italic font-serif",children:ve.translation})]}),w.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:w.jsx("button",{onClick:()=>W(ve.id),className:"p-3 text-[#A5A58D] hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-2xl transition-all",children:w.jsx(_g,{className:"w-5 h-5"})})})]},ve.id))})]})}const P=p[_];return w.jsxs("div",{className:"h-full flex flex-col items-center max-w-md mx-auto animate-fade-in",children:[w.jsxs("div",{className:"w-full flex justify-between items-center mb-8",children:[w.jsx("button",{onClick:()=>a("list"),className:"text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7] text-xs font-bold uppercase tracking-widest bg-white dark:bg-[#1C1917] px-4 py-2 rounded-xl border border-[#EAE2D6] dark:border-[#2C2420]",children:"Abbrechen"}),w.jsxs("span",{className:"text-[#A5A58D] text-xs font-bold tracking-[0.3em]",children:[_+1," / ",p.length]})]}),w.jsx("div",{className:"w-full aspect-[4/5] perspective-1000 cursor-pointer mb-10",onClick:()=>!T&&I(!0),children:w.jsxs("div",{className:"relative w-full h-full bg-white dark:bg-[#1C1917] rounded-[3rem] shadow-2xl border border-[#EAE2D6] dark:border-[#2C2420] overflow-hidden flex flex-col transition-all duration-500",children:[w.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center p-10 text-center ${T?"border-b border-[#FDFBF7] dark:border-[#12100E]":""}`,children:[w.jsx("span",{className:"text-[10px] font-bold text-[#B26B4A] dark:text-[#D4A373] uppercase tracking-[0.3em] mb-6",children:P.category||"Wort"}),w.jsx("h2",{className:"text-5xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-8",children:P.word}),!T&&w.jsxs("div",{className:"flex flex-col items-center gap-4",children:[w.jsx("p",{className:"text-[#A5A58D] text-sm font-serif italic animate-pulse",children:"Karte aufdecken"}),w.jsx("button",{onClick:O=>{O.stopPropagation(),N()},className:"p-4 bg-[#FEFAE0] dark:bg-[#2C2420] text-[#B26B4A] dark:text-[#D4A373] rounded-2xl hover:bg-[#FAEDCD] dark:hover:bg-black/20",children:w.jsx(mE,{className:"w-6 h-6 fill-current"})})]})]}),T&&w.jsxs("div",{className:"flex-1 bg-[#FDFBF7] dark:bg-[#12100E] flex flex-col items-center justify-center p-10 text-center animate-in fade-in slide-in-from-bottom-6 duration-500 overflow-y-auto",children:[w.jsx("h2",{className:"text-3xl font-serif font-bold text-[#B26B4A] dark:text-[#D4A373] mb-3",children:P.translation}),P.baseForm&&P.baseForm.toLowerCase()!==P.word.toLowerCase()&&w.jsxs("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] mb-4 font-bold uppercase tracking-widest opacity-60",children:["Grundform: ",P.baseForm]}),w.jsxs("p",{className:"text-[#6B705C] dark:text-[#A5A58D] italic font-serif text-lg leading-relaxed mb-6",children:['"',P.explanation,'"']}),P.contextSentence&&w.jsxs("div",{className:"mb-6 p-4 bg-white/50 dark:bg-white/5 rounded-2xl border border-[#EAE2D6] dark:border-white/10 relative",children:[w.jsx(Ex,{className:"w-3 h-3 text-[#B26B4A] dark:text-[#D4A373] absolute top-2 left-2 opacity-30"}),w.jsx("p",{className:"text-[11px] font-serif italic text-[#6B705C] dark:text-[#A5A58D] px-2",children:P.contextSentence})]}),w.jsx("button",{onClick:O=>{O.stopPropagation(),N()},className:"p-3 bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#6B705C] dark:text-[#A5A58D] rounded-xl hover:bg-[#E9EDC9] dark:hover:bg-[#2C2420]",children:w.jsx(mE,{className:"w-5 h-5 fill-current"})})]})]})}),T?w.jsxs("div",{className:"grid grid-cols-2 gap-6 w-full px-4",children:[w.jsxs("button",{onClick:()=>M("again"),className:"flex flex-col items-center justify-center p-5 bg-white dark:bg-[#1C1917] border border-[#EAE2D6] dark:border-[#2C2420] text-[#B26B4A] dark:text-[#D4A373] rounded-3xl hover:bg-[#FEFAE0] dark:hover:bg-[#2C2420] active:scale-95 transition-all shadow-sm",children:[w.jsx(Ax,{className:"w-6 h-6 mb-2"}),w.jsx("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Nochmal"})]}),w.jsxs("button",{onClick:()=>M("good"),className:"flex flex-col items-center justify-center p-5 bg-[#6B705C] dark:bg-[#D4A373] text-white dark:text-[#12100E] rounded-3xl hover:bg-[#585E4A] dark:hover:bg-[#B26B4A] active:scale-95 transition-all shadow-xl",children:[w.jsx(Zd,{className:"w-6 h-6 mb-2"}),w.jsx("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Gelernt"})]})]}):w.jsx("div",{className:"w-full px-4",children:w.jsx("button",{onClick:()=>I(!0),className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-[#FDFBF7] dark:text-[#12100E] font-bold py-5 rounded-3xl shadow-2xl hover:bg-[#3D332D] dark:hover:bg-[#B26B4A] active:scale-95 transition-all uppercase text-xs tracking-[0.3em]",children:"Antwort zeigen"})})]})},i9=()=>{const[n,e]=me.useState(""),[t,i]=me.useState(!1),[o,a]=me.useState(!1);me.useEffect(()=>{const p=Py();p&&(i(!0),e(p))},[]);const u=()=>{n.trim()&&(VR(n.trim()),i(!0),a(!0),setTimeout(()=>a(!1),3e3))},d=()=>{OB(),e(""),i(!1)};return w.jsxs("div",{className:"max-w-2xl mx-auto py-8 animate-fade-in",children:[w.jsxs("div",{className:"mb-10",children:[w.jsx("h2",{className:"text-3xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"Einstellungen"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Verwalte deinen Zugang zur KI und deine lokalen Daten."})]}),w.jsxs("div",{className:"space-y-6",children:[w.jsxs("section",{className:"bg-white dark:bg-[#1C1917] rounded-[2.5rem] border border-[#EAE2D6] dark:border-[#2C2420] p-8 shadow-sm",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[w.jsx("div",{className:"w-12 h-12 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] shadow-sm",children:w.jsx(jd,{className:"w-6 h-6"})}),w.jsxs("div",{children:[w.jsx("h3",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] text-xl",children:"API Konfiguration"}),w.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Dein persnlicher Schlssel fr Google Gemini."})]})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:"password",value:n,onChange:p=>e(p.target.value),placeholder:"Geben Sie Ihren API Key ein...",className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-4 pr-12 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm font-mono"}),w.jsx(jd,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D] opacity-40"})]}),w.jsxs("div",{className:"flex flex-wrap gap-3",children:[w.jsxs("button",{onClick:u,disabled:!n.trim(),className:"flex-1 bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-lg active:scale-95 transition-all flex items-center justify-center gap-2 disabled:opacity-30",children:[o?w.jsx(hE,{className:"w-4 h-4"}):w.jsx(Cx,{className:"w-4 h-4"}),o?"Gespeichert":"Key Speichern"]}),t&&w.jsxs("button",{onClick:d,className:"bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 border border-red-100 dark:border-red-900/30 px-6 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] active:scale-95 transition-all flex items-center justify-center gap-2",children:[w.jsx(_g,{className:"w-4 h-4"}),"Lschen"]})]}),w.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-2xl border transition-colors ${t?"bg-[#E9EDC9]/30 border-[#CCD5AE]/30":"bg-[#FEFAE0]/50 border-[#FAEDCD]"}`,children:[t?w.jsx(hE,{className:"w-5 h-5 text-[#6B705C] shrink-0 mt-0.5"}):w.jsx(K1,{className:"w-5 h-5 text-[#B26B4A] shrink-0 mt-0.5"}),w.jsxs("div",{children:[w.jsxs("p",{className:"text-xs font-bold uppercase tracking-widest text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:["Status: ",t?"Persnlicher Key aktiv":"Kein Key konfiguriert"]}),w.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:t?"Dieser Key wird ausschlielich in deiner aktuellen Browser-Session verwendet und nicht permanent gespeichert.":"Bitte hinterlege einen Key, um die bersetzungs- und Audio-Funktionen nutzen zu knnen."})]})]})]})]}),w.jsxs("section",{className:"bg-[#FEFAE0]/30 dark:bg-[#1C1917]/50 rounded-[2.5rem] border border-[#FAEDCD] dark:border-[#2C2420] p-8",children:[w.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[w.jsx("div",{className:"w-10 h-10 bg-white dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#6B705C] dark:text-[#A5A58D] shadow-sm",children:w.jsx(BS,{className:"w-5 h-5"})}),w.jsx("h3",{className:"font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Sicherheit & Lokalitt"})]}),w.jsxs("p",{className:"text-sm text-[#6B705C] dark:text-[#A5A58D] font-serif italic leading-relaxed",children:["Dein Lernfortschritt wird bei Gsten ausschlielich in deinem Browser (Local Storage) gespeichert. API Keys werden aus Sicherheitsgrnden nur im ",w.jsx("strong",{children:"Session Storage"})," gehalten  sie verschwinden, sobald du den Tab schliet."]})]})]})]})},s9=({onGuestLogin:n})=>{const[e,t]=me.useState(!0),[i,o]=me.useState(""),[a,u]=me.useState(""),[d,p]=me.useState(""),[h,_]=me.useState(!1),[E,T]=me.useState(null),I=async k=>{k.preventDefault(),_(!0),T(null);try{if(e)await BP(go,i,a);else{const F=await FP(go,i,a);await GP(F.user,{displayName:d})}}catch(F){console.error("Auth error:",F),T(F.message||"Authentifizierung fehlgeschlagen.")}finally{_(!1)}};return w.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#FDFBF7] dark:bg-[#12100E]",children:w.jsxs("div",{className:"w-full max-w-md animate-fade-in",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-[#2C2420] dark:bg-[#D4A373] rounded-2xl text-[#FDFBF7] dark:text-[#12100E] shadow-xl mb-6",children:w.jsx(US,{className:"w-8 h-8"})}),w.jsx("h1",{className:"text-3xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2 tracking-tight",children:"Spanish Reading Assistant"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Melde dich an, um deine Lesereise zu beginnen."})]}),w.jsxs("div",{className:"bg-white dark:bg-[#1C1917] p-8 rounded-[2.5rem] border border-[#EAE2D6] dark:border-[#2C2420] shadow-2xl",children:[w.jsxs("div",{className:"flex bg-[#FDFBF7] dark:bg-[#12100E] p-1 rounded-2xl border border-[#EAE2D6] dark:border-[#2C2420] mb-8",children:[w.jsx("button",{onClick:()=>t(!0),className:`flex-1 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all ${e?"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm":"text-[#6B705C] dark:text-[#A5A58D]"}`,children:"Anmelden"}),w.jsx("button",{onClick:()=>t(!1),className:`flex-1 py-2.5 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all ${e?"text-[#6B705C] dark:text-[#A5A58D]":"bg-white dark:bg-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] shadow-sm"}`,children:"Registrieren"})]}),w.jsxs("form",{onSubmit:I,className:"space-y-5",children:[!e&&w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Name"}),w.jsxs("div",{className:"relative",children:[w.jsx(GS,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),w.jsx("input",{type:"text",required:!0,value:d,onChange:k=>p(k.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:"Dein Name"})]})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Email"}),w.jsxs("div",{className:"relative",children:[w.jsx(px,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),w.jsx("input",{type:"email",required:!0,value:i,onChange:k=>o(k.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:"name@beispiel.de"})]})]}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-1",children:"Passwort"}),w.jsxs("div",{className:"relative",children:[w.jsx(lx,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),w.jsx("input",{type:"password",required:!0,value:a,onChange:k=>u(k.target.value),className:"w-full bg-[#FDFBF7] dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm",placeholder:""})]})]}),E&&w.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/30 rounded-2xl text-red-600 dark:text-red-400 text-xs font-serif italic",children:E}),w.jsx("button",{type:"submit",disabled:h,className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-50",children:h?w.jsx(gr,{className:"w-4 h-4 animate-spin"}):e?w.jsxs(w.Fragment,{children:[w.jsx(cx,{className:"w-4 h-4"}),"Anmelden"]}):w.jsxs(w.Fragment,{children:[w.jsx(Vx,{className:"w-4 h-4"}),"Konto erstellen"]})})]}),w.jsxs("div",{className:"relative my-8",children:[w.jsx("div",{className:"absolute inset-0 flex items-center",children:w.jsx("div",{className:"w-full border-t border-[#EAE2D6] dark:border-[#2C2420]"})}),w.jsx("div",{className:"relative flex justify-center text-[8px] font-bold uppercase tracking-[0.3em]",children:w.jsx("span",{className:"bg-white dark:bg-[#1C1917] px-4 text-[#A5A58D]",children:"Oder"})})]}),w.jsxs("button",{onClick:n,disabled:h,className:"w-full bg-white dark:bg-transparent border border-[#EAE2D6] dark:border-[#2C2420] text-[#2C2420] dark:text-[#FDFBF7] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-sm active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-50 hover:bg-[#FDFBF7] dark:hover:bg-[#2C2420]/30",children:[w.jsx(Q1,{className:"w-4 h-4"}),"Als Gast fortfahren"]}),w.jsxs("div",{className:"mt-8 pt-8 border-t border-[#EAE2D6] dark:border-[#2C2420] flex items-center justify-center gap-2 text-[#6B705C] dark:text-[#A5A58D]",children:[w.jsx(qS,{className:"w-4 h-4 opacity-50"}),w.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50",children:"App by Spanish Learners"})]})]})]})})},r9=({onChangeView:n,onOpenPage:e,onAddPage:t})=>{const[i,o]=me.useState([]),[a,u]=me.useState(!0),[d,p]=me.useState(!1),[h,_]=me.useState(""),[E,T]=me.useState(""),[I,k]=me.useState(null),[F,L]=me.useState([]);me.useEffect(()=>{Y()},[]),me.useEffect(()=>{I&&ee(I.id)},[I]);const Y=async()=>{u(!0);const oe=await nh();o(oe),u(!1)},ee=async oe=>{const le=await gg(oe);L(le)},W=async oe=>{oe.preventDefault(),h.trim()&&(await JB(h,E),p(!1),_(""),T(""),Y())},ae=async(oe,le)=>{oe.stopPropagation(),window.confirm("Buch wirklich lschen? Alle gespeicherten Seiten gehen verloren.")&&(await QB(le),(I==null?void 0:I.id)===le&&k(null),Y())};return I?w.jsxs("div",{className:"animate-fade-in pb-24",children:[w.jsxs("button",{onClick:()=>k(null),className:"flex items-center gap-2 text-[#6B705C] dark:text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7] mb-6 font-bold uppercase text-[10px] tracking-widest transition-colors",children:[w.jsx(P1,{className:"w-4 h-4"}),"Zurck zur Bibliothek"]}),w.jsx("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] p-8 rounded-[2.5rem] shadow-xl text-[#FDFBF7] mb-8 border border-transparent dark:border-[#2C2420] relative overflow-hidden",children:w.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em] opacity-60 block mb-2",children:"Buch"}),w.jsx("h2",{className:"text-4xl font-serif font-bold mb-1",children:I.title}),w.jsx("p",{className:"font-serif italic text-lg opacity-80",children:I.author||"Unbekannter Autor"}),w.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[w.jsxs("span",{className:"bg-white/10 px-3 py-1 rounded-lg text-xs font-mono",children:[F.length," Seiten"]}),w.jsxs("span",{className:"text-xs opacity-50 font-serif italic",children:["Erstellt am ",new Date(I.createdAt).toLocaleDateString()]})]})]}),w.jsx(Rm,{className:"w-24 h-24 text-white/5 absolute -right-4 -bottom-4 rotate-12"})]})}),w.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[w.jsx("h3",{className:"font-serif font-bold text-xl text-[#2C2420] dark:text-[#FDFBF7]",children:"Seiten"}),w.jsxs("button",{onClick:()=>t(I.id),className:"flex items-center gap-2 bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] px-5 py-2.5 rounded-xl font-bold uppercase text-[10px] tracking-widest shadow-md hover:scale-105 transition-transform",children:[w.jsx(am,{className:"w-4 h-4"}),"Seite scannen"]})]}),F.length===0?w.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-[#EAE2D6] dark:border-[#2C2420] rounded-3xl bg-white/50 dark:bg-[#1C1917]/50",children:[w.jsx(US,{className:"w-12 h-12 mx-auto text-[#A5A58D] mb-3"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Dieses Buch hat noch keine Seiten."})]}):w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:F.map((oe,le)=>{var D;return w.jsxs("div",{onClick:()=>e(oe),className:"group bg-white dark:bg-[#1C1917] rounded-2xl overflow-hidden border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer hover:shadow-lg transition-all hover:border-[#B26B4A]/50 relative aspect-[3/4]",children:[w.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-90 group-hover:opacity-100 transition-opacity",style:{backgroundImage:`url(data:image/jpeg;base64,${oe.image})`}}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-60 group-hover:opacity-80"}),w.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[w.jsxs("span",{className:"text-white text-xs font-bold uppercase tracking-widest block mb-1",children:["Seite ",oe.pageNumber]}),w.jsxs("p",{className:"text-white/80 text-[10px] line-clamp-2 font-serif italic",children:[(D=oe.analysis.sentences[0])==null?void 0:D.original.substring(0,50),"..."]})]})]},oe.id)})})]}):w.jsxs("div",{className:"animate-fade-in pb-24",children:[w.jsxs("div",{className:"flex justify-between items-end mb-8",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-3xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Bibliothek"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] font-serif italic mt-1",children:"Deine Sammlung spanischer Lektre."})]}),w.jsx("button",{onClick:()=>p(!0),className:"bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] p-4 rounded-2xl shadow-lg hover:scale-105 transition-transform",children:w.jsx(am,{className:"w-6 h-6"})})]}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.map(oe=>w.jsxs("div",{onClick:()=>k(oe),className:`relative aspect-[3/4] rounded-r-[1.5rem] rounded-l-md shadow-xl cursor-pointer hover:-translate-y-2 transition-transform duration-300 group overflow-hidden ${oe.coverStyle||"bg-[#2C2420]"}`,children:[w.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-4 bg-black/20 z-20 border-r border-white/10"}),w.jsxs("div",{className:"absolute inset-0 p-6 flex flex-col justify-between text-[#FDFBF7] z-10 bg-gradient-to-br from-white/10 to-black/20",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"font-serif font-bold text-2xl leading-tight mb-2 line-clamp-3 drop-shadow-md",children:oe.title}),w.jsx("p",{className:"font-serif italic text-sm opacity-80",children:oe.author})]}),w.jsxs("div",{className:"flex justify-between items-end",children:[w.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest bg-black/30 px-2 py-1 rounded backdrop-blur-sm",children:[oe.pageCount," Seiten"]}),w.jsx("button",{onClick:le=>ae(le,oe.id),className:"p-2 bg-black/30 rounded-full hover:bg-red-500/80 transition-colors opacity-0 group-hover:opacity-100",children:w.jsx(_g,{className:"w-4 h-4"})})]})]})]},oe.id)),i.length===0&&!a&&w.jsxs("div",{onClick:()=>p(!0),className:"aspect-[3/4] rounded-[1.5rem] border-2 border-dashed border-[#EAE2D6] dark:border-[#2C2420] flex flex-col items-center justify-center text-[#A5A58D] cursor-pointer hover:bg-[#EAE2D6]/20 dark:hover:bg-[#2C2420]/20 transition-colors",children:[w.jsx(am,{className:"w-12 h-12 mb-4 opacity-50"}),w.jsx("span",{className:"font-bold text-xs uppercase tracking-widest",children:"Erstes Buch erstellen"})]})]}),d&&w.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-[#12100E]/80 backdrop-blur-sm animate-fade-in",children:w.jsxs("div",{className:"bg-[#FDFBF7] dark:bg-[#1C1917] w-full max-w-md p-8 rounded-[2.5rem] shadow-2xl",children:[w.jsx("h3",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-6",children:"Neues Buch"}),w.jsxs("form",{onSubmit:W,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-2 mb-1 block",children:"Titel"}),w.jsx("input",{autoFocus:!0,className:"w-full bg-white dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 px-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20",placeholder:"z.B. Harry Potter y la piedra filosofal",value:h,onChange:oe=>_(oe.target.value)})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-[#6B705C] dark:text-[#A5A58D] ml-2 mb-1 block",children:"Autor (Optional)"}),w.jsx("input",{className:"w-full bg-white dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 px-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20",placeholder:"z.B. J.K. Rowling",value:E,onChange:oe=>T(oe.target.value)})]}),w.jsxs("div",{className:"flex gap-3 pt-4",children:[w.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest border border-[#EAE2D6] dark:border-[#2C2420] hover:bg-[#EAE2D6]/20",children:"Abbrechen"}),w.jsx("button",{type:"submit",disabled:!h.trim(),className:"flex-1 bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-widest shadow-lg disabled:opacity-50",children:"Erstellen"})]})]})]})})]})},o9=({onClose:n})=>{const[e,t]=me.useState(""),i=()=>{e.trim()&&(VR(e.trim()),n())};return w.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-[#12100E]/80 backdrop-blur-sm animate-fade-in",children:w.jsxs("div",{className:"w-full max-w-md bg-[#FDFBF7] dark:bg-[#1C1917] rounded-[2.5rem] shadow-2xl border border-[#EAE2D6] dark:border-[#2C2420] p-8 relative",children:[w.jsx("button",{onClick:n,className:"absolute top-6 right-6 p-2 text-[#A5A58D] hover:text-[#2C2420] dark:hover:text-[#FDFBF7] transition-colors",children:w.jsx(Fx,{className:"w-5 h-5"})}),w.jsxs("div",{className:"mb-6",children:[w.jsx("div",{className:"w-14 h-14 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-2xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] mb-4",children:w.jsx(jd,{className:"w-7 h-7"})}),w.jsx("h2",{className:"text-2xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-2",children:"API Key bentigt"}),w.jsx("p",{className:"text-[#6B705C] dark:text-[#A5A58D] text-sm font-serif italic",children:"Um die KI-Funktionen nutzen zu knnen, geben Sie bitte Ihren Gemini API Key ein. Dieser wird nur fr diese Sitzung gespeichert."})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx(jd,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#A5A58D]"}),w.jsx("input",{type:"password",value:e,onChange:o=>t(o.target.value),placeholder:"Geben Sie Ihren Key ein...",className:"w-full bg-white dark:bg-[#12100E] border border-[#EAE2D6] dark:border-[#2C2420] rounded-2xl py-4 pl-12 pr-4 outline-none focus:ring-2 focus:ring-[#B26B4A]/20 transition-all text-sm font-mono"})]}),w.jsxs("div",{className:"flex items-center gap-2 p-3 bg-[#E9EDC9]/30 dark:bg-[#2C2420]/30 rounded-xl border border-[#CCD5AE]/30 dark:border-[#2C2420]/50",children:[w.jsx(BS,{className:"w-4 h-4 text-[#6B705C] dark:text-[#A5A58D]"}),w.jsx("p",{className:"text-[10px] text-[#6B705C] dark:text-[#A5A58D] font-serif",children:"Sicher: Der Key wird beim Schlieen des Tabs gelscht."})]}),w.jsxs("button",{onClick:i,disabled:!e.trim(),className:"w-full bg-[#2C2420] dark:bg-[#D4A373] text-white dark:text-[#12100E] py-4 rounded-2xl font-bold uppercase text-[10px] tracking-[0.2em] shadow-xl active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-30",children:["Sitzung starten",w.jsx(Fd,{className:"w-4 h-4"})]}),w.jsx("button",{onClick:n,className:"w-full text-[#A5A58D] text-[10px] font-bold uppercase tracking-widest mt-2 hover:text-[#6B705C] transition-colors",children:"Spter eingeben"})]})]})})};function a9(){const[n,e]=me.useState(it.HOME),[t,i]=me.useState(null),[o,a]=me.useState(0),[u,d]=me.useState($B()),[p,h]=me.useState(null),[_,E]=me.useState(localStorage.getItem("spanish_assistant_is_guest")==="true"),[T,I]=me.useState(!0),[k,F]=me.useState(!1),[L,Y]=me.useState(null),[ee,W]=me.useState(null);me.useEffect(()=>{const x=uI(go,ve=>{h(ve),ve&&(E(!1),localStorage.removeItem("spanish_assistant_is_guest"),ae()),I(!1)});return()=>x()},[]),me.useEffect(()=>{i(UR()),Nr().then(x=>a(x.length))},[n,p,_]),me.useEffect(()=>{u==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),YB(u)},[u]);const ae=()=>{Py()||F(!0)},oe=()=>d(x=>x==="light"?"dark":"light"),le=()=>{E(!0),localStorage.setItem("spanish_assistant_is_guest","true"),ae()},D=()=>{E(!1),localStorage.removeItem("spanish_assistant_is_guest")},M=x=>{W(x),Y(x.bookId),e(it.ANALYZE)},N=x=>{Y(x),W(null),e(it.ANALYZE)},U=()=>{e(L?it.LIBRARY:it.HOME),W(null)},P=x=>{x!==it.ANALYZE&&(Y(null),W(null)),e(x)};if(T)return w.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#FDFBF7] dark:bg-[#12100E]",children:[w.jsx(gr,{className:"w-12 h-12 animate-spin text-[#B26B4A] dark:text-[#D4A373] mb-4"}),w.jsx("p",{className:"font-serif italic text-[#6B705C] dark:text-[#A5A58D]",children:"Wird geladen..."})]});if(!p&&!_)return w.jsx(s9,{onGuestLogin:le});const O=()=>{switch(n){case it.ANALYZE:return w.jsx(t9,{onChangeView:P,initialData:ee?{image:ee.image,analysis:ee.analysis}:null,targetBookId:L,onSaveComplete:U});case it.VOCAB:return w.jsx(n9,{});case it.LIBRARY:return w.jsx(r9,{onChangeView:P,onOpenPage:M,onAddPage:N});case it.SETTINGS:return w.jsx(i9,{});case it.HOME:default:return w.jsxs("div",{className:"flex flex-col gap-6 py-4 animate-fade-in",children:[w.jsxs("div",{className:"bg-[#2C2420] dark:bg-[#1C1917] rounded-[2.5rem] p-8 text-[#FDFBF7] shadow-xl relative overflow-hidden border border-transparent dark:border-[#2C2420]",children:[w.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#B26B4A]/20 dark:bg-[#D4A373]/10 rounded-full -mr-12 -mt-12 blur-2xl"}),w.jsxs("div",{className:"relative z-10",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx(qS,{className:"text-[#FEFAE0] dark:text-[#D4A373] w-5 h-5"}),w.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest text-[#FEFAE0]/80 dark:text-[#D4A373]/80",children:_?"Bienvenido, Invitado":`Bienvenido, ${(p==null?void 0:p.displayName)||"Amigo"}`})]}),w.jsx("h2",{className:"text-4xl font-serif font-bold mb-4 tracking-tight",children:"Hola amigo."}),w.jsx("p",{className:"text-[#FDFBF7]/70 text-md font-serif italic leading-relaxed mb-6 max-w-sm",children:_?"Deine Bcher werden lokal gespeichert. Melde dich an, um sie berall zu nutzen.":"Organisiere deine Lektre in der neuen Bibliothek."}),w.jsxs("div",{className:"flex flex-wrap gap-3",children:[w.jsxs("button",{onClick:()=>{Y(null),W(null),e(it.ANALYZE)},className:"bg-[#B26B4A] dark:bg-[#D4A373] text-white dark:text-[#12100E] font-bold py-3.5 px-6 rounded-xl shadow-lg hover:bg-[#9E5A3B] transition-all inline-flex items-center gap-3 uppercase text-[10px] tracking-widest",children:[w.jsx(OS,{className:"w-4 h-4"}),"Schnellscan"]}),w.jsxs("button",{onClick:()=>e(it.LIBRARY),className:"bg-white/10 text-white border border-white/20 font-bold py-3.5 px-6 rounded-xl shadow-lg hover:bg-white/20 transition-all inline-flex items-center gap-3 uppercase text-[10px] tracking-widest",children:[w.jsx(pE,{className:"w-4 h-4"}),"Bibliothek ffnen"]})]})]})]}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[w.jsxs("div",{onClick:()=>e(it.LIBRARY),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] shadow-sm border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30 hover:shadow-md transition-all group",children:[w.jsx("div",{className:"w-12 h-12 bg-[#FEFAE0] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#B26B4A] dark:text-[#D4A373] mb-4 group-hover:scale-105 transition-transform",children:w.jsx(pE,{className:"w-6 h-6"})}),w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:"Bibliothek"}),w.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:"Erstelle Bcher und speichere Seiten dauerhaft."})]}),w.jsx(Fd,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420] group-hover:text-[#B26B4A] dark:group-hover:text-[#D4A373] transition-colors"})]})]}),w.jsxs("div",{onClick:()=>e(it.VOCAB),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] shadow-sm border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer hover:border-[#B26B4A]/30 dark:hover:border-[#D4A373]/30 hover:shadow-md transition-all group",children:[w.jsx("div",{className:"w-12 h-12 bg-[#E9EDC9] dark:bg-[#2C2420] rounded-xl flex items-center justify-center text-[#6B705C] dark:text-[#A5A58D] mb-4 group-hover:scale-105 transition-transform",children:w.jsx(LS,{className:"w-6 h-6"})}),w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-xl font-serif font-bold text-[#2C2420] dark:text-[#FDFBF7] mb-1",children:"Wortschatz"}),w.jsxs("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] font-serif italic",children:[o," Fundstcke in deiner Sammlung."]})]}),w.jsx(Fd,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420] group-hover:text-[#6B705C] dark:group-hover:text-[#D4A373] transition-colors"})]})]})]}),w.jsxs("div",{onClick:()=>e(it.SETTINGS),className:"bg-white dark:bg-[#1C1917] p-6 rounded-[2rem] border border-[#EAE2D6] dark:border-[#2C2420] cursor-pointer flex items-center justify-between hover:bg-[#FDFBF7] dark:hover:bg-[#12100E] transition-colors",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"bg-[#2C2420]/5 dark:bg-white/5 p-3 rounded-xl",children:w.jsx(FS,{className:"w-5 h-5 text-[#6B705C] dark:text-[#A5A58D]"})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-bold text-[#2C2420] dark:text-[#FDFBF7]",children:"Einstellungen"}),w.jsx("p",{className:"text-xs text-[#6B705C] dark:text-[#A5A58D] italic",children:"Verwalte deinen Zugang und lerne mehr."})]})]}),w.jsx(Fd,{className:"w-4 h-4 text-[#EAE2D6] dark:text-[#2C2420]"})]})]})}};return w.jsxs(IU,{currentView:n,onChangeView:P,theme:u,onToggleTheme:oe,isGuest:_,onLogoutGuest:D,children:[O(),k&&w.jsx(o9,{onClose:()=>F(!1)})]})}const FR=document.getElementById("root");if(!FR)throw new Error("Could not find root element to mount to");const l9=R1.createRoot(FR);l9.render(w.jsx(v1.StrictMode,{children:w.jsx(a9,{})}));
